!function(e){function t(t){for(var r,i,o=t[0],s=t[1],a=0,u=[];a<o.length;a++)i=o[a],Object.prototype.hasOwnProperty.call(n,i)&&n[i]&&u.push(n[i][0]),n[i]=0;for(r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r]);for(c&&c(t);u.length;)u.shift()()}var r={},n={0:0,1:0};function i(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.e=function(e){var t=[],r=n[e];if(0!==r)if(r)t.push(r[2]);else{var o=new Promise((function(t,i){r=n[e]=[t,i]}));t.push(r[2]=o);var s,a=document.createElement("script");a.charset="utf-8",a.timeout=120,i.nc&&a.setAttribute("nonce",i.nc),a.src=function(e){return i.p+""+({3:"collect-autotrack-rangers"}[e]||e)+".js"}(e);var c=new Error;s=function(t){a.onerror=a.onload=null,clearTimeout(u);var r=n[e];if(0!==r){if(r){var i=t&&("load"===t.type?"missing":t.type),o=t&&t.target&&t.target.src;c.message="Loading chunk "+e+" failed.\n("+i+": "+o+")",c.name="ChunkLoadError",c.type=i,c.request=o,r[1](c)}n[e]=void 0}};var u=setTimeout((function(){s({type:"timeout",target:a})}),12e4);a.onerror=a.onload=s,document.head.appendChild(a)}return Promise.all(t)},i.m=e,i.c=r,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(r,n,function(t){return e[t]}.bind(null,n));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i.oe=function(e){throw e};var o=window.webpackJsonp=window.webpackJsonp||[],s=o.push.bind(o);o.push=t,o=o.slice();for(var a=0;a<o.length;a++)t(o[a]);var c=s;i(i.s=275)}([,,,function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));class n{static throwIfNullOrUndefined(e,t){if(null==e)throw new Error("throwIfNullOrUndefined:"+t)}static throwIfNull(e,t){if(null===e)throw new Error("throwIfNull:"+t)}static throwIfNullOrWhitespace(e,t){if(n.throwIfNullOrUndefined(e,t),(""+e).trim().length<1)throw new Error("throwIfNullOrWhitespace:"+t)}static throwIfDisposed(e){if(e)throw new Error("the object is already disposed")}static throwIfArrayEmptyOrWhitespace(e,t){if(n.throwIfNullOrUndefined(e,t),0===e.length)throw new Error("throwIfArrayEmptyOrWhitespace:"+t);for(const r of e)n.throwIfNullOrWhitespace(r,t)}static throwIfFileDoesNotExist(e,t){n.throwIfNullOrWhitespace(e,t)}static throwIfNotUndefined(e,t){if(void 0!==e)throw new Error("throwIfNotUndefined:"+t)}}},,function(e,t,r){"use strict";var n;r.d(t,"a",(function(){return n})),function(e){e[e.SpeechServiceConnection_Key=0]="SpeechServiceConnection_Key",e[e.SpeechServiceConnection_Endpoint=1]="SpeechServiceConnection_Endpoint",e[e.SpeechServiceConnection_Region=2]="SpeechServiceConnection_Region",e[e.SpeechServiceAuthorization_Token=3]="SpeechServiceAuthorization_Token",e[e.SpeechServiceAuthorization_Type=4]="SpeechServiceAuthorization_Type",e[e.SpeechServiceConnection_EndpointId=5]="SpeechServiceConnection_EndpointId",e[e.SpeechServiceConnection_TranslationToLanguages=6]="SpeechServiceConnection_TranslationToLanguages",e[e.SpeechServiceConnection_TranslationVoice=7]="SpeechServiceConnection_TranslationVoice",e[e.SpeechServiceConnection_TranslationFeatures=8]="SpeechServiceConnection_TranslationFeatures",e[e.SpeechServiceConnection_IntentRegion=9]="SpeechServiceConnection_IntentRegion",e[e.SpeechServiceConnection_ProxyHostName=10]="SpeechServiceConnection_ProxyHostName",e[e.SpeechServiceConnection_ProxyPort=11]="SpeechServiceConnection_ProxyPort",e[e.SpeechServiceConnection_ProxyUserName=12]="SpeechServiceConnection_ProxyUserName",e[e.SpeechServiceConnection_ProxyPassword=13]="SpeechServiceConnection_ProxyPassword",e[e.SpeechServiceConnection_RecoMode=14]="SpeechServiceConnection_RecoMode",e[e.SpeechServiceConnection_RecoLanguage=15]="SpeechServiceConnection_RecoLanguage",e[e.Speech_SessionId=16]="Speech_SessionId",e[e.SpeechServiceConnection_SynthLanguage=17]="SpeechServiceConnection_SynthLanguage",e[e.SpeechServiceConnection_SynthVoice=18]="SpeechServiceConnection_SynthVoice",e[e.SpeechServiceConnection_SynthOutputFormat=19]="SpeechServiceConnection_SynthOutputFormat",e[e.SpeechServiceConnection_AutoDetectSourceLanguages=20]="SpeechServiceConnection_AutoDetectSourceLanguages",e[e.SpeechServiceResponse_RequestDetailedResultTrueFalse=21]="SpeechServiceResponse_RequestDetailedResultTrueFalse",e[e.SpeechServiceResponse_RequestProfanityFilterTrueFalse=22]="SpeechServiceResponse_RequestProfanityFilterTrueFalse",e[e.SpeechServiceResponse_JsonResult=23]="SpeechServiceResponse_JsonResult",e[e.SpeechServiceResponse_JsonErrorDetails=24]="SpeechServiceResponse_JsonErrorDetails",e[e.CancellationDetails_Reason=25]="CancellationDetails_Reason",e[e.CancellationDetails_ReasonText=26]="CancellationDetails_ReasonText",e[e.CancellationDetails_ReasonDetailedText=27]="CancellationDetails_ReasonDetailedText",e[e.LanguageUnderstandingServiceResponse_JsonResult=28]="LanguageUnderstandingServiceResponse_JsonResult",e[e.SpeechServiceConnection_Url=29]="SpeechServiceConnection_Url",e[e.SpeechServiceConnection_InitialSilenceTimeoutMs=30]="SpeechServiceConnection_InitialSilenceTimeoutMs",e[e.SpeechServiceConnection_EndSilenceTimeoutMs=31]="SpeechServiceConnection_EndSilenceTimeoutMs",e[e.Speech_SegmentationSilenceTimeoutMs=32]="Speech_SegmentationSilenceTimeoutMs",e[e.SpeechServiceConnection_EnableAudioLogging=33]="SpeechServiceConnection_EnableAudioLogging",e[e.SpeechServiceConnection_AtStartLanguageIdPriority=34]="SpeechServiceConnection_AtStartLanguageIdPriority",e[e.SpeechServiceConnection_ContinuousLanguageIdPriority=35]="SpeechServiceConnection_ContinuousLanguageIdPriority",e[e.SpeechServiceConnection_RecognitionEndpointVersion=36]="SpeechServiceConnection_RecognitionEndpointVersion",e[e.SpeechServiceResponse_ProfanityOption=37]="SpeechServiceResponse_ProfanityOption",e[e.SpeechServiceResponse_PostProcessingOption=38]="SpeechServiceResponse_PostProcessingOption",e[e.SpeechServiceResponse_RequestWordLevelTimestamps=39]="SpeechServiceResponse_RequestWordLevelTimestamps",e[e.SpeechServiceResponse_StablePartialResultThreshold=40]="SpeechServiceResponse_StablePartialResultThreshold",e[e.SpeechServiceResponse_OutputFormatOption=41]="SpeechServiceResponse_OutputFormatOption",e[e.SpeechServiceResponse_TranslationRequestStablePartialResult=42]="SpeechServiceResponse_TranslationRequestStablePartialResult",e[e.SpeechServiceResponse_RequestWordBoundary=43]="SpeechServiceResponse_RequestWordBoundary",e[e.SpeechServiceResponse_RequestPunctuationBoundary=44]="SpeechServiceResponse_RequestPunctuationBoundary",e[e.SpeechServiceResponse_RequestSentenceBoundary=45]="SpeechServiceResponse_RequestSentenceBoundary",e[e.Conversation_ApplicationId=46]="Conversation_ApplicationId",e[e.Conversation_DialogType=47]="Conversation_DialogType",e[e.Conversation_Initial_Silence_Timeout=48]="Conversation_Initial_Silence_Timeout",e[e.Conversation_From_Id=49]="Conversation_From_Id",e[e.Conversation_Conversation_Id=50]="Conversation_Conversation_Id",e[e.Conversation_Custom_Voice_Deployment_Ids=51]="Conversation_Custom_Voice_Deployment_Ids",e[e.Conversation_Speech_Activity_Template=52]="Conversation_Speech_Activity_Template",e[e.Conversation_Request_Bot_Status_Messages=53]="Conversation_Request_Bot_Status_Messages",e[e.Conversation_Agent_Connection_Id=54]="Conversation_Agent_Connection_Id",e[e.SpeechServiceConnection_Host=55]="SpeechServiceConnection_Host",e[e.ConversationTranslator_Host=56]="ConversationTranslator_Host",e[e.ConversationTranslator_Name=57]="ConversationTranslator_Name",e[e.ConversationTranslator_CorrelationId=58]="ConversationTranslator_CorrelationId",e[e.ConversationTranslator_Token=59]="ConversationTranslator_Token",e[e.PronunciationAssessment_ReferenceText=60]="PronunciationAssessment_ReferenceText",e[e.PronunciationAssessment_GradingSystem=61]="PronunciationAssessment_GradingSystem",e[e.PronunciationAssessment_Granularity=62]="PronunciationAssessment_Granularity",e[e.PronunciationAssessment_EnableMiscue=63]="PronunciationAssessment_EnableMiscue",e[e.PronunciationAssessment_Json=64]="PronunciationAssessment_Json",e[e.PronunciationAssessment_Params=65]="PronunciationAssessment_Params",e[e.SpeakerRecognition_Api_Version=66]="SpeakerRecognition_Api_Version"}(n||(n={}))},function(e,t,r){"use strict";var n=r(40),i="object"==typeof self&&self&&self.Object===Object&&self,o=n.a||i||Function("return this")();t.a=o},function(e,t,r){"use strict";r.d(t,"OutputFormatPropertyName",(function(){return n})),r.d(t,"CancellationErrorCodePropertyName",(function(){return i})),r.d(t,"ServicePropertiesPropertyName",(function(){return o})),r.d(t,"ForceDictationPropertyName",(function(){return s})),r.d(t,"AutoDetectSourceLanguagesOpenRangeOptionName",(function(){return a}));const n="OutputFormat",i="CancellationErrorCode",o="ServiceProperties",s="ForceDictation",a="OpenRange"},,function(e,t,r){"use strict";var n;r.d(t,"a",(function(){return n})),r.d(t,"b",(function(){return i})),r.d(t,"c",(function(){return o})),function(e){e[e.PCM=1]="PCM",e[e.MuLaw=2]="MuLaw",e[e.Siren=3]="Siren",e[e.MP3=4]="MP3",e[e.SILKSkype=5]="SILKSkype",e[e.OGG_OPUS=6]="OGG_OPUS",e[e.WEBM_OPUS=7]="WEBM_OPUS",e[e.ALaw=8]="ALaw",e[e.FLAC=9]="FLAC",e[e.OPUS=10]="OPUS"}(n||(n={}));class i{static getDefaultInputFormat(){return o.getDefaultInputFormat()}static getWaveFormat(e,t,r,n){return new o(e,t,r,n)}static getWaveFormatPCM(e,t,r){return new o(e,t,r)}}class o extends i{constructor(e=16e3,t=16,r=1,i=n.PCM){super();let o=!0;switch(i){case n.PCM:this.formatTag=1;break;case n.ALaw:this.formatTag=6;break;case n.MuLaw:this.formatTag=7;break;default:o=!1}if(this.bitsPerSample=t,this.samplesPerSec=e,this.channels=r,this.avgBytesPerSec=this.samplesPerSec*this.channels*(this.bitsPerSample/8),this.blockAlign=this.channels*Math.max(this.bitsPerSample,8),o){this.privHeader=new ArrayBuffer(44);const e=new DataView(this.privHeader);this.setString(e,0,"RIFF"),e.setUint32(4,0,!0),this.setString(e,8,"WAVEfmt "),e.setUint32(16,16,!0),e.setUint16(20,this.formatTag,!0),e.setUint16(22,this.channels,!0),e.setUint32(24,this.samplesPerSec,!0),e.setUint32(28,this.avgBytesPerSec,!0),e.setUint16(32,this.channels*(this.bitsPerSample/8),!0),e.setUint16(34,this.bitsPerSample,!0),this.setString(e,36,"data"),e.setUint32(40,0,!0)}}static getDefaultInputFormat(){return new o}static getAudioContext(e){const t=window.AudioContext||window.webkitAudioContext||!1;if(t)return void 0!==e&&navigator.mediaDevices.getSupportedConstraints().sampleRate?new t({sampleRate:e}):new t;throw new Error("Browser does not support Web Audio API (AudioContext is not available).")}close(){}get header(){return this.privHeader}setString(e,t,r){for(let n=0;n<r.length;n++)e.setUint8(t+n,r.charCodeAt(n))}}},function(e,t,r){"use strict";(function(e){var n=r(40),i="object"==typeof exports&&exports&&!exports.nodeType&&exports,o=i&&"object"==typeof e&&e&&!e.nodeType&&e,s=o&&o.exports===i&&n.a.process,a=function(){try{return o&&o.require&&o.require("util").types||s&&s.binding&&s.binding("util")}catch(e){}}();t.a=a}).call(this,r(51)(e))},function(e,t,r){"use strict";(function(e){var n=r(6),i=r(24),o="object"==typeof exports&&exports&&!exports.nodeType&&exports,s=o&&"object"==typeof e&&e&&!e.nodeType&&e,a=s&&s.exports===o?n.a.Buffer:void 0,c=(a?a.isBuffer:void 0)||i.a;t.a=c}).call(this,r(51)(e))},,,function(e,t,r){"use strict";r.d(t,"a",(function(){return n})),r.d(t,"b",(function(){return o}));var n,i=r(33);!function(e){e[e.Debug=0]="Debug",e[e.Info=1]="Info",e[e.Warning=2]="Warning",e[e.Error=3]="Error",e[e.None=4]="None"}(n||(n={}));class o{constructor(e,t){this.privName=e,this.privEventId=Object(i.b)(),this.privEventTime=(new Date).toISOString(),this.privEventType=t,this.privMetadata={}}get name(){return this.privName}get eventId(){return this.privEventId}get eventTime(){return this.privEventTime}get eventType(){return this.privEventType}get metadata(){return this.privMetadata}}},function(e,t,r){"use strict";r.d(t,"a",(function(){return n})),r.d(t,"b",(function(){return i})),r.d(t,"c",(function(){return o}));class n extends Error{constructor(e){super(e),this.name="ArgumentNull",this.message=e}}class i extends Error{constructor(e){super(e),this.name="InvalidOperation",this.message=e}}class o extends Error{constructor(e,t){super(t),this.name=e+"ObjectDisposed",this.message=t}}},function(e,t,r){"use strict";var n;r.d(t,"a",(function(){return n})),function(e){e[e.Raw8Khz8BitMonoMULaw=0]="Raw8Khz8BitMonoMULaw",e[e.Riff16Khz16KbpsMonoSiren=1]="Riff16Khz16KbpsMonoSiren",e[e.Audio16Khz16KbpsMonoSiren=2]="Audio16Khz16KbpsMonoSiren",e[e.Audio16Khz32KBitRateMonoMp3=3]="Audio16Khz32KBitRateMonoMp3",e[e.Audio16Khz128KBitRateMonoMp3=4]="Audio16Khz128KBitRateMonoMp3",e[e.Audio16Khz64KBitRateMonoMp3=5]="Audio16Khz64KBitRateMonoMp3",e[e.Audio24Khz48KBitRateMonoMp3=6]="Audio24Khz48KBitRateMonoMp3",e[e.Audio24Khz96KBitRateMonoMp3=7]="Audio24Khz96KBitRateMonoMp3",e[e.Audio24Khz160KBitRateMonoMp3=8]="Audio24Khz160KBitRateMonoMp3",e[e.Raw16Khz16BitMonoTrueSilk=9]="Raw16Khz16BitMonoTrueSilk",e[e.Riff16Khz16BitMonoPcm=10]="Riff16Khz16BitMonoPcm",e[e.Riff8Khz16BitMonoPcm=11]="Riff8Khz16BitMonoPcm",e[e.Riff24Khz16BitMonoPcm=12]="Riff24Khz16BitMonoPcm",e[e.Riff8Khz8BitMonoMULaw=13]="Riff8Khz8BitMonoMULaw",e[e.Raw16Khz16BitMonoPcm=14]="Raw16Khz16BitMonoPcm",e[e.Raw24Khz16BitMonoPcm=15]="Raw24Khz16BitMonoPcm",e[e.Raw8Khz16BitMonoPcm=16]="Raw8Khz16BitMonoPcm",e[e.Ogg16Khz16BitMonoOpus=17]="Ogg16Khz16BitMonoOpus",e[e.Ogg24Khz16BitMonoOpus=18]="Ogg24Khz16BitMonoOpus",e[e.Raw48Khz16BitMonoPcm=19]="Raw48Khz16BitMonoPcm",e[e.Riff48Khz16BitMonoPcm=20]="Riff48Khz16BitMonoPcm",e[e.Audio48Khz96KBitRateMonoMp3=21]="Audio48Khz96KBitRateMonoMp3",e[e.Audio48Khz192KBitRateMonoMp3=22]="Audio48Khz192KBitRateMonoMp3",e[e.Ogg48Khz16BitMonoOpus=23]="Ogg48Khz16BitMonoOpus",e[e.Webm16Khz16BitMonoOpus=24]="Webm16Khz16BitMonoOpus",e[e.Webm24Khz16BitMonoOpus=25]="Webm24Khz16BitMonoOpus",e[e.Raw24Khz16BitMonoTrueSilk=26]="Raw24Khz16BitMonoTrueSilk",e[e.Raw8Khz8BitMonoALaw=27]="Raw8Khz8BitMonoALaw",e[e.Riff8Khz8BitMonoALaw=28]="Riff8Khz8BitMonoALaw",e[e.Webm24Khz16Bit24KbpsMonoOpus=29]="Webm24Khz16Bit24KbpsMonoOpus",e[e.Audio16Khz16Bit32KbpsMonoOpus=30]="Audio16Khz16Bit32KbpsMonoOpus",e[e.Audio24Khz16Bit48KbpsMonoOpus=31]="Audio24Khz16Bit48KbpsMonoOpus",e[e.Audio24Khz16Bit24KbpsMonoOpus=32]="Audio24Khz16Bit24KbpsMonoOpus",e[e.Raw22050Hz16BitMonoPcm=33]="Raw22050Hz16BitMonoPcm",e[e.Riff22050Hz16BitMonoPcm=34]="Riff22050Hz16BitMonoPcm",e[e.Raw44100Hz16BitMonoPcm=35]="Raw44100Hz16BitMonoPcm",e[e.Riff44100Hz16BitMonoPcm=36]="Riff44100Hz16BitMonoPcm"}(n||(n={}))},function(e,t,r){"use strict";var n=r(67),i=Object.prototype.toString;function o(e){return"[object Array]"===i.call(e)}function s(e){return void 0===e}function a(e){return null!==e&&"object"==typeof e}function c(e){if("[object Object]"!==i.call(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}function u(e){return"[object Function]"===i.call(e)}function p(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),o(e))for(var r=0,n=e.length;r<n;r++)t.call(null,e[r],r,e);else for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.call(null,e[i],i,e)}e.exports={isArray:o,isArrayBuffer:function(e){return"[object ArrayBuffer]"===i.call(e)},isBuffer:function(e){return null!==e&&!s(e)&&null!==e.constructor&&!s(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:a,isPlainObject:c,isUndefined:s,isDate:function(e){return"[object Date]"===i.call(e)},isFile:function(e){return"[object File]"===i.call(e)},isBlob:function(e){return"[object Blob]"===i.call(e)},isFunction:u,isStream:function(e){return a(e)&&u(e.pipe)},isURLSearchParams:function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:p,merge:function e(){var t={};function r(r,n){c(t[n])&&c(r)?t[n]=e(t[n],r):c(r)?t[n]=e({},r):o(r)?t[n]=r.slice():t[n]=r}for(var n=0,i=arguments.length;n<i;n++)p(arguments[n],r);return t},extend:function(e,t,r){return p(t,(function(t,i){e[i]=r&&"function"==typeof t?n(t,r):t})),e},trim:function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e}}},function(e,t,r){"use strict";r.d(t,"b",(function(){return A})),r.d(t,"f",(function(){return d.b})),r.d(t,"c",(function(){return d.a})),r.d(t,"d",(function(){return S.a})),r.d(t,"cb",(function(){return S.b})),r.d(t,"fb",(function(){return S.d})),r.d(t,"e",(function(){return C.a})),r.d(t,"eb",(function(){return C.b})),r.d(t,"gb",(function(){return C.d})),r.d(t,"n",(function(){return k.a})),r.d(t,"db",(function(){return y})),r.d(t,"hb",(function(){return E})),r.d(t,"K",(function(){return D})),r.d(t,"ob",(function(){return M.a})),r.d(t,"ib",(function(){return L.a})),r.d(t,"R",(function(){return N.a})),r.d(t,"H",(function(){return z.a})),r.d(t,"jb",(function(){return B.a})),r.d(t,"Bb",(function(){return j.a})),r.d(t,"I",(function(){return U.a})),r.d(t,"N",(function(){return F})),r.d(t,"Ab",(function(){return W.b})),r.d(t,"x",(function(){return W.a})),r.d(t,"zb",(function(){return H.a})),r.d(t,"Qb",(function(){return K.a})),r.d(t,"Tb",(function(){return V.a})),r.d(t,"Rb",(function(){return J.a})),r.d(t,"Ub",(function(){return G.a})),r.d(t,"lb",(function(){return $.a})),r.d(t,"xb",(function(){return Y.a})),r.d(t,"yb",(function(){return Y.b})),r.d(t,"Lb",(function(){return re})),r.d(t,"Mb",(function(){return ne})),r.d(t,"ab",(function(){return Z.a})),r.d(t,"bb",(function(){return Q.a})),r.d(t,"kb",(function(){return ce})),r.d(t,"Cb",(function(){return he})),r.d(t,"J",(function(){return ve})),r.d(t,"gc",(function(){return ge.a})),r.d(t,"Sb",(function(){return Te})),r.d(t,"Vb",(function(){return Oe.a})),r.d(t,"Q",(function(){return Ae})),r.d(t,"P",(function(){return De})),r.d(t,"Pb",(function(){return Me.a})),r.d(t,"G",(function(){return Le.a})),r.d(t,"l",(function(){return Ne})),r.d(t,"k",(function(){return je})),r.d(t,"m",(function(){return Be.a})),r.d(t,"p",(function(){return Re})),r.d(t,"mb",(function(){return Ie})),r.d(t,"o",(function(){return Ee})),r.d(t,"U",(function(){return Ue})),r.d(t,"E",(function(){return Fe.a})),r.d(t,"j",(function(){return qe})),r.d(t,"C",(function(){return We})),r.d(t,"F",(function(){return Qe})),r.d(t,"a",(function(){return et.a})),r.d(t,"Wb",(function(){return tt.a})),r.d(t,"nb",(function(){return Ze})),r.d(t,"V",(function(){return ee.a})),r.d(t,"i",(function(){return nt})),r.d(t,"r",(function(){return Pe})),r.d(t,"q",(function(){return be})),r.d(t,"Zb",(function(){return it})),r.d(t,"dc",(function(){return ot})),r.d(t,"cc",(function(){return st})),r.d(t,"fc",(function(){return at})),r.d(t,"ac",(function(){return ct})),r.d(t,"ec",(function(){return ut})),r.d(t,"bc",(function(){return ft})),r.d(t,"vb",(function(){return Ct})),r.d(t,"rb",(function(){return vt})),r.d(t,"wb",(function(){return yt})),r.d(t,"g",(function(){return Rt})),r.d(t,"h",(function(){return Pt})),r.d(t,"pb",(function(){return It})),r.d(t,"tb",(function(){return gt})),r.d(t,"ub",(function(){return pt})),r.d(t,"sb",(function(){return mt})),r.d(t,"s",(function(){return mr})),r.d(t,"t",(function(){return Jt})),r.d(t,"u",(function(){return dr})),r.d(t,"y",(function(){return Vt})),r.d(t,"z",(function(){return lr})),r.d(t,"A",(function(){return Gt})),r.d(t,"B",(function(){return Cr})),r.d(t,"v",(function(){return Tr})),r.d(t,"S",(function(){return vr})),r.d(t,"T",(function(){return ur})),r.d(t,"Xb",(function(){return fr})),r.d(t,"Gb",(function(){return te.a})),r.d(t,"Kb",(function(){return Ur})),r.d(t,"Nb",(function(){return Nr.a})),r.d(t,"Hb",(function(){return Wr.a})),r.d(t,"Fb",(function(){return Hr.a})),r.d(t,"Jb",(function(){return Kr.a})),r.d(t,"Db",(function(){return Vr.a})),r.d(t,"Ib",(function(){return Jr.a})),r.d(t,"Eb",(function(){return qr})),r.d(t,"Ob",(function(){return Br})),r.d(t,"Yb",(function(){return zr})),r.d(t,"qb",(function(){return I})),r.d(t,"w",(function(){return Yr.a})),r.d(t,"X",(function(){return Gr})),r.d(t,"Y",(function(){return $r})),r.d(t,"W",(function(){return Xr})),r.d(t,"Z",(function(){return Qr})),r.d(t,"L",(function(){return St})),r.d(t,"M",(function(){return wt})),r.d(t,"D",(function(){return en})),r.d(t,"O",(function(){return tn.a}));class n{constructor(e,t){this.privActualSampleRate=e,this.privDesiredSampleRate=t}encode(e){const t=this.downSampleAudioFrame(e,this.privActualSampleRate,this.privDesiredSampleRate);if(!t)return null;const r=2*t.length,n=new ArrayBuffer(r),i=new DataView(n);return this.floatTo16BitPCM(i,0,t),n}setString(e,t,r){for(let n=0;n<r.length;n++)e.setUint8(t+n,r.charCodeAt(n))}floatTo16BitPCM(e,t,r){for(let n=0;n<r.length;n++,t+=2){const i=Math.max(-1,Math.min(1,r[n]));e.setInt16(t,i<0?32768*i:32767*i,!0)}}downSampleAudioFrame(e,t,r){if(!e)return null;if(r===t||r>t)return e;const n=t/r,i=Math.round(e.length/n),o=new Float32Array(i);let s=0,a=0;for(;a<i;){const t=Math.round((a+1)*n);let r=0,i=0;for(;s<t&&s<e.length;)r+=e[s++],i++;o[a++]=r/i}return o}}class i{constructor(e){this.privStopInputOnRelease=e}record(e,t,r){const i=new n(e.sampleRate,16e3),o=e.createMediaStreamSource(t),s=()=>{const n=(()=>{let t=0;try{return e.createScriptProcessor(t,1,1)}catch(r){t=2048;let n=e.sampleRate;for(;t<16384&&n>=32e3;)t<<=1,n>>=1;return e.createScriptProcessor(t,1,1)}})();n.onaudioprocess=e=>{const t=e.inputBuffer.getChannelData(0);if(r&&!r.isClosed){const e=i.encode(t);e&&r.writeStreamChunk({buffer:e,isEnd:!1,timeReceived:Date.now()})}},o.connect(n),n.connect(e.destination),this.privMediaResources={scriptProcessorNode:n,source:o,stream:t}};if(e.audioWorklet){if(!this.privSpeechProcessorScript){const e=new Blob(["class SP extends AudioWorkletProcessor {\n                    constructor(options) {\n                      super(options);\n                    }\n                    process(inputs, outputs) {\n                      const input = inputs[0];\n                      const output = [];\n                      for (let channel = 0; channel < input.length; channel += 1) {\n                        output[channel] = input[channel];\n                      }\n                      this.port.postMessage(output[0]);\n                      return true;\n                    }\n                  }\n                  registerProcessor('speech-processor', SP);"],{type:"application/javascript; charset=utf-8"});this.privSpeechProcessorScript=URL.createObjectURL(e)}e.audioWorklet.addModule(this.privSpeechProcessorScript).then(()=>{const n=new AudioWorkletNode(e,"speech-processor");n.port.onmessage=e=>{const t=e.data;if(r&&!r.isClosed){const e=i.encode(t);e&&r.writeStreamChunk({buffer:e,isEnd:!1,timeReceived:Date.now()})}},o.connect(n),n.connect(e.destination),this.privMediaResources={scriptProcessorNode:n,source:o,stream:t}}).catch(()=>{s()})}else try{s()}catch(e){throw new Error("Unable to start audio worklet node for PCMRecorder: "+e)}}releaseMediaResources(e){this.privMediaResources&&(this.privMediaResources.scriptProcessorNode&&(this.privMediaResources.scriptProcessorNode.disconnect(e.destination),this.privMediaResources.scriptProcessorNode=null),this.privMediaResources.source&&(this.privMediaResources.source.disconnect(),this.privStopInputOnRelease&&this.privMediaResources.stream.getTracks().forEach(e=>e.stop()),this.privMediaResources.source=null))}setWorkletUrl(e){this.privSpeechProcessorScript=e}}var o=r(54),s=r(33),a=r(77),c=r(87),u=r(56),p=r(269),h=r(156),d=r(9),l=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};class f{constructor(e,t,r,n){this.privRecorder=e,this.deviceId=t,this.privStreams={},this.privOutputChunkSize=f.AUDIOFORMAT.avgBytesPerSec/10,this.privId=r||Object(s.b)(),this.privEvents=new a.a,this.privMediaStream=n||null,this.privIsClosing=!1}get format(){return Promise.resolve(f.AUDIOFORMAT)}get blob(){return Promise.reject("Not implemented for Mic input")}turnOn(){if(this.privInitializeDeferral)return this.privInitializeDeferral.promise;this.privInitializeDeferral=new c.a;try{this.createAudioContext()}catch(e){if(e instanceof Error){const t=e;this.privInitializeDeferral.reject(t.name+": "+t.message)}else this.privInitializeDeferral.reject(e);return this.privInitializeDeferral.promise}const e=window.navigator;let t=e.getUserMedia||e.webkitGetUserMedia||e.mozGetUserMedia||e.msGetUserMedia;if(e.mediaDevices&&(t=(t,r,n)=>{e.mediaDevices.getUserMedia(t).then(r).catch(n)}),t){const e=()=>{this.onEvent(new u.b(this.privId)),this.privMediaStream&&this.privMediaStream.active?(this.onEvent(new u.d(this.privId)),this.privInitializeDeferral.resolve()):t({audio:!this.deviceId||{deviceId:this.deviceId},video:!1},e=>{this.privMediaStream=e,this.onEvent(new u.d(this.privId)),this.privInitializeDeferral.resolve()},e=>{const t="Error occurred during microphone initialization: "+e;this.privInitializeDeferral.reject(t),this.onEvent(new u.a(this.privId,t))})};"suspended"===this.privContext.state?this.privContext.resume().then(e).catch(e=>{this.privInitializeDeferral.reject("Failed to initialize audio context: "+e)}):e()}else{const e="Browser does not support getUserMedia.";this.privInitializeDeferral.reject(e),this.onEvent(new u.a(e,""))}return this.privInitializeDeferral.promise}id(){return this.privId}attach(e){return this.onEvent(new u.f(this.privId,e)),this.listen(e).then(t=>(this.onEvent(new u.e(this.privId,e)),{detach:()=>l(this,void 0,void 0,(function*(){return t.readEnded(),delete this.privStreams[e],this.onEvent(new u.g(this.privId,e)),this.turnOff()})),id:()=>e,read:()=>t.read()}))}detach(e){e&&this.privStreams[e]&&(this.privStreams[e].close(),delete this.privStreams[e],this.onEvent(new u.g(this.privId,e)))}turnOff(){return l(this,void 0,void 0,(function*(){for(const e in this.privStreams)if(e){const t=this.privStreams[e];t&&t.close()}this.onEvent(new u.c(this.privId)),this.privInitializeDeferral&&(yield this.privInitializeDeferral,this.privInitializeDeferral=null),yield this.destroyAudioContext()}))}get events(){return this.privEvents}get deviceInfo(){return this.getMicrophoneLabel().then(e=>({bitspersample:f.AUDIOFORMAT.bitsPerSample,channelcount:f.AUDIOFORMAT.channels,connectivity:o.f.Unknown,manufacturer:"Speech SDK",model:e,samplerate:f.AUDIOFORMAT.samplesPerSec,type:o.g.Microphones}))}setProperty(e,t){if("MICROPHONE-WorkletSourceUrl"!==e)throw new Error("Property '"+e+"' is not supported on Microphone.");this.privRecorder.setWorkletUrl(t)}getMicrophoneLabel(){if(void 0!==this.privMicrophoneLabel)return Promise.resolve(this.privMicrophoneLabel);if(void 0===this.privMediaStream||!this.privMediaStream.active)return Promise.resolve("microphone");this.privMicrophoneLabel="microphone";const e=this.privMediaStream.getTracks()[0].getSettings().deviceId;if(void 0===e)return Promise.resolve(this.privMicrophoneLabel);const t=new c.a;return navigator.mediaDevices.enumerateDevices().then(r=>{for(const t of r)if(t.deviceId===e){this.privMicrophoneLabel=t.label;break}t.resolve(this.privMicrophoneLabel)},()=>t.resolve(this.privMicrophoneLabel)),t.promise}listen(e){return l(this,void 0,void 0,(function*(){yield this.turnOn();const t=new p.a(this.privOutputChunkSize,e);this.privStreams[e]=t;try{this.privRecorder.record(this.privContext,this.privMediaStream,t)}catch(t){throw this.onEvent(new u.h(this.privId,e,t)),t}return t}))}onEvent(e){this.privEvents.onEvent(e),h.a.instance.onEvent(e)}createAudioContext(){this.privContext||(this.privContext=d.c.getAudioContext(f.AUDIOFORMAT.samplesPerSec))}destroyAudioContext(){return l(this,void 0,void 0,(function*(){if(!this.privContext)return;this.privRecorder.releaseMediaResources(this.privContext);let e=!1;"close"in this.privContext&&(e=!0),e?this.privIsClosing||(this.privIsClosing=!0,yield this.privContext.close(),this.privContext=null,this.privIsClosing=!1):null!==this.privContext&&"running"===this.privContext.state&&(yield this.privContext.suspend())}))}}f.AUDIOFORMAT=d.b.getDefaultInputFormat();var v=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};class g{constructor(e,t,r){this.privStreams={},this.privHeaderEnd=44,this.privId=r||Object(s.b)(),this.privEvents=new a.a,this.privSource=e,"undefined"!=typeof window&&"undefined"!=typeof Blob&&this.privSource instanceof Blob?this.privFilename=e.name:this.privFilename=t||"unknown.wav",this.privAudioFormatPromise=this.readHeader()}get format(){return this.privAudioFormatPromise}get blob(){return Promise.resolve(this.privSource)}turnOn(){if(this.privFilename.lastIndexOf(".wav")!==this.privFilename.length-4){const e=this.privFilename+" is not supported. Only WAVE files are allowed at the moment.";return this.onEvent(new u.a(e,"")),Promise.reject(e)}this.onEvent(new u.b(this.privId)),this.onEvent(new u.d(this.privId))}id(){return this.privId}attach(e){return v(this,void 0,void 0,(function*(){this.onEvent(new u.f(this.privId,e));const t=yield this.upload(e);return this.onEvent(new u.e(this.privId,e)),Promise.resolve({detach:()=>v(this,void 0,void 0,(function*(){t.readEnded(),delete this.privStreams[e],this.onEvent(new u.g(this.privId,e)),yield this.turnOff()})),id:()=>e,read:()=>t.read()})}))}detach(e){e&&this.privStreams[e]&&(this.privStreams[e].close(),delete this.privStreams[e],this.onEvent(new u.g(this.privId,e)))}turnOff(){for(const e in this.privStreams)if(e){const t=this.privStreams[e];t&&!t.isClosed&&t.close()}return this.onEvent(new u.c(this.privId)),Promise.resolve()}get events(){return this.privEvents}get deviceInfo(){return this.privAudioFormatPromise.then(e=>Promise.resolve({bitspersample:e.bitsPerSample,channelcount:e.channels,connectivity:o.f.Unknown,manufacturer:"Speech SDK",model:"File",samplerate:e.samplesPerSec,type:o.g.File}))}readHeader(){const e=this.privSource.slice(0,512),t=new c.a,r=e=>{const r=new DataView(e),n=e=>String.fromCharCode(r.getUint8(e),r.getUint8(e+1),r.getUint8(e+2),r.getUint8(e+3));if("RIFF"!==n(0))return void t.reject("Invalid WAV header in file, RIFF was not found");if("WAVE"!==n(8)||"fmt "!==n(12))return void t.reject("Invalid WAV header in file, WAVEfmt was not found");const i=r.getInt32(16,!0),o=r.getUint16(22,!0),s=r.getUint32(24,!0),a=r.getUint16(34,!0);let c=36+Math.max(i-16,0);for(;"data"!==n(c);c+=2)if(c>504)return void t.reject("Invalid WAV header in file, data block was not found");this.privHeaderEnd=c+8,t.resolve(d.b.getWaveFormatPCM(s,a,o))};if("undefined"!=typeof window&&"undefined"!=typeof Blob&&e instanceof Blob){const t=new FileReader;t.onload=e=>{const t=e.target.result;r(t)},t.readAsArrayBuffer(e)}else{const t=e;r(t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength))}return t.promise}upload(e){return v(this,void 0,void 0,(function*(){const t=t=>{const r=`Error occurred while processing '${this.privFilename}'. ${t}`;throw this.onEvent(new u.h(this.privId,e,r)),new Error(r)};try{yield this.turnOn();const r=yield this.privAudioFormatPromise,n=new p.a(r.avgBytesPerSec/10,e);this.privStreams[e]=n;const i=this.privSource.slice(this.privHeaderEnd),o=e=>{n.isClosed||(n.writeStreamChunk({buffer:e,isEnd:!1,timeReceived:Date.now()}),n.close())};if("undefined"!=typeof window&&"undefined"!=typeof Blob&&i instanceof Blob){const e=new FileReader;e.onerror=e=>t(e.toString()),e.onload=e=>{const t=e.target.result;o(t)},e.readAsArrayBuffer(i)}else{const e=i;o(e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength))}return n}catch(e){t(e)}}))}onEvent(e){this.privEvents.onEvent(e),h.a.instance.onEvent(e)}}var m=r(3);class y{}var S=r(91),w=r(147),b=r(301),C=r(46),R=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};const P={[d.a.PCM]:"audio/wav",[d.a.MuLaw]:"audio/x-wav",[d.a.MP3]:"audio/mpeg",[d.a.OGG_OPUS]:"audio/ogg",[d.a.WEBM_OPUS]:"audio/webm; codecs=opus",[d.a.ALaw]:"audio/x-wav",[d.a.FLAC]:"audio/flac"};class I{constructor(e){this.privPlaybackStarted=!1,this.privAppendingToBuffer=!1,this.privMediaSourceOpened=!1,this.privBytesReceived=0,this.privId=e||Object(s.b)(),this.privIsPaused=!1,this.privIsClosed=!1}id(){return this.privId}write(e,t,r){void 0!==this.privAudioBuffer?(this.privAudioBuffer.push(e),this.updateSourceBuffer().then(()=>{t&&t()},e=>{r&&r(e)})):void 0!==this.privAudioOutputStream&&(this.privAudioOutputStream.write(e),this.privBytesReceived+=e.byteLength)}close(e,t){if(this.privIsClosed=!0,void 0!==this.privSourceBuffer)this.handleSourceBufferUpdateEnd().then(()=>{e&&e()},e=>{t&&t(e)});else if(void 0!==this.privAudioOutputStream&&"undefined"!=typeof window)if(this.privFormat.formatTag!==d.a.PCM&&this.privFormat.formatTag!==d.a.MuLaw&&this.privFormat.formatTag!==d.a.ALaw||!1!==this.privFormat.hasHeader){let r=new ArrayBuffer(this.privBytesReceived);this.privAudioOutputStream.read(r).then(()=>{r=w.a.addHeader(r,this.privFormat);const n=new Blob([r],{type:P[this.privFormat.formatTag]});this.privAudio.src=window.URL.createObjectURL(n),this.notifyPlayback().then(()=>{e&&e()},e=>{t&&t(e)})},e=>{t&&t(e)})}else this.onAudioEnd&&this.onAudioEnd(this);else this.onAudioEnd&&this.onAudioEnd(this)}set format(e){if("undefined"!=typeof AudioContext||"undefined"!=typeof window&&void 0!==window.webkitAudioContext){this.privFormat=e;const t=P[this.privFormat.formatTag];void 0===t||("undefined"!=typeof MediaSource&&MediaSource.isTypeSupported(t)?(this.privAudio=new Audio,this.privAudioBuffer=[],this.privMediaSource=new MediaSource,this.privAudio.src=URL.createObjectURL(this.privMediaSource),this.privAudio.load(),this.privMediaSource.onsourceopen=()=>{this.privMediaSourceOpened=!0,this.privMediaSource.duration=1800,this.privSourceBuffer=this.privMediaSource.addSourceBuffer(t),this.privSourceBuffer.onupdate=()=>{this.updateSourceBuffer().catch(e=>{h.a.instance.onEvent(new b.a(e))})},this.privSourceBuffer.onupdateend=()=>{this.handleSourceBufferUpdateEnd().catch(e=>{h.a.instance.onEvent(new b.a(e))})},this.privSourceBuffer.onupdatestart=()=>{this.privAppendingToBuffer=!1}},this.updateSourceBuffer().catch(e=>{h.a.instance.onEvent(new b.a(e))})):(this.privAudioOutputStream=new C.c,this.privAudioOutputStream.format=this.privFormat,this.privAudio=new Audio))}}get volume(){var e,t;return null!==(t=null===(e=this.privAudio)||void 0===e?void 0:e.volume)&&void 0!==t?t:-1}set volume(e){this.privAudio&&(this.privAudio.volume=e)}mute(){this.privAudio&&(this.privAudio.muted=!0)}unmute(){this.privAudio&&(this.privAudio.muted=!1)}get isClosed(){return this.privIsClosed}get currentTime(){return void 0!==this.privAudio?this.privAudio.currentTime:-1}pause(){this.privIsPaused||void 0===this.privAudio||(this.privAudio.pause(),this.privIsPaused=!0)}resume(e,t){this.privIsPaused&&void 0!==this.privAudio&&(this.privAudio.play().then(()=>{e&&e()},e=>{t&&t(e)}),this.privIsPaused=!1)}get internalAudio(){return this.privAudio}updateSourceBuffer(){return R(this,void 0,void 0,(function*(){if(void 0!==this.privAudioBuffer&&this.privAudioBuffer.length>0&&this.sourceBufferAvailable()){this.privAppendingToBuffer=!0;const e=this.privAudioBuffer.shift();try{this.privSourceBuffer.appendBuffer(e)}catch(t){return void this.privAudioBuffer.unshift(e)}yield this.notifyPlayback()}else this.canEndStream()&&(yield this.handleSourceBufferUpdateEnd())}))}handleSourceBufferUpdateEnd(){return R(this,void 0,void 0,(function*(){this.canEndStream()&&this.sourceBufferAvailable()&&(this.privMediaSource.endOfStream(),yield this.notifyPlayback())}))}notifyPlayback(){return R(this,void 0,void 0,(function*(){this.privPlaybackStarted||void 0===this.privAudio||(this.privPlaybackStarted=!0,this.onAudioStart&&this.onAudioStart(this),this.privAudio.onended=()=>{this.onAudioEnd&&this.onAudioEnd(this)},this.privIsPaused||(yield this.privAudio.play()))}))}canEndStream(){return this.isClosed&&void 0!==this.privSourceBuffer&&0===this.privAudioBuffer.length&&this.privMediaSourceOpened&&!this.privAppendingToBuffer&&"open"===this.privMediaSource.readyState}sourceBufferAvailable(){return void 0!==this.privSourceBuffer&&!this.privSourceBuffer.updating}}class E{}var _=r(98);class T{constructor(e){m.a.throwIfNullOrUndefined(_.openSync,"\nFile System access not available, please use Push or PullAudioOutputStream"),this.privFd=_.openSync(e,"w")}set format(e){m.a.throwIfNotUndefined(this.privAudioFormat,"format is already set"),this.privAudioFormat=e;let t=0;this.privAudioFormat.hasHeader&&(t=this.privAudioFormat.header.byteLength),void 0!==this.privFd&&(this.privWriteStream=_.createWriteStream("",{fd:this.privFd,start:t,autoClose:!1}))}write(e){m.a.throwIfNullOrUndefined(this.privAudioFormat,"must set format before writing."),void 0!==this.privWriteStream&&this.privWriteStream.write(new Uint8Array(e.slice(0)))}close(){void 0!==this.privFd&&(this.privWriteStream.on("finish",()=>{this.privAudioFormat.hasHeader&&(this.privAudioFormat.updateHeader(this.privWriteStream.bytesWritten),_.writeSync(this.privFd,new Int8Array(this.privAudioFormat.header),0,this.privAudioFormat.header.byteLength,0)),_.closeSync(this.privFd),this.privFd=void 0}),this.privWriteStream.end())}id(){return this.privId}}class A{static fromDefaultMicrophoneInput(){const e=new i(!0);return new O(new f(e))}static fromMicrophoneInput(e){const t=new i(!0);return new O(new f(t,e))}static fromWavFileInput(e,t="unnamedBuffer.wav"){return new O(new g(e,t))}static fromStreamInput(e){if(e instanceof y)return new O(new S.c(e));if(e instanceof S.a)return new O(e);if("undefined"!=typeof MediaStream&&e instanceof MediaStream){const t=new i(!1);return new O(new f(t,null,null,e))}throw new Error("Not Supported Type")}static fromDefaultSpeakerOutput(){return new x(new I)}static fromSpeakerOutput(e){if(void 0===e)return A.fromDefaultSpeakerOutput();if(e instanceof I)return new x(e);throw new Error("Not Supported Type")}static fromAudioFileOutput(e){return new x(new T(e))}static fromStreamOutput(e){if(e instanceof E)return new x(new C.e(e));if(e instanceof C.d)return new x(e);if(e instanceof C.b)return new x(e);throw new Error("Not Supported Type")}}class O extends A{constructor(e){super(),this.privSource=e}get format(){return this.privSource.format}close(e,t){this.privSource.turnOff().then(()=>{e&&e()},e=>{t&&t(e)})}id(){return this.privSource.id()}get blob(){return this.privSource.blob}turnOn(){return this.privSource.turnOn()}attach(e){return this.privSource.attach(e)}detach(e){return this.privSource.detach(e)}turnOff(){return this.privSource.turnOff()}get events(){return this.privSource.events}setProperty(e,t){if(m.a.throwIfNull(t,"value"),void 0===this.privSource.setProperty)throw new Error("This AudioConfig instance does not support setting properties.");this.privSource.setProperty(e,t)}getProperty(e,t){if(void 0!==this.privSource.getProperty)return this.privSource.getProperty(e,t);throw new Error("This AudioConfig instance does not support getting properties.")}get deviceInfo(){return this.privSource.deviceInfo}}class x extends A{constructor(e){super(),this.privDestination=e}set format(e){this.privDestination.format=e}write(e){this.privDestination.write(e)}close(){this.privDestination.close()}id(){return this.privDestination.id()}setProperty(){throw new Error("This AudioConfig instance does not support setting properties.")}getProperty(){throw new Error("This AudioConfig instance does not support getting properties.")}}var k=r(50);class D{constructor(){this.privDisposed=!1}static fromFile(e){throw m.a.throwIfFileDoesNotExist(e,"fileName"),new Error("Not yet implemented.")}static fromStream(e){throw m.a.throwIfNull(e,"file"),new Error("Not yet implemented.")}close(){this.privDisposed||(this.privDisposed=!0)}}var M=r(96),L=r(76),N=r(36),z=r(84),B=r(168),j=r(55),U=r(85);class F{constructor(){}static fromEndpoint(e){m.a.throwIfNull(e,"uri"),m.a.throwIfNullOrWhitespace(e.hostname,"uri");const t=new q,r=e.host.indexOf(".");if(-1===r)throw new Error("Could not determine region from endpoint");t.region=e.host.substr(0,r);const n=e.pathname.lastIndexOf("/")+1;if(-1===n)throw new Error("Could not determine appId from endpoint");if(t.appId=e.pathname.substr(n),t.subscriptionKey=e.searchParams.get("subscription-key"),void 0===t.subscriptionKey)throw new Error("Could not determine subscription key from endpoint");return t}static fromAppId(e){m.a.throwIfNullOrWhitespace(e,"appId");const t=new q;return t.appId=e,t}static fromSubscription(e,t,r){m.a.throwIfNullOrWhitespace(e,"subscriptionKey"),m.a.throwIfNullOrWhitespace(t,"appId"),m.a.throwIfNullOrWhitespace(r,"region");const n=new q;return n.appId=t,n.region=r,n.subscriptionKey=e,n}}class q extends F{}var W=r(82),H=r(169),K=r(150),V=r(151),J=r(83),G=r(152),$=r(22),Y=r(148),X=r(7),Q=r(5),Z=r(39),ee=r(170),te=r(16);class re extends Y.a{constructor(){super()}static fromSubscription(e,t){m.a.throwIfNullOrWhitespace(e,"subscriptionKey"),m.a.throwIfNullOrWhitespace(t,"region");const r=new ne;return r.properties.setProperty(Q.a.SpeechServiceConnection_Key,e),r.properties.setProperty(Q.a.SpeechServiceConnection_Region,t),r}static fromAuthorizationToken(e,t){m.a.throwIfNullOrWhitespace(e,"authorizationToken"),m.a.throwIfNullOrWhitespace(t,"region");const r=new ne;return r.properties.setProperty(Q.a.SpeechServiceAuthorization_Token,e),r.properties.setProperty(Q.a.SpeechServiceConnection_Region,t),r}static fromHost(e,t){m.a.throwIfNull(e,"hostName");const r=new ne;return r.setProperty(Q.a.SpeechServiceConnection_Host,e.protocol+"//"+e.hostname+(""===e.port?"":":"+e.port)),void 0!==t&&r.setProperty(Q.a.SpeechServiceConnection_Key,t),r}static fromEndpoint(e,t){m.a.throwIfNull(e,"endpoint"),m.a.throwIfNull(t,"subscriptionKey");const r=new ne;return r.properties.setProperty(Q.a.SpeechServiceConnection_Endpoint,e.href),r.properties.setProperty(Q.a.SpeechServiceConnection_Key,t),r}}class ne extends re{constructor(){super(),this.privSpeechProperties=new Z.a,this.outputFormat=N.a.Simple}set authorizationToken(e){m.a.throwIfNullOrWhitespace(e,"value"),this.privSpeechProperties.setProperty(Q.a.SpeechServiceAuthorization_Token,e)}set speechRecognitionLanguage(e){m.a.throwIfNullOrWhitespace(e,"value"),this.privSpeechProperties.setProperty(Q.a.SpeechServiceConnection_RecoLanguage,e)}get speechRecognitionLanguage(){return this.privSpeechProperties.getProperty(Q.a[Q.a.SpeechServiceConnection_RecoLanguage])}get subscriptionKey(){return this.privSpeechProperties.getProperty(Q.a[Q.a.SpeechServiceConnection_Key])}get outputFormat(){return N.a[this.privSpeechProperties.getProperty(X.OutputFormatPropertyName,void 0)]}set outputFormat(e){this.privSpeechProperties.setProperty(X.OutputFormatPropertyName,N.a[e])}get endpointId(){return this.privSpeechProperties.getProperty(Q.a.SpeechServiceConnection_EndpointId)}set endpointId(e){this.privSpeechProperties.setProperty(Q.a.SpeechServiceConnection_EndpointId,e)}addTargetLanguage(e){m.a.throwIfNullOrWhitespace(e,"value");const t=this.targetLanguages;t.push(e),this.privSpeechProperties.setProperty(Q.a.SpeechServiceConnection_TranslationToLanguages,t.join(","))}get targetLanguages(){return void 0!==this.privSpeechProperties.getProperty(Q.a.SpeechServiceConnection_TranslationToLanguages,void 0)?this.privSpeechProperties.getProperty(Q.a.SpeechServiceConnection_TranslationToLanguages).split(","):[]}get voiceName(){return this.getProperty(Q.a[Q.a.SpeechServiceConnection_TranslationVoice])}set voiceName(e){m.a.throwIfNullOrWhitespace(e,"value"),this.privSpeechProperties.setProperty(Q.a.SpeechServiceConnection_TranslationVoice,e)}get region(){return this.privSpeechProperties.getProperty(Q.a.SpeechServiceConnection_Region)}setProxy(e,t,r,n){this.setProperty(Q.a[Q.a.SpeechServiceConnection_ProxyHostName],e),this.setProperty(Q.a[Q.a.SpeechServiceConnection_ProxyPort],t),this.setProperty(Q.a[Q.a.SpeechServiceConnection_ProxyUserName],r),this.setProperty(Q.a[Q.a.SpeechServiceConnection_ProxyPassword],n)}getProperty(e,t){return this.privSpeechProperties.getProperty(e,t)}setProperty(e,t){this.privSpeechProperties.setProperty(e,t)}get properties(){return this.privSpeechProperties}close(){}setServiceProperty(e,t){const r=JSON.parse(this.privSpeechProperties.getProperty(X.ServicePropertiesPropertyName,"{}"));r[e]=t,this.privSpeechProperties.setProperty(X.ServicePropertiesPropertyName,JSON.stringify(r))}setProfanity(e){this.privSpeechProperties.setProperty(Q.a.SpeechServiceResponse_ProfanityOption,ee.a[e])}enableAudioLogging(){this.privSpeechProperties.setProperty(Q.a.SpeechServiceConnection_EnableAudioLogging,"true")}requestWordLevelTimestamps(){this.privSpeechProperties.setProperty(Q.a.SpeechServiceResponse_RequestWordLevelTimestamps,"true")}enableDictation(){this.privSpeechProperties.setProperty(X.ForceDictationPropertyName,"true")}get speechSynthesisLanguage(){return this.privSpeechProperties.getProperty(Q.a.SpeechServiceConnection_SynthLanguage)}set speechSynthesisLanguage(e){this.privSpeechProperties.setProperty(Q.a.SpeechServiceConnection_SynthLanguage,e)}get speechSynthesisVoiceName(){return this.privSpeechProperties.getProperty(Q.a.SpeechServiceConnection_SynthVoice)}set speechSynthesisVoiceName(e){this.privSpeechProperties.setProperty(Q.a.SpeechServiceConnection_SynthVoice,e)}get speechSynthesisOutputFormat(){return te.a[this.privSpeechProperties.getProperty(Q.a.SpeechServiceConnection_SynthOutputFormat,void 0)]}set speechSynthesisOutputFormat(e){this.privSpeechProperties.setProperty(Q.a.SpeechServiceConnection_SynthOutputFormat,te.a[e])}}var ie=r(97),oe=r(208),se=r(209),ae=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};class ce{constructor(e,t,r){this.audioConfig=void 0!==e?e:A.fromDefaultMicrophoneInput(),this.privDisposed=!1,this.privProperties=t.clone(),this.privConnectionFactory=r,this.implCommonRecognizerSetup()}close(e,t){m.a.throwIfDisposed(this.privDisposed),Object(c.b)(this.dispose(!0),e,t)}get internalData(){return this.privReco}dispose(e){return ae(this,void 0,void 0,(function*(){this.privDisposed||(this.privDisposed=!0,e&&this.privReco&&(yield this.privReco.audioSource.turnOff(),yield this.privReco.dispose()))}))}static get telemetryEnabled(){return ie.a.telemetryDataEnabled}static enableTelemetry(e){ie.a.telemetryDataEnabled=e}implCommonRecognizerSetup(){let e="undefined"!=typeof window?"Browser":"Node",t="unknown",r="unknown";"undefined"!=typeof navigator&&(e=e+"/"+navigator.platform,t=navigator.userAgent,r=navigator.appVersion);const n=this.createRecognizerConfig(new o.e(new o.a(new o.b(e,t,r))));this.privReco=this.createServiceRecognizer(ce.getAuthFromProperties(this.privProperties),this.privConnectionFactory,this.audioConfig,n)}recognizeOnceAsyncImpl(e){return ae(this,void 0,void 0,(function*(){m.a.throwIfDisposed(this.privDisposed);const t=new c.a;yield this.implRecognizerStop(),yield this.privReco.recognize(e,t.resolve,t.reject);const r=yield t.promise;return yield this.implRecognizerStop(),r}))}startContinuousRecognitionAsyncImpl(e){return ae(this,void 0,void 0,(function*(){m.a.throwIfDisposed(this.privDisposed),yield this.implRecognizerStop(),yield this.privReco.recognize(e,void 0,void 0)}))}stopContinuousRecognitionAsyncImpl(){return ae(this,void 0,void 0,(function*(){m.a.throwIfDisposed(this.privDisposed),yield this.implRecognizerStop()}))}implRecognizerStop(){return ae(this,void 0,void 0,(function*(){this.privReco&&(yield this.privReco.stopRecognizing())}))}static getAuthFromProperties(e){const t=e.getProperty(Q.a.SpeechServiceConnection_Key,void 0);return t&&""!==t?new oe.a(t):new se.a(()=>{const t=e.getProperty(Q.a.SpeechServiceAuthorization_Token,void 0);return Promise.resolve(t)},()=>{const t=e.getProperty(Q.a.SpeechServiceAuthorization_Token,void 0);return Promise.resolve(t)})}}var ue=r(210),pe=r(211);class he extends ce{constructor(e,t){const r=e;m.a.throwIfNull(r,"speechConfig"),m.a.throwIfNullOrWhitespace(r.properties.getProperty(Q.a.SpeechServiceConnection_RecoLanguage),Q.a[Q.a.SpeechServiceConnection_RecoLanguage]),super(t,r.properties,new ue.a),this.privDisposedRecognizer=!1}static FromConfig(e,t,r){const n=e;return t.properties.mergeTo(n.properties),new he(e,r)}get endpointId(){return m.a.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(Q.a.SpeechServiceConnection_EndpointId,"00000000-0000-0000-0000-000000000000")}get authorizationToken(){return this.properties.getProperty(Q.a.SpeechServiceAuthorization_Token)}set authorizationToken(e){m.a.throwIfNullOrWhitespace(e,"token"),this.properties.setProperty(Q.a.SpeechServiceAuthorization_Token,e)}get speechRecognitionLanguage(){return m.a.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(Q.a.SpeechServiceConnection_RecoLanguage)}get outputFormat(){return m.a.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(X.OutputFormatPropertyName,N.a[N.a.Simple])===N.a[N.a.Simple]?N.a.Simple:N.a.Detailed}get properties(){return this.privProperties}recognizeOnceAsync(e,t){Object(c.b)(this.recognizeOnceAsyncImpl(o.c.Interactive),e,t)}startContinuousRecognitionAsync(e,t){Object(c.b)(this.startContinuousRecognitionAsyncImpl(o.c.Conversation),e,t)}stopContinuousRecognitionAsync(e,t){Object(c.b)(this.stopContinuousRecognitionAsyncImpl(),e,t)}startKeywordRecognitionAsync(e,t,r){m.a.throwIfNull(e,"model"),r&&r("Not yet implemented.")}stopKeywordRecognitionAsync(e){e&&e()}close(e,t){m.a.throwIfDisposed(this.privDisposedRecognizer),Object(c.b)(this.dispose(!0),e,t)}dispose(e){const t=Object.create(null,{dispose:{get:()=>super.dispose}});return function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))}(this,void 0,void 0,(function*(){this.privDisposedRecognizer||(e&&(this.privDisposedRecognizer=!0,yield this.implRecognizerStop()),yield t.dispose.call(this,e))}))}createRecognizerConfig(e){return new o.d(e,this.properties)}createServiceRecognizer(e,t,r,n){const i=r;return new pe.a(e,t,i,n,this)}}var de=r(212),le=r(213),fe=r(214);class ve extends ce{constructor(e,t){m.a.throwIfNullOrUndefined(e,"speechConfig");const r=e;m.a.throwIfNullOrUndefined(r,"speechConfig"),super(t,r.properties,new de.a),this.privAddedIntents=[],this.privAddedLmIntents={},this.privDisposedIntentRecognizer=!1,this.privProperties=r.properties,m.a.throwIfNullOrWhitespace(this.properties.getProperty(Q.a.SpeechServiceConnection_RecoLanguage),Q.a[Q.a.SpeechServiceConnection_RecoLanguage])}get speechRecognitionLanguage(){return m.a.throwIfDisposed(this.privDisposedIntentRecognizer),this.properties.getProperty(Q.a.SpeechServiceConnection_RecoLanguage)}get authorizationToken(){return this.properties.getProperty(Q.a.SpeechServiceAuthorization_Token)}set authorizationToken(e){this.properties.setProperty(Q.a.SpeechServiceAuthorization_Token,e)}get properties(){return this.privProperties}recognizeOnceAsync(e,t){if(m.a.throwIfDisposed(this.privDisposedIntentRecognizer),0!==Object.keys(this.privAddedLmIntents).length||void 0!==this.privUmbrellaIntent){const e=this.buildSpeechContext();this.privReco.speechContext.setSection("intent",e.Intent),this.privReco.dynamicGrammar.addReferenceGrammar(e.ReferenceGrammars),this.privReco.setIntents(this.privAddedLmIntents,this.privUmbrellaIntent)}Object(c.b)(this.recognizeOnceAsyncImpl(o.c.Interactive),e,t)}startContinuousRecognitionAsync(e,t){if(0!==Object.keys(this.privAddedLmIntents).length||void 0!==this.privUmbrellaIntent){const e=this.buildSpeechContext();this.privReco.speechContext.setSection("intent",e.Intent),this.privReco.dynamicGrammar.addReferenceGrammar(e.ReferenceGrammars),this.privReco.setIntents(this.privAddedLmIntents,this.privUmbrellaIntent)}Object(c.b)(this.startContinuousRecognitionAsyncImpl(o.c.Conversation),e,t)}stopContinuousRecognitionAsync(e,t){Object(c.b)(this.stopContinuousRecognitionAsyncImpl(),e,t)}startKeywordRecognitionAsync(e,t,r){m.a.throwIfNull(e,"model"),r&&r("Not yet implemented.")}stopKeywordRecognitionAsync(e,t){if(e)try{e()}catch(e){t&&t(e)}}addIntent(e,t){m.a.throwIfDisposed(this.privDisposedIntentRecognizer),m.a.throwIfNullOrWhitespace(t,"intentId"),m.a.throwIfNullOrWhitespace(e,"simplePhrase"),this.privAddedIntents.push([t,e])}addIntentWithLanguageModel(e,t,r){m.a.throwIfDisposed(this.privDisposedIntentRecognizer),m.a.throwIfNullOrWhitespace(e,"intentId"),m.a.throwIfNull(t,"model");const n=t;m.a.throwIfNullOrWhitespace(n.appId,"model.appId"),this.privAddedLmIntents[e]=new le.a(n,r)}addAllIntents(e,t){m.a.throwIfNull(e,"model");const r=e;m.a.throwIfNullOrWhitespace(r.appId,"model.appId"),this.privUmbrellaIntent=new le.a(r,t)}close(e,t){m.a.throwIfDisposed(this.privDisposedIntentRecognizer),Object(c.b)(this.dispose(!0),e,t)}createRecognizerConfig(e){return new o.d(e,this.properties)}createServiceRecognizer(e,t,r,n){const i=r;return new fe.a(e,t,i,n,this)}dispose(e){const t=Object.create(null,{dispose:{get:()=>super.dispose}});return function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))}(this,void 0,void 0,(function*(){this.privDisposedIntentRecognizer||e&&(this.privDisposedIntentRecognizer=!0,yield t.dispose.call(this,e))}))}buildSpeechContext(){let e,t,r;const n=[];void 0!==this.privUmbrellaIntent&&(e=this.privUmbrellaIntent.modelImpl.appId,t=this.privUmbrellaIntent.modelImpl.region,r=this.privUmbrellaIntent.modelImpl.subscriptionKey);for(const i of Object.keys(this.privAddedLmIntents)){const o=this.privAddedLmIntents[i];if(void 0===e)e=o.modelImpl.appId;else if(e!==o.modelImpl.appId)throw new Error("Intents must all be from the same LUIS model");if(void 0===t)t=o.modelImpl.region;else if(t!==o.modelImpl.region)throw new Error("Intents must all be from the same LUIS model in a single region");if(void 0===r)r=o.modelImpl.subscriptionKey;else if(r!==o.modelImpl.subscriptionKey)throw new Error("Intents must all use the same subscription key");const s="luis/"+e+"-PRODUCTION#"+i;n.push(s)}return{Intent:{id:e,key:void 0===r?this.privProperties.getProperty(Q.a[Q.a.SpeechServiceConnection_Key]):r,provider:"LUIS"},ReferenceGrammars:void 0===this.privUmbrellaIntent?n:["luis/"+e+"-PRODUCTION"]}}}var ge=r(137),me=r(215),ye=r(216),Se=r(19),we=r(23);class be{}class Ce{constructor(e){this.privConnectionMessage=e,this.privProperties=new Z.a,this.privConnectionMessage.headers[Se.a.ConnectionId]&&this.privProperties.setProperty(Q.a.Speech_SessionId,this.privConnectionMessage.headers[Se.a.ConnectionId]),Object.keys(this.privConnectionMessage.headers).forEach(e=>{this.privProperties.setProperty(e,this.privConnectionMessage.headers[e])})}get path(){return this.privConnectionMessage.headers[Object.keys(this.privConnectionMessage.headers).find(e=>e.toLowerCase()==="path".toLowerCase())]}get isTextMessage(){return this.privConnectionMessage.messageType===we.b.Text}get isBinaryMessage(){return this.privConnectionMessage.messageType===we.b.Binary}get TextMessage(){return this.privConnectionMessage.textBody}get binaryMessage(){return this.privConnectionMessage.binaryBody}get properties(){return this.privProperties}toString(){return""}}class Re extends M.a{}class Pe{constructor(e){this.privConnectionMessage=e}get message(){return this.privConnectionMessage}toString(){return"Message: "+this.privConnectionMessage.toString()}}class Ie extends M.a{constructor(e,t,r){super(r),this.privJsonResult=e,this.privEventName=t}get jsonString(){return this.privJsonResult}get eventName(){return this.privEventName}}class Ee{static fromRecognizer(e){const t=e.internalData,r=new Ee;return r.privInternalData=t,r.setupEvents(),r}static fromSynthesizer(e){const t=e.internalData,r=new Ee;return r.privInternalData=t,r.setupEvents(),r}openConnection(e,t){Object(c.b)(this.privInternalData.connect(),e,t)}closeConnection(e,t){if(this.privInternalData instanceof w.a)throw new Error("Disconnecting a synthesizer's connection is currently not supported");Object(c.b)(this.privInternalData.disconnect(),e,t)}setMessageProperty(e,t,r){if(m.a.throwIfNullOrWhitespace(t,"propertyName"),this.privInternalData instanceof ie.a){if("speech.context"!==e.toLowerCase())throw new Error("Only speech.context message property sets are currently supported for recognizer");this.privInternalData.speechContext.setSection(t,r)}else if(this.privInternalData instanceof w.a){if("synthesis.context"!==e.toLowerCase())throw new Error("Only synthesis.context message property sets are currently supported for synthesizer");this.privInternalData.synthesisContext.setSection(t,r)}}sendMessageAsync(e,t,r,n){Object(c.b)(this.privInternalData.sendNetworkMessage(e,t),r,n)}close(){}setupEvents(){this.privEventListener=this.privInternalData.connectionEvents.attach(e=>{"ConnectionEstablishedEvent"===e.name?this.connected&&this.connected(new Re(e.connectionId)):"ConnectionClosedEvent"===e.name?this.disconnected&&this.disconnected(new Re(e.connectionId)):"ConnectionMessageSentEvent"===e.name?this.messageSent&&this.messageSent(new Pe(new Ce(e.message))):"ConnectionMessageReceivedEvent"===e.name&&this.messageReceived&&this.messageReceived(new Pe(new Ce(e.message)))}),this.privServiceEventListener=this.privInternalData.serviceEvents.attach(e=>{this.receivedServiceMessage&&this.receivedServiceMessage(new Ie(e.jsonString,e.name))})}}var _e=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};class Te extends ce{constructor(e,t){const r=e;m.a.throwIfNull(r,"speechConfig"),super(t,r.properties,new me.a),this.privDisposedTranslationRecognizer=!1,void 0!==this.properties.getProperty(Q.a.SpeechServiceConnection_TranslationVoice,void 0)&&m.a.throwIfNullOrWhitespace(this.properties.getProperty(Q.a.SpeechServiceConnection_TranslationVoice),Q.a[Q.a.SpeechServiceConnection_TranslationVoice]),m.a.throwIfNullOrWhitespace(this.properties.getProperty(Q.a.SpeechServiceConnection_TranslationToLanguages),Q.a[Q.a.SpeechServiceConnection_TranslationToLanguages]),m.a.throwIfNullOrWhitespace(this.properties.getProperty(Q.a.SpeechServiceConnection_RecoLanguage),Q.a[Q.a.SpeechServiceConnection_RecoLanguage])}get speechRecognitionLanguage(){return m.a.throwIfDisposed(this.privDisposedTranslationRecognizer),this.properties.getProperty(Q.a.SpeechServiceConnection_RecoLanguage)}get targetLanguages(){return m.a.throwIfDisposed(this.privDisposedTranslationRecognizer),this.properties.getProperty(Q.a.SpeechServiceConnection_TranslationToLanguages).split(",")}get voiceName(){return m.a.throwIfDisposed(this.privDisposedTranslationRecognizer),this.properties.getProperty(Q.a.SpeechServiceConnection_TranslationVoice,void 0)}get properties(){return this.privProperties}get authorizationToken(){return this.properties.getProperty(Q.a.SpeechServiceAuthorization_Token)}set authorizationToken(e){this.properties.setProperty(Q.a.SpeechServiceAuthorization_Token,e)}recognizeOnceAsync(e,t){m.a.throwIfDisposed(this.privDisposedTranslationRecognizer),Object(c.b)(this.recognizeOnceAsyncImpl(o.c.Conversation),e,t)}startContinuousRecognitionAsync(e,t){Object(c.b)(this.startContinuousRecognitionAsyncImpl(o.c.Conversation),e,t)}stopContinuousRecognitionAsync(e,t){Object(c.b)(this.stopContinuousRecognitionAsyncImpl(),e,t)}removeTargetLanguage(e){if(m.a.throwIfNullOrUndefined(e,"language to be removed"),void 0!==this.properties.getProperty(Q.a.SpeechServiceConnection_TranslationToLanguages,void 0)){const t=this.properties.getProperty(Q.a.SpeechServiceConnection_TranslationToLanguages).split(","),r=t.indexOf(e);r>-1&&(t.splice(r,1),this.properties.setProperty(Q.a.SpeechServiceConnection_TranslationToLanguages,t.join(",")),this.updateLanguages(t))}}addTargetLanguage(e){m.a.throwIfNullOrUndefined(e,"language to be added");let t=[];void 0!==this.properties.getProperty(Q.a.SpeechServiceConnection_TranslationToLanguages,void 0)?(t=this.properties.getProperty(Q.a.SpeechServiceConnection_TranslationToLanguages).split(","),t.includes(e)||(t.push(e),this.properties.setProperty(Q.a.SpeechServiceConnection_TranslationToLanguages,t.join(",")))):(this.properties.setProperty(Q.a.SpeechServiceConnection_TranslationToLanguages,e),t=[e]),this.updateLanguages(t)}close(e,t){m.a.throwIfDisposed(this.privDisposedTranslationRecognizer),Object(c.b)(this.dispose(!0),e,t)}onConnection(){}onDisconnection(){return _e(this,void 0,void 0,(function*(){}))}dispose(e){const t=Object.create(null,{dispose:{get:()=>super.dispose}});return _e(this,void 0,void 0,(function*(){this.privDisposedTranslationRecognizer||(this.privDisposedTranslationRecognizer=!0,e&&(yield this.implRecognizerStop(),yield t.dispose.call(this,e)))}))}createRecognizerConfig(e){return new o.d(e,this.properties)}createServiceRecognizer(e,t,r,n){const i=r;return new ye.a(e,t,i,n,this)}updateLanguages(e){const t=Ee.fromRecognizer(this);t&&(t.setMessageProperty("speech.context","translationcontext",{to:e}),t.sendMessageAsync("event",JSON.stringify({id:"translation",name:"updateLanguage",to:e})))}}var Ae,Oe=r(177);!function(e){e[e.NotRecognized=0]="NotRecognized",e[e.InitialSilenceTimeout=1]="InitialSilenceTimeout",e[e.InitialBabbleTimeout=2]="InitialBabbleTimeout"}(Ae||(Ae={}));var xe=r(136),ke=r(20);class De{constructor(e){this.privReason=e}static fromResult(e){const t=xe.a.fromJSON(e.json);let r=Ae.NotRecognized;switch(t.RecognitionStatus){case ke.a.BabbleTimeout:r=Ae.InitialBabbleTimeout;break;case ke.a.InitialSilenceTimeout:r=Ae.InitialSilenceTimeout;break;default:r=Ae.NotRecognized}return new De(r)}get reason(){return this.privReason}}var Me=r(155),Le=r(174);class Ne{constructor(e,t,r){this.privReason=e,this.privErrorDetails=t,this.privErrorCode=r}get reason(){return this.privReason}get errorDetails(){return this.privErrorDetails}get ErrorCode(){return this.privErrorCode}}var ze=r(42),Be=r(29);class je extends Ne{constructor(e,t,r){super(e,t,r)}static fromResult(e){let t=k.a.Error,r=Be.a.NoError;if(e instanceof B.a&&e.json){const r=xe.a.fromJSON(e.json);t=ze.a.implTranslateCancelResult(r.RecognitionStatus)}return e.properties&&(r=Be.a[e.properties.getProperty(X.CancellationErrorCodePropertyName,Be.a[Be.a.NoError])]),new je(t,e.errorDetails||ze.a.implTranslateErrorDetails(r),r)}}class Ue{constructor(e){this.privGrammerBuilder=e.dynamicGrammar}static fromRecognizer(e){const t=e.internalData;return new Ue(t)}addPhrase(e){this.privGrammerBuilder.addPhrase(e)}addPhrases(e){this.privGrammerBuilder.addPhrase(e)}clear(){this.privGrammerBuilder.clearPhrases()}}var Fe=r(35);class qe extends Fe.b{constructor(){super()}static fromSubscription(e,t,r){m.a.throwIfNullOrWhitespace(e,"subscription"),m.a.throwIfNullOrWhitespace(t,"region");const n=new Fe.b;return n.setProperty(Q.a.Conversation_DialogType,Fe.a.DialogTypes.BotFramework),n.setProperty(Q.a.SpeechServiceConnection_Key,e),n.setProperty(Q.a.SpeechServiceConnection_Region,t),r&&n.setProperty(Q.a.Conversation_ApplicationId,r),n}static fromAuthorizationToken(e,t,r){m.a.throwIfNullOrWhitespace(e,"authorizationToken"),m.a.throwIfNullOrWhitespace(t,"region");const n=new Fe.b;return n.setProperty(Q.a.Conversation_DialogType,Fe.a.DialogTypes.BotFramework),n.setProperty(Q.a.SpeechServiceAuthorization_Token,e),n.setProperty(Q.a.SpeechServiceConnection_Region,t),r&&n.setProperty(Q.a.Conversation_ApplicationId,r),n}static fromHost(e,t,r){m.a.throwIfNullOrUndefined(e,"host");const n=e instanceof URL?e:new URL(`wss://${e}.convai.speech.azure.us`);m.a.throwIfNullOrUndefined(n,"resolvedHost");const i=new Fe.b;return i.setProperty(Q.a.Conversation_DialogType,Fe.a.DialogTypes.BotFramework),i.setProperty(Q.a.SpeechServiceConnection_Host,n.toString()),void 0!==t&&i.setProperty(Q.a.SpeechServiceConnection_Key,t),i}static fromEndpoint(e,t){m.a.throwIfNull(e,"endpoint");const r=new Fe.b;return r.setProperty(Q.a.Conversation_DialogType,Fe.a.DialogTypes.BotFramework),r.setProperty(Q.a.SpeechServiceConnection_Endpoint,e.toString()),void 0!==t&&r.setProperty(Q.a.SpeechServiceConnection_Key,t),r}}class We extends Fe.b{constructor(){super()}static fromSubscription(e,t,r){m.a.throwIfNullOrWhitespace(e,"applicationId"),m.a.throwIfNullOrWhitespace(t,"subscription"),m.a.throwIfNullOrWhitespace(r,"region");const n=new Fe.b;return n.setProperty(Q.a.Conversation_DialogType,Fe.a.DialogTypes.CustomCommands),n.setProperty(Q.a.Conversation_ApplicationId,e),n.setProperty(Q.a.SpeechServiceConnection_Key,t),n.setProperty(Q.a.SpeechServiceConnection_Region,r),n}static fromAuthorizationToken(e,t,r){m.a.throwIfNullOrWhitespace(e,"applicationId"),m.a.throwIfNullOrWhitespace(t,"authorizationToken"),m.a.throwIfNullOrWhitespace(r,"region");const n=new Fe.b;return n.setProperty(Q.a.Conversation_DialogType,Fe.a.DialogTypes.CustomCommands),n.setProperty(Q.a.Conversation_ApplicationId,e),n.setProperty(Q.a.SpeechServiceAuthorization_Token,t),n.setProperty(Q.a.SpeechServiceConnection_Region,r),n}set applicationId(e){m.a.throwIfNullOrWhitespace(e,"value"),this.setProperty(Q.a.Conversation_ApplicationId,e)}get applicationId(){return this.getProperty(Q.a.Conversation_ApplicationId)}}var He=r(141),Ke=r(140),Ve=r(31),Je=r(86),Ge=r(21);class $e extends Ve.a{create(e,t,r){const n=e.parameters.getProperty(Q.a.Conversation_ApplicationId,""),i=e.parameters.getProperty(Q.a.Conversation_DialogType),o=e.parameters.getProperty(Q.a.SpeechServiceConnection_Region),s=e.parameters.getProperty(Q.a.SpeechServiceConnection_RecoLanguage,"en-US"),a=e.parameters.getProperty(Q.a.Conversation_Request_Bot_Status_Messages,"true"),c={};c[Se.a.ConnectionId]=r,c[Ge.a.Format]=e.parameters.getProperty(X.OutputFormatPropertyName,N.a[N.a.Simple]).toLowerCase(),c[Ge.a.Language]=s,c[Ge.a.RequestBotStatusMessages]=a,n&&(c[Ge.a.BotId]=n,i===Fe.a.DialogTypes.CustomCommands&&(c[Se.a.CustomCommandsAppId]=n));const u=i===Fe.a.DialogTypes.CustomCommands?"commands/":"",p=i===Fe.a.DialogTypes.CustomCommands?"v1":i===Fe.a.DialogTypes.BotFramework?"v3":"v0",h={};null!=t.token&&""!==t.token&&(h[t.headerName]=t.token);let d=e.parameters.getProperty(Q.a.SpeechServiceConnection_Endpoint,"");if(!d){const t=Ve.a.getHostSuffix(o),r=e.parameters.getProperty(Q.a.SpeechServiceConnection_Host,`wss://${o}.${$e.BaseUrl}${t}`);d=`${r.endsWith("/")?r:r+"/"}${u}${$e.ApiKey}/${p}`}this.setCommonUrlParams(e,c,d);const l="true"===e.parameters.getProperty("SPEECH-EnableWebsocketCompression","false");return new He.a(d,c,h,new Je.a,Ke.a.fromRecognizerConfig(e),l,r)}}$e.ApiKey="api",$e.BaseUrl="convai.speech";var Ye=r(227),Xe=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};class Qe extends ce{constructor(e,t){const r=e;m.a.throwIfNull(e,"dialogConfig"),super(t,r.properties,new $e),this.isTurnComplete=!0,this.privIsDisposed=!1,this.privProperties=r.properties.clone();const n=this.buildAgentConfig();this.privReco.agentConfig.set(n)}connect(e,t){Object(c.b)(this.privReco.connect(),e,t)}disconnect(e,t){Object(c.b)(this.privReco.disconnect(),e,t)}get authorizationToken(){return this.properties.getProperty(Q.a.SpeechServiceAuthorization_Token)}set authorizationToken(e){m.a.throwIfNullOrWhitespace(e,"token"),this.properties.setProperty(Q.a.SpeechServiceAuthorization_Token,e)}get properties(){return this.privProperties}get speechActivityTemplate(){return this.properties.getProperty(Q.a.Conversation_Speech_Activity_Template)}set speechActivityTemplate(e){this.properties.setProperty(Q.a.Conversation_Speech_Activity_Template,e)}listenOnceAsync(e,t){if(this.isTurnComplete){m.a.throwIfDisposed(this.privIsDisposed);const r=(()=>Xe(this,void 0,void 0,(function*(){yield this.privReco.connect(),yield this.implRecognizerStop(),this.isTurnComplete=!1;const e=new c.a;yield this.privReco.recognize(o.c.Conversation,e.resolve,e.reject);const t=yield e.promise;return yield this.implRecognizerStop(),t})))();r.catch(()=>{this.dispose(!0).catch(()=>{})}),Object(c.b)(r.finally(()=>{this.isTurnComplete=!0}),e,t)}}sendActivityAsync(e,t,r){Object(c.b)(this.privReco.sendMessage(e),t,r)}close(e,t){m.a.throwIfDisposed(this.privIsDisposed),Object(c.b)(this.dispose(!0),e,t)}dispose(e){const t=Object.create(null,{dispose:{get:()=>super.dispose}});return Xe(this,void 0,void 0,(function*(){this.privIsDisposed||e&&(this.privIsDisposed=!0,yield this.implRecognizerStop(),yield t.dispose.call(this,e))}))}createRecognizerConfig(e){return new o.d(e,this.privProperties)}createServiceRecognizer(e,t,r,n){const i=r;return new Ye.a(e,t,i,n,this)}buildAgentConfig(){return{botInfo:{commType:this.properties.getProperty("Conversation_Communication_Type","Default"),commandsCulture:void 0,connectionId:this.properties.getProperty(Q.a.Conversation_Agent_Connection_Id),conversationId:this.properties.getProperty(Q.a.Conversation_Conversation_Id,void 0),fromId:this.properties.getProperty(Q.a.Conversation_From_Id,void 0),ttsAudioFormat:this.properties.getProperty(Q.a.SpeechServiceConnection_SynthOutputFormat,void 0)},version:.2}}}var Ze,et=r(218),tt=r(228);!function(e){e[e.UriQueryParameter=0]="UriQueryParameter"}(Ze||(Ze={}));var rt=r(15);class nt{constructor(e){this.audioContext=null,this.gainNode=null,this.autoUpdateBufferTimer=0,void 0===e&&(e=d.b.getDefaultInputFormat()),this.init(e)}playAudioSample(e,t,r){try{this.ensureInitializedContext();const r=this.formatAudioData(e),n=new Float32Array(this.samples.length+r.length);n.set(this.samples,0),n.set(r,this.samples.length),this.samples=n,t&&t()}catch(e){r&&r(e)}}stopAudio(e,t){null!==this.audioContext&&(this.samples=new Float32Array,clearInterval(this.autoUpdateBufferTimer),this.audioContext.close().then(()=>{e&&e()},e=>{t&&t(e)}),this.audioContext=null)}init(e){this.audioFormat=e,this.samples=new Float32Array}ensureInitializedContext(){if(null===this.audioContext){this.createAudioContext();const e=200;this.autoUpdateBufferTimer=setInterval(()=>{this.updateAudioBuffer()},e)}}createAudioContext(){this.audioContext=d.c.getAudioContext(),this.gainNode=this.audioContext.createGain(),this.gainNode.gain.value=1,this.gainNode.connect(this.audioContext.destination),this.startTime=this.audioContext.currentTime}formatAudioData(e){switch(this.audioFormat.bitsPerSample){case 8:return this.formatArrayBuffer(new Int8Array(e),128);case 16:return this.formatArrayBuffer(new Int16Array(e),32768);case 32:return this.formatArrayBuffer(new Int32Array(e),2147483648);default:throw new rt.b("Only WAVE_FORMAT_PCM (8/16/32 bps) format supported at this time")}}formatArrayBuffer(e,t){const r=new Float32Array(e.length);for(let n=0;n<e.length;n++)r[n]=e[n]/t;return r}updateAudioBuffer(){if(0===this.samples.length)return;const e=this.audioFormat.channels,t=this.audioContext.createBufferSource(),r=this.samples.length/e,n=this.audioContext.createBuffer(e,r,this.audioFormat.samplesPerSec);for(let t=0;t<e;t++){let r=t;const i=n.getChannelData(t);for(let t=0;t<this.samples.length;t++,r+=e)i[t]=this.samples[r]}this.startTime<this.audioContext.currentTime&&(this.startTime=this.audioContext.currentTime),t.buffer=n,t.connect(this.gainNode),t.start(this.startTime),this.startTime+=n.duration,this.samples=new Float32Array}playAudio(e){return function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))}(this,void 0,void 0,(function*(){null===this.audioContext&&this.createAudioContext();const t=this.audioContext.createBufferSource(),r=this.audioContext.destination;yield this.audioContext.decodeAudioData(e,e=>{t.buffer=e,t.connect(r),t.start(0)})}))}}class it{constructor(e,t){this.privId=e,this.privProfileType=t}get profileId(){return this.privId}get profileType(){return this.privProfileType}}class ot{constructor(e,t,r){this.privReason=e,this.privProperties=new Z.a,this.privReason!==$.a.Canceled?t&&(this.privDetails=(e=>JSON.parse(e))(t),"enrolling"===this.privDetails.enrollmentStatus.toLowerCase()&&(this.privReason=$.a.EnrollingVoiceProfile)):(this.privErrorDetails=r,this.privProperties.setProperty(X.CancellationErrorCodePropertyName,Be.a[Be.a.ServiceError]))}get reason(){return this.privReason}get enrollmentsCount(){return this.privDetails.enrollmentsCount}get enrollmentsLengthInSec(){return this.privDetails.enrollmentsLengthInSec}get properties(){return this.privProperties}get enrollmentResultDetails(){return this.privDetails}get errorDetails(){return this.privErrorDetails}static FromIdentificationProfileList(e){const t=[];for(const r of e.value){const e="enrolling"===r.enrollmentStatus.toLowerCase()?$.a.EnrollingVoiceProfile:"enrolled"===r.enrollmentStatus.toLowerCase()?$.a.EnrolledVoiceProfile:$.a.Canceled,n=new ot(e,null,null);n.privDetails=this.getIdentificationDetails(r),t.push(n)}return t}static FromVerificationProfileList(e){const t=[];for(const r of e.value){const e="enrolling"===r.enrollmentStatus.toLowerCase()?$.a.EnrollingVoiceProfile:"enrolled"===r.enrollmentStatus.toLowerCase()?$.a.EnrolledVoiceProfile:$.a.Canceled,n=new ot(e,null,null);n.privDetails=this.getVerificationDetails(r),t.push(n)}return t}static getIdentificationDetails(e){return{audioLengthInSec:e.audioLengthInSec?parseFloat(e.audioLengthInSec):0,audioSpeechLengthInSec:e.audioSpeechLengthInSec?parseFloat(e.audioSpeechLengthInSec):0,enrollmentStatus:e.enrollmentStatus,enrollmentsCount:e.enrollmentsCount||0,enrollmentsLengthInSec:e.enrollmentsLengthInSec?parseFloat(e.enrollmentsLengthInSec):0,enrollmentsSpeechLengthInSec:e.enrollmentsSpeechLengthInSec?parseFloat(e.enrollmentsSpeechLengthInSec):0,profileId:e.profileId||e.identificationProfileId,remainingEnrollmentsSpeechLengthInSec:e.remainingEnrollmentsSpeechLengthInSec?parseFloat(e.remainingEnrollmentsSpeechLengthInSec):0}}static getVerificationDetails(e){return{audioLengthInSec:e.audioLengthInSec?parseFloat(e.audioLengthInSec):0,audioSpeechLengthInSec:e.audioSpeechLengthInSec?parseFloat(e.audioSpeechLengthInSec):0,enrollmentStatus:e.enrollmentStatus,enrollmentsCount:e.enrollmentsCount,enrollmentsLengthInSec:e.enrollmentsLengthInSec?parseFloat(e.enrollmentsLengthInSec):0,enrollmentsSpeechLengthInSec:e.enrollmentsSpeechLengthInSec?parseFloat(e.enrollmentsSpeechLengthInSec):0,profileId:e.profileId||e.verificationProfileId,remainingEnrollmentsCount:e.remainingEnrollments||e.remainingEnrollmentsCount,remainingEnrollmentsSpeechLengthInSec:e.remainingEnrollmentsSpeechLengthInSec?parseFloat(e.remainingEnrollmentsSpeechLengthInSec):0}}}class st extends Ne{constructor(e,t,r){super(e,t,r)}static fromResult(e){const t=k.a.Error;let r=Be.a.NoError;return e.properties&&(r=Be.a[e.properties.getProperty(X.CancellationErrorCodePropertyName,Be.a[Be.a.NoError])]),new st(t,e.errorDetails,r)}}class at{constructor(e,t){this.privReason=e,this.privProperties=new Z.a,e===$.a.Canceled&&(m.a.throwIfNullOrUndefined(t,"statusText"),this.privErrorDetails=t,this.privProperties.setProperty(X.CancellationErrorCodePropertyName,Be.a[Be.a.ServiceError]))}get reason(){return this.privReason}get properties(){return this.privProperties}get errorDetails(){return this.privErrorDetails}}class ct extends Ne{constructor(e,t,r){super(e,t,r)}static fromResult(e){const t=k.a.Error;let r=Be.a.NoError;return e.properties&&(r=Be.a[e.properties.getProperty(X.CancellationErrorCodePropertyName,Be.a[Be.a.NoError])]),new ct(t,e.errorDetails,r)}}class ut extends at{constructor(e,t,r){if(super(e,t),this.privPhrases=[],m.a.throwIfNullOrUndefined(r,"phrase result JSON"),r.value&&r.value[0])for(const e of r.value)this.privPhrases.push(e.passPhrase||e.activationPhrase)}get phrases(){return this.privPhrases}}var pt,ht=r(219),dt=r(220),lt=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};class ft{constructor(e){const t=e;m.a.throwIfNull(t,"speechConfig"),this.privProperties=t.properties.clone(),this.implClientSetup()}get properties(){return this.privProperties}get authorizationToken(){return this.properties.getProperty(Q.a.SpeechServiceAuthorization_Token)}set authorizationToken(e){m.a.throwIfNullOrWhitespace(e,"token"),this.properties.setProperty(Q.a.SpeechServiceAuthorization_Token,e)}createProfileAsync(e,t){return lt(this,void 0,void 0,(function*(){const r=yield this.privAdapter.createProfile(e,t);if(!r.ok)throw new Error(`createProfileAsync failed with code: ${r.status}, message: ${r.statusText}`);const n=r.json;return new it(n.profileId,e)}))}retrieveEnrollmentResultAsync(e){return lt(this,void 0,void 0,(function*(){const t=yield this.privAdapter.getProfileStatus(e);return new ot(t.ok?$.a.EnrolledVoiceProfile:$.a.Canceled,t.data,t.statusText)}))}getAllProfilesAsync(e){return lt(this,void 0,void 0,(function*(){const t=yield this.privAdapter.getProfiles(e);return e===ge.a.TextIndependentIdentification?ot.FromIdentificationProfileList(t.json):ot.FromVerificationProfileList(t.json)}))}getActivationPhrasesAsync(e,t){return lt(this,void 0,void 0,(function*(){const r=yield this.privAdapter.getPhrases(e,t);return new ut(r.ok?$.a.EnrollingVoiceProfile:$.a.Canceled,r.statusText,r.json)}))}enrollProfileAsync(e,t){return lt(this,void 0,void 0,(function*(){const r=t;m.a.throwIfNullOrUndefined(r,"audioConfig");const n=yield this.privAdapter.createEnrollment(e,r);return new ot(n.ok?$.a.EnrolledVoiceProfile:$.a.Canceled,n.data,n.statusText)}))}deleteProfileAsync(e){return lt(this,void 0,void 0,(function*(){const t=yield this.privAdapter.deleteProfile(e);return this.getResult(t,$.a.DeletedVoiceProfile)}))}resetProfileAsync(e){return lt(this,void 0,void 0,(function*(){const t=yield this.privAdapter.resetProfile(e);return this.getResult(t,$.a.ResetVoiceProfile)}))}close(){}implClientSetup(){let e="undefined"!=typeof window?"Browser":"Node",t="unknown",r="unknown";"undefined"!=typeof navigator&&(e=e+"/"+navigator.platform,t=navigator.userAgent,r=navigator.appVersion);const n=new ht.a(new o.a(new o.b(e,t,r)),this.privProperties);this.privAdapter=new dt.a(n)}getResult(e,t){return new at(e.ok?t:$.a.Canceled,e.statusText)}}class vt{constructor(e){if(this.privVoiceProfiles=[],m.a.throwIfNullOrUndefined(e,"VoiceProfiles"),0===e.length)throw new Error("Empty Voice Profiles array");e.forEach(e=>{if(e.profileType!==ge.a.TextIndependentIdentification)throw new Error("Identification model can only be created from Identification profile: "+e.profileId);this.privVoiceProfiles.push(e)})}static fromProfiles(e){return new vt(e)}get voiceProfileIds(){return this.privVoiceProfiles.map(e=>e.profileId).join(",")}}!function(e){e[e.Verify=0]="Verify",e[e.Identify=1]="Identify"}(pt||(pt={}));class gt{constructor(e,t,r,n=$.a.RecognizedSpeaker){if(this.privProperties=new Z.a,this.privReason=n,this.privReason!==$.a.Canceled)if(e===pt.Identify){const e=JSON.parse(t);m.a.throwIfNullOrUndefined(e,"JSON"),this.privProfileId=e.identifiedProfile.profileId,this.privScore=e.identifiedProfile.score}else{const e=JSON.parse(t);m.a.throwIfNullOrUndefined(e,"JSON"),this.privScore=e.score,"accept"!==e.recognitionResult.toLowerCase()&&(this.privReason=$.a.NoMatch),void 0!==r&&""!==r&&(this.privProfileId=r)}else{const e=JSON.parse(t);m.a.throwIfNullOrUndefined(e,"JSON"),this.privErrorDetails=e.statusText,this.privProperties.setProperty(X.CancellationErrorCodePropertyName,Be.a[Be.a.ServiceError])}this.privProperties.setProperty(Q.a.SpeechServiceResponse_JsonResult,t)}get properties(){return this.privProperties}get reason(){return this.privReason}get profileId(){return this.privProfileId}get errorDetails(){return this.privErrorDetails}get score(){return this.privScore}}class mt extends Ne{constructor(e,t,r){super(e,t,r)}static fromResult(e){const t=k.a.Error;let r=Be.a.NoError;return e.properties&&(r=Be.a[e.properties.getProperty(X.CancellationErrorCodePropertyName,Be.a[Be.a.NoError])]),new mt(t,e.errorDetails,r)}}class yt{constructor(e){if(m.a.throwIfNullOrUndefined(e,"VoiceProfile"),e.profileType===ge.a.TextIndependentIdentification)throw new Error("Verification model cannot be created from Identification profile");this.privVoiceProfile=e}static fromProfile(e){return new yt(e)}get voiceProfile(){return this.privVoiceProfile}}var St,wt,bt=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};class Ct{constructor(e,t){const r=e;m.a.throwIfNull(r,"speechConfig"),this.privAudioConfigImpl=t,m.a.throwIfNull(this.privAudioConfigImpl,"audioConfig"),this.privProperties=r.properties.clone(),this.implSRSetup()}get authorizationToken(){return this.properties.getProperty(Q.a.SpeechServiceAuthorization_Token)}set authorizationToken(e){m.a.throwIfNullOrWhitespace(e,"token"),this.properties.setProperty(Q.a.SpeechServiceAuthorization_Token,e)}get properties(){return this.privProperties}recognizeOnceAsync(e){return bt(this,void 0,void 0,(function*(){if(e instanceof vt){const t=this.privAdapter.identifySpeaker(e,this.privAudioConfigImpl);return this.getResult(t,pt.Identify,void 0)}if(e instanceof yt){const t=this.privAdapter.verifySpeaker(e,this.privAudioConfigImpl);return this.getResult(t,pt.Verify,e.voiceProfile.profileId)}throw new Error("SpeakerRecognizer.recognizeOnce: Unexpected model type")}))}close(){}implSRSetup(){let e="undefined"!=typeof window?"Browser":"Node",t="unknown",r="unknown";"undefined"!=typeof navigator&&(e=e+"/"+navigator.platform,t=navigator.userAgent,r=navigator.appVersion);const n=new ht.a(new o.a(new o.b(e,t,r)),this.privProperties);this.privAdapter=new dt.a(n)}getResult(e,t,r){return bt(this,void 0,void 0,(function*(){const n=yield e;return new gt(t,n.data,r,n.ok?$.a.RecognizedSpeaker:$.a.Canceled)}))}}!function(e){e[e.AtStart=0]="AtStart",e[e.Continuous=1]="Continuous"}(St||(St={})),function(e){e[e.Accuracy=0]="Accuracy",e[e.Latency=1]="Latency"}(wt||(wt={}));class Rt{constructor(){this.privProperties=new Z.a,this.privProperties.setProperty(Q.a.SpeechServiceConnection_AtStartLanguageIdPriority,"Latency"),this.privLanguageIdMode=St.AtStart}static fromOpenRange(){const e=new Rt;return e.properties.setProperty(Q.a.SpeechServiceConnection_AutoDetectSourceLanguages,X.AutoDetectSourceLanguagesOpenRangeOptionName),e}static fromLanguages(e){m.a.throwIfArrayEmptyOrWhitespace(e,"languages");const t=new Rt;return t.properties.setProperty(Q.a.SpeechServiceConnection_AutoDetectSourceLanguages,e.join()),t}static fromSourceLanguageConfigs(e){if(e.length<1)throw new Error("Expected non-empty SourceLanguageConfig array.");const t=new Rt,r=[];return e.forEach(e=>{if(r.push(e.language),void 0!==e.endpointId&&""!==e.endpointId){const r=e.language+Q.a.SpeechServiceConnection_EndpointId.toString();t.properties.setProperty(r,e.endpointId)}}),t.properties.setProperty(Q.a.SpeechServiceConnection_AutoDetectSourceLanguages,r.join()),t}get properties(){return this.privProperties}set mode(e){e===St.Continuous?(this.privProperties.setProperty(Q.a.SpeechServiceConnection_RecognitionEndpointVersion,"2"),this.privProperties.setProperty(Q.a.SpeechServiceConnection_ContinuousLanguageIdPriority,"Latency")):(this.privProperties.setProperty(Q.a.SpeechServiceConnection_RecognitionEndpointVersion,"1"),this.privProperties.setProperty(Q.a.SpeechServiceConnection_ContinuousLanguageIdPriority,void 0)),this.privLanguageIdMode=e}set priority(e){e===wt.Accuracy?this.privLanguageIdMode!==St.Continuous&&this.privProperties.setProperty(Q.a.SpeechServiceConnection_AtStartLanguageIdPriority,"Accuracy"):(this.privProperties.setProperty(Q.a.SpeechServiceConnection_ContinuousLanguageIdPriority,"Latency"),this.privProperties.setProperty(Q.a.SpeechServiceConnection_AtStartLanguageIdPriority,"Latency"))}}class Pt{constructor(e,t){m.a.throwIfNullOrUndefined(e,"language"),m.a.throwIfNullOrUndefined(t,"languageDetectionConfidence"),this.privLanguage=e,this.privLanguageDetectionConfidence=t}static fromResult(e){return new Pt(e.language,e.languageDetectionConfidence)}get language(){return this.privLanguage}get languageDetectionConfidence(){return this.privLanguageDetectionConfidence}}class It{constructor(e,t){m.a.throwIfNullOrUndefined(e,"language"),this.privLanguage=e,this.privEndpointId=t}static fromLanguage(e,t){return new It(e,t)}get language(){return this.privLanguage}get endpointId(){return this.privEndpointId}}var Et=r(99);class _t extends Et.a{static get host(){return _t.privHost}static get apiVersion(){return _t.privApiVersion}static get clientAppId(){return _t.privClientAppId}static get defaultLanguageCode(){return _t.privDefaultLanguageCode}static get restPath(){return _t.privRestPath}static get webSocketPath(){return _t.privWebSocketPath}static get speechHost(){return _t.privSpeechHost}static get speechPath(){return _t.privSpeechPath}static get transcriptionEventKeys(){return _t.privTranscriptionEventKeys}}_t.privHost="dev.microsofttranslator.com",_t.privRestPath="/capito/room",_t.privApiVersion="2.0",_t.privDefaultLanguageCode="en-US",_t.privClientAppId="FC539C22-1767-4F1F-84BC-B4D811114F15",_t.privWebSocketPath="/capito/translate",_t.privSpeechHost="{region}.s2s.speech.microsoft.com",_t.privSpeechPath="/speech/translation/cognitiveservices/v1",_t.privTranscriptionEventKeys=["iCalUid","callId","organizer","FLAC","MTUri","DifferentiateGuestSpeakers","audiorecording","Threadid","OrganizerMri","OrganizerTenantId","UserToken"];class Tt{constructor(e=[],t){this.participants=e,this.meId=t}addOrUpdateParticipant(e){if(void 0===e)return;const t=this.getParticipantIndex(e.id);return t>-1?this.participants.splice(t,1,e):this.participants.push(e),this.getParticipant(e.id)}getParticipantIndex(e){return this.participants.findIndex(t=>t.id===e)}getParticipant(e){return this.participants.find(t=>t.id===e)}deleteParticipant(e){this.participants=this.participants.filter(t=>t.id!==e)}get host(){return this.participants.find(e=>!0===e.isHost)}get me(){return this.getParticipant(this.meId)}}const At="instant_message",Ot="partial",xt="participant_command",kt="ChangeNickname",Dt="SetMute",Mt="SetProfanityFiltering",Lt="SetTranslateToLanguages",Nt="SetUseTTS";var zt=r(57);class Bt{constructor(){this.privRequestParams=_t.configParams,this.privErrors=_t.restErrors,this.privHost=_t.host,this.privApiVersion=_t.apiVersion,this.privRestPath=_t.restPath,this.privRestAdapter=new zt.a({})}createOrJoin(e,t,r,n){try{m.a.throwIfNullOrUndefined(e,"args");const i=e.getProperty(Q.a.SpeechServiceConnection_RecoLanguage,_t.defaultLanguageCode),o=e.getProperty(Q.a.ConversationTranslator_Name,"conversation_host"),s=e.getProperty(Q.a.ConversationTranslator_Host,this.privHost),a=e.getProperty(Q.a.ConversationTranslator_CorrelationId),c=e.getProperty(Q.a.SpeechServiceConnection_Key),u=e.getProperty(Q.a.SpeechServiceConnection_Region),p=e.getProperty(Q.a.SpeechServiceAuthorization_Token);m.a.throwIfNullOrWhitespace(i,"languageCode"),m.a.throwIfNullOrWhitespace(o,"nickname"),m.a.throwIfNullOrWhitespace(s,"endpointHost");const h={};h[this.privRequestParams.apiVersion]=this.privApiVersion,h[this.privRequestParams.languageCode]=i,h[this.privRequestParams.nickname]=o;const d={};a&&(d[this.privRequestParams.correlationId]=a),d[this.privRequestParams.clientAppId]=_t.clientAppId,void 0!==t?h[this.privRequestParams.roomId]=t:(m.a.throwIfNullOrUndefined(u,this.privErrors.authInvalidSubscriptionRegion),d[this.privRequestParams.subscriptionRegion]=u,c?d[this.privRequestParams.subscriptionKey]=c:p?d[this.privRequestParams.authorization]="Bearer "+p:m.a.throwIfNullOrUndefined(c,this.privErrors.authInvalidSubscriptionKey));const l={};l.headers=d,this.privRestAdapter.options=l;const f=`https://${s}${this.privRestPath}`;this.privRestAdapter.request(zt.b.Post,f,h,null).then(e=>{const t=zt.a.extractHeaderValue(this.privRequestParams.requestId,e.headers);if(!e.ok){if(n){let r,i=this.privErrors.invalidCreateJoinConversationResponse.replace("{status}",e.status.toString());try{r=JSON.parse(e.data),i+=` [${r.error.code}: ${r.error.message}]`}catch(t){i+=` [${e.data}]`}t&&(i+=" "+t),n(i)}return}const i=JSON.parse(e.data);if(i&&(i.requestId=t),r){try{r(i)}catch(e){n&&n(e)}r=void 0}}).catch(()=>{})}catch(e){if(n)if(e instanceof Error){const t=e;n(t.name+": "+t.message)}else n(e)}}leave(e,t){return new Promise((r,n)=>{try{m.a.throwIfNullOrUndefined(e,this.privErrors.invalidArgs.replace("{arg}","config")),m.a.throwIfNullOrWhitespace(t,this.privErrors.invalidArgs.replace("{arg}","token"));const n=e.getProperty(Q.a.ConversationTranslator_Host,this.privHost),i=e.getProperty(Q.a.ConversationTranslator_CorrelationId),o={};o[this.privRequestParams.apiVersion]=this.privApiVersion,o[this.privRequestParams.sessionToken]=t;const s={};i&&(s[this.privRequestParams.correlationId]=i);const a={};a.headers=s,this.privRestAdapter.options=a;const c=`https://${n}${this.privRestPath}`;this.privRestAdapter.request(zt.b.Delete,c,o,null).then(e=>{e.ok,r()}).catch(()=>{})}catch(e){if(e instanceof Error){const t=e;n(t.name+": "+t.message)}else n(e)}})}}var jt=r(270),Ut=r(239);class Ft extends we.a{constructor(e,t,r,n){super(e,t,r,n);const i=JSON.parse(this.textBody);void 0!==i.type&&(this.privConversationMessageType=i.type)}get conversationMessageType(){return this.privConversationMessageType}}class qt{toConnectionMessage(e){const t=new c.a;try{if(e.messageType===we.b.Text){const r=new Ft(e.messageType,e.textContent,{},e.id);t.resolve(r)}else e.messageType===we.b.Binary&&t.resolve(new Ft(e.messageType,e.binaryContent,void 0,e.id))}catch(e){t.reject("Error formatting the message. Error: "+e)}return t.promise}fromConnectionMessage(e){const t=new c.a;try{if(e.messageType===we.b.Text){const r=""+(e.textBody?e.textBody:"");t.resolve(new Ut.a(we.b.Text,r,e.id))}}catch(e){t.reject("Error formatting the message. "+e)}return t.promise}}class Wt extends Ve.a{create(e,t,r){const n=e.parameters.getProperty(Q.a.ConversationTranslator_Host,_t.host),i=e.parameters.getProperty(Q.a.ConversationTranslator_CorrelationId,Object(s.a)()),o=`wss://${n}${_t.webSocketPath}`,a=e.parameters.getProperty(Q.a.ConversationTranslator_Token,void 0);m.a.throwIfNullOrUndefined(a,"token");const c={};c[_t.configParams.apiVersion]=_t.apiVersion,c[_t.configParams.token]=a,c[_t.configParams.correlationId]=i;const u="true"===e.parameters.getProperty("SPEECH-EnableWebsocketCompression","false");return new He.a(o,c,{},new qt,Ke.a.fromRecognizerConfig(e),u,r)}}var Ht=r(157),Kt=r(92);class Vt extends Kt.a{}class Jt extends M.a{constructor(e,t){super(t),this.privExpirationTime=e}get expirationTime(){return this.privExpirationTime}}class Gt extends J.a{constructor(e,t,r,n,i,o,s,a,c,u,p){super(t,n,i,o,s,a,c,u,p),this.privId=e,this.privOrigLang=r}get participantId(){return this.privId}get originalLang(){return this.privOrigLang}}class $t{constructor(e){this.privIsDisposed=!1,this.privDetachables=new Array,this.privSessionId=e,this.privRequestId=Object(s.b)(),this.privRequestCompletionDeferral=new c.a}get sessionId(){return this.privSessionId}get requestId(){return this.privRequestId}get completionPromise(){return this.privRequestCompletionDeferral.promise}onPreConnectionStart(e,t){this.privSessionId=t}onAuthCompleted(e){e&&this.onComplete()}onConnectionEstablishCompleted(e){200!==e&&403===e&&this.onComplete()}onServiceTurnEndResponse(e){e?this.privRequestId=Object(s.b)():this.onComplete()}dispose(){return function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))}(this,void 0,void 0,(function*(){if(!this.privIsDisposed){this.privIsDisposed=!0;for(const e of this.privDetachables)yield e.detach()}}))}onComplete(){}}class Yt extends M.a{constructor(e,t){super(t),this.privIsMuted=e}get isMuted(){return this.privIsMuted}}class Xt extends M.a{constructor(e,t){super(t),this.privIsLocked=e}get isMuted(){return this.privIsLocked}}class Qt extends M.a{constructor(e,t){super(t),this.privParticipant=e}get participant(){return this.privParticipant}}class Zt extends M.a{constructor(e,t,r,n){super(n),this.privKey=t,this.privValue=r,this.privParticipantId=e}get value(){return this.privValue}get key(){return this.privKey}get id(){return this.privParticipantId}}class er extends M.a{constructor(e,t,r,n,i,o,s,a,c){super(c),this.privRoomId=e,this.privSessionToken=t,this.privTranslateTo=r,this.privProfanityFilter=n,this.privRoomProfanityFilter=i,this.privIsRoomLocked=o,this.privIsRoomLocked=s,this.privParticipants=a}get sessionToken(){return this.privSessionToken}get conversationId(){return this.privRoomId}get translateTo(){return this.privTranslateTo}get profanityFilter(){return this.privProfanityFilter}get roomProfanityFilter(){return this.privRoomProfanityFilter}get isRoomLocked(){return this.privIsRoomLocked}get isMuteAll(){return this.privIsMuteAll}get participants(){return this.privParticipants}}class tr{constructor(e,t,r){this.privPayload=t,this.privCommand=e,this.privSessionId=r}get payload(){return this.privPayload}get command(){return this.privCommand}get sessionId(){return this.privSessionId}}class rr{constructor(e){this.privCommandResponse=(e=>JSON.parse(e))(e)}get type(){return this.privCommandResponse.type}get command(){return this.privCommandResponse.command}get id(){return this.privCommandResponse.id}get nickname(){return this.privCommandResponse.nickname}get participantId(){return this.privCommandResponse.participantId}get roomid(){return this.privCommandResponse.roomid}get value(){return this.privCommandResponse.value}get token(){return this.privCommandResponse.token}static fromJSON(e){return new rr(e)}}class nr{constructor(e){this.privParticipantsPayloadResponse=(e=>JSON.parse(e))(e)}get roomid(){return this.privParticipantsPayloadResponse.roomid}get id(){return this.privParticipantsPayloadResponse.id}get command(){return this.privParticipantsPayloadResponse.command}get participants(){return this.privParticipantsPayloadResponse.participants}get token(){return this.privParticipantsPayloadResponse.token}get translateTo(){return this.privParticipantsPayloadResponse.translateTo}get profanityFilter(){return this.privParticipantsPayloadResponse.profanityFilter}get roomProfanityFilter(){return this.privParticipantsPayloadResponse.roomProfanityFilter}get roomLocked(){return this.privParticipantsPayloadResponse.roomLocked}get muteAll(){return this.privParticipantsPayloadResponse.muteAll}get type(){return this.privParticipantsPayloadResponse.type}static fromJSON(e){return new nr(e)}}class ir{constructor(e){this.privParticipantPayloadResponse=(e=>JSON.parse(e))(e)}get nickname(){return this.privParticipantPayloadResponse.nickname}get locale(){return this.privParticipantPayloadResponse.locale}get usetts(){return this.privParticipantPayloadResponse.usetts}get ismuted(){return this.privParticipantPayloadResponse.ismuted}get ishost(){return this.privParticipantPayloadResponse.ishost}get participantId(){return this.privParticipantPayloadResponse.participantId}get avatar(){return this.privParticipantPayloadResponse.avatar}static fromJSON(e){return new ir(e)}}class or{constructor(e){this.privSpeechResponse=(e=>JSON.parse(e))(e)}get recognition(){return this.privSpeechResponse.recognition}get translations(){return this.privSpeechResponse.translations}get id(){return this.privSpeechResponse.id}get language(){return this.privSpeechResponse.language}get nickname(){return this.privSpeechResponse.nickname}get participantId(){return this.privSpeechResponse.participantId}get roomid(){return this.privSpeechResponse.roomid}get timestamp(){return this.privSpeechResponse.timestamp}get type(){return this.privSpeechResponse.type}get isFinal(){return"final"===this.privSpeechResponse.type}static fromJSON(e){return new or(e)}}class sr{constructor(e){this.privTextResponse=(e=>JSON.parse(e))(e)}get originalText(){return this.privTextResponse.originalText}get translations(){return this.privTextResponse.translations}get id(){return this.privTextResponse.id}get language(){return this.privTextResponse.language}get nickname(){return this.privTextResponse.nickname}get participantId(){return this.privTextResponse.participantId}get roomid(){return this.privTextResponse.roomid}get timestamp(){return this.privTextResponse.timestamp}get type(){return this.privTextResponse.type}static fromJSON(e){return new sr(e)}}var ar=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};class cr extends ie.a{constructor(e,t,r,n,i){super(e,t,r,n,i),this.privConnectionConfigPromise=void 0,this.privLastPartialUtteranceId="",this.privConversationServiceConnector=i,this.privConversationAuthentication=e,this.receiveMessageOverride=()=>this.receiveConversationMessageOverride(),this.recognizeOverride=()=>this.noOp(),this.postConnectImplOverride=e=>this.conversationConnectImpl(e),this.configConnectionOverride=()=>this.configConnection(),this.disconnectOverride=()=>this.privDisconnect(),this.privConversationRequestSession=new $t(Object(s.b)()),this.privConversationConnectionFactory=t,this.privConversationIsDisposed=!1}isDisposed(){return super.isDisposed()||this.privConversationIsDisposed}dispose(e){const t=Object.create(null,{dispose:{get:()=>super.dispose}});return ar(this,void 0,void 0,(function*(){if(this.privConversationIsDisposed=!0,void 0!==this.privConnectionConfigPromise){const t=yield this.privConnectionConfigPromise;yield t.dispose(e)}yield t.dispose.call(this,e)}))}sendMessage(e){return ar(this,void 0,void 0,(function*(){return(yield this.fetchConnection()).send(new Ft(we.b.Text,e))}))}sendMessageAsync(e){return ar(this,void 0,void 0,(function*(){const t=yield this.fetchConnection();yield t.send(new Ft(we.b.Text,e))}))}privDisconnect(){if(!this.terminateMessageLoop)return this.cancelRecognition(this.privConversationRequestSession.sessionId,this.privConversationRequestSession.requestId,k.a.Error,Be.a.NoError,"Disconnecting"),this.terminateMessageLoop=!0,Promise.resolve()}processTypeSpecificMessages(){return ar(this,void 0,void 0,(function*(){return!0}))}cancelRecognition(e,t,r,n,i){this.terminateMessageLoop=!0;const o=new Vt(r,i,n,void 0,e);try{this.privConversationServiceConnector.canceled&&this.privConversationServiceConnector.canceled(this.privConversationServiceConnector,o)}catch(e){}}noOp(){}conversationConnectImpl(e){return ar(this,void 0,void 0,(function*(){return this.privConnectionLoop=this.startMessageLoop(),e}))}receiveConversationMessageOverride(){return ar(this,void 0,void 0,(function*(){if(this.isDisposed()||this.terminateMessageLoop)return Promise.resolve();const e=new c.a;try{const t=yield this.fetchConnection(),r=yield t.read();if(this.isDisposed()||this.terminateMessageLoop)return e.resolve(),Promise.resolve();if(!r)return this.receiveConversationMessageOverride();const n=this.privConversationRequestSession.sessionId;let i=!1;try{switch(r.conversationMessageType.toLowerCase()){case"info":case"participant_command":case"command":const e=rr.fromJSON(r.textBody);switch(e.command.toLowerCase()){case"participantlist":const t=nr.fromJSON(r.textBody),i=t.participants.map(e=>({avatar:e.avatar,displayName:e.nickname,id:e.participantId,isHost:e.ishost,isMuted:e.ismuted,isUsingTts:e.usetts,preferredLanguage:e.locale}));this.privConversationServiceConnector.participantsListReceived&&this.privConversationServiceConnector.participantsListReceived(this.privConversationServiceConnector,new er(t.roomid,t.token,t.translateTo,t.profanityFilter,t.roomProfanityFilter,t.roomLocked,t.muteAll,i,n));break;case"settranslatetolanguages":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new Zt(e.participantId,Lt,e.value,n));break;case"setprofanityfiltering":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new Zt(e.participantId,Mt,e.value,n));break;case"setmute":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new Zt(e.participantId,Dt,e.value,n));break;case"setmuteall":this.privConversationServiceConnector.muteAllCommandReceived&&this.privConversationServiceConnector.muteAllCommandReceived(this.privConversationServiceConnector,new Yt(e.value,n));break;case"roomexpirationwarning":this.privConversationServiceConnector.conversationExpiration&&this.privConversationServiceConnector.conversationExpiration(this.privConversationServiceConnector,new Jt(e.value,this.privConversationRequestSession.sessionId));break;case"setusetts":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new Zt(e.participantId,Nt,e.value,n));break;case"setlockstate":this.privConversationServiceConnector.lockRoomCommandReceived&&this.privConversationServiceConnector.lockRoomCommandReceived(this.privConversationServiceConnector,new Xt(e.value,n));break;case"changenickname":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new Zt(e.participantId,kt,e.nickname,n));break;case"joinsession":const o=ir.fromJSON(r.textBody),s={avatar:o.avatar,displayName:o.nickname,id:o.participantId,isHost:o.ishost,isMuted:o.ismuted,isUsingTts:o.usetts,preferredLanguage:o.locale};this.privConversationServiceConnector.participantJoinCommandReceived&&this.privConversationServiceConnector.participantJoinCommandReceived(this.privConversationServiceConnector,new Qt(s,n));break;case"leavesession":const a={id:e.participantId};this.privConversationServiceConnector.participantLeaveCommandReceived&&this.privConversationServiceConnector.participantLeaveCommandReceived(this.privConversationServiceConnector,new Qt(a,n));break;case"disconnectsession":e.participantId;break;case"token":const c=new se.a(()=>{const t=e.token;return Promise.resolve(t)},()=>{const t=e.token;return Promise.resolve(t)});this.authentication=c}break;case"partial":case"final":const t=or.fromJSON(r.textBody),o=new Gt(t.participantId,this.getTranslations(t.translations),t.language,void 0,void 0,t.recognition,void 0,void 0,r.textBody,void 0);t.isFinal?((void 0!==o.text&&o.text.length>0||t.id===this.privLastPartialUtteranceId)&&(i=!0),i&&this.privConversationServiceConnector.translationReceived&&this.privConversationServiceConnector.translationReceived(this.privConversationServiceConnector,new tr("final",o,n))):void 0!==o.text&&(this.privLastPartialUtteranceId=t.id,this.privConversationServiceConnector.translationReceived&&this.privConversationServiceConnector.translationReceived(this.privConversationServiceConnector,new tr(Ot,o,n)));break;case"translated_message":const s=sr.fromJSON(r.textBody),a=new Gt(s.participantId,this.getTranslations(s.translations),s.language,void 0,void 0,s.originalText,void 0,void 0,void 0,r.textBody,void 0);this.privConversationServiceConnector.translationReceived&&this.privConversationServiceConnector.translationReceived(this.privConversationServiceConnector,new tr(At,a,n))}}catch(e){}return this.receiveConversationMessageOverride()}catch(e){this.terminateMessageLoop=!0}return e.promise}))}startMessageLoop(){return ar(this,void 0,void 0,(function*(){if(this.isDisposed())return Promise.resolve();this.terminateMessageLoop=!1;const e=this.receiveConversationMessageOverride();try{return yield e}catch(e){return this.cancelRecognition(this.privRequestSession?this.privRequestSession.sessionId:"",this.privRequestSession?this.privRequestSession.requestId:"",k.a.Error,Be.a.RuntimeError,e),null}}))}configConnection(){return this.isDisposed()?Promise.resolve(void 0):void 0!==this.privConnectionConfigPromise?this.privConnectionConfigPromise.then(e=>e.state()===Ht.a.Disconnected?(this.privConnectionId=null,this.privConnectionConfigPromise=void 0,this.configConnection()):this.privConnectionConfigPromise,()=>(this.privConnectionId=null,this.privConnectionConfigPromise=void 0,this.configConnection())):this.terminateMessageLoop?Promise.resolve(void 0):(this.privConnectionConfigPromise=this.connectImpl().then(e=>e),this.privConnectionConfigPromise)}getTranslations(e){let t;if(void 0!==e){t=new Oe.a;for(const r of e)t.set(r.lang,r.translation)}return t}}var ur,pr=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};class hr extends ce{constructor(e,t,r){const n=t;m.a.throwIfNull(n,"speechConfig");const i=e;m.a.throwIfNull(i,"conversationImpl"),super(r,n.properties,new Wt),this.privConversation=i,this.privIsDisposed=!1,this.privProperties=n.properties.clone(),this.privConnection=Ee.fromRecognizer(this),this.privSetTimeout="undefined"!=typeof Blob&&"undefined"!=typeof Worker?jt.a.setTimeout:setTimeout,this.privClearTimeout="undefined"!=typeof Blob&&"undefined"!=typeof Worker?jt.a.clearTimeout:clearTimeout}set connected(e){this.privConnection.connected=e}set disconnected(e){this.privConnection.disconnected=e}get speechRecognitionLanguage(){return this.privSpeechRecognitionLanguage}get properties(){return this.privProperties}isDisposed(){return this.privIsDisposed}connect(e,t,r){try{m.a.throwIfDisposed(this.privIsDisposed),m.a.throwIfNullOrWhitespace(e,"token"),this.privReco.conversationTranslatorToken=e,this.resetConversationTimeout(),this.privReco.connectAsync(t,r)}catch(e){if(r)if(e instanceof Error){const t=e;r(t.name+": "+t.message)}else r(e)}}disconnect(e,t){try{m.a.throwIfDisposed(this.privIsDisposed),void 0!==this.privTimeoutToken&&this.privClearTimeout(this.privTimeoutToken),this.privReco.disconnect().then(()=>{e&&e()},e=>{t&&t(e)})}catch(e){if(t)if(e instanceof Error){const r=e;t(r.name+": "+r.message)}else t(e);this.dispose(!0).catch(e=>{h.a.instance.onEvent(new b.a(e))})}}sendRequest(e,t,r){try{m.a.throwIfDisposed(this.privIsDisposed),this.sendMessage(e,t,r)}catch(e){if(r)if(e instanceof Error){const t=e;r(t.name+": "+t.message)}else r(e);this.dispose(!0).catch(e=>{h.a.instance.onEvent(new b.a(e))})}}close(){return pr(this,void 0,void 0,(function*(){this.privIsDisposed||(this.privConnection&&(this.privConnection.closeConnection(),this.privConnection.close()),this.privConnection=void 0,yield this.dispose(!0))}))}dispose(e){const t=Object.create(null,{dispose:{get:()=>super.dispose}});return pr(this,void 0,void 0,(function*(){this.privIsDisposed||e&&(void 0!==this.privTimeoutToken&&this.privClearTimeout(this.privTimeoutToken),this.privIsDisposed=!0,this.privConnection&&(this.privConnection.closeConnection(),this.privConnection.close(),this.privConnection=void 0),yield t.dispose.call(this,e))}))}createRecognizerConfig(e){return new o.d(e,this.privProperties)}createServiceRecognizer(e,t,r,n){return new cr(e,t,r,n,this)}sendMessage(e,t,r){((e,t,r)=>{void 0!==e?e.then(()=>{try{t&&t()}catch(e){r&&r(`'Unhandled error on promise callback: ${e}'`)}},e=>{try{r&&r(e)}catch(e){}}):r&&r("Null promise")})(this.privReco.sendMessageAsync(e),t,r),this.resetConversationTimeout()}resetConversationTimeout(){void 0!==this.privTimeoutToken&&this.privClearTimeout(this.privTimeoutToken),this.privTimeoutToken=this.privSetTimeout(()=>{this.sendRequest(this.privConversation.getKeepAlive())},6e4)}}class dr extends M.a{constructor(e,t,r){super(r),this.privReason=e,this.privParticipant=t}get reason(){return this.privReason}get participants(){return this.privParticipant}}!function(e){e[e.JoinedConversation=0]="JoinedConversation",e[e.LeftConversation=1]="LeftConversation",e[e.Updated=2]="Updated"}(ur||(ur={}));class lr extends L.a{constructor(e,t,r){super(t,r),this.privResult=e}get result(){return this.privResult}}class fr{constructor(e){this.privUserId=e}get userId(){return this.privUserId}}class vr{constructor(e,t,r,n,i,o,s,a){this.privId=e,this.privAvatar=t,this.privDisplayName=r,this.privIsHost=n,this.privIsMuted=i,this.privIsUsingTts=o,this.privPreferredLanguage=s,this.privVoice=a,this.privProperties=new Z.a}get avatar(){return this.privAvatar}get displayName(){return this.privDisplayName}get id(){return this.privId}get preferredLanguage(){return this.privPreferredLanguage}get isHost(){return this.privIsHost}get isMuted(){return this.privIsMuted}get isUsingTts(){return this.privIsUsingTts}get voice(){return this.privVoice}get properties(){return this.privProperties}static From(e,t,r){return new vr(e,"",e,!1,!1,!1,t,r)}}var gr=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};class mr{constructor(){}static createConversationAsync(e,t,r,n){let i,o,s;return m.a.throwIfNullOrUndefined(e,_t.restErrors.invalidArgs.replace("{arg}","config")),m.a.throwIfNullOrUndefined(e.region,_t.restErrors.invalidArgs.replace("{arg}","SpeechServiceConnection_Region")),e.subscriptionKey||e.getProperty(Q.a[Q.a.SpeechServiceAuthorization_Token])||m.a.throwIfNullOrUndefined(e.subscriptionKey,_t.restErrors.invalidArgs.replace("{arg}","SpeechServiceConnection_Key")),"string"==typeof t?(i=new yr(e,t),Object(c.b)((()=>gr(this,void 0,void 0,(function*(){})))(),r,n)):(i=new yr(e),o=t,s=r,i.createConversationAsync(()=>{o&&o()},e=>{s&&s(e)})),i}}class yr extends mr{constructor(e,t){if(super(),this.privErrors=_t.restErrors,this.onConnected=e=>{var t;this.privIsConnected=!0;try{(null===(t=this.privConversationTranslator)||void 0===t?void 0:t.sessionStarted)&&this.privConversationTranslator.sessionStarted(this.privConversationTranslator,e)}catch(e){}},this.onDisconnected=e=>{var t;try{(null===(t=this.privConversationTranslator)||void 0===t?void 0:t.sessionStopped)&&this.privConversationTranslator.sessionStopped(this.privConversationTranslator,e)}catch(e){}finally{this.close(!1)}},this.onCanceled=(e,t)=>{var r;try{(null===(r=this.privConversationTranslator)||void 0===r?void 0:r.canceled)&&this.privConversationTranslator.canceled(this.privConversationTranslator,t)}catch(t){}},this.onParticipantUpdateCommandReceived=(e,t)=>{try{const e=this.privParticipants.getParticipant(t.id);if(void 0!==e){switch(t.key){case kt:e.displayName=t.value;break;case Nt:e.isUsingTts=t.value;break;case Mt:e.profanity=t.value;break;case Dt:e.isMuted=t.value;break;case Lt:e.translateToLanguages=t.value}this.privParticipants.addOrUpdateParticipant(e),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new dr(ur.Updated,[this.toParticipant(e)],t.sessionId))}}catch(t){}},this.onLockRoomCommandReceived=()=>{},this.onMuteAllCommandReceived=(e,t)=>{try{this.privParticipants.participants.forEach(e=>e.isMuted=!e.isHost&&t.isMuted),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new dr(ur.Updated,this.toParticipants(!1),t.sessionId))}catch(t){}},this.onParticipantJoinCommandReceived=(e,t)=>{try{const e=this.privParticipants.addOrUpdateParticipant(t.participant);void 0!==e&&this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new dr(ur.JoinedConversation,[this.toParticipant(e)],t.sessionId))}catch(t){}},this.onParticipantLeaveCommandReceived=(e,t)=>{try{const e=this.privParticipants.getParticipant(t.participant.id);void 0!==e&&(this.privParticipants.deleteParticipant(t.participant.id),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new dr(ur.LeftConversation,[this.toParticipant(e)],t.sessionId)))}catch(t){}},this.onTranslationReceived=(e,t)=>{try{switch(t.command){case"final":this.privConversationTranslator&&this.privConversationTranslator.transcribed(this.privConversationTranslator,new lr(t.payload,void 0,t.sessionId));break;case Ot:this.privConversationTranslator&&this.privConversationTranslator.transcribing(this.privConversationTranslator,new lr(t.payload,void 0,t.sessionId));break;case At:this.privConversationTranslator&&this.privConversationTranslator.textMessageReceived(this.privConversationTranslator,new lr(t.payload,void 0,t.sessionId))}}catch(t){}},this.onParticipantsListReceived=(e,t)=>{var r;try{if(void 0!==t.sessionToken&&null!==t.sessionToken&&(this.privRoom.token=t.sessionToken),this.privParticipants.participants=[...t.participants],void 0!==this.privParticipants.me&&(this.privIsReady=!0),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new dr(ur.JoinedConversation,this.toParticipants(!0),t.sessionId)),this.me.isHost){const e=null===(r=this.privConversationTranslator)||void 0===r?void 0:r.properties.getProperty(Q.a.ConversationTranslator_Name);void 0!==e&&e.length>0&&e!==this.me.displayName&&this.changeNicknameAsync(e)}}catch(t){}},this.onConversationExpiration=(e,t)=>{try{this.privConversationTranslator&&this.privConversationTranslator.conversationExpiration(this.privConversationTranslator,t)}catch(t){}},this.privIsConnected=!1,this.privIsDisposed=!1,this.privConversationId="",this.privProperties=new Z.a,this.privManager=new Bt,e.getProperty(Q.a[Q.a.SpeechServiceConnection_RecoLanguage])||e.setProperty(Q.a[Q.a.SpeechServiceConnection_RecoLanguage],_t.defaultLanguageCode),this.privLanguage=e.getProperty(Q.a[Q.a.SpeechServiceConnection_RecoLanguage]),t)this.privConversationId=t;else{0===e.targetLanguages.length&&e.addTargetLanguage(this.privLanguage),e.getProperty(Q.a[Q.a.SpeechServiceResponse_ProfanityOption])||e.setProfanity(ee.a.Masked);let t=e.getProperty(Q.a[Q.a.ConversationTranslator_Name]);(null==t||t.length<=1||t.length>50)&&(t="Host"),e.setProperty(Q.a[Q.a.ConversationTranslator_Name],t)}this.privConfig=e;const r=e;m.a.throwIfNull(r,"speechConfig"),this.privProperties=r.properties.clone(),this.privIsConnected=!1,this.privParticipants=new Tt,this.privIsReady=!1,this.privTextMessageMaxLength=1e3}get room(){return this.privRoom}get connection(){return this.privConversationRecognizer}get config(){return this.privConfig}get conversationId(){return this.privRoom?this.privRoom.roomId:this.privConversationId}get properties(){return this.privProperties}get speechRecognitionLanguage(){return this.privLanguage}get isMutedByHost(){var e,t;return!(null===(e=this.privParticipants.me)||void 0===e?void 0:e.isHost)&&(null===(t=this.privParticipants.me)||void 0===t?void 0:t.isMuted)}get isConnected(){return this.privIsConnected&&this.privIsReady}get participants(){return this.toParticipants(!0)}get me(){return this.toParticipant(this.privParticipants.me)}get host(){return this.toParticipant(this.privParticipants.host)}get transcriberRecognizer(){return this.privTranscriberRecognizer}get conversationInfo(){const e=this.conversationId,t=this.participants.map(e=>({id:e.id,preferredLanguage:e.preferredLanguage,voice:e.voice})),r={};for(const e of _t.transcriptionEventKeys){const t=this.properties.getProperty(e,"");""!==t&&(r[e]=t)}return{id:e,participants:t,conversationProperties:r}}get canSend(){var e;return this.privIsConnected&&!(null===(e=this.privParticipants.me)||void 0===e?void 0:e.isMuted)}get canSendAsHost(){var e;return this.privIsConnected&&(null===(e=this.privParticipants.me)||void 0===e?void 0:e.isHost)}get authorizationToken(){return this.privToken}set authorizationToken(e){m.a.throwIfNullOrWhitespace(e,"authorizationToken"),this.privToken=e}set conversationTranslator(e){this.privConversationTranslator=e}createConversationAsync(e,t){try{this.privConversationRecognizer&&this.handleError(new Error(this.privErrors.permissionDeniedStart),t),this.privManager.createOrJoin(this.privProperties,void 0,r=>{r||this.handleError(new Error(this.privErrors.permissionDeniedConnect),t),this.privRoom=r,this.handleCallback(e,t)},e=>{this.handleError(e,t)})}catch(e){this.handleError(e,t)}}startConversationAsync(e,t){try{this.privConversationRecognizer&&this.handleError(new Error(this.privErrors.permissionDeniedStart),t),m.a.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedConnect),this.privParticipants.meId=this.privRoom.participantId,this.privConversationRecognizer=class{static fromConfig(e,t,r){return new hr(e,t,r)}}.fromConfig(this,this.privConfig),this.privConversationRecognizer.connected=this.onConnected,this.privConversationRecognizer.disconnected=this.onDisconnected,this.privConversationRecognizer.canceled=this.onCanceled,this.privConversationRecognizer.participantUpdateCommandReceived=this.onParticipantUpdateCommandReceived,this.privConversationRecognizer.lockRoomCommandReceived=this.onLockRoomCommandReceived,this.privConversationRecognizer.muteAllCommandReceived=this.onMuteAllCommandReceived,this.privConversationRecognizer.participantJoinCommandReceived=this.onParticipantJoinCommandReceived,this.privConversationRecognizer.participantLeaveCommandReceived=this.onParticipantLeaveCommandReceived,this.privConversationRecognizer.translationReceived=this.onTranslationReceived,this.privConversationRecognizer.participantsListReceived=this.onParticipantsListReceived,this.privConversationRecognizer.conversationExpiration=this.onConversationExpiration,this.privConversationRecognizer.connect(this.privRoom.token,()=>{this.handleCallback(e,t)},e=>{this.handleError(e,t)})}catch(e){this.handleError(e,t)}}addParticipantAsync(e,t,r){m.a.throwIfNullOrUndefined(e,"Participant"),Object(c.b)(this.addParticipantImplAsync(e),t,r)}joinConversationAsync(e,t,r,n,i){try{m.a.throwIfNullOrWhitespace(e,this.privErrors.invalidArgs.replace("{arg}","conversationId")),m.a.throwIfNullOrWhitespace(t,this.privErrors.invalidArgs.replace("{arg}","nickname")),m.a.throwIfNullOrWhitespace(r,this.privErrors.invalidArgs.replace("{arg}","language")),this.privManager.createOrJoin(this.privProperties,e,e=>{m.a.throwIfNullOrUndefined(e,this.privErrors.permissionDeniedConnect),this.privRoom=e,this.privConfig.authorizationToken=e.cognitiveSpeechAuthToken,n&&n(e.cognitiveSpeechAuthToken)},e=>{this.handleError(e,i)})}catch(e){this.handleError(e,i)}}deleteConversationAsync(e,t){Object(c.b)(this.deleteConversationImplAsync(),e,t)}deleteConversationImplAsync(){return gr(this,void 0,void 0,(function*(){m.a.throwIfNullOrUndefined(this.privProperties,this.privErrors.permissionDeniedConnect),m.a.throwIfNullOrWhitespace(this.privRoom.token,this.privErrors.permissionDeniedConnect),yield this.privManager.leave(this.privProperties,this.privRoom.token),this.dispose()}))}endConversationAsync(e,t){Object(c.b)(this.endConversationImplAsync(),e,t)}endConversationImplAsync(){return this.close(!0)}lockConversationAsync(e,t){try{m.a.throwIfDisposed(this.privIsDisposed),m.a.throwIfDisposed(this.privConversationRecognizer.isDisposed()),m.a.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","lock")),t),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getLockCommand(!0),()=>{this.handleCallback(e,t)},e=>{this.handleError(e,t)})}catch(e){this.handleError(e,t)}}muteAllParticipantsAsync(e,t){try{m.a.throwIfDisposed(this.privIsDisposed),m.a.throwIfDisposed(this.privConversationRecognizer.isDisposed()),m.a.throwIfNullOrUndefined(this.privConversationRecognizer,this.privErrors.permissionDeniedSend),m.a.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","mute")),t),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteAllCommand(!0),()=>{this.handleCallback(e,t)},e=>{this.handleError(e,t)})}catch(e){this.handleError(e,t)}}muteParticipantAsync(e,t,r){try{m.a.throwIfDisposed(this.privIsDisposed),m.a.throwIfDisposed(this.privConversationRecognizer.isDisposed()),m.a.throwIfNullOrWhitespace(e,this.privErrors.invalidArgs.replace("{arg}","userId")),m.a.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),r),this.me.isHost||this.me.id===e||this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","mute")),r),-1===this.privParticipants.getParticipantIndex(e)&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),r),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteCommand(e,!0),()=>{this.handleCallback(t,r)},e=>{this.handleError(e,r)})}catch(e){this.handleError(e,r)}}removeParticipantAsync(e,t,r){try{if(m.a.throwIfDisposed(this.privIsDisposed),this.privTranscriberRecognizer&&e.hasOwnProperty("id"))Object(c.b)(this.removeParticipantImplAsync(e),t,r);else{m.a.throwIfDisposed(this.privConversationRecognizer.isDisposed()),m.a.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","remove")),r);let n="";"string"==typeof e?n=e:e.hasOwnProperty("id")?n=e.id:e.hasOwnProperty("userId")&&(n=e.userId),m.a.throwIfNullOrWhitespace(n,this.privErrors.invalidArgs.replace("{arg}","userId")),-1===this.participants.findIndex(e=>e.id===n)&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),r),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getEjectCommand(n),()=>{this.handleCallback(t,r)},e=>{this.handleError(e,r)})}}catch(e){this.handleError(e,r)}}unlockConversationAsync(e,t){try{m.a.throwIfDisposed(this.privIsDisposed),m.a.throwIfDisposed(this.privConversationRecognizer.isDisposed()),m.a.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","unlock")),t),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getLockCommand(!1),()=>{this.handleCallback(e,t)},e=>{this.handleError(e,t)})}catch(e){this.handleError(e,t)}}unmuteAllParticipantsAsync(e,t){try{m.a.throwIfDisposed(this.privIsDisposed),m.a.throwIfDisposed(this.privConversationRecognizer.isDisposed()),m.a.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","unmute all")),t),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteAllCommand(!1),()=>{this.handleCallback(e,t)},e=>{this.handleError(e,t)})}catch(e){this.handleError(e,t)}}unmuteParticipantAsync(e,t,r){try{m.a.throwIfDisposed(this.privIsDisposed),m.a.throwIfDisposed(this.privConversationRecognizer.isDisposed()),m.a.throwIfNullOrWhitespace(e,this.privErrors.invalidArgs.replace("{arg}","userId")),m.a.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),r),this.me.isHost||this.me.id===e||this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","mute")),r),-1===this.privParticipants.getParticipantIndex(e)&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),r),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteCommand(e,!1),()=>{this.handleCallback(t,r)},e=>{this.handleError(e,r)})}catch(e){this.handleError(e,r)}}sendTextMessageAsync(e,t,r){try{m.a.throwIfDisposed(this.privIsDisposed),m.a.throwIfDisposed(this.privConversationRecognizer.isDisposed()),m.a.throwIfNullOrWhitespace(e,this.privErrors.invalidArgs.replace("{arg}","message")),m.a.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),r),e.length>this.privTextMessageMaxLength&&this.handleError(new Error(this.privErrors.invalidArgs.replace("{arg}","message length")),r),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMessageCommand(e),()=>{this.handleCallback(t,r)},e=>{this.handleError(e,r)})}catch(e){this.handleError(e,r)}}setTranslatedLanguagesAsync(e,t,r){try{m.a.throwIfDisposed(this.privIsDisposed),m.a.throwIfDisposed(this.privConversationRecognizer.isDisposed()),m.a.throwIfArrayEmptyOrWhitespace(e,this.privErrors.invalidArgs.replace("{arg}","languages")),m.a.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),r),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getSetTranslateToLanguagesCommand(e),()=>{this.handleCallback(t,r)},e=>{this.handleError(e,r)})}catch(e){this.handleError(e,r)}}changeNicknameAsync(e,t,r){try{m.a.throwIfDisposed(this.privIsDisposed),m.a.throwIfDisposed(this.privConversationRecognizer.isDisposed()),m.a.throwIfNullOrWhitespace(e,this.privErrors.invalidArgs.replace("{arg}","nickname")),m.a.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),r),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getChangeNicknameCommand(e),()=>{this.handleCallback(t,r)},e=>{this.handleError(e,r)})}catch(e){this.handleError(e,r)}}isDisposed(){return this.privIsDisposed}dispose(){this.isDisposed||(this.privIsDisposed=!0,this.config&&this.config.close(),this.privConfig=void 0,this.privLanguage=void 0,this.privProperties=void 0,this.privRoom=void 0,this.privToken=void 0,this.privManager=void 0,this.privIsConnected=!1,this.privIsReady=!1,this.privParticipants=void 0)}connectTranscriberRecognizer(e){return gr(this,void 0,void 0,(function*(){this.privTranscriberRecognizer&&(yield this.privTranscriberRecognizer.close()),yield e.enforceAudioGating(),this.privTranscriberRecognizer=e,this.privTranscriberRecognizer.conversation=this}))}getKeepAlive(){const e=this.me?this.me.displayName:"default_nickname";return JSON.stringify({id:"0",nickname:e,participantId:this.privRoom.participantId,roomId:this.privRoom.roomId,type:"keep_alive"})}addParticipantImplAsync(e){if(void 0!==this.privParticipants.addOrUpdateParticipant(e)&&this.privTranscriberRecognizer){const t=this.conversationInfo;return t.participants=[e],this.privTranscriberRecognizer.pushConversationEvent(t,"join")}}removeParticipantImplAsync(e){this.privParticipants.deleteParticipant(e.id);const t=this.conversationInfo;return t.participants=[e],this.privTranscriberRecognizer.pushConversationEvent(t,"leave")}close(e){var t;return gr(this,void 0,void 0,(function*(){try{this.privIsConnected=!1,yield null===(t=this.privConversationRecognizer)||void 0===t?void 0:t.close(),this.privConversationRecognizer=void 0,this.privConversationTranslator&&this.privConversationTranslator.dispose()}catch(e){throw e}e&&this.dispose()}))}handleCallback(e,t){if(e){try{e()}catch(e){t&&t(e)}e=void 0}}handleError(e,t){if(t)if(e instanceof Error){const r=e;t(r.name+": "+r.message)}else t(e)}toParticipants(e){const t=this.privParticipants.participants.map(e=>this.toParticipant(e));return e?t:t.filter(e=>!1===e.isHost)}toParticipant(e){return new vr(e.id,e.avatar,e.displayName,e.isHost,e.isMuted,e.isUsingTts,e.preferredLanguage,e.voice)}getMuteAllCommand(e){return m.a.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),m.a.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:"SetMuteAll",participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:xt,value:e})}getMuteCommand(e,t){return m.a.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),m.a.throwIfNullOrWhitespace(e,"participantId"),JSON.stringify({command:Dt,participantId:e,roomid:this.privRoom.roomId,type:xt,value:t})}getLockCommand(e){return m.a.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),m.a.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:"SetLockState",participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:xt,value:e})}getEjectCommand(e){return m.a.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),m.a.throwIfNullOrWhitespace(e,"participantId"),JSON.stringify({command:"EjectParticipant",participantId:e,roomid:this.privRoom.roomId,type:xt})}getSetTranslateToLanguagesCommand(e){return m.a.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),m.a.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:Lt,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:xt,value:e})}getChangeNicknameCommand(e){return m.a.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),m.a.throwIfNullOrWhitespace(e,"nickname"),m.a.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:kt,nickname:e,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:xt,value:e})}getMessageCommand(e){return m.a.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),m.a.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),m.a.throwIfNullOrWhitespace(e,"message"),JSON.stringify({participantId:this.privRoom.participantId,roomId:this.privRoom.roomId,text:e,type:At})}}var Sr,wr=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};!function(e){e[e.Inactive=0]="Inactive",e[e.Connecting=1]="Connecting",e[e.Connected=2]="Connected"}(Sr||(Sr={}));class br extends Te{constructor(e,t,r){super(e,t),this.privSpeechState=Sr.Inactive,r&&(this.privTranslator=r,this.sessionStarted=()=>{this.privSpeechState=Sr.Connected},this.sessionStopped=()=>{this.privSpeechState=Sr.Inactive},this.recognized=(e,t)=>wr(this,void 0,void 0,(function*(){var e;(null===(e=t.result)||void 0===e?void 0:e.errorDetails)&&(yield this.cancelSpeech(),this.fireCancelEvent(t.result.errorDetails))})),this.canceled=()=>wr(this,void 0,void 0,(function*(){if(this.privSpeechState!==Sr.Inactive)try{yield this.cancelSpeech()}catch(e){this.privSpeechState=Sr.Inactive}})))}get state(){return this.privSpeechState}set state(e){this.privSpeechState=e}onConnection(){this.privSpeechState=Sr.Connected}onDisconnection(){return wr(this,void 0,void 0,(function*(){this.privSpeechState=Sr.Inactive,yield this.cancelSpeech()}))}fireCancelEvent(e){try{if(this.privTranslator.canceled){const t=new Vt(k.a.Error,e,Be.a.RuntimeError);this.privTranslator.canceled(this.privTranslator,t)}}catch(e){}}cancelSpeech(){var e;return wr(this,void 0,void 0,(function*(){try{this.stopContinuousRecognitionAsync(),yield null===(e=this.privReco)||void 0===e?void 0:e.disconnect(),this.privSpeechState=Sr.Inactive}catch(e){}}))}}class Cr extends class{constructor(e){this.privAudioConfig=e}handleCallback(e,t){if(e){try{e()}catch(e){t&&t(e)}e=void 0}}handleError(e,t){if(t)if(e instanceof Error){const r=e;t(r.name+": "+r.message)}else t(e)}}{constructor(e){super(e),this.privErrors=_t.restErrors,this.privIsDisposed=!1,this.privIsSpeaking=!1,this.privPlaceholderKey="abcdefghijklmnopqrstuvwxyz012345",this.privPlaceholderRegion="westus",this.privProperties=new Z.a}get properties(){return this.privProperties}get speechRecognitionLanguage(){return this.privSpeechRecognitionLanguage}get participants(){var e;return null===(e=this.privConversation)||void 0===e?void 0:e.participants}get canSpeak(){return!(!this.privConversation.isConnected||!this.privCTRecognizer||this.privIsSpeaking||this.privCTRecognizer.state===Sr.Connected||this.privCTRecognizer.state===Sr.Connecting||this.privConversation.isMutedByHost)}joinConversationAsync(e,t,r,n,i){try{if("string"==typeof e){m.a.throwIfNullOrUndefined(e,this.privErrors.invalidArgs.replace("{arg}","conversation id")),m.a.throwIfNullOrWhitespace(t,this.privErrors.invalidArgs.replace("{arg}","nickname")),this.privConversation&&this.handleError(new Error(this.privErrors.permissionDeniedStart),i);let o=r;null!=o&&""!==o||(o=_t.defaultLanguageCode),this.privSpeechTranslationConfig=re.fromSubscription(this.privPlaceholderKey,this.privPlaceholderRegion),this.privSpeechTranslationConfig.setProfanity(ee.a.Masked),this.privSpeechTranslationConfig.addTargetLanguage(o),this.privSpeechTranslationConfig.setProperty(Q.a[Q.a.SpeechServiceConnection_RecoLanguage],o),this.privSpeechTranslationConfig.setProperty(Q.a[Q.a.ConversationTranslator_Name],t);const s=this.privProperties.getProperty(Q.a.ConversationTranslator_Host);s&&this.privSpeechTranslationConfig.setProperty(Q.a[Q.a.ConversationTranslator_Host],s);const a=this.privProperties.getProperty(Q.a.SpeechServiceConnection_Host);a&&this.privSpeechTranslationConfig.setProperty(Q.a[Q.a.SpeechServiceConnection_Host],a),this.privConversation=new yr(this.privSpeechTranslationConfig),this.privConversation.conversationTranslator=this,this.privConversation.joinConversationAsync(e,t,o,e=>{e||this.handleError(new Error(this.privErrors.permissionDeniedConnect),i),this.privSpeechTranslationConfig.authorizationToken=e,this.privConversation.startConversationAsync(()=>{this.handleCallback(n,i)},e=>{this.handleError(e,i)})},e=>{this.handleError(e,i)})}else"object"==typeof e?(m.a.throwIfNullOrUndefined(e,this.privErrors.invalidArgs.replace("{arg}","conversation id")),m.a.throwIfNullOrWhitespace(t,this.privErrors.invalidArgs.replace("{arg}","nickname")),this.privProperties.setProperty(Q.a.ConversationTranslator_Name,t),this.privConversation=e,this.privConversation.conversationTranslator=this,m.a.throwIfNullOrUndefined(this.privConversation,this.privErrors.permissionDeniedConnect),m.a.throwIfNullOrUndefined(this.privConversation.room.token,this.privErrors.permissionDeniedConnect),this.privSpeechTranslationConfig=e.config,this.handleCallback(r,n)):this.handleError(new Error(this.privErrors.invalidArgs.replace("{arg}","invalid conversation type")),n)}catch(e){this.handleError(e,"string"==typeof r?i:n)}}leaveConversationAsync(e,t){Object(c.b)((()=>wr(this,void 0,void 0,(function*(){yield this.cancelSpeech(),yield this.privConversation.endConversationImplAsync(),yield this.privConversation.deleteConversationImplAsync(),this.dispose()})))(),e,t)}sendTextMessageAsync(e,t,r){try{m.a.throwIfNullOrUndefined(this.privConversation,this.privErrors.permissionDeniedSend),m.a.throwIfNullOrWhitespace(e,this.privErrors.invalidArgs.replace("{arg}",e)),this.privConversation.sendTextMessageAsync(e,t,r)}catch(e){this.handleError(e,r)}}startTranscribingAsync(e,t){Object(c.b)((()=>wr(this,void 0,void 0,(function*(){try{m.a.throwIfNullOrUndefined(this.privConversation,this.privErrors.permissionDeniedSend),m.a.throwIfNullOrUndefined(this.privConversation.room.token,this.privErrors.permissionDeniedConnect),void 0===this.privCTRecognizer&&(yield this.connectTranslatorRecognizer()),m.a.throwIfNullOrUndefined(this.privCTRecognizer,this.privErrors.permissionDeniedSend),this.canSpeak||this.handleError(new Error(this.privErrors.permissionDeniedSend),t),yield this.startContinuousRecognition(),this.privIsSpeaking=!0}catch(e){throw this.privIsSpeaking=!1,yield this.cancelSpeech(),e}})))(),e,t)}stopTranscribingAsync(e,t){Object(c.b)((()=>wr(this,void 0,void 0,(function*(){try{if(!this.privIsSpeaking)return void(yield this.cancelSpeech());this.privIsSpeaking=!1,yield new Promise((e,t)=>{this.privCTRecognizer.stopContinuousRecognitionAsync(e,t)})}catch(e){yield this.cancelSpeech()}})))(),e,t)}isDisposed(){return this.privIsDisposed}dispose(e,t,r){Object(c.b)((()=>wr(this,void 0,void 0,(function*(){this.isDisposed&&!this.privIsSpeaking||(yield this.cancelSpeech(),this.privIsDisposed=!0,this.privSpeechTranslationConfig.close(),this.privSpeechRecognitionLanguage=void 0,this.privProperties=void 0,this.privAudioConfig=void 0,this.privSpeechTranslationConfig=void 0,this.privConversation.dispose(),this.privConversation=void 0)})))(),t,r)}cancelSpeech(){var e;return wr(this,void 0,void 0,(function*(){try{this.privIsSpeaking=!1,yield null===(e=this.privCTRecognizer)||void 0===e?void 0:e.onDisconnection(),this.privCTRecognizer=void 0}catch(e){}}))}connectTranslatorRecognizer(){return wr(this,void 0,void 0,(function*(){try{void 0===this.privAudioConfig&&(this.privAudioConfig=A.fromDefaultMicrophoneInput()),this.privSpeechTranslationConfig.getProperty(Q.a[Q.a.SpeechServiceConnection_Key])===this.privPlaceholderKey&&this.privSpeechTranslationConfig.setProperty(Q.a[Q.a.SpeechServiceConnection_Key],"");const e=encodeURIComponent(this.privConversation.room.token);let t=this.privSpeechTranslationConfig.getProperty(Q.a[Q.a.SpeechServiceConnection_Host],_t.speechHost);t=t.replace("{region}",this.privConversation.room.cognitiveSpeechRegion);const r=`wss://${t}${_t.speechPath}?${_t.configParams.token}=${e}`;this.privSpeechTranslationConfig.setProperty(Q.a[Q.a.SpeechServiceConnection_Endpoint],r),this.privCTRecognizer=new br(this.privSpeechTranslationConfig,this.privAudioConfig,this)}catch(e){throw yield this.cancelSpeech(),e}}))}startContinuousRecognition(){return new Promise((e,t)=>{this.privCTRecognizer.startContinuousRecognitionAsync(e,t)})}}var Rr=r(221),Pr=r(222),Ir=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};class Er extends ce{constructor(e,t){const r=e;m.a.throwIfNull(r,"speechTranslationConfig");const n=t;m.a.throwIfNull(n,"audioConfigImpl"),m.a.throwIfNullOrWhitespace(r.speechRecognitionLanguage,Q.a[Q.a.SpeechServiceConnection_RecoLanguage]),super(t,r.properties,new Rr.a),this.privDisposedRecognizer=!1}get speechRecognitionLanguage(){return m.a.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(Q.a.SpeechServiceConnection_RecoLanguage)}get properties(){return this.privProperties}get authorizationToken(){return this.properties.getProperty(Q.a.SpeechServiceAuthorization_Token)}set authorizationToken(e){m.a.throwIfNullOrWhitespace(e,"token"),this.properties.setProperty(Q.a.SpeechServiceAuthorization_Token,e)}set conversation(e){m.a.throwIfNullOrUndefined(e,"Conversation"),this.privConversation=e}getConversationInfo(){return m.a.throwIfNullOrUndefined(this.privConversation,"Conversation"),this.privConversation.conversationInfo}startContinuousRecognitionAsync(e,t){Object(c.b)(this.startContinuousRecognitionAsyncImpl(o.c.Conversation),e,t)}stopContinuousRecognitionAsync(e,t){Object(c.b)(this.stopContinuousRecognitionAsyncImpl(),e,t)}close(){return Ir(this,void 0,void 0,(function*(){this.privDisposedRecognizer||(yield this.dispose(!0))}))}pushConversationEvent(e,t){return Ir(this,void 0,void 0,(function*(){const r=this.privReco;m.a.throwIfNullOrUndefined(r,"serviceRecognizer"),yield r.sendSpeechEventAsync(e,t)}))}enforceAudioGating(){return Ir(this,void 0,void 0,(function*(){const e=this.audioConfig,t=(yield e.format).channels;if(1===t){if("true"!==this.properties.getProperty("f0f5debc-f8c9-4892-ac4b-90a7ab359fd2","false").toLowerCase())throw new Error("Single channel audio configuration for ConversationTranscriber is currently under private preview, please contact diarizationrequest@microsoft.com for more details")}else if(8!==t)throw new Error(`Unsupported audio configuration: Detected ${t}-channel audio`)}))}connectCallbacks(e){this.canceled=(t,r)=>{e.canceled&&e.canceled(e,r)},this.recognizing=(t,r)=>{e.transcribing&&e.transcribing(e,r)},this.recognized=(t,r)=>{e.transcribed&&e.transcribed(e,r)},this.sessionStarted=(t,r)=>{e.sessionStarted&&e.sessionStarted(e,r)},this.sessionStopped=(t,r)=>{e.sessionStopped&&e.sessionStopped(e,r)}}disconnectCallbacks(){this.canceled=void 0,this.recognizing=void 0,this.recognized=void 0,this.sessionStarted=void 0,this.sessionStopped=void 0}dispose(e){const t=Object.create(null,{dispose:{get:()=>super.dispose}});return Ir(this,void 0,void 0,(function*(){this.privDisposedRecognizer||(e&&(this.privDisposedRecognizer=!0,yield this.implRecognizerStop()),yield t.dispose.call(this,e))}))}createRecognizerConfig(e){return new o.d(e,this.properties)}createServiceRecognizer(e,t,r,n){const i=r;return new Pr.a(e,t,i,n,this)}}var _r=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};class Tr{constructor(e){this.privAudioConfig=e,this.privProperties=new Z.a,this.privRecognizer=void 0,this.privDisposedRecognizer=!1}get speechRecognitionLanguage(){return m.a.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(Q.a.SpeechServiceConnection_RecoLanguage)}get properties(){return this.privProperties}get internalData(){return this.privRecognizer.internalData}get connection(){return Ee.fromRecognizer(this.privRecognizer)}get authorizationToken(){return this.properties.getProperty(Q.a.SpeechServiceAuthorization_Token)}set authorizationToken(e){m.a.throwIfNullOrWhitespace(e,"token"),this.properties.setProperty(Q.a.SpeechServiceAuthorization_Token,e)}joinConversationAsync(e,t,r){const n=e;m.a.throwIfNullOrUndefined(n,"Conversation"),this.privRecognizer=new Er(e.config,this.privAudioConfig),m.a.throwIfNullOrUndefined(this.privRecognizer,"Recognizer"),this.privRecognizer.connectCallbacks(this),Object(c.b)(n.connectTranscriberRecognizer(this.privRecognizer),t,r)}startTranscribingAsync(e,t){this.privRecognizer.startContinuousRecognitionAsync(e,t)}stopTranscribingAsync(e,t){this.privRecognizer.stopContinuousRecognitionAsync(e,t)}leaveConversationAsync(e,t){this.privRecognizer.disconnectCallbacks(),Object(c.b)((()=>_r(this,void 0,void 0,(function*(){})))(),e,t)}close(e,t){m.a.throwIfDisposed(this.privDisposedRecognizer),Object(c.b)(this.dispose(!0),e,t)}dispose(e){return _r(this,void 0,void 0,(function*(){this.privDisposedRecognizer||(this.privRecognizer&&(yield this.privRecognizer.close(),this.privRecognizer=void 0),e&&(this.privDisposedRecognizer=!0))}))}}var Ar,Or,xr=r(223),kr=r(224),Dr=r(225),Mr=r(183),Lr=r(75),Nr=r(164);!function(e){e[e.Unknown=0]="Unknown",e[e.Female=1]="Female",e[e.Male=2]="Male"}(Ar||(Ar={})),function(e){e[e.OnlineNeural=1]="OnlineNeural",e[e.OnlineStandard=2]="OnlineStandard",e[e.OfflineNeural=3]="OfflineNeural",e[e.OfflineStandard=4]="OfflineStandard"}(Or||(Or={}));class zr{constructor(e){if(this.privStyleList=[],this.privVoicePath="",e&&(this.privName=e.Name,this.privLocale=e.Locale,this.privShortName=e.ShortName,this.privLocalName=e.LocalName,this.privVoiceType=e.VoiceType.endsWith("Standard")?Or.OnlineStandard:Or.OnlineNeural,this.privGender="Male"===e.Gender?Ar.Male:"Female"===e.Gender?Ar.Female:Ar.Unknown,e.StyleList&&Array.isArray(e.StyleList)))for(const t of e.StyleList)this.privStyleList.push(t)}get name(){return this.privName}get locale(){return this.privLocale}get shortName(){return this.privShortName}get localName(){return this.privLocalName}get gender(){return this.privGender}get voiceType(){return this.privVoiceType}get styleList(){return this.privStyleList}get voicePath(){return this.privVoicePath}}class Br extends Nr.a{constructor(e,t,r){if(Array.isArray(t)){super(e,$.a.VoicesListRetrieved,void 0,new Z.a),this.privVoices=[];for(const e of t)this.privVoices.push(new zr(e))}else super(e,$.a.Canceled,r||"Error information unavailable",new Z.a)}get voices(){return this.privVoices}}var jr=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};class Ur{constructor(e,t){const r=e;m.a.throwIfNull(r,"speechConfig"),null!==t&&(this.audioConfig=void 0===t?"undefined"==typeof window?void 0:A.fromDefaultSpeakerOutput():t),this.privProperties=r.properties.clone(),this.privDisposed=!1,this.privSynthesizing=!1,this.privConnectionFactory=new xr.a,this.synthesisRequestQueue=new Mr.a,this.implCommonSynthesizeSetup()}get authorizationToken(){return this.properties.getProperty(Q.a.SpeechServiceAuthorization_Token)}set authorizationToken(e){m.a.throwIfNullOrWhitespace(e,"token"),this.properties.setProperty(Q.a.SpeechServiceAuthorization_Token,e)}get properties(){return this.privProperties}get autoDetectSourceLanguage(){return this.properties.getProperty(Q.a.SpeechServiceConnection_AutoDetectSourceLanguages)===X.AutoDetectSourceLanguagesOpenRangeOptionName}static FromConfig(e,t,r){const n=e;return t.properties.mergeTo(n.properties),new Ur(e,r)}buildSsml(e){let t=this.properties.getProperty(Q.a.SpeechServiceConnection_SynthLanguage,"en-US"),r=this.properties.getProperty(Q.a.SpeechServiceConnection_SynthVoice,""),n=Ur.XMLEncode(e);return this.autoDetectSourceLanguage?t="en-US":r=r||{"af-ZA":"af-ZA-AdriNeural","am-ET":"am-ET-AmehaNeural","ar-AE":"ar-AE-FatimaNeural","ar-BH":"ar-BH-AliNeural","ar-DZ":"ar-DZ-AminaNeural","ar-EG":"ar-EG-SalmaNeural","ar-IQ":"ar-IQ-BasselNeural","ar-JO":"ar-JO-SanaNeural","ar-KW":"ar-KW-FahedNeural","ar-LY":"ar-LY-ImanNeural","ar-MA":"ar-MA-JamalNeural","ar-QA":"ar-QA-AmalNeural","ar-SA":"ar-SA-HamedNeural","ar-SY":"ar-SY-AmanyNeural","ar-TN":"ar-TN-HediNeural","ar-YE":"ar-YE-MaryamNeural","bg-BG":"bg-BG-BorislavNeural","bn-BD":"bn-BD-NabanitaNeural","bn-IN":"bn-IN-BashkarNeural","ca-ES":"ca-ES-JoanaNeural","cs-CZ":"cs-CZ-AntoninNeural","cy-GB":"cy-GB-AledNeural","da-DK":"da-DK-ChristelNeural","de-AT":"de-AT-IngridNeural","de-CH":"de-CH-JanNeural","de-DE":"de-DE-KatjaNeural","el-GR":"el-GR-AthinaNeural","en-AU":"en-AU-NatashaNeural","en-CA":"en-CA-ClaraNeural","en-GB":"en-GB-LibbyNeural","en-HK":"en-HK-SamNeural","en-IE":"en-IE-ConnorNeural","en-IN":"en-IN-NeerjaNeural","en-KE":"en-KE-AsiliaNeural","en-NG":"en-NG-AbeoNeural","en-NZ":"en-NZ-MitchellNeural","en-PH":"en-PH-JamesNeural","en-SG":"en-SG-LunaNeural","en-TZ":"en-TZ-ElimuNeural","en-US":"en-US-JennyNeural","en-ZA":"en-ZA-LeahNeural","es-AR":"es-AR-ElenaNeural","es-BO":"es-BO-MarceloNeural","es-CL":"es-CL-CatalinaNeural","es-CO":"es-CO-GonzaloNeural","es-CR":"es-CR-JuanNeural","es-CU":"es-CU-BelkysNeural","es-DO":"es-DO-EmilioNeural","es-EC":"es-EC-AndreaNeural","es-ES":"es-ES-AlvaroNeural","es-GQ":"es-GQ-JavierNeural","es-GT":"es-GT-AndresNeural","es-HN":"es-HN-CarlosNeural","es-MX":"es-MX-DaliaNeural","es-NI":"es-NI-FedericoNeural","es-PA":"es-PA-MargaritaNeural","es-PE":"es-PE-AlexNeural","es-PR":"es-PR-KarinaNeural","es-PY":"es-PY-MarioNeural","es-SV":"es-SV-LorenaNeural","es-US":"es-US-AlonsoNeural","es-UY":"es-UY-MateoNeural","es-VE":"es-VE-PaolaNeural","et-EE":"et-EE-AnuNeural","fa-IR":"fa-IR-DilaraNeural","fi-FI":"fi-FI-SelmaNeural","fil-PH":"fil-PH-AngeloNeural","fr-BE":"fr-BE-CharlineNeural","fr-CA":"fr-CA-SylvieNeural","fr-CH":"fr-CH-ArianeNeural","fr-FR":"fr-FR-DeniseNeural","ga-IE":"ga-IE-ColmNeural","gl-ES":"gl-ES-RoiNeural","gu-IN":"gu-IN-DhwaniNeural","he-IL":"he-IL-AvriNeural","hi-IN":"hi-IN-MadhurNeural","hr-HR":"hr-HR-GabrijelaNeural","hu-HU":"hu-HU-NoemiNeural","id-ID":"id-ID-ArdiNeural","is-IS":"is-IS-GudrunNeural","it-IT":"it-IT-IsabellaNeural","ja-JP":"ja-JP-NanamiNeural","jv-ID":"jv-ID-DimasNeural","kk-KZ":"kk-KZ-AigulNeural","km-KH":"km-KH-PisethNeural","kn-IN":"kn-IN-GaganNeural","ko-KR":"ko-KR-SunHiNeural","lo-LA":"lo-LA-ChanthavongNeural","lt-LT":"lt-LT-LeonasNeural","lv-LV":"lv-LV-EveritaNeural","mk-MK":"mk-MK-AleksandarNeural","ml-IN":"ml-IN-MidhunNeural","mr-IN":"mr-IN-AarohiNeural","ms-MY":"ms-MY-OsmanNeural","mt-MT":"mt-MT-GraceNeural","my-MM":"my-MM-NilarNeural","nb-NO":"nb-NO-PernilleNeural","nl-BE":"nl-BE-ArnaudNeural","nl-NL":"nl-NL-ColetteNeural","pl-PL":"pl-PL-AgnieszkaNeural","ps-AF":"ps-AF-GulNawazNeural","pt-BR":"pt-BR-FranciscaNeural","pt-PT":"pt-PT-DuarteNeural","ro-RO":"ro-RO-AlinaNeural","ru-RU":"ru-RU-SvetlanaNeural","si-LK":"si-LK-SameeraNeural","sk-SK":"sk-SK-LukasNeural","sl-SI":"sl-SI-PetraNeural","so-SO":"so-SO-MuuseNeural","sr-RS":"sr-RS-NicholasNeural","su-ID":"su-ID-JajangNeural","sv-SE":"sv-SE-SofieNeural","sw-KE":"sw-KE-RafikiNeural","sw-TZ":"sw-TZ-DaudiNeural","ta-IN":"ta-IN-PallaviNeural","ta-LK":"ta-LK-KumarNeural","ta-SG":"ta-SG-AnbuNeural","te-IN":"te-IN-MohanNeural","th-TH":"th-TH-PremwadeeNeural","tr-TR":"tr-TR-AhmetNeural","uk-UA":"uk-UA-OstapNeural","ur-IN":"ur-IN-GulNeural","ur-PK":"ur-PK-AsadNeural","uz-UZ":"uz-UZ-MadinaNeural","vi-VN":"vi-VN-HoaiMyNeural","zh-CN":"zh-CN-XiaoxiaoNeural","zh-HK":"zh-HK-HiuMaanNeural","zh-TW":"zh-TW-HsiaoChenNeural","zu-ZA":"zu-ZA-ThandoNeural"}[t],r&&(n=`<voice name='${r}'>${n}</voice>`),n=`<speak version='1.0' xmlns='http://www.w3.org/2001/10/synthesis' xmlns:mstts='http://www.w3.org/2001/mstts' xmlns:emo='http://www.w3.org/2009/10/emotionml' xml:lang='${t}'>${n}</speak>`,n}speakTextAsync(e,t,r,n){this.speakImpl(e,!1,t,r,n)}speakSsmlAsync(e,t,r,n){this.speakImpl(e,!0,t,r,n)}getVoicesAsync(e=""){return jr(this,void 0,void 0,(function*(){return this.getVoices(e)}))}close(e,t){m.a.throwIfDisposed(this.privDisposed),Object(c.b)(this.dispose(!0),e,t)}get internalData(){return this.privAdapter}dispose(e){return jr(this,void 0,void 0,(function*(){this.privDisposed||(e&&this.privAdapter&&(yield this.privAdapter.dispose()),this.privDisposed=!0)}))}createSynthesizerConfig(e){return new kr.a(e,this.privProperties)}createSynthesisAdapter(e,t,r,n){return new w.a(e,t,n,this,this.audioConfig)}implCommonSynthesizeSetup(){let e="undefined"!=typeof window?"Browser":"Node",t="unknown",r="unknown";"undefined"!=typeof navigator&&(e=e+"/"+navigator.platform,t=navigator.userAgent,r=navigator.appVersion);const n=this.createSynthesizerConfig(new o.e(new o.a(new o.b(e,t,r)))),i=this.privProperties.getProperty(Q.a.SpeechServiceConnection_Key,void 0),s=i&&""!==i?new oe.a(i):new se.a(()=>{const e=this.privProperties.getProperty(Q.a.SpeechServiceAuthorization_Token,void 0);return Promise.resolve(e)},()=>{const e=this.privProperties.getProperty(Q.a.SpeechServiceAuthorization_Token,void 0);return Promise.resolve(e)});this.privAdapter=this.createSynthesisAdapter(s,this.privConnectionFactory,this.audioConfig,n),this.privAdapter.audioOutputFormat=Lr.a.fromSpeechSynthesisOutputFormat(te.a[this.properties.getProperty(Q.a.SpeechServiceConnection_SynthOutputFormat,void 0)]),this.privRestAdapter=new Dr.a(n,s)}speakImpl(e,t,r,n,i){try{m.a.throwIfDisposed(this.privDisposed);const o=Object(s.b)();let a;a=i instanceof E?new C.e(i):i instanceof C.b?i:void 0!==i?new T(i):void 0,this.synthesisRequestQueue.enqueue(new Fr(o,e,t,e=>{if(this.privSynthesizing=!1,r)try{r(e)}catch(e){n&&n(e)}r=void 0,this.adapterSpeak().catch(()=>{})},e=>{n&&n(e)},a)),this.adapterSpeak().catch(()=>{})}catch(e){if(n)if(e instanceof Error){const t=e;n(t.name+": "+t.message)}else n(e);this.dispose(!0).catch(()=>{})}}getVoices(e){return jr(this,void 0,void 0,(function*(){const t=Object(s.b)(),r=yield this.privRestAdapter.getVoicesList(t);if(r.ok&&Array.isArray(r.json)){let n=r.json;return e&&e.length>0&&(n=n.filter(t=>!!t.Locale&&t.Locale.toLowerCase()===e.toLowerCase())),new Br(t,n,void 0)}return new Br(t,void 0,`Error: ${r.status}: ${r.statusText}`)}))}adapterSpeak(){return jr(this,void 0,void 0,(function*(){if(!this.privDisposed&&!this.privSynthesizing){this.privSynthesizing=!0;const e=yield this.synthesisRequestQueue.dequeue();return this.privAdapter.Speak(e.text,e.isSSML,e.requestId,e.cb,e.err,e.dataStream)}}))}static XMLEncode(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}}class Fr{constructor(e,t,r,n,i,o){this.requestId=e,this.text=t,this.isSSML=r,this.cb=n,this.err=i,this.dataStream=o}}var qr,Wr=r(95),Hr=r(94),Kr=r(165),Vr=r(166),Jr=r(167);!function(e){e.Word="WordBoundary",e.Punctuation="PunctuationBoundary",e.Sentence="SentenceBoundary"}(qr||(qr={}));var Gr,$r,Yr=r(178);!function(e){e[e.FivePoint=1]="FivePoint",e[e.HundredMark=2]="HundredMark"}(Gr||(Gr={})),function(e){e[e.Phoneme=1]="Phoneme",e[e.Word=2]="Word",e[e.FullText=3]="FullText"}($r||($r={}));class Xr{constructor(e,t=Gr.FivePoint,r=$r.Phoneme,n=!1){m.a.throwIfNullOrUndefined(e,"referenceText"),this.privProperties=new Z.a,this.privProperties.setProperty(Q.a.PronunciationAssessment_ReferenceText,e),this.privProperties.setProperty(Q.a.PronunciationAssessment_GradingSystem,Gr[t]),this.privProperties.setProperty(Q.a.PronunciationAssessment_Granularity,$r[r]),this.privProperties.setProperty(Q.a.PronunciationAssessment_EnableMiscue,String(n))}static fromJSON(e){m.a.throwIfNullOrUndefined(e,"json");const t=new Xr("");return t.privProperties=new Z.a,t.properties.setProperty(Q.a.PronunciationAssessment_Json,e),t}toJSON(){return this.updateJson(),this.privProperties.getProperty(Q.a.PronunciationAssessment_Params)}applyTo(e){this.updateJson(),e.internalData.speechContext.setPronunciationAssessmentParams(this.properties.getProperty(Q.a.PronunciationAssessment_Params))}get referenceText(){return this.properties.getProperty(Q.a.PronunciationAssessment_ReferenceText)}set referenceText(e){m.a.throwIfNullOrWhitespace(e,"referenceText"),this.properties.setProperty(Q.a.PronunciationAssessment_ReferenceText,e)}set phonemeAlphabet(e){m.a.throwIfNullOrWhitespace(e,"phonemeAlphabet"),this.privPhonemeAlphabet=e}set nbestPhonemeCount(e){this.privNBestPhonemeCount=e}get properties(){return this.privProperties}updateJson(){const e=this.privProperties.getProperty(Q.a.PronunciationAssessment_Json,"{}"),t=JSON.parse(e),r=this.privProperties.getProperty(Q.a.PronunciationAssessment_ReferenceText);r&&(t.referenceText=r);const n=this.privProperties.getProperty(Q.a.PronunciationAssessment_GradingSystem);n&&(t.gradingSystem=n);const i=this.privProperties.getProperty(Q.a.PronunciationAssessment_Granularity);i&&(t.granularity=i),this.privPhonemeAlphabet&&(t.phonemeAlphabet=this.privPhonemeAlphabet),this.privNBestPhonemeCount&&(t.nbestPhonemeCount=this.privNBestPhonemeCount),t.dimension="Comprehensive";const o=this.privProperties.getProperty(Q.a.PronunciationAssessment_EnableMiscue);"true"===o?t.enableMiscue=!0:"false"===o&&(t.enableMiscue=!1),this.privProperties.setProperty(Q.a.PronunciationAssessment_Params,JSON.stringify(t))}}class Qr{constructor(e){const t=JSON.parse(e);m.a.throwIfNullOrUndefined(t.NBest[0],"NBest"),this.privPronJson=t.NBest[0]}static fromResult(e){m.a.throwIfNullOrUndefined(e,"result");const t=e.properties.getProperty(Q.a.SpeechServiceResponse_JsonResult);return m.a.throwIfNullOrUndefined(t,"json"),new Qr(t)}get detailResult(){return this.privPronJson}get accuracyScore(){return this.detailResult.PronunciationAssessment.AccuracyScore}get pronunciationScore(){return this.detailResult.PronunciationAssessment.PronScore}get completenessScore(){return this.detailResult.PronunciationAssessment.CompletenessScore}get fluencyScore(){return this.detailResult.PronunciationAssessment.FluencyScore}}var Zr=r(268);class en{static SetLoggingLevel(e){this.privListener=new Zr.a(e),h.a.instance.attachConsoleListener(this.privListener)}static SetLogOutputPath(e){if("undefined"!=typeof window)throw new Error("File system logging not available in browser.");this.privListener&&(this.privListener.logPath=e)}}en.privListener=void 0;var tn=r(14)},function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));class n{}n.AuthKey="Ocp-Apim-Subscription-Key",n.Authorization="Authorization",n.ConnectionId="X-ConnectionId",n.ContentType="Content-Type",n.CustomCommandsAppId="X-CommandsAppId",n.Path="Path",n.RequestId="X-RequestId",n.RequestStreamId="X-StreamId",n.RequestTimestamp="X-Timestamp"},function(e,t,r){"use strict";var n,i;r.d(t,"b",(function(){return n})),r.d(t,"a",(function(){return i})),function(e){e[e.Success=0]="Success",e[e.SynthesisEnd=1]="SynthesisEnd",e[e.Error=2]="Error"}(n||(n={})),function(e){e[e.Success=0]="Success",e[e.NoMatch=1]="NoMatch",e[e.InitialSilenceTimeout=2]="InitialSilenceTimeout",e[e.BabbleTimeout=3]="BabbleTimeout",e[e.Error=4]="Error",e[e.EndOfDictation=5]="EndOfDictation",e[e.TooManyRequests=6]="TooManyRequests",e[e.BadRequest=7]="BadRequest",e[e.Forbidden=8]="Forbidden"}(i||(i={}))},function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));class n{}n.BotId="botid",n.CustomSpeechDeploymentId="cid",n.CustomVoiceDeploymentId="deploymentId",n.EnableAudioLogging="storeAudio",n.EnableLanguageId="lidEnabled",n.EnableWordLevelTimestamps="wordLevelTimestamps",n.EndSilenceTimeoutMs="endSilenceTimeoutMs",n.SegmentationSilenceTimeoutMs="segmentationSilenceTimeoutMs",n.Format="format",n.InitialSilenceTimeoutMs="initialSilenceTimeoutMs",n.Language="language",n.Profanity="profanity",n.RequestBotStatusMessages="enableBotMessageStatus",n.StableIntermediateThreshold="stableIntermediateThreshold",n.StableTranslation="stableTranslation",n.TestHooks="testhooks",n.Postprocessing="postprocessing"},function(e,t,r){"use strict";var n;r.d(t,"a",(function(){return n})),function(e){e[e.NoMatch=0]="NoMatch",e[e.Canceled=1]="Canceled",e[e.RecognizingSpeech=2]="RecognizingSpeech",e[e.RecognizedSpeech=3]="RecognizedSpeech",e[e.RecognizedKeyword=4]="RecognizedKeyword",e[e.RecognizingIntent=5]="RecognizingIntent",e[e.RecognizedIntent=6]="RecognizedIntent",e[e.TranslatingSpeech=7]="TranslatingSpeech",e[e.TranslatedSpeech=8]="TranslatedSpeech",e[e.SynthesizingAudio=9]="SynthesizingAudio",e[e.SynthesizingAudioCompleted=10]="SynthesizingAudioCompleted",e[e.SynthesizingAudioStarted=11]="SynthesizingAudioStarted",e[e.EnrollingVoiceProfile=12]="EnrollingVoiceProfile",e[e.EnrolledVoiceProfile=13]="EnrolledVoiceProfile",e[e.RecognizedSpeakers=14]="RecognizedSpeakers",e[e.RecognizedSpeaker=15]="RecognizedSpeaker",e[e.ResetVoiceProfile=16]="ResetVoiceProfile",e[e.DeletedVoiceProfile=17]="DeletedVoiceProfile",e[e.VoicesListRetrieved=18]="VoicesListRetrieved"}(n||(n={}))},function(e,t,r){"use strict";r.d(t,"b",(function(){return n})),r.d(t,"a",(function(){return s}));var n,i=r(15),o=r(33);!function(e){e[e.Text=0]="Text",e[e.Binary=1]="Binary"}(n||(n={}));class s{constructor(e,t,r,s){if(this.privBody=null,e===n.Text&&t&&"string"!=typeof t)throw new i.b("Payload must be a string");if(e===n.Binary&&t&&!(t instanceof ArrayBuffer))throw new i.b("Payload must be ArrayBuffer");switch(this.privMessageType=e,this.privBody=t,this.privHeaders=r||{},this.privId=s||Object(o.b)(),this.messageType){case n.Binary:this.privSize=null!==this.binaryBody?this.binaryBody.byteLength:0;break;case n.Text:this.privSize=this.textBody.length}}get messageType(){return this.privMessageType}get headers(){return this.privHeaders}get body(){return this.privBody}get textBody(){if(this.privMessageType===n.Binary)throw new i.b("Not supported for binary message");return this.privBody}get binaryBody(){if(this.privMessageType===n.Text)throw new i.b("Not supported for text message");return this.privBody}get id(){return this.privId}}},function(e,t,r){"use strict";t.a=function(){return!1}},,function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isEdge=t.isFirefox=t.isSafari=t.isExtEnv=void 0;const n=function(){try{if("function"==typeof browser.runtime.getURL)return!0}catch{try{if("function"==typeof chrome.runtime.getURL)return!0}catch{return!1}}}();t.isExtEnv=n;const i=/apple/i.test(navigator.vendor);t.isSafari=i;const o=navigator.userAgent.includes("Firefox");t.isFirefox=o;const s=/edge?/i.test(navigator.userAgent||"");t.isEdge=s},function(e,t,r){"use strict";for(var n=r(28),i=[],o=0;o<256;++o)i.push((o+256).toString(16).substr(1));t.a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=(i[e[t+0]]+i[e[t+1]]+i[e[t+2]]+i[e[t+3]]+"-"+i[e[t+4]]+i[e[t+5]]+"-"+i[e[t+6]]+i[e[t+7]]+"-"+i[e[t+8]]+i[e[t+9]]+"-"+i[e[t+10]]+i[e[t+11]]+i[e[t+12]]+i[e[t+13]]+i[e[t+14]]+i[e[t+15]]).toLowerCase();if(!Object(n.a)(r))throw TypeError("Stringified UUID is invalid");return r}},function(e,t,r){"use strict";var n=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;t.a=function(e){return"string"==typeof e&&n.test(e)}},function(e,t,r){"use strict";var n;r.d(t,"a",(function(){return n})),function(e){e[e.NoError=0]="NoError",e[e.AuthenticationFailure=1]="AuthenticationFailure",e[e.BadRequestParameters=2]="BadRequestParameters",e[e.TooManyRequests=3]="TooManyRequests",e[e.ConnectionFailure=4]="ConnectionFailure",e[e.ServiceTimeout=5]="ServiceTimeout",e[e.ServiceError=6]="ServiceError",e[e.RuntimeError=7]="RuntimeError",e[e.Forbidden=8]="Forbidden"}(n||(n={}))},,function(e,t,r){"use strict";r.d(t,"a",(function(){return s}));var n=r(7),i=r(5),o=r(21);class s{static getHostSuffix(e){if(e){if(e.toLowerCase().startsWith("china"))return".azure.cn";if(e.toLowerCase().startsWith("usgov"))return".azure.us"}return".microsoft.com"}setCommonUrlParams(e,t,r){new Map([[i.a.Speech_SegmentationSilenceTimeoutMs,o.a.SegmentationSilenceTimeoutMs],[i.a.SpeechServiceConnection_EnableAudioLogging,o.a.EnableAudioLogging],[i.a.SpeechServiceConnection_EndSilenceTimeoutMs,o.a.EndSilenceTimeoutMs],[i.a.SpeechServiceConnection_InitialSilenceTimeoutMs,o.a.InitialSilenceTimeoutMs],[i.a.SpeechServiceResponse_PostProcessingOption,o.a.Postprocessing],[i.a.SpeechServiceResponse_ProfanityOption,o.a.Profanity],[i.a.SpeechServiceResponse_RequestWordLevelTimestamps,o.a.EnableWordLevelTimestamps],[i.a.SpeechServiceResponse_StablePartialResultThreshold,o.a.StableIntermediateThreshold]]).forEach((n,i)=>{this.setUrlParameter(i,n,e,t,r)});const s=JSON.parse(e.parameters.getProperty(n.ServicePropertiesPropertyName,"{}"));Object.keys(s).forEach(e=>{t[e]=s[e]})}setUrlParameter(e,t,r,n,i){const o=r.parameters.getProperty(e,void 0);!o||i&&-1!==i.search(t)||(n[t]=o.toLocaleLowerCase())}}},function(e,t,r){"use strict";r.d(t,"a",(function(){return s}));var n=r(23),i=r(15),o=r(19);class s extends n.a{constructor(e,t,r,n,s,a,c,u){if(!t)throw new i.a("path");if(!r)throw new i.a("requestId");const p={};if(p[o.a.Path]=t,p[o.a.RequestId]=r,p[o.a.RequestTimestamp]=(new Date).toISOString(),n&&(p[o.a.ContentType]=n),a&&(p[o.a.RequestStreamId]=a),c)for(const e in c)e&&(p[e]=c[e]);u?super(e,s,p,u):super(e,s,p),this.privPath=t,this.privRequestId=r,this.privContentType=n,this.privStreamId=a,this.privAdditionalHeaders=c}get path(){return this.privPath}get requestId(){return this.privRequestId}get contentType(){return this.privContentType}get streamId(){return this.privStreamId}get additionalHeaders(){return this.privAdditionalHeaders}static fromConnectionMessage(e){let t=null,r=null,n=null,i=null;const a={};if(e.headers)for(const s in e.headers)s&&(s.toLowerCase()===o.a.Path.toLowerCase()?t=e.headers[s]:s.toLowerCase()===o.a.RequestId.toLowerCase()?r=e.headers[s]:s.toLowerCase()===o.a.ContentType.toLowerCase()?n=e.headers[s]:s.toLowerCase()===o.a.RequestStreamId.toLowerCase()?i=e.headers[s]:a[s]=e.headers[s]);return new s(e.messageType,t,r,n,e.body,i,a,e.id)}}},function(e,t,r){"use strict";r.d(t,"a",(function(){return i})),r.d(t,"b",(function(){return o}));var n=r(65);const i=()=>Object(n.a)(),o=()=>i().replace(new RegExp("-","g"),"").toUpperCase()},,function(e,t,r){"use strict";r.d(t,"a",(function(){return s})),r.d(t,"b",(function(){return a}));var n=r(3),i=r(148),o=r(5);class s{constructor(){}set applicationId(e){}static get DialogTypes(){return{BotFramework:"bot_framework",CustomCommands:"custom_commands"}}}class a extends s{constructor(){super(),this.privSpeechConfig=new i.b}get properties(){return this.privSpeechConfig.properties}get speechRecognitionLanguage(){return this.privSpeechConfig.speechRecognitionLanguage}set speechRecognitionLanguage(e){n.a.throwIfNullOrWhitespace(e,"value"),this.privSpeechConfig.speechRecognitionLanguage=e}get outputFormat(){return this.privSpeechConfig.outputFormat}set outputFormat(e){this.privSpeechConfig.outputFormat=e}setProperty(e,t){this.privSpeechConfig.setProperty(e,t)}getProperty(e,t){return this.privSpeechConfig.getProperty(e)}setProxy(e,t,r,n){this.setProperty(o.a.SpeechServiceConnection_ProxyHostName,e),this.setProperty(o.a.SpeechServiceConnection_ProxyPort,""+t),r&&this.setProperty(o.a.SpeechServiceConnection_ProxyUserName,r),n&&this.setProperty(o.a.SpeechServiceConnection_ProxyPassword,n)}setServiceProperty(e,t,r){this.privSpeechConfig.setServiceProperty(e,t)}close(){}}},function(e,t,r){"use strict";var n;r.d(t,"a",(function(){return n})),function(e){e[e.Simple=0]="Simple",e[e.Detailed=1]="Detailed"}(n||(n={}))},function(e,t,r){"use strict";r.d(t,"k",(function(){return o})),r.d(t,"e",(function(){return s})),r.d(t,"i",(function(){return a})),r.d(t,"h",(function(){return c})),r.d(t,"l",(function(){return u})),r.d(t,"j",(function(){return p})),r.d(t,"f",(function(){return h})),r.d(t,"n",(function(){return d})),r.d(t,"a",(function(){return l})),r.d(t,"b",(function(){return f})),r.d(t,"d",(function(){return v})),r.d(t,"o",(function(){return g})),r.d(t,"c",(function(){return m})),r.d(t,"m",(function(){return y})),r.d(t,"g",(function(){return S}));var n=r(14);class i extends n.b{constructor(e,t,r){super(e,t),this.privSignature=r}}class o extends i{constructor(e){super("OCSPMemoryCacheHitEvent",n.a.Debug,e)}}class s extends i{constructor(e){super("OCSPCacheMissEvent",n.a.Debug,e)}}class a extends i{constructor(e){super("OCSPDiskCacheHitEvent",n.a.Debug,e)}}class c extends i{constructor(e){super("OCSPCacheUpdateNeededEvent",n.a.Debug,e)}}class u extends i{constructor(e){super("OCSPMemoryCacheStoreEvent",n.a.Debug,e)}}class p extends i{constructor(e){super("OCSPDiskCacheStoreEvent",n.a.Debug,e)}}class h extends i{constructor(e){super("OCSPCacheUpdateCompleteEvent",n.a.Debug,e)}}class d extends i{constructor(){super("OCSPStapleReceivedEvent",n.a.Debug,"")}}class l extends i{constructor(e,t){super("OCSPCacheEntryExpiredEvent",n.a.Debug,e),this.privExpireTime=t}}class f extends i{constructor(e,t,r){super("OCSPCacheEntryNeedsRefreshEvent",n.a.Debug,e),this.privExpireTime=r,this.privStartTime=t}}class v extends i{constructor(e,t,r){super("OCSPCacheHitEvent",n.a.Debug,e),this.privExpireTime=r,this.privExpireTimeString=new Date(r).toLocaleDateString(),this.privStartTime=t,this.privStartTimeString=new Date(t).toLocaleTimeString()}}class g extends i{constructor(e,t){super("OCSPVerificationFailedEvent",n.a.Debug,e),this.privError=t}}class m extends i{constructor(e,t){super("OCSPCacheFetchErrorEvent",n.a.Debug,e),this.privError=t}}class y extends i{constructor(e){super("OCSPResponseRetrievedEvent",n.a.Debug,e)}}class S extends i{constructor(e,t){super("OCSPCacheUpdateErrorEvent",n.a.Debug,e),this.privError=t}}},function(e,t){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(e){"object"==typeof window&&(r=window)}e.exports=r},function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var n=r(5);class i{constructor(){this.privKeys=[],this.privValues=[]}getProperty(e,t){let r;r="string"==typeof e?e:n.a[e];for(let e=0;e<this.privKeys.length;e++)if(this.privKeys[e]===r)return this.privValues[e];if(void 0!==t)return String(t)}setProperty(e,t){let r;r="string"==typeof e?e:n.a[e];for(let e=0;e<this.privKeys.length;e++)if(this.privKeys[e]===r)return void(this.privValues[e]=t);this.privKeys.push(r),this.privValues.push(t)}clone(){const e=new i;for(let t=0;t<this.privKeys.length;t++)e.privKeys.push(this.privKeys[t]),e.privValues.push(this.privValues[t]);return e}mergeTo(e){this.privKeys.forEach(t=>{if(void 0===e.getProperty(t,void 0)){const r=this.getProperty(t);e.setProperty(t,r)}})}get keys(){return this.privKeys}}},function(e,t,r){"use strict";(function(e){var r="object"==typeof e&&e&&e.Object===Object&&e;t.a=r}).call(this,r(38))},function(e,t,r){"use strict";(function(e){var n=r(6),i="object"==typeof exports&&exports&&!exports.nodeType&&exports,o=i&&"object"==typeof e&&e&&!e.nodeType&&e,s=o&&o.exports===i?n.a.Buffer:void 0,a=s?s.allocUnsafe:void 0;t.a=function(e,t){if(t)return e.slice();var r=e.length,n=a?a(r):new e.constructor(r);return e.copy(n),n}}).call(this,r(51)(e))},function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var n=r(22),i=r(50),o=r(29),s=r(20);class a{static implTranslateRecognitionResult(e){let t=n.a.Canceled;switch(e){case s.a.Success:t=n.a.RecognizedSpeech;break;case s.a.NoMatch:case s.a.InitialSilenceTimeout:case s.a.BabbleTimeout:case s.a.EndOfDictation:t=n.a.NoMatch;break;case s.a.Error:case s.a.BadRequest:case s.a.Forbidden:default:t=n.a.Canceled}return t}static implTranslateCancelResult(e){let t=i.a.EndOfStream;switch(e){case s.a.Success:case s.a.EndOfDictation:case s.a.NoMatch:t=i.a.EndOfStream;break;case s.a.InitialSilenceTimeout:case s.a.BabbleTimeout:case s.a.Error:case s.a.BadRequest:case s.a.Forbidden:default:t=i.a.Error}return t}static implTranslateCancelErrorCode(e){let t=o.a.NoError;switch(e){case s.a.Error:t=o.a.ServiceError;break;case s.a.TooManyRequests:t=o.a.TooManyRequests;break;case s.a.BadRequest:t=o.a.BadRequestParameters;break;case s.a.Forbidden:t=o.a.Forbidden;break;default:t=o.a.NoError}return t}static implTranslateErrorDetails(e){let t="The speech service encountered an internal error and could not continue.";switch(e){case o.a.Forbidden:t="The recognizer is using a free subscription that ran out of quota.";break;case o.a.BadRequestParameters:t="Invalid parameter or unsupported audio format in the request.";break;case o.a.TooManyRequests:t="The number of parallel requests exceeded the number of allowed concurrent transcriptions."}return t}}},,,,function(e,t,r){"use strict";r.d(t,"a",(function(){return a})),r.d(t,"b",(function(){return c})),r.d(t,"c",(function(){return u})),r.d(t,"d",(function(){return p})),r.d(t,"e",(function(){return h}));var n=r(33),i=r(237),o=r(3),s=r(75);class a{constructor(){}static createPullStream(){return c.create()}}class c extends a{static create(){return new u}}class u extends c{constructor(){super(),this.privId=Object(n.b)(),this.privStream=new i.a}set format(e){null==e&&(this.privFormat=s.a.getDefaultOutputFormat()),this.privFormat=e}get format(){return this.privFormat}get isClosed(){return this.privStream.isClosed}id(){return this.privId}read(e){return function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))}(this,void 0,void 0,(function*(){const t=new Int8Array(e);let r=0;if(void 0!==this.privLastChunkView){if(this.privLastChunkView.length>e.byteLength)return t.set(this.privLastChunkView.slice(0,e.byteLength)),this.privLastChunkView=this.privLastChunkView.slice(e.byteLength),Promise.resolve(e.byteLength);t.set(this.privLastChunkView),r=this.privLastChunkView.length,this.privLastChunkView=void 0}for(;r<e.byteLength&&!this.privStream.isReadEnded;){const n=yield this.privStream.read();if(void 0===n||n.isEnd)this.privStream.readEnded();else{let i;n.buffer.byteLength>e.byteLength-r?(i=n.buffer.slice(0,e.byteLength-r),this.privLastChunkView=new Int8Array(n.buffer.slice(e.byteLength-r))):i=n.buffer,t.set(new Int8Array(i),r),r+=i.byteLength}}return r}))}write(e){o.a.throwIfNullOrUndefined(this.privStream,"must set format before writing"),this.privStream.writeStreamChunk({buffer:e,isEnd:!1,timeReceived:Date.now()})}close(){this.privStream.close()}}class p extends a{constructor(){super()}static create(e){return new h(e)}}class h extends p{constructor(e){super(),this.privId=Object(n.b)(),this.privCallback=e}set format(e){}write(e){this.privCallback.write&&this.privCallback.write(e)}close(){this.privCallback.close&&this.privCallback.close()}id(){return this.privId}}},function(e,t,r){"use strict";var n;r.d(t,"a",(function(){return o}));var i=new Uint8Array(16);function o(){if(!n&&!(n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return n(i)}},,,function(e,t,r){"use strict";var n;r.d(t,"a",(function(){return n})),function(e){e[e.Error=0]="Error",e[e.EndOfStream=1]="EndOfStream"}(n||(n={}))},function(e,t){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,"exports",{enumerable:!0}),t.webpackPolyfill=1}return t}},,,function(e,t,r){"use strict";r.d(t,"c",(function(){return n})),r.d(t,"d",(function(){return c})),r.d(t,"e",(function(){return u})),r.d(t,"a",(function(){return p})),r.d(t,"b",(function(){return d})),r.d(t,"f",(function(){return o})),r.d(t,"g",(function(){return s}));var n,i,o,s,a=r(5);!function(e){e[e.Interactive=0]="Interactive",e[e.Conversation=1]="Conversation",e[e.Dictation=2]="Dictation"}(n||(n={})),function(e){e[e.Simple=0]="Simple",e[e.Detailed=1]="Detailed"}(i||(i={}));class c{constructor(e,t){this.privSpeechServiceConfig=e||new u(new p(null)),this.privParameters=t,this.privMaxRetryCount=parseInt(t.getProperty("SPEECH-Error-MaxRetryCount","4"),10),this.privLanguageIdPriority=t.getProperty(a.a.SpeechServiceConnection_ContinuousLanguageIdPriority,void 0),this.privLanguageIdMode="Latency"===this.privLanguageIdPriority?"DetectContinuous":"DetectAtAudioStart","DetectAtAudioStart"===this.privLanguageIdMode&&(this.privLanguageIdPriority=t.getProperty(a.a.SpeechServiceConnection_AtStartLanguageIdPriority,void 0))}get parameters(){return this.privParameters}get recognitionMode(){return this.privRecognitionMode}set recognitionMode(e){this.privRecognitionMode=e,this.privRecognitionActivityTimeout=e===n.Interactive?8e3:25e3,this.privSpeechServiceConfig.Recognition=n[e]}get SpeechServiceConfig(){return this.privSpeechServiceConfig}get recognitionActivityTimeout(){return this.privRecognitionActivityTimeout}get isContinuousRecognition(){return this.privRecognitionMode!==n.Interactive}get languageIdPriority(){return this.privLanguageIdPriority?"Prioritize"+this.privLanguageIdPriority:""}get languageIdMode(){return this.privLanguageIdMode}get autoDetectSourceLanguages(){return this.parameters.getProperty(a.a.SpeechServiceConnection_AutoDetectSourceLanguages,void 0)}get recognitionEndpointVersion(){return this.parameters.getProperty(a.a.SpeechServiceConnection_RecognitionEndpointVersion,void 0)}get sourceLanguageModels(){const e=[];let t=!1;if(void 0!==this.autoDetectSourceLanguages)for(const r of this.autoDetectSourceLanguages.split(",")){const n=r+a.a.SpeechServiceConnection_EndpointId.toString(),i=this.parameters.getProperty(n,void 0);void 0!==i?(e.push({language:r,endpoint:i}),t=!0):e.push({language:r,endpoint:""})}return t?e:void 0}get maxRetryCount(){return this.privMaxRetryCount}}class u{constructor(e){this.context=e}serialize(){return JSON.stringify(this,(e,t)=>{if(t&&"object"==typeof t){const e={};for(const r in t)Object.hasOwnProperty.call(t,r)&&(e[r&&r.charAt(0).toLowerCase()+r.substring(1)]=t[r]);return e}return t})}get Context(){return this.context}get Recognition(){return this.recognition}set Recognition(e){this.recognition=e.toLowerCase()}}class p{constructor(e){this.system=new h,this.os=e}}class h{constructor(){this.name="SpeechSDK",this.version="1.24.1",this.build="JavaScript",this.lang="JavaScript"}}class d{constructor(e,t,r){this.platform=e,this.name=t,this.version=r}}!function(e){e.Bluetooth="Bluetooth",e.Wired="Wired",e.WiFi="WiFi",e.Cellular="Cellular",e.InBuilt="InBuilt",e.Unknown="Unknown"}(o||(o={})),function(e){e.Phone="Phone",e.Speaker="Speaker",e.Car="Car",e.Headset="Headset",e.Thermostat="Thermostat",e.Microphones="Microphones",e.Deskphone="Deskphone",e.RemoteControl="RemoteControl",e.Unknown="Unknown",e.File="File",e.Stream="Stream"}(s||(s={}))},function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var n=r(168);class i extends n.a{constructor(e,t,r,n,i,o,s,a,c,u,p){super(e,t,r,n,i,o,s,c,u,p),this.privSpeakerId=a}get speakerId(){return this.privSpeakerId}}},function(e,t,r){"use strict";r.d(t,"b",(function(){return o})),r.d(t,"d",(function(){return s})),r.d(t,"c",(function(){return a})),r.d(t,"a",(function(){return c})),r.d(t,"f",(function(){return p})),r.d(t,"e",(function(){return h})),r.d(t,"g",(function(){return d})),r.d(t,"h",(function(){return l}));var n=r(14);class i extends n.b{constructor(e,t,r=n.a.Info){super(e,r),this.privAudioSourceId=t}get audioSourceId(){return this.privAudioSourceId}}class o extends i{constructor(e){super("AudioSourceInitializingEvent",e)}}class s extends i{constructor(e){super("AudioSourceReadyEvent",e)}}class a extends i{constructor(e){super("AudioSourceOffEvent",e)}}class c extends i{constructor(e,t){super("AudioSourceErrorEvent",e,n.a.Error),this.privError=t}get error(){return this.privError}}class u extends i{constructor(e,t,r){super(e,t),this.privAudioNodeId=r}get audioNodeId(){return this.privAudioNodeId}}class p extends u{constructor(e,t){super("AudioStreamNodeAttachingEvent",e,t)}}class h extends u{constructor(e,t){super("AudioStreamNodeAttachedEvent",e,t)}}class d extends u{constructor(e,t){super("AudioStreamNodeDetachedEvent",e,t)}}class l extends u{constructor(e,t,r){super("AudioStreamNodeErrorEvent",e,t),this.privError=r}get error(){return this.privError}}},function(e,t,r){"use strict";r.d(t,"b",(function(){return n})),r.d(t,"a",(function(){return c}));var n,i=r(236),o=r.n(i),s=r(15),a=r(87);!function(e){e.Get="GET",e.Post="POST",e.Delete="DELETE",e.File="file"}(n||(n={}));class c{constructor(e){if(!e)throw new s.a("configParams");this.privHeaders=e.headers,this.privIgnoreCache=e.ignoreCache}static extractHeaderValue(e,t){let r="";try{const n=t.trim().split(/[\r\n]+/),i={};n.forEach(e=>{const t=e.split(": "),r=t.shift().toLowerCase(),n=t.join(": ");i[r]=n}),r=i[e.toLowerCase()]}catch(e){}return r}set options(e){this.privHeaders=e.headers,this.privIgnoreCache=e.ignoreCache}setHeaders(e,t){this.privHeaders[e]=t}request(e,t,r={},i=null,s=null){const c=new a.a,u=e===n.File?"POST":e,p=(e,t={})=>{const r=e;return{data:JSON.stringify(t),headers:JSON.stringify(e.headers),json:t,ok:e.statusCode>=200&&e.statusCode<300,status:e.statusCode,statusText:t.error?t.error.message:r.statusText?r.statusText:r.statusMessage}},h=i=>{o()(t,u,this.privHeaders,200,201,202,204,400,401,402,403,404)(""===this.queryParams(r)?"":"?"+this.queryParams(r),i).then(t=>function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))}(this,void 0,void 0,(function*(){if(e===n.Delete||204===t.statusCode)c.resolve(p(t));else try{const e=yield t.json();c.resolve(p(t,e))}catch(e){c.resolve(p(t))}}))).catch(e=>{c.reject(e)})};if(this.privIgnoreCache&&(this.privHeaders["Cache-Control"]="no-cache"),e===n.File&&s){const e="multipart/form-data";this.privHeaders["content-type"]=e,this.privHeaders["Content-Type"]=e,"undefined"!=typeof Blob&&s instanceof Blob?(e=>{const t=new FileReader;return t.readAsArrayBuffer(e),new Promise(e=>{t.onloadend=()=>{e(t.result)}})})(s).then(e=>{h(e)}).catch(e=>{c.reject(e)}):h(s)}else e===n.Post&&i&&(this.privHeaders["content-type"]="application/json",this.privHeaders["Content-Type"]="application/json"),h(i);return c.promise}withQuery(e,t={}){const r=this.queryParams(t);return r?e+(-1===e.indexOf("?")?"?":"&")+r:e}queryParams(e={}){return Object.keys(e).map(t=>encodeURIComponent(t)+"="+encodeURIComponent(e[t])).join("&")}}},function(e,t,r){"use strict";r.r(t),r.d(t,"add",(function(){return C})),r.d(t,"after",(function(){return L})),r.d(t,"ary",(function(){return et})),r.d(t,"assign",(function(){return Lt})),r.d(t,"assignIn",(function(){return jt})),r.d(t,"assignInWith",(function(){return Ut})),r.d(t,"assignWith",(function(){return Ft})),r.d(t,"at",(function(){return br})),r.d(t,"attempt",(function(){return Or})),r.d(t,"before",(function(){return xr})),r.d(t,"bind",(function(){return Dr})),r.d(t,"bindAll",(function(){return Mr})),r.d(t,"bindKey",(function(){return Nr})),r.d(t,"camelCase",(function(){return En})),r.d(t,"capitalize",(function(){return Zr})),r.d(t,"castArray",(function(){return _n})),r.d(t,"ceil",(function(){return xn})),r.d(t,"chain",(function(){return kn})),r.d(t,"chunk",(function(){return Ln})),r.d(t,"clamp",(function(){return zn})),r.d(t,"clone",(function(){return Ci})),r.d(t,"cloneDeep",(function(){return Ri})),r.d(t,"cloneDeepWith",(function(){return Pi})),r.d(t,"cloneWith",(function(){return Ii})),r.d(t,"commit",(function(){return Ei})),r.d(t,"compact",(function(){return _i})),r.d(t,"concat",(function(){return Ti})),r.d(t,"cond",(function(){return eo})),r.d(t,"conforms",(function(){return ro})),r.d(t,"conformsTo",(function(){return no})),r.d(t,"constant",(function(){return xe})),r.d(t,"countBy",(function(){return fo})),r.d(t,"create",(function(){return vo})),r.d(t,"curry",(function(){return mo})),r.d(t,"curryRight",(function(){return So})),r.d(t,"debounce",(function(){return Ro})),r.d(t,"deburr",(function(){return sn})),r.d(t,"defaultTo",(function(){return Po})),r.d(t,"defaults",(function(){return _o})),r.d(t,"defaultsDeep",(function(){return Lo})),r.d(t,"defer",(function(){return zo})),r.d(t,"delay",(function(){return Bo})),r.d(t,"difference",(function(){return Fo})),r.d(t,"differenceBy",(function(){return Wo})),r.d(t,"differenceWith",(function(){return Ho})),r.d(t,"divide",(function(){return Ko})),r.d(t,"drop",(function(){return Vo})),r.d(t,"dropRight",(function(){return Jo})),r.d(t,"dropRightWhile",(function(){return $o})),r.d(t,"dropWhile",(function(){return Yo})),r.d(t,"each",(function(){return Qo})),r.d(t,"eachRight",(function(){return ns})),r.d(t,"endsWith",(function(){return is})),r.d(t,"entries",(function(){return ss})),r.d(t,"entriesIn",(function(){return as})),r.d(t,"eq",(function(){return rt})),r.d(t,"escape",(function(){return hs})),r.d(t,"escapeRegExp",(function(){return fs})),r.d(t,"every",(function(){return ms})),r.d(t,"extend",(function(){return jt})),r.d(t,"extendWith",(function(){return Ut})),r.d(t,"fill",(function(){return Ss})),r.d(t,"filter",(function(){return bs})),r.d(t,"find",(function(){return Is})),r.d(t,"findIndex",(function(){return Ps})),r.d(t,"findKey",(function(){return _s})),r.d(t,"findLast",(function(){return xs})),r.d(t,"findLastIndex",(function(){return Os})),r.d(t,"findLastKey",(function(){return ks})),r.d(t,"first",(function(){return Ds})),r.d(t,"flatMap",(function(){return Ns})),r.d(t,"flatMapDeep",(function(){return zs})),r.d(t,"flatMapDepth",(function(){return Bs})),r.d(t,"flatten",(function(){return Sr})),r.d(t,"flattenDeep",(function(){return js})),r.d(t,"flattenDepth",(function(){return Us})),r.d(t,"flip",(function(){return Fs})),r.d(t,"floor",(function(){return qs})),r.d(t,"flow",(function(){return Hs})),r.d(t,"flowRight",(function(){return Ks})),r.d(t,"forEach",(function(){return Qo})),r.d(t,"forEachRight",(function(){return ns})),r.d(t,"forIn",(function(){return Vs})),r.d(t,"forInRight",(function(){return Js})),r.d(t,"forOwn",(function(){return Gs})),r.d(t,"forOwnRight",(function(){return $s})),r.d(t,"fromPairs",(function(){return Ys})),r.d(t,"functions",(function(){return Qs})),r.d(t,"functionsIn",(function(){return Zs})),r.d(t,"get",(function(){return lr})),r.d(t,"groupBy",(function(){return ta})),r.d(t,"gt",(function(){return ia})),r.d(t,"gte",(function(){return oa})),r.d(t,"has",(function(){return ca})),r.d(t,"hasIn",(function(){return $i})),r.d(t,"head",(function(){return Ds})),r.d(t,"identity",(function(){return N})),r.d(t,"inRange",(function(){return ha})),r.d(t,"includes",(function(){return ga})),r.d(t,"indexOf",(function(){return ya})),r.d(t,"initial",(function(){return Sa})),r.d(t,"intersection",(function(){return Ra})),r.d(t,"intersectionBy",(function(){return Pa})),r.d(t,"intersectionWith",(function(){return Ia})),r.d(t,"invert",(function(){return Ta})),r.d(t,"invertBy",(function(){return ka})),r.d(t,"invoke",(function(){return La})),r.d(t,"invokeMap",(function(){return Na})),r.d(t,"isArguments",(function(){return wt})),r.d(t,"isArray",(function(){return m})),r.d(t,"isArrayBuffer",(function(){return Ba})),r.d(t,"isArrayLike",(function(){return pt})),r.d(t,"isArrayLikeObject",(function(){return Ao})),r.d(t,"isBoolean",(function(){return ja})),r.d(t,"isBuffer",(function(){return bt.a})),r.d(t,"isDate",(function(){return Fa})),r.d(t,"isElement",(function(){return qa})),r.d(t,"isEmpty",(function(){return Ha})),r.d(t,"isEqual",(function(){return Ka})),r.d(t,"isEqualWith",(function(){return Va})),r.d(t,"isError",(function(){return Ar})),r.d(t,"isFinite",(function(){return Ga})),r.d(t,"isFunction",(function(){return z})),r.d(t,"isInteger",(function(){return $a})),r.d(t,"isLength",(function(){return ut})),r.d(t,"isMap",(function(){return mi})),r.d(t,"isMatch",(function(){return Ya})),r.d(t,"isMatchWith",(function(){return Xa})),r.d(t,"isNaN",(function(){return Za})),r.d(t,"isNative",(function(){return rc})),r.d(t,"isNil",(function(){return nc})),r.d(t,"isNull",(function(){return ic})),r.d(t,"isNumber",(function(){return Qa})),r.d(t,"isObject",(function(){return _})),r.d(t,"isObjectLike",(function(){return l})),r.d(t,"isPlainObject",(function(){return Tr})),r.d(t,"isRegExp",(function(){return sc})),r.d(t,"isSafeInteger",(function(){return ac})),r.d(t,"isSet",(function(){return Si})),r.d(t,"isString",(function(){return da})),r.d(t,"isSymbol",(function(){return f})),r.d(t,"isTypedArray",(function(){return Et})),r.d(t,"isUndefined",(function(){return cc})),r.d(t,"isWeakMap",(function(){return uc})),r.d(t,"isWeakSet",(function(){return pc})),r.d(t,"iteratee",(function(){return hc})),r.d(t,"join",(function(){return lc})),r.d(t,"kebabCase",(function(){return fc})),r.d(t,"keyBy",(function(){return vc})),r.d(t,"keys",(function(){return Dt})),r.d(t,"keysIn",(function(){return Bt})),r.d(t,"last",(function(){return qo})),r.d(t,"lastIndexOf",(function(){return yc})),r.d(t,"lodash",(function(){return Re})),r.d(t,"lowerCase",(function(){return Sc})),r.d(t,"lowerFirst",(function(){return wc})),r.d(t,"lt",(function(){return Cc})),r.d(t,"lte",(function(){return Rc})),r.d(t,"map",(function(){return Ls})),r.d(t,"mapKeys",(function(){return Pc})),r.d(t,"mapValues",(function(){return Ic})),r.d(t,"matches",(function(){return Ec})),r.d(t,"matchesProperty",(function(){return _c})),r.d(t,"max",(function(){return Ac})),r.d(t,"maxBy",(function(){return Oc})),r.d(t,"mean",(function(){return Dc})),r.d(t,"meanBy",(function(){return Mc})),r.d(t,"memoize",(function(){return or})),r.d(t,"merge",(function(){return Lc})),r.d(t,"mergeWith",(function(){return Mo})),r.d(t,"method",(function(){return Nc})),r.d(t,"methodOf",(function(){return zc})),r.d(t,"min",(function(){return Bc})),r.d(t,"minBy",(function(){return jc})),r.d(t,"mixin",(function(){return Uc})),r.d(t,"multiply",(function(){return Fc})),r.d(t,"negate",(function(){return qc})),r.d(t,"next",(function(){return Kc})),r.d(t,"noop",(function(){return de})),r.d(t,"now",(function(){return wo})),r.d(t,"nth",(function(){return Jc})),r.d(t,"nthArg",(function(){return Gc})),r.d(t,"omit",(function(){return Xc})),r.d(t,"omitBy",(function(){return tu})),r.d(t,"once",(function(){return ru})),r.d(t,"orderBy",(function(){return ou})),r.d(t,"over",(function(){return au})),r.d(t,"overArgs",(function(){return pu})),r.d(t,"overEvery",(function(){return hu})),r.d(t,"overSome",(function(){return du})),r.d(t,"pad",(function(){return Au})),r.d(t,"padEnd",(function(){return Ou})),r.d(t,"padStart",(function(){return xu})),r.d(t,"parseInt",(function(){return Mu})),r.d(t,"partial",(function(){return Nu})),r.d(t,"partialRight",(function(){return Uu})),r.d(t,"partition",(function(){return Fu})),r.d(t,"pick",(function(){return qu})),r.d(t,"pickBy",(function(){return eu})),r.d(t,"plant",(function(){return Wu})),r.d(t,"property",(function(){return Qi})),r.d(t,"propertyOf",(function(){return Hu})),r.d(t,"pull",(function(){return $u})),r.d(t,"pullAll",(function(){return Gu})),r.d(t,"pullAllBy",(function(){return Yu})),r.d(t,"pullAllWith",(function(){return Xu})),r.d(t,"pullAt",(function(){return ep})),r.d(t,"random",(function(){return ap})),r.d(t,"range",(function(){return hp})),r.d(t,"rangeRight",(function(){return dp})),r.d(t,"rearg",(function(){return lp})),r.d(t,"reduce",(function(){return vp})),r.d(t,"reduceRight",(function(){return mp})),r.d(t,"reject",(function(){return yp})),r.d(t,"remove",(function(){return Sp})),r.d(t,"repeat",(function(){return wp})),r.d(t,"replace",(function(){return bp})),r.d(t,"rest",(function(){return Cp})),r.d(t,"result",(function(){return Rp})),r.d(t,"reverse",(function(){return Ip})),r.d(t,"round",(function(){return Ep})),r.d(t,"sample",(function(){return Ap})),r.d(t,"sampleSize",(function(){return Dp})),r.d(t,"set",(function(){return Mp})),r.d(t,"setWith",(function(){return Lp})),r.d(t,"shuffle",(function(){return Bp})),r.d(t,"size",(function(){return jp})),r.d(t,"slice",(function(){return Up})),r.d(t,"snakeCase",(function(){return Fp})),r.d(t,"some",(function(){return Wp})),r.d(t,"sortBy",(function(){return Hp})),r.d(t,"sortedIndex",(function(){return $p})),r.d(t,"sortedIndexBy",(function(){return Yp})),r.d(t,"sortedIndexOf",(function(){return Xp})),r.d(t,"sortedLastIndex",(function(){return Qp})),r.d(t,"sortedLastIndexBy",(function(){return Zp})),r.d(t,"sortedLastIndexOf",(function(){return eh})),r.d(t,"sortedUniq",(function(){return rh})),r.d(t,"sortedUniqBy",(function(){return nh})),r.d(t,"split",(function(){return ih})),r.d(t,"spread",(function(){return sh})),r.d(t,"startCase",(function(){return ah})),r.d(t,"startsWith",(function(){return ch})),r.d(t,"stubArray",(function(){return Wn})),r.d(t,"stubFalse",(function(){return ec.a})),r.d(t,"stubObject",(function(){return uh})),r.d(t,"stubString",(function(){return ph})),r.d(t,"stubTrue",(function(){return hh})),r.d(t,"subtract",(function(){return dh})),r.d(t,"sum",(function(){return lh})),r.d(t,"sumBy",(function(){return fh})),r.d(t,"tail",(function(){return vh})),r.d(t,"take",(function(){return gh})),r.d(t,"takeRight",(function(){return mh})),r.d(t,"takeRightWhile",(function(){return yh})),r.d(t,"takeWhile",(function(){return Sh})),r.d(t,"tap",(function(){return wh})),r.d(t,"template",(function(){return Nh})),r.d(t,"templateSettings",(function(){return _h})),r.d(t,"throttle",(function(){return zh})),r.d(t,"thru",(function(){return Bh})),r.d(t,"times",(function(){return Uh})),r.d(t,"toArray",(function(){return Hc})),r.d(t,"toFinite",(function(){return D})),r.d(t,"toInteger",(function(){return M})),r.d(t,"toIterator",(function(){return Fh})),r.d(t,"toJSON",(function(){return Wh})),r.d(t,"toLength",(function(){return ys})),r.d(t,"toLower",(function(){return Hh})),r.d(t,"toNumber",(function(){return k})),r.d(t,"toPairs",(function(){return ss})),r.d(t,"toPairsIn",(function(){return as})),r.d(t,"toPath",(function(){return Kh})),r.d(t,"toPlainObject",(function(){return xo})),r.d(t,"toSafeInteger",(function(){return Vh})),r.d(t,"toString",(function(){return ur})),r.d(t,"toUpper",(function(){return Jh})),r.d(t,"transform",(function(){return Gh})),r.d(t,"trim",(function(){return Xh})),r.d(t,"trimEnd",(function(){return Qh})),r.d(t,"trimStart",(function(){return ed})),r.d(t,"truncate",(function(){return rd})),r.d(t,"unary",(function(){return nd})),r.d(t,"unescape",(function(){return ad})),r.d(t,"union",(function(){return pd})),r.d(t,"unionBy",(function(){return hd})),r.d(t,"unionWith",(function(){return dd})),r.d(t,"uniq",(function(){return ld})),r.d(t,"uniqBy",(function(){return fd})),r.d(t,"uniqWith",(function(){return vd})),r.d(t,"uniqueId",(function(){return md})),r.d(t,"unset",(function(){return yd})),r.d(t,"unzip",(function(){return wd})),r.d(t,"unzipWith",(function(){return bd})),r.d(t,"update",(function(){return Rd})),r.d(t,"updateWith",(function(){return Pd})),r.d(t,"upperCase",(function(){return Id})),r.d(t,"upperFirst",(function(){return Qr})),r.d(t,"value",(function(){return Wh})),r.d(t,"valueOf",(function(){return Wh})),r.d(t,"values",(function(){return fa})),r.d(t,"valuesIn",(function(){return Ed})),r.d(t,"without",(function(){return _d})),r.d(t,"words",(function(){return Rn})),r.d(t,"wrap",(function(){return Td})),r.d(t,"wrapperAt",(function(){return Ad})),r.d(t,"wrapperChain",(function(){return Od})),r.d(t,"wrapperCommit",(function(){return Ei})),r.d(t,"wrapperLodash",(function(){return Re})),r.d(t,"wrapperNext",(function(){return Kc})),r.d(t,"wrapperPlant",(function(){return Wu})),r.d(t,"wrapperReverse",(function(){return xd})),r.d(t,"wrapperToIterator",(function(){return Fh})),r.d(t,"wrapperValue",(function(){return Wh})),r.d(t,"xor",(function(){return Dd})),r.d(t,"xorBy",(function(){return Md})),r.d(t,"xorWith",(function(){return Ld})),r.d(t,"zip",(function(){return Nd})),r.d(t,"zipObject",(function(){return Bd})),r.d(t,"zipObjectDeep",(function(){return jd})),r.d(t,"zipWith",(function(){return Ud})),r.d(t,"default",(function(){return al}));var n,i=r(6),o=i.a.Symbol,s=Object.prototype,a=s.hasOwnProperty,c=s.toString,u=o?o.toStringTag:void 0,p=Object.prototype.toString,h=o?o.toStringTag:void 0,d=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":h&&h in Object(e)?function(e){var t=a.call(e,u),r=e[u];try{e[u]=void 0;var n=!0}catch(e){}var i=c.call(e);return n&&(t?e[u]=r:delete e[u]),i}(e):function(e){return p.call(e)}(e)},l=function(e){return null!=e&&"object"==typeof e},f=function(e){return"symbol"==typeof e||l(e)&&"[object Symbol]"==d(e)},v=function(e){return"number"==typeof e?e:f(e)?NaN:+e},g=function(e,t){for(var r=-1,n=null==e?0:e.length,i=Array(n);++r<n;)i[r]=t(e[r],r,e);return i},m=Array.isArray,y=o?o.prototype:void 0,S=y?y.toString:void 0,w=function e(t){if("string"==typeof t)return t;if(m(t))return g(t,e)+"";if(f(t))return S?S.call(t):"";var r=t+"";return"0"==r&&1/t==-1/0?"-0":r},b=function(e,t){return function(r,n){var i;if(void 0===r&&void 0===n)return t;if(void 0!==r&&(i=r),void 0!==n){if(void 0===i)return n;"string"==typeof r||"string"==typeof n?(r=w(r),n=w(n)):(r=v(r),n=v(n)),i=e(r,n)}return i}},C=b((function(e,t){return e+t}),0),R=/\s/,P=function(e){for(var t=e.length;t--&&R.test(e.charAt(t)););return t},I=/^\s+/,E=function(e){return e?e.slice(0,P(e)+1).replace(I,""):e},_=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)},T=/^[-+]0x[0-9a-f]+$/i,A=/^0b[01]+$/i,O=/^0o[0-7]+$/i,x=parseInt,k=function(e){if("number"==typeof e)return e;if(f(e))return NaN;if(_(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=_(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=E(e);var r=A.test(e);return r||O.test(e)?x(e.slice(2),r?2:8):T.test(e)?NaN:+e},D=function(e){return e?(e=k(e))===1/0||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0},M=function(e){var t=D(e),r=t%1;return t==t?r?t-r:t:0},L=function(e,t){if("function"!=typeof t)throw new TypeError("Expected a function");return e=M(e),function(){if(--e<1)return t.apply(this,arguments)}},N=function(e){return e},z=function(e){if(!_(e))return!1;var t=d(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t},B=i.a["__core-js_shared__"],j=(n=/[^.]+$/.exec(B&&B.keys&&B.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"",U=Function.prototype.toString,F=function(e){if(null!=e){try{return U.call(e)}catch(e){}try{return e+""}catch(e){}}return""},q=/^\[object .+?Constructor\]$/,W=Function.prototype,H=Object.prototype,K=W.toString,V=H.hasOwnProperty,J=RegExp("^"+K.call(V).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),G=function(e){return!(!_(e)||function(e){return!!j&&j in e}(e))&&(z(e)?J:q).test(F(e))},$=function(e,t){var r=function(e,t){return null==e?void 0:e[t]}(e,t);return G(r)?r:void 0},Y=$(i.a,"WeakMap"),X=Y&&new Y,Q=X?function(e,t){return X.set(e,t),e}:N,Z=Object.create,ee=function(){function e(){}return function(t){if(!_(t))return{};if(Z)return Z(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}(),te=function(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var r=ee(e.prototype),n=e.apply(r,t);return _(n)?n:r}},re=function(e,t,r){var n=1&t,o=te(e);return function t(){var s=this&&this!==i.a&&this instanceof t?o:e;return s.apply(n?r:this,arguments)}},ne=function(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)},ie=Math.max,oe=function(e,t,r,n){for(var i=-1,o=e.length,s=r.length,a=-1,c=t.length,u=ie(o-s,0),p=Array(c+u),h=!n;++a<c;)p[a]=t[a];for(;++i<s;)(h||i<o)&&(p[r[i]]=e[i]);for(;u--;)p[a++]=e[i++];return p},se=Math.max,ae=function(e,t,r,n){for(var i=-1,o=e.length,s=-1,a=r.length,c=-1,u=t.length,p=se(o-a,0),h=Array(p+u),d=!n;++i<p;)h[i]=e[i];for(var l=i;++c<u;)h[l+c]=t[c];for(;++s<a;)(d||i<o)&&(h[l+r[s]]=e[i++]);return h},ce=function(e,t){for(var r=e.length,n=0;r--;)e[r]===t&&++n;return n},ue=function(){};function pe(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=4294967295,this.__views__=[]}pe.prototype=ee(ue.prototype),pe.prototype.constructor=pe;var he=pe,de=function(){},le=X?function(e){return X.get(e)}:de,fe={},ve=Object.prototype.hasOwnProperty,ge=function(e){for(var t=e.name+"",r=fe[t],n=ve.call(fe,t)?r.length:0;n--;){var i=r[n],o=i.func;if(null==o||o==e)return i.name}return t};function me(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=void 0}me.prototype=ee(ue.prototype),me.prototype.constructor=me;var ye=me,Se=function(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t},we=function(e){if(e instanceof he)return e.clone();var t=new ye(e.__wrapped__,e.__chain__);return t.__actions__=Se(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t},be=Object.prototype.hasOwnProperty;function Ce(e){if(l(e)&&!m(e)&&!(e instanceof he)){if(e instanceof ye)return e;if(be.call(e,"__wrapped__"))return we(e)}return new ye(e)}Ce.prototype=ue.prototype,Ce.prototype.constructor=Ce;var Re=Ce,Pe=function(e){var t=ge(e),r=Re[t];if("function"!=typeof r||!(t in he.prototype))return!1;if(e===r)return!0;var n=le(r);return!!n&&e===n[0]},Ie=Date.now,Ee=function(e){var t=0,r=0;return function(){var n=Ie(),i=16-(n-r);if(r=n,i>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}},_e=Ee(Q),Te=/\{\n\/\* \[wrapped with (.+)\] \*/,Ae=/,? & /,Oe=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,xe=function(e){return function(){return e}},ke=function(){try{var e=$(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),De=Ee(ke?function(e,t){return ke(e,"toString",{configurable:!0,enumerable:!1,value:xe(t),writable:!0})}:N),Me=function(e,t){for(var r=-1,n=null==e?0:e.length;++r<n&&!1!==t(e[r],r,e););return e},Le=function(e,t,r,n){for(var i=e.length,o=r+(n?1:-1);n?o--:++o<i;)if(t(e[o],o,e))return o;return-1},Ne=function(e){return e!=e},ze=function(e,t,r){return t==t?function(e,t,r){for(var n=r-1,i=e.length;++n<i;)if(e[n]===t)return n;return-1}(e,t,r):Le(e,Ne,r)},Be=function(e,t){return!(null==e||!e.length)&&ze(e,t,0)>-1},je=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],Ue=function(e,t,r){var n=t+"";return De(e,function(e,t){var r=t.length;if(!r)return e;var n=r-1;return t[n]=(r>1?"& ":"")+t[n],t=t.join(r>2?", ":" "),e.replace(Oe,"{\n/* [wrapped with "+t+"] */\n")}(n,function(e,t){return Me(je,(function(r){var n="_."+r[0];t&r[1]&&!Be(e,n)&&e.push(n)})),e.sort()}(function(e){var t=e.match(Te);return t?t[1].split(Ae):[]}(n),r)))},Fe=function(e,t,r,n,i,o,s,a,c,u){var p=8&t;t|=p?32:64,4&(t&=~(p?64:32))||(t&=-4);var h=[e,t,i,p?o:void 0,p?s:void 0,p?void 0:o,p?void 0:s,a,c,u],d=r.apply(void 0,h);return Pe(e)&&_e(d,h),d.placeholder=n,Ue(d,e,t)},qe=function(e){return e.placeholder},We=/^(?:0|[1-9]\d*)$/,He=function(e,t){var r=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==r||"symbol"!=r&&We.test(e))&&e>-1&&e%1==0&&e<t},Ke=Math.min,Ve=function(e,t){for(var r=e.length,n=Ke(t.length,r),i=Se(e);n--;){var o=t[n];e[n]=He(o,r)?i[o]:void 0}return e},Je=function(e,t){for(var r=-1,n=e.length,i=0,o=[];++r<n;){var s=e[r];s!==t&&"__lodash_placeholder__"!==s||(e[r]="__lodash_placeholder__",o[i++]=r)}return o},Ge=function e(t,r,n,o,s,a,c,u,p,h){var d=128&r,l=1&r,f=2&r,v=24&r,g=512&r,m=f?void 0:te(t);return function y(){for(var S=arguments.length,w=Array(S),b=S;b--;)w[b]=arguments[b];if(v)var C=qe(y),R=ce(w,C);if(o&&(w=oe(w,o,s,v)),a&&(w=ae(w,a,c,v)),S-=R,v&&S<h){var P=Je(w,C);return Fe(t,r,e,y.placeholder,n,w,P,u,p,h-S)}var I=l?n:this,E=f?I[t]:t;return S=w.length,u?w=Ve(w,u):g&&S>1&&w.reverse(),d&&p<S&&(w.length=p),this&&this!==i.a&&this instanceof y&&(E=m||te(E)),E.apply(I,w)}},$e=function(e,t,r){var n=te(e);return function o(){for(var s=arguments.length,a=Array(s),c=s,u=qe(o);c--;)a[c]=arguments[c];var p=s<3&&a[0]!==u&&a[s-1]!==u?[]:Je(a,u);if((s-=p.length)<r)return Fe(e,t,Ge,o.placeholder,void 0,a,p,void 0,void 0,r-s);var h=this&&this!==i.a&&this instanceof o?n:e;return ne(h,this,a)}},Ye=function(e,t,r,n){var o=1&t,s=te(e);return function t(){for(var a=-1,c=arguments.length,u=-1,p=n.length,h=Array(p+c),d=this&&this!==i.a&&this instanceof t?s:e;++u<p;)h[u]=n[u];for(;c--;)h[u++]=arguments[++a];return ne(d,o?r:this,h)}},Xe=Math.min,Qe=Math.max,Ze=function(e,t,r,n,i,o,s,a){var c=2&t;if(!c&&"function"!=typeof e)throw new TypeError("Expected a function");var u=n?n.length:0;if(u||(t&=-97,n=i=void 0),s=void 0===s?s:Qe(M(s),0),a=void 0===a?a:M(a),u-=i?i.length:0,64&t){var p=n,h=i;n=i=void 0}var d=c?void 0:le(e),l=[e,t,r,n,i,p,h,o,s,a];if(d&&function(e,t){var r=e[1],n=t[1],i=r|n,o=i<131,s=128==n&&8==r||128==n&&256==r&&e[7].length<=t[8]||384==n&&t[7].length<=t[8]&&8==r;if(!o&&!s)return e;1&n&&(e[2]=t[2],i|=1&r?0:4);var a=t[3];if(a){var c=e[3];e[3]=c?oe(c,a,t[4]):a,e[4]=c?Je(e[3],"__lodash_placeholder__"):t[4]}(a=t[5])&&(c=e[5],e[5]=c?ae(c,a,t[6]):a,e[6]=c?Je(e[5],"__lodash_placeholder__"):t[6]),(a=t[7])&&(e[7]=a),128&n&&(e[8]=null==e[8]?t[8]:Xe(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=i}(l,d),e=l[0],t=l[1],r=l[2],n=l[3],i=l[4],!(a=l[9]=void 0===l[9]?c?0:e.length:Qe(l[9]-u,0))&&24&t&&(t&=-25),t&&1!=t)f=8==t||16==t?$e(e,t,a):32!=t&&33!=t||i.length?Ge.apply(void 0,l):Ye(e,t,r,n);else var f=re(e,t,r);return Ue((d?Q:_e)(f,l),e,t)},et=function(e,t,r){return t=r?void 0:t,t=e&&null==t?e.length:t,Ze(e,128,void 0,void 0,void 0,void 0,t)},tt=function(e,t,r){"__proto__"==t&&ke?ke(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r},rt=function(e,t){return e===t||e!=e&&t!=t},nt=Object.prototype.hasOwnProperty,it=function(e,t,r){var n=e[t];nt.call(e,t)&&rt(n,r)&&(void 0!==r||t in e)||tt(e,t,r)},ot=function(e,t,r,n){var i=!r;r||(r={});for(var o=-1,s=t.length;++o<s;){var a=t[o],c=n?n(r[a],e[a],a,r,e):void 0;void 0===c&&(c=e[a]),i?tt(r,a,c):it(r,a,c)}return r},st=Math.max,at=function(e,t,r){return t=st(void 0===t?e.length-1:t,0),function(){for(var n=arguments,i=-1,o=st(n.length-t,0),s=Array(o);++i<o;)s[i]=n[t+i];i=-1;for(var a=Array(t+1);++i<t;)a[i]=n[i];return a[t]=r(s),ne(e,this,a)}},ct=function(e,t){return De(at(e,t,N),e+"")},ut=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991},pt=function(e){return null!=e&&ut(e.length)&&!z(e)},ht=function(e,t,r){if(!_(r))return!1;var n=typeof t;return!!("number"==n?pt(r)&&He(t,r.length):"string"==n&&t in r)&&rt(r[t],e)},dt=function(e){return ct((function(t,r){var n=-1,i=r.length,o=i>1?r[i-1]:void 0,s=i>2?r[2]:void 0;for(o=e.length>3&&"function"==typeof o?(i--,o):void 0,s&&ht(r[0],r[1],s)&&(o=i<3?void 0:o,i=1),t=Object(t);++n<i;){var a=r[n];a&&e(t,a,n,o)}return t}))},lt=Object.prototype,ft=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||lt)},vt=function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n},gt=function(e){return l(e)&&"[object Arguments]"==d(e)},mt=Object.prototype,yt=mt.hasOwnProperty,St=mt.propertyIsEnumerable,wt=gt(function(){return arguments}())?gt:function(e){return l(e)&&yt.call(e,"callee")&&!St.call(e,"callee")},bt=r(11),Ct={};Ct["[object Float32Array]"]=Ct["[object Float64Array]"]=Ct["[object Int8Array]"]=Ct["[object Int16Array]"]=Ct["[object Int32Array]"]=Ct["[object Uint8Array]"]=Ct["[object Uint8ClampedArray]"]=Ct["[object Uint16Array]"]=Ct["[object Uint32Array]"]=!0,Ct["[object Arguments]"]=Ct["[object Array]"]=Ct["[object ArrayBuffer]"]=Ct["[object Boolean]"]=Ct["[object DataView]"]=Ct["[object Date]"]=Ct["[object Error]"]=Ct["[object Function]"]=Ct["[object Map]"]=Ct["[object Number]"]=Ct["[object Object]"]=Ct["[object RegExp]"]=Ct["[object Set]"]=Ct["[object String]"]=Ct["[object WeakMap]"]=!1;var Rt=function(e){return function(t){return e(t)}},Pt=r(10),It=Pt.a&&Pt.a.isTypedArray,Et=It?Rt(It):function(e){return l(e)&&ut(e.length)&&!!Ct[d(e)]},_t=Object.prototype.hasOwnProperty,Tt=function(e,t){var r=m(e),n=!r&&wt(e),i=!r&&!n&&Object(bt.a)(e),o=!r&&!n&&!i&&Et(e),s=r||n||i||o,a=s?vt(e.length,String):[],c=a.length;for(var u in e)!t&&!_t.call(e,u)||s&&("length"==u||i&&("offset"==u||"parent"==u)||o&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||He(u,c))||a.push(u);return a},At=function(e,t){return function(r){return e(t(r))}},Ot=At(Object.keys,Object),xt=Object.prototype.hasOwnProperty,kt=function(e){if(!ft(e))return Ot(e);var t=[];for(var r in Object(e))xt.call(e,r)&&"constructor"!=r&&t.push(r);return t},Dt=function(e){return pt(e)?Tt(e):kt(e)},Mt=Object.prototype.hasOwnProperty,Lt=dt((function(e,t){if(ft(t)||pt(t))ot(t,Dt(t),e);else for(var r in t)Mt.call(t,r)&&it(e,r,t[r])})),Nt=Object.prototype.hasOwnProperty,zt=function(e){if(!_(e))return function(e){var t=[];if(null!=e)for(var r in Object(e))t.push(r);return t}(e);var t=ft(e),r=[];for(var n in e)("constructor"!=n||!t&&Nt.call(e,n))&&r.push(n);return r},Bt=function(e){return pt(e)?Tt(e,!0):zt(e)},jt=dt((function(e,t){ot(t,Bt(t),e)})),Ut=dt((function(e,t,r,n){ot(t,Bt(t),e,n)})),Ft=dt((function(e,t,r,n){ot(t,Dt(t),e,n)})),qt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Wt=/^\w*$/,Ht=function(e,t){if(m(e))return!1;var r=typeof e;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!f(e))||Wt.test(e)||!qt.test(e)||null!=t&&e in Object(t)},Kt=$(Object,"create"),Vt=Object.prototype.hasOwnProperty,Jt=Object.prototype.hasOwnProperty;function Gt(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Gt.prototype.clear=function(){this.__data__=Kt?Kt(null):{},this.size=0},Gt.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Gt.prototype.get=function(e){var t=this.__data__;if(Kt){var r=t[e];return"__lodash_hash_undefined__"===r?void 0:r}return Vt.call(t,e)?t[e]:void 0},Gt.prototype.has=function(e){var t=this.__data__;return Kt?void 0!==t[e]:Jt.call(t,e)},Gt.prototype.set=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=Kt&&void 0===t?"__lodash_hash_undefined__":t,this};var $t=Gt,Yt=function(e,t){for(var r=e.length;r--;)if(rt(e[r][0],t))return r;return-1},Xt=Array.prototype.splice;function Qt(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Qt.prototype.clear=function(){this.__data__=[],this.size=0},Qt.prototype.delete=function(e){var t=this.__data__,r=Yt(t,e);return!(r<0||(r==t.length-1?t.pop():Xt.call(t,r,1),--this.size,0))},Qt.prototype.get=function(e){var t=this.__data__,r=Yt(t,e);return r<0?void 0:t[r][1]},Qt.prototype.has=function(e){return Yt(this.__data__,e)>-1},Qt.prototype.set=function(e,t){var r=this.__data__,n=Yt(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this};var Zt=Qt,er=$(i.a,"Map"),tr=function(e,t){var r=e.__data__;return function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?r["string"==typeof t?"string":"hash"]:r.map};function rr(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}rr.prototype.clear=function(){this.size=0,this.__data__={hash:new $t,map:new(er||Zt),string:new $t}},rr.prototype.delete=function(e){var t=tr(this,e).delete(e);return this.size-=t?1:0,t},rr.prototype.get=function(e){return tr(this,e).get(e)},rr.prototype.has=function(e){return tr(this,e).has(e)},rr.prototype.set=function(e,t){var r=tr(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this};var nr=rr;function ir(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var r=function(){var n=arguments,i=t?t.apply(this,n):n[0],o=r.cache;if(o.has(i))return o.get(i);var s=e.apply(this,n);return r.cache=o.set(i,s)||o,s};return r.cache=new(ir.Cache||nr),r}ir.Cache=nr;var or=ir,sr=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ar=/\\(\\)?/g,cr=function(e){var t=or((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(sr,(function(e,r,n,i){t.push(n?i.replace(ar,"$1"):r||e)})),t}),(function(e){return 500===r.size&&r.clear(),e})),r=t.cache;return t}(),ur=function(e){return null==e?"":w(e)},pr=function(e,t){return m(e)?e:Ht(e,t)?[e]:cr(ur(e))},hr=function(e){if("string"==typeof e||f(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t},dr=function(e,t){for(var r=0,n=(t=pr(t,e)).length;null!=e&&r<n;)e=e[hr(t[r++])];return r&&r==n?e:void 0},lr=function(e,t,r){var n=null==e?void 0:dr(e,t);return void 0===n?r:n},fr=function(e,t){for(var r=-1,n=t.length,i=Array(n),o=null==e;++r<n;)i[r]=o?void 0:lr(e,t[r]);return i},vr=function(e,t){for(var r=-1,n=t.length,i=e.length;++r<n;)e[i+r]=t[r];return e},gr=o?o.isConcatSpreadable:void 0,mr=function(e){return m(e)||wt(e)||!!(gr&&e&&e[gr])},yr=function e(t,r,n,i,o){var s=-1,a=t.length;for(n||(n=mr),o||(o=[]);++s<a;){var c=t[s];r>0&&n(c)?r>1?e(c,r-1,n,i,o):vr(o,c):i||(o[o.length]=c)}return o},Sr=function(e){return null!=e&&e.length?yr(e,1):[]},wr=function(e){return De(at(e,void 0,Sr),e+"")},br=wr(fr),Cr=At(Object.getPrototypeOf,Object),Rr=Function.prototype,Pr=Object.prototype,Ir=Rr.toString,Er=Pr.hasOwnProperty,_r=Ir.call(Object),Tr=function(e){if(!l(e)||"[object Object]"!=d(e))return!1;var t=Cr(e);if(null===t)return!0;var r=Er.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&Ir.call(r)==_r},Ar=function(e){if(!l(e))return!1;var t=d(e);return"[object Error]"==t||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!Tr(e)},Or=ct((function(e,t){try{return ne(e,void 0,t)}catch(e){return Ar(e)?e:new Error(e)}})),xr=function(e,t){var r;if("function"!=typeof t)throw new TypeError("Expected a function");return e=M(e),function(){return--e>0&&(r=t.apply(this,arguments)),e<=1&&(t=void 0),r}},kr=ct((function(e,t,r){var n=1;if(r.length){var i=Je(r,qe(kr));n|=32}return Ze(e,n,t,r,i)}));kr.placeholder={};var Dr=kr,Mr=wr((function(e,t){return Me(t,(function(t){t=hr(t),tt(e,t,Dr(e[t],e))})),e})),Lr=ct((function(e,t,r){var n=3;if(r.length){var i=Je(r,qe(Lr));n|=32}return Ze(t,n,e,r,i)}));Lr.placeholder={};var Nr=Lr,zr=function(e,t,r){var n=-1,i=e.length;t<0&&(t=-t>i?0:i+t),(r=r>i?i:r)<0&&(r+=i),i=t>r?0:r-t>>>0,t>>>=0;for(var o=Array(i);++n<i;)o[n]=e[n+t];return o},Br=function(e,t,r){var n=e.length;return r=void 0===r?n:r,!t&&r>=n?e:zr(e,t,r)},jr=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]"),Ur=function(e){return jr.test(e)},Fr="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",qr="\\ud83c[\\udffb-\\udfff]",Wr="[^\\ud800-\\udfff]",Hr="(?:\\ud83c[\\udde6-\\uddff]){2}",Kr="[\\ud800-\\udbff][\\udc00-\\udfff]",Vr="(?:"+Fr+"|"+qr+")?",Jr="[\\ufe0e\\ufe0f]?"+Vr+"(?:\\u200d(?:"+[Wr,Hr,Kr].join("|")+")[\\ufe0e\\ufe0f]?"+Vr+")*",Gr="(?:"+[Wr+Fr+"?",Fr,Hr,Kr,"[\\ud800-\\udfff]"].join("|")+")",$r=RegExp(qr+"(?="+qr+")|"+Gr+Jr,"g"),Yr=function(e){return Ur(e)?function(e){return e.match($r)||[]}(e):function(e){return e.split("")}(e)},Xr=function(e){return function(t){t=ur(t);var r=Ur(t)?Yr(t):void 0,n=r?r[0]:t.charAt(0),i=r?Br(r,1).join(""):t.slice(1);return n[e]()+i}},Qr=Xr("toUpperCase"),Zr=function(e){return Qr(ur(e).toLowerCase())},en=function(e,t,r,n){var i=-1,o=null==e?0:e.length;for(n&&o&&(r=e[++i]);++i<o;)r=t(r,e[i],i,e);return r},tn=function(e){return function(t){return null==e?void 0:e[t]}},rn=tn({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"}),nn=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,on=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]","g"),sn=function(e){return(e=ur(e))&&e.replace(nn,rn).replace(on,"")},an=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,cn=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,un="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",pn="["+un+"]",hn="\\d+",dn="[a-z\\xdf-\\xf6\\xf8-\\xff]",ln="[^\\ud800-\\udfff"+un+hn+"\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",fn="(?:\\ud83c[\\udde6-\\uddff]){2}",vn="[\\ud800-\\udbff][\\udc00-\\udfff]",gn="[A-Z\\xc0-\\xd6\\xd8-\\xde]",mn="(?:"+dn+"|"+ln+")",yn="(?:"+gn+"|"+ln+")",Sn="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",wn="[\\ufe0e\\ufe0f]?"+Sn+"(?:\\u200d(?:"+["[^\\ud800-\\udfff]",fn,vn].join("|")+")[\\ufe0e\\ufe0f]?"+Sn+")*",bn="(?:"+["[\\u2700-\\u27bf]",fn,vn].join("|")+")"+wn,Cn=RegExp([gn+"?"+dn+"+(?:['’](?:d|ll|m|re|s|t|ve))?(?="+[pn,gn,"$"].join("|")+")",yn+"+(?:['’](?:D|LL|M|RE|S|T|VE))?(?="+[pn,gn+mn,"$"].join("|")+")",gn+"?"+mn+"+(?:['’](?:d|ll|m|re|s|t|ve))?",gn+"+(?:['’](?:D|LL|M|RE|S|T|VE))?","\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",hn,bn].join("|"),"g"),Rn=function(e,t,r){return e=ur(e),void 0===(t=r?void 0:t)?function(e){return cn.test(e)}(e)?function(e){return e.match(Cn)||[]}(e):function(e){return e.match(an)||[]}(e):e.match(t)||[]},Pn=RegExp("['’]","g"),In=function(e){return function(t){return en(Rn(sn(t).replace(Pn,"")),e,"")}},En=In((function(e,t,r){return t=t.toLowerCase(),e+(r?Zr(t):t)})),_n=function(){if(!arguments.length)return[];var e=arguments[0];return m(e)?e:[e]},Tn=i.a.isFinite,An=Math.min,On=function(e){var t=Math[e];return function(e,r){if(e=k(e),(r=null==r?0:An(M(r),292))&&Tn(e)){var n=(ur(e)+"e").split("e"),i=t(n[0]+"e"+(+n[1]+r));return+((n=(ur(i)+"e").split("e"))[0]+"e"+(+n[1]-r))}return t(e)}},xn=On("ceil"),kn=function(e){var t=Re(e);return t.__chain__=!0,t},Dn=Math.ceil,Mn=Math.max,Ln=function(e,t,r){t=(r?ht(e,t,r):void 0===t)?1:Mn(M(t),0);var n=null==e?0:e.length;if(!n||t<1)return[];for(var i=0,o=0,s=Array(Dn(n/t));i<n;)s[o++]=zr(e,i,i+=t);return s},Nn=function(e,t,r){return e==e&&(void 0!==r&&(e=e<=r?e:r),void 0!==t&&(e=e>=t?e:t)),e},zn=function(e,t,r){return void 0===r&&(r=t,t=void 0),void 0!==r&&(r=(r=k(r))==r?r:0),void 0!==t&&(t=(t=k(t))==t?t:0),Nn(k(e),t,r)};function Bn(e){var t=this.__data__=new Zt(e);this.size=t.size}Bn.prototype.clear=function(){this.__data__=new Zt,this.size=0},Bn.prototype.delete=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r},Bn.prototype.get=function(e){return this.__data__.get(e)},Bn.prototype.has=function(e){return this.__data__.has(e)},Bn.prototype.set=function(e,t){var r=this.__data__;if(r instanceof Zt){var n=r.__data__;if(!er||n.length<199)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new nr(n)}return r.set(e,t),this.size=r.size,this};var jn=Bn,Un=function(e,t){return e&&ot(t,Dt(t),e)},Fn=r(41),qn=function(e,t){for(var r=-1,n=null==e?0:e.length,i=0,o=[];++r<n;){var s=e[r];t(s,r,e)&&(o[i++]=s)}return o},Wn=function(){return[]},Hn=Object.prototype.propertyIsEnumerable,Kn=Object.getOwnPropertySymbols,Vn=Kn?function(e){return null==e?[]:(e=Object(e),qn(Kn(e),(function(t){return Hn.call(e,t)})))}:Wn,Jn=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)vr(t,Vn(e)),e=Cr(e);return t}:Wn,Gn=function(e,t,r){var n=t(e);return m(e)?n:vr(n,r(e))},$n=function(e){return Gn(e,Dt,Vn)},Yn=function(e){return Gn(e,Bt,Jn)},Xn=$(i.a,"DataView"),Qn=$(i.a,"Promise"),Zn=$(i.a,"Set"),ei=F(Xn),ti=F(er),ri=F(Qn),ni=F(Zn),ii=F(Y),oi=d;(Xn&&"[object DataView]"!=oi(new Xn(new ArrayBuffer(1)))||er&&"[object Map]"!=oi(new er)||Qn&&"[object Promise]"!=oi(Qn.resolve())||Zn&&"[object Set]"!=oi(new Zn)||Y&&"[object WeakMap]"!=oi(new Y))&&(oi=function(e){var t=d(e),r="[object Object]"==t?e.constructor:void 0,n=r?F(r):"";if(n)switch(n){case ei:return"[object DataView]";case ti:return"[object Map]";case ri:return"[object Promise]";case ni:return"[object Set]";case ii:return"[object WeakMap]"}return t});var si=oi,ai=Object.prototype.hasOwnProperty,ci=i.a.Uint8Array,ui=function(e){var t=new e.constructor(e.byteLength);return new ci(t).set(new ci(e)),t},pi=/\w*$/,hi=o?o.prototype:void 0,di=hi?hi.valueOf:void 0,li=function(e,t){var r=t?ui(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)},fi=function(e,t,r){var n=e.constructor;switch(t){case"[object ArrayBuffer]":return ui(e);case"[object Boolean]":case"[object Date]":return new n(+e);case"[object DataView]":return function(e,t){var r=t?ui(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}(e,r);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return li(e,r);case"[object Map]":return new n;case"[object Number]":case"[object String]":return new n(e);case"[object RegExp]":return function(e){var t=new e.constructor(e.source,pi.exec(e));return t.lastIndex=e.lastIndex,t}(e);case"[object Set]":return new n;case"[object Symbol]":return function(e){return di?Object(di.call(e)):{}}(e)}},vi=function(e){return"function"!=typeof e.constructor||ft(e)?{}:ee(Cr(e))},gi=Pt.a&&Pt.a.isMap,mi=gi?Rt(gi):function(e){return l(e)&&"[object Map]"==si(e)},yi=Pt.a&&Pt.a.isSet,Si=yi?Rt(yi):function(e){return l(e)&&"[object Set]"==si(e)},wi={};wi["[object Arguments]"]=wi["[object Array]"]=wi["[object ArrayBuffer]"]=wi["[object DataView]"]=wi["[object Boolean]"]=wi["[object Date]"]=wi["[object Float32Array]"]=wi["[object Float64Array]"]=wi["[object Int8Array]"]=wi["[object Int16Array]"]=wi["[object Int32Array]"]=wi["[object Map]"]=wi["[object Number]"]=wi["[object Object]"]=wi["[object RegExp]"]=wi["[object Set]"]=wi["[object String]"]=wi["[object Symbol]"]=wi["[object Uint8Array]"]=wi["[object Uint8ClampedArray]"]=wi["[object Uint16Array]"]=wi["[object Uint32Array]"]=!0,wi["[object Error]"]=wi["[object Function]"]=wi["[object WeakMap]"]=!1;var bi=function e(t,r,n,i,o,s){var a,c=1&r,u=2&r,p=4&r;if(n&&(a=o?n(t,i,o,s):n(t)),void 0!==a)return a;if(!_(t))return t;var h=m(t);if(h){if(a=function(e){var t=e.length,r=new e.constructor(t);return t&&"string"==typeof e[0]&&ai.call(e,"index")&&(r.index=e.index,r.input=e.input),r}(t),!c)return Se(t,a)}else{var d=si(t),l="[object Function]"==d||"[object GeneratorFunction]"==d;if(Object(bt.a)(t))return Object(Fn.a)(t,c);if("[object Object]"==d||"[object Arguments]"==d||l&&!o){if(a=u||l?{}:vi(t),!c)return u?function(e,t){return ot(e,Jn(e),t)}(t,function(e,t){return e&&ot(t,Bt(t),e)}(a,t)):function(e,t){return ot(e,Vn(e),t)}(t,Un(a,t))}else{if(!wi[d])return o?t:{};a=fi(t,d,c)}}s||(s=new jn);var f=s.get(t);if(f)return f;s.set(t,a),Si(t)?t.forEach((function(i){a.add(e(i,r,n,i,t,s))})):mi(t)&&t.forEach((function(i,o){a.set(o,e(i,r,n,o,t,s))}));var v=h?void 0:(p?u?Yn:$n:u?Bt:Dt)(t);return Me(v||t,(function(i,o){v&&(i=t[o=i]),it(a,o,e(i,r,n,o,t,s))})),a},Ci=function(e){return bi(e,4)},Ri=function(e){return bi(e,5)},Pi=function(e,t){return bi(e,5,t="function"==typeof t?t:void 0)},Ii=function(e,t){return bi(e,4,t="function"==typeof t?t:void 0)},Ei=function(){return new ye(this.value(),this.__chain__)},_i=function(e){for(var t=-1,r=null==e?0:e.length,n=0,i=[];++t<r;){var o=e[t];o&&(i[n++]=o)}return i},Ti=function(){var e=arguments.length;if(!e)return[];for(var t=Array(e-1),r=arguments[0],n=e;n--;)t[n-1]=arguments[n];return vr(m(r)?Se(r):[r],yr(t,1))};function Ai(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new nr;++t<r;)this.add(e[t])}Ai.prototype.add=Ai.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},Ai.prototype.has=function(e){return this.__data__.has(e)};var Oi=Ai,xi=function(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1},ki=function(e,t){return e.has(t)},Di=function(e,t,r,n,i,o){var s=1&r,a=e.length,c=t.length;if(a!=c&&!(s&&c>a))return!1;var u=o.get(e),p=o.get(t);if(u&&p)return u==t&&p==e;var h=-1,d=!0,l=2&r?new Oi:void 0;for(o.set(e,t),o.set(t,e);++h<a;){var f=e[h],v=t[h];if(n)var g=s?n(v,f,h,t,e,o):n(f,v,h,e,t,o);if(void 0!==g){if(g)continue;d=!1;break}if(l){if(!xi(t,(function(e,t){if(!ki(l,t)&&(f===e||i(f,e,r,n,o)))return l.push(t)}))){d=!1;break}}else if(f!==v&&!i(f,v,r,n,o)){d=!1;break}}return o.delete(e),o.delete(t),d},Mi=function(e){var t=-1,r=Array(e.size);return e.forEach((function(e,n){r[++t]=[n,e]})),r},Li=function(e){var t=-1,r=Array(e.size);return e.forEach((function(e){r[++t]=e})),r},Ni=o?o.prototype:void 0,zi=Ni?Ni.valueOf:void 0,Bi=Object.prototype.hasOwnProperty,ji=Object.prototype.hasOwnProperty,Ui=function(e,t,r,n,i,o){var s=m(e),a=m(t),c=s?"[object Array]":si(e),u=a?"[object Array]":si(t),p="[object Object]"==(c="[object Arguments]"==c?"[object Object]":c),h="[object Object]"==(u="[object Arguments]"==u?"[object Object]":u),d=c==u;if(d&&Object(bt.a)(e)){if(!Object(bt.a)(t))return!1;s=!0,p=!1}if(d&&!p)return o||(o=new jn),s||Et(e)?Di(e,t,r,n,i,o):function(e,t,r,n,i,o,s){switch(r){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!o(new ci(e),new ci(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return rt(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var a=Mi;case"[object Set]":var c=1&n;if(a||(a=Li),e.size!=t.size&&!c)return!1;var u=s.get(e);if(u)return u==t;n|=2,s.set(e,t);var p=Di(a(e),a(t),n,i,o,s);return s.delete(e),p;case"[object Symbol]":if(zi)return zi.call(e)==zi.call(t)}return!1}(e,t,c,r,n,i,o);if(!(1&r)){var l=p&&ji.call(e,"__wrapped__"),f=h&&ji.call(t,"__wrapped__");if(l||f){var v=l?e.value():e,g=f?t.value():t;return o||(o=new jn),i(v,g,r,n,o)}}return!!d&&(o||(o=new jn),function(e,t,r,n,i,o){var s=1&r,a=$n(e),c=a.length;if(c!=$n(t).length&&!s)return!1;for(var u=c;u--;){var p=a[u];if(!(s?p in t:Bi.call(t,p)))return!1}var h=o.get(e),d=o.get(t);if(h&&d)return h==t&&d==e;var l=!0;o.set(e,t),o.set(t,e);for(var f=s;++u<c;){var v=e[p=a[u]],g=t[p];if(n)var m=s?n(g,v,p,t,e,o):n(v,g,p,e,t,o);if(!(void 0===m?v===g||i(v,g,r,n,o):m)){l=!1;break}f||(f="constructor"==p)}if(l&&!f){var y=e.constructor,S=t.constructor;y==S||!("constructor"in e)||!("constructor"in t)||"function"==typeof y&&y instanceof y&&"function"==typeof S&&S instanceof S||(l=!1)}return o.delete(e),o.delete(t),l}(e,t,r,n,i,o))},Fi=function e(t,r,n,i,o){return t===r||(null==t||null==r||!l(t)&&!l(r)?t!=t&&r!=r:Ui(t,r,n,i,e,o))},qi=function(e,t,r,n){var i=r.length,o=i,s=!n;if(null==e)return!o;for(e=Object(e);i--;){var a=r[i];if(s&&a[2]?a[1]!==e[a[0]]:!(a[0]in e))return!1}for(;++i<o;){var c=(a=r[i])[0],u=e[c],p=a[1];if(s&&a[2]){if(void 0===u&&!(c in e))return!1}else{var h=new jn;if(n)var d=n(u,p,c,e,t,h);if(!(void 0===d?Fi(p,u,3,n,h):d))return!1}}return!0},Wi=function(e){return e==e&&!_(e)},Hi=function(e){for(var t=Dt(e),r=t.length;r--;){var n=t[r],i=e[n];t[r]=[n,i,Wi(i)]}return t},Ki=function(e,t){return function(r){return null!=r&&r[e]===t&&(void 0!==t||e in Object(r))}},Vi=function(e){var t=Hi(e);return 1==t.length&&t[0][2]?Ki(t[0][0],t[0][1]):function(r){return r===e||qi(r,e,t)}},Ji=function(e,t){return null!=e&&t in Object(e)},Gi=function(e,t,r){for(var n=-1,i=(t=pr(t,e)).length,o=!1;++n<i;){var s=hr(t[n]);if(!(o=null!=e&&r(e,s)))break;e=e[s]}return o||++n!=i?o:!!(i=null==e?0:e.length)&&ut(i)&&He(s,i)&&(m(e)||wt(e))},$i=function(e,t){return null!=e&&Gi(e,t,Ji)},Yi=function(e,t){return Ht(e)&&Wi(t)?Ki(hr(e),t):function(r){var n=lr(r,e);return void 0===n&&n===t?$i(r,e):Fi(t,n,3)}},Xi=function(e){return function(t){return null==t?void 0:t[e]}},Qi=function(e){return Ht(e)?Xi(hr(e)):function(e){return function(t){return dr(t,e)}}(e)},Zi=function(e){return"function"==typeof e?e:null==e?N:"object"==typeof e?m(e)?Yi(e[0],e[1]):Vi(e):Qi(e)},eo=function(e){var t=null==e?0:e.length,r=Zi;return e=t?g(e,(function(e){if("function"!=typeof e[1])throw new TypeError("Expected a function");return[r(e[0]),e[1]]})):[],ct((function(r){for(var n=-1;++n<t;){var i=e[n];if(ne(i[0],this,r))return ne(i[1],this,r)}}))},to=function(e,t,r){var n=r.length;if(null==e)return!n;for(e=Object(e);n--;){var i=r[n],o=t[i],s=e[i];if(void 0===s&&!(i in e)||!o(s))return!1}return!0},ro=function(e){return function(e){var t=Dt(e);return function(r){return to(r,e,t)}}(bi(e,1))},no=function(e,t){return null==t||to(e,t,Dt(t))},io=function(e,t,r,n){for(var i=-1,o=null==e?0:e.length;++i<o;){var s=e[i];t(n,s,r(s),e)}return n},oo=function(e){return function(t,r,n){for(var i=-1,o=Object(t),s=n(t),a=s.length;a--;){var c=s[e?a:++i];if(!1===r(o[c],c,o))break}return t}},so=oo(),ao=function(e,t){return e&&so(e,t,Dt)},co=function(e,t){return function(r,n){if(null==r)return r;if(!pt(r))return e(r,n);for(var i=r.length,o=t?i:-1,s=Object(r);(t?o--:++o<i)&&!1!==n(s[o],o,s););return r}},uo=co(ao),po=function(e,t,r,n){return uo(e,(function(e,i,o){t(n,e,r(e),o)})),n},ho=function(e,t){return function(r,n){var i=m(r)?io:po,o=t?t():{};return i(r,e,Zi(n),o)}},lo=Object.prototype.hasOwnProperty,fo=ho((function(e,t,r){lo.call(e,r)?++e[r]:tt(e,r,1)})),vo=function(e,t){var r=ee(e);return null==t?r:Un(r,t)};function go(e,t,r){var n=Ze(e,8,void 0,void 0,void 0,void 0,void 0,t=r?void 0:t);return n.placeholder=go.placeholder,n}go.placeholder={};var mo=go;function yo(e,t,r){var n=Ze(e,16,void 0,void 0,void 0,void 0,void 0,t=r?void 0:t);return n.placeholder=yo.placeholder,n}yo.placeholder={};var So=yo,wo=function(){return i.a.Date.now()},bo=Math.max,Co=Math.min,Ro=function(e,t,r){var n,i,o,s,a,c,u=0,p=!1,h=!1,d=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function l(t){var r=n,o=i;return n=i=void 0,u=t,s=e.apply(o,r)}function f(e){return u=e,a=setTimeout(g,t),p?l(e):s}function v(e){var r=e-c;return void 0===c||r>=t||r<0||h&&e-u>=o}function g(){var e=wo();if(v(e))return m(e);a=setTimeout(g,function(e){var r=t-(e-c);return h?Co(r,o-(e-u)):r}(e))}function m(e){return a=void 0,d&&n?l(e):(n=i=void 0,s)}function y(){var e=wo(),r=v(e);if(n=arguments,i=this,c=e,r){if(void 0===a)return f(c);if(h)return clearTimeout(a),a=setTimeout(g,t),l(c)}return void 0===a&&(a=setTimeout(g,t)),s}return t=k(t)||0,_(r)&&(p=!!r.leading,o=(h="maxWait"in r)?bo(k(r.maxWait)||0,t):o,d="trailing"in r?!!r.trailing:d),y.cancel=function(){void 0!==a&&clearTimeout(a),u=0,n=c=i=a=void 0},y.flush=function(){return void 0===a?s:m(wo())},y},Po=function(e,t){return null==e||e!=e?t:e},Io=Object.prototype,Eo=Io.hasOwnProperty,_o=ct((function(e,t){e=Object(e);var r=-1,n=t.length,i=n>2?t[2]:void 0;for(i&&ht(t[0],t[1],i)&&(n=1);++r<n;)for(var o=t[r],s=Bt(o),a=-1,c=s.length;++a<c;){var u=s[a],p=e[u];(void 0===p||rt(p,Io[u])&&!Eo.call(e,u))&&(e[u]=o[u])}return e})),To=function(e,t,r){(void 0!==r&&!rt(e[t],r)||void 0===r&&!(t in e))&&tt(e,t,r)},Ao=function(e){return l(e)&&pt(e)},Oo=function(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]},xo=function(e){return ot(e,Bt(e))},ko=function e(t,r,n,i,o){t!==r&&so(r,(function(s,a){if(o||(o=new jn),_(s))!function(e,t,r,n,i,o,s){var a=Oo(e,r),c=Oo(t,r),u=s.get(c);if(u)To(e,r,u);else{var p=o?o(a,c,r+"",e,t,s):void 0,h=void 0===p;if(h){var d=m(c),l=!d&&Object(bt.a)(c),f=!d&&!l&&Et(c);p=c,d||l||f?m(a)?p=a:Ao(a)?p=Se(a):l?(h=!1,p=Object(Fn.a)(c,!0)):f?(h=!1,p=li(c,!0)):p=[]:Tr(c)||wt(c)?(p=a,wt(a)?p=xo(a):_(a)&&!z(a)||(p=vi(c))):h=!1}h&&(s.set(c,p),i(p,c,n,o,s),s.delete(c)),To(e,r,p)}}(t,r,a,n,e,i,o);else{var c=i?i(Oo(t,a),s,a+"",t,r,o):void 0;void 0===c&&(c=s),To(t,a,c)}}),Bt)},Do=function e(t,r,n,i,o,s){return _(t)&&_(r)&&(s.set(r,t),ko(t,r,void 0,e,s),s.delete(r)),t},Mo=dt((function(e,t,r,n){ko(e,t,r,n)})),Lo=ct((function(e){return e.push(void 0,Do),ne(Mo,void 0,e)})),No=function(e,t,r){if("function"!=typeof e)throw new TypeError("Expected a function");return setTimeout((function(){e.apply(void 0,r)}),t)},zo=ct((function(e,t){return No(e,1,t)})),Bo=ct((function(e,t,r){return No(e,k(t)||0,r)})),jo=function(e,t,r){for(var n=-1,i=null==e?0:e.length;++n<i;)if(r(t,e[n]))return!0;return!1},Uo=function(e,t,r,n){var i=-1,o=Be,s=!0,a=e.length,c=[],u=t.length;if(!a)return c;r&&(t=g(t,Rt(r))),n?(o=jo,s=!1):t.length>=200&&(o=ki,s=!1,t=new Oi(t));e:for(;++i<a;){var p=e[i],h=null==r?p:r(p);if(p=n||0!==p?p:0,s&&h==h){for(var d=u;d--;)if(t[d]===h)continue e;c.push(p)}else o(t,h,n)||c.push(p)}return c},Fo=ct((function(e,t){return Ao(e)?Uo(e,yr(t,1,Ao,!0)):[]})),qo=function(e){var t=null==e?0:e.length;return t?e[t-1]:void 0},Wo=ct((function(e,t){var r=qo(t);return Ao(r)&&(r=void 0),Ao(e)?Uo(e,yr(t,1,Ao,!0),Zi(r)):[]})),Ho=ct((function(e,t){var r=qo(t);return Ao(r)&&(r=void 0),Ao(e)?Uo(e,yr(t,1,Ao,!0),void 0,r):[]})),Ko=b((function(e,t){return e/t}),1),Vo=function(e,t,r){var n=null==e?0:e.length;return n?(t=r||void 0===t?1:M(t),zr(e,t<0?0:t,n)):[]},Jo=function(e,t,r){var n=null==e?0:e.length;return n?(t=r||void 0===t?1:M(t),zr(e,0,(t=n-t)<0?0:t)):[]},Go=function(e,t,r,n){for(var i=e.length,o=n?i:-1;(n?o--:++o<i)&&t(e[o],o,e););return r?zr(e,n?0:o,n?o+1:i):zr(e,n?o+1:0,n?i:o)},$o=function(e,t){return e&&e.length?Go(e,Zi(t),!0,!0):[]},Yo=function(e,t){return e&&e.length?Go(e,Zi(t),!0):[]},Xo=function(e){return"function"==typeof e?e:N},Qo=function(e,t){return(m(e)?Me:uo)(e,Xo(t))},Zo=function(e,t){for(var r=null==e?0:e.length;r--&&!1!==t(e[r],r,e););return e},es=oo(!0),ts=function(e,t){return e&&es(e,t,Dt)},rs=co(ts,!0),ns=function(e,t){return(m(e)?Zo:rs)(e,Xo(t))},is=function(e,t,r){e=ur(e),t=w(t);var n=e.length,i=r=void 0===r?n:Nn(M(r),0,n);return(r-=t.length)>=0&&e.slice(r,i)==t},os=function(e){return function(t){var r=si(t);return"[object Map]"==r?Mi(t):"[object Set]"==r?function(e){var t=-1,r=Array(e.size);return e.forEach((function(e){r[++t]=[e,e]})),r}(t):function(e,t){return g(t,(function(t){return[t,e[t]]}))}(t,e(t))}},ss=os(Dt),as=os(Bt),cs=tn({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"}),us=/[&<>"']/g,ps=RegExp(us.source),hs=function(e){return(e=ur(e))&&ps.test(e)?e.replace(us,cs):e},ds=/[\\^$.*+?()[\]{}|]/g,ls=RegExp(ds.source),fs=function(e){return(e=ur(e))&&ls.test(e)?e.replace(ds,"\\$&"):e},vs=function(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(!t(e[r],r,e))return!1;return!0},gs=function(e,t){var r=!0;return uo(e,(function(e,n,i){return r=!!t(e,n,i)})),r},ms=function(e,t,r){var n=m(e)?vs:gs;return r&&ht(e,t,r)&&(t=void 0),n(e,Zi(t))},ys=function(e){return e?Nn(M(e),0,4294967295):0},Ss=function(e,t,r,n){var i=null==e?0:e.length;return i?(r&&"number"!=typeof r&&ht(e,t,r)&&(r=0,n=i),function(e,t,r,n){var i=e.length;for((r=M(r))<0&&(r=-r>i?0:i+r),(n=void 0===n||n>i?i:M(n))<0&&(n+=i),n=r>n?0:ys(n);r<n;)e[r++]=t;return e}(e,t,r,n)):[]},ws=function(e,t){var r=[];return uo(e,(function(e,n,i){t(e,n,i)&&r.push(e)})),r},bs=function(e,t){return(m(e)?qn:ws)(e,Zi(t))},Cs=function(e){return function(t,r,n){var i=Object(t);if(!pt(t)){var o=Zi(r);t=Dt(t),r=function(e){return o(i[e],e,i)}}var s=e(t,r,n);return s>-1?i[o?t[s]:s]:void 0}},Rs=Math.max,Ps=function(e,t,r){var n=null==e?0:e.length;if(!n)return-1;var i=null==r?0:M(r);return i<0&&(i=Rs(n+i,0)),Le(e,Zi(t),i)},Is=Cs(Ps),Es=function(e,t,r){var n;return r(e,(function(e,r,i){if(t(e,r,i))return n=r,!1})),n},_s=function(e,t){return Es(e,Zi(t),ao)},Ts=Math.max,As=Math.min,Os=function(e,t,r){var n=null==e?0:e.length;if(!n)return-1;var i=n-1;return void 0!==r&&(i=M(r),i=r<0?Ts(n+i,0):As(i,n-1)),Le(e,Zi(t),i,!0)},xs=Cs(Os),ks=function(e,t){return Es(e,Zi(t),ts)},Ds=function(e){return e&&e.length?e[0]:void 0},Ms=function(e,t){var r=-1,n=pt(e)?Array(e.length):[];return uo(e,(function(e,i,o){n[++r]=t(e,i,o)})),n},Ls=function(e,t){return(m(e)?g:Ms)(e,Zi(t))},Ns=function(e,t){return yr(Ls(e,t),1)},zs=function(e,t){return yr(Ls(e,t),1/0)},Bs=function(e,t,r){return r=void 0===r?1:M(r),yr(Ls(e,t),r)},js=function(e){return null!=e&&e.length?yr(e,1/0):[]},Us=function(e,t){return null!=e&&e.length?(t=void 0===t?1:M(t),yr(e,t)):[]},Fs=function(e){return Ze(e,512)},qs=On("floor"),Ws=function(e){return wr((function(t){var r=t.length,n=r,i=ye.prototype.thru;for(e&&t.reverse();n--;){var o=t[n];if("function"!=typeof o)throw new TypeError("Expected a function");if(i&&!s&&"wrapper"==ge(o))var s=new ye([],!0)}for(n=s?n:r;++n<r;){o=t[n];var a=ge(o),c="wrapper"==a?le(o):void 0;s=c&&Pe(c[0])&&424==c[1]&&!c[4].length&&1==c[9]?s[ge(c[0])].apply(s,c[3]):1==o.length&&Pe(o)?s[a]():s.thru(o)}return function(){var e=arguments,n=e[0];if(s&&1==e.length&&m(n))return s.plant(n).value();for(var i=0,o=r?t[i].apply(this,e):n;++i<r;)o=t[i].call(this,o);return o}}))},Hs=Ws(),Ks=Ws(!0),Vs=function(e,t){return null==e?e:so(e,Xo(t),Bt)},Js=function(e,t){return null==e?e:es(e,Xo(t),Bt)},Gs=function(e,t){return e&&ao(e,Xo(t))},$s=function(e,t){return e&&ts(e,Xo(t))},Ys=function(e){for(var t=-1,r=null==e?0:e.length,n={};++t<r;){var i=e[t];n[i[0]]=i[1]}return n},Xs=function(e,t){return qn(t,(function(t){return z(e[t])}))},Qs=function(e){return null==e?[]:Xs(e,Dt(e))},Zs=function(e){return null==e?[]:Xs(e,Bt(e))},ea=Object.prototype.hasOwnProperty,ta=ho((function(e,t,r){ea.call(e,r)?e[r].push(t):tt(e,r,[t])})),ra=function(e,t){return e>t},na=function(e){return function(t,r){return"string"==typeof t&&"string"==typeof r||(t=k(t),r=k(r)),e(t,r)}},ia=na(ra),oa=na((function(e,t){return e>=t})),sa=Object.prototype.hasOwnProperty,aa=function(e,t){return null!=e&&sa.call(e,t)},ca=function(e,t){return null!=e&&Gi(e,t,aa)},ua=Math.max,pa=Math.min,ha=function(e,t,r){return t=D(t),void 0===r?(r=t,t=0):r=D(r),function(e,t,r){return e>=pa(t,r)&&e<ua(t,r)}(e=k(e),t,r)},da=function(e){return"string"==typeof e||!m(e)&&l(e)&&"[object String]"==d(e)},la=function(e,t){return g(t,(function(t){return e[t]}))},fa=function(e){return null==e?[]:la(e,Dt(e))},va=Math.max,ga=function(e,t,r,n){e=pt(e)?e:fa(e),r=r&&!n?M(r):0;var i=e.length;return r<0&&(r=va(i+r,0)),da(e)?r<=i&&e.indexOf(t,r)>-1:!!i&&ze(e,t,r)>-1},ma=Math.max,ya=function(e,t,r){var n=null==e?0:e.length;if(!n)return-1;var i=null==r?0:M(r);return i<0&&(i=ma(n+i,0)),ze(e,t,i)},Sa=function(e){return null!=e&&e.length?zr(e,0,-1):[]},wa=Math.min,ba=function(e,t,r){for(var n=r?jo:Be,i=e[0].length,o=e.length,s=o,a=Array(o),c=1/0,u=[];s--;){var p=e[s];s&&t&&(p=g(p,Rt(t))),c=wa(p.length,c),a[s]=!r&&(t||i>=120&&p.length>=120)?new Oi(s&&p):void 0}p=e[0];var h=-1,d=a[0];e:for(;++h<i&&u.length<c;){var l=p[h],f=t?t(l):l;if(l=r||0!==l?l:0,!(d?ki(d,f):n(u,f,r))){for(s=o;--s;){var v=a[s];if(!(v?ki(v,f):n(e[s],f,r)))continue e}d&&d.push(f),u.push(l)}}return u},Ca=function(e){return Ao(e)?e:[]},Ra=ct((function(e){var t=g(e,Ca);return t.length&&t[0]===e[0]?ba(t):[]})),Pa=ct((function(e){var t=qo(e),r=g(e,Ca);return t===qo(r)?t=void 0:r.pop(),r.length&&r[0]===e[0]?ba(r,Zi(t)):[]})),Ia=ct((function(e){var t=qo(e),r=g(e,Ca);return(t="function"==typeof t?t:void 0)&&r.pop(),r.length&&r[0]===e[0]?ba(r,void 0,t):[]})),Ea=function(e,t){return function(r,n){return function(e,t,r,n){return ao(e,(function(e,i,o){t(n,r(e),i,o)})),n}(r,e,t(n),{})}},_a=Object.prototype.toString,Ta=Ea((function(e,t,r){null!=t&&"function"!=typeof t.toString&&(t=_a.call(t)),e[t]=r}),xe(N)),Aa=Object.prototype,Oa=Aa.hasOwnProperty,xa=Aa.toString,ka=Ea((function(e,t,r){null!=t&&"function"!=typeof t.toString&&(t=xa.call(t)),Oa.call(e,t)?e[t].push(r):e[t]=[r]}),Zi),Da=function(e,t){return t.length<2?e:dr(e,zr(t,0,-1))},Ma=function(e,t,r){t=pr(t,e);var n=null==(e=Da(e,t))?e:e[hr(qo(t))];return null==n?void 0:ne(n,e,r)},La=ct(Ma),Na=ct((function(e,t,r){var n=-1,i="function"==typeof t,o=pt(e)?Array(e.length):[];return uo(e,(function(e){o[++n]=i?ne(t,e,r):Ma(e,t,r)})),o})),za=Pt.a&&Pt.a.isArrayBuffer,Ba=za?Rt(za):function(e){return l(e)&&"[object ArrayBuffer]"==d(e)},ja=function(e){return!0===e||!1===e||l(e)&&"[object Boolean]"==d(e)},Ua=Pt.a&&Pt.a.isDate,Fa=Ua?Rt(Ua):function(e){return l(e)&&"[object Date]"==d(e)},qa=function(e){return l(e)&&1===e.nodeType&&!Tr(e)},Wa=Object.prototype.hasOwnProperty,Ha=function(e){if(null==e)return!0;if(pt(e)&&(m(e)||"string"==typeof e||"function"==typeof e.splice||Object(bt.a)(e)||Et(e)||wt(e)))return!e.length;var t=si(e);if("[object Map]"==t||"[object Set]"==t)return!e.size;if(ft(e))return!kt(e).length;for(var r in e)if(Wa.call(e,r))return!1;return!0},Ka=function(e,t){return Fi(e,t)},Va=function(e,t,r){var n=(r="function"==typeof r?r:void 0)?r(e,t):void 0;return void 0===n?Fi(e,t,void 0,r):!!n},Ja=i.a.isFinite,Ga=function(e){return"number"==typeof e&&Ja(e)},$a=function(e){return"number"==typeof e&&e==M(e)},Ya=function(e,t){return e===t||qi(e,t,Hi(t))},Xa=function(e,t,r){return r="function"==typeof r?r:void 0,qi(e,t,Hi(t),r)},Qa=function(e){return"number"==typeof e||l(e)&&"[object Number]"==d(e)},Za=function(e){return Qa(e)&&e!=+e},ec=r(24),tc=B?z:ec.a,rc=function(e){if(tc(e))throw new Error("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return G(e)},nc=function(e){return null==e},ic=function(e){return null===e},oc=Pt.a&&Pt.a.isRegExp,sc=oc?Rt(oc):function(e){return l(e)&&"[object RegExp]"==d(e)},ac=function(e){return $a(e)&&e>=-9007199254740991&&e<=9007199254740991},cc=function(e){return void 0===e},uc=function(e){return l(e)&&"[object WeakMap]"==si(e)},pc=function(e){return l(e)&&"[object WeakSet]"==d(e)},hc=function(e){return Zi("function"==typeof e?e:bi(e,1))},dc=Array.prototype.join,lc=function(e,t){return null==e?"":dc.call(e,t)},fc=In((function(e,t,r){return e+(r?"-":"")+t.toLowerCase()})),vc=ho((function(e,t,r){tt(e,r,t)})),gc=Math.max,mc=Math.min,yc=function(e,t,r){var n=null==e?0:e.length;if(!n)return-1;var i=n;return void 0!==r&&(i=(i=M(r))<0?gc(n+i,0):mc(i,n-1)),t==t?function(e,t,r){for(var n=r+1;n--;)if(e[n]===t)return n;return n}(e,t,i):Le(e,Ne,i,!0)},Sc=In((function(e,t,r){return e+(r?" ":"")+t.toLowerCase()})),wc=Xr("toLowerCase"),bc=function(e,t){return e<t},Cc=na(bc),Rc=na((function(e,t){return e<=t})),Pc=function(e,t){var r={};return t=Zi(t),ao(e,(function(e,n,i){tt(r,t(e,n,i),e)})),r},Ic=function(e,t){var r={};return t=Zi(t),ao(e,(function(e,n,i){tt(r,n,t(e,n,i))})),r},Ec=function(e){return Vi(bi(e,1))},_c=function(e,t){return Yi(e,bi(t,1))},Tc=function(e,t,r){for(var n=-1,i=e.length;++n<i;){var o=e[n],s=t(o);if(null!=s&&(void 0===a?s==s&&!f(s):r(s,a)))var a=s,c=o}return c},Ac=function(e){return e&&e.length?Tc(e,N,ra):void 0},Oc=function(e,t){return e&&e.length?Tc(e,Zi(t),ra):void 0},xc=function(e,t){for(var r,n=-1,i=e.length;++n<i;){var o=t(e[n]);void 0!==o&&(r=void 0===r?o:r+o)}return r},kc=function(e,t){var r=null==e?0:e.length;return r?xc(e,t)/r:NaN},Dc=function(e){return kc(e,N)},Mc=function(e,t){return kc(e,Zi(t))},Lc=dt((function(e,t,r){ko(e,t,r)})),Nc=ct((function(e,t){return function(r){return Ma(r,e,t)}})),zc=ct((function(e,t){return function(r){return Ma(e,r,t)}})),Bc=function(e){return e&&e.length?Tc(e,N,bc):void 0},jc=function(e,t){return e&&e.length?Tc(e,Zi(t),bc):void 0},Uc=function(e,t,r){var n=Dt(t),i=Xs(t,n),o=!(_(r)&&"chain"in r&&!r.chain),s=z(e);return Me(i,(function(r){var n=t[r];e[r]=n,s&&(e.prototype[r]=function(){var t=this.__chain__;if(o||t){var r=e(this.__wrapped__),i=r.__actions__=Se(this.__actions__);return i.push({func:n,args:arguments,thisArg:e}),r.__chain__=t,r}return n.apply(e,vr([this.value()],arguments))})})),e},Fc=b((function(e,t){return e*t}),1),qc=function(e){if("function"!=typeof e)throw new TypeError("Expected a function");return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}},Wc=o?o.iterator:void 0,Hc=function(e){if(!e)return[];if(pt(e))return da(e)?Yr(e):Se(e);if(Wc&&e[Wc])return function(e){for(var t,r=[];!(t=e.next()).done;)r.push(t.value);return r}(e[Wc]());var t=si(e);return("[object Map]"==t?Mi:"[object Set]"==t?Li:fa)(e)},Kc=function(){void 0===this.__values__&&(this.__values__=Hc(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?void 0:this.__values__[this.__index__++]}},Vc=function(e,t){var r=e.length;if(r)return He(t+=t<0?r:0,r)?e[t]:void 0},Jc=function(e,t){return e&&e.length?Vc(e,M(t)):void 0},Gc=function(e){return e=M(e),ct((function(t){return Vc(t,e)}))},$c=function(e,t){return t=pr(t,e),null==(e=Da(e,t))||delete e[hr(qo(t))]},Yc=function(e){return Tr(e)?void 0:e},Xc=wr((function(e,t){var r={};if(null==e)return r;var n=!1;t=g(t,(function(t){return t=pr(t,e),n||(n=t.length>1),t})),ot(e,Yn(e),r),n&&(r=bi(r,7,Yc));for(var i=t.length;i--;)$c(r,t[i]);return r})),Qc=function(e,t,r,n){if(!_(e))return e;for(var i=-1,o=(t=pr(t,e)).length,s=o-1,a=e;null!=a&&++i<o;){var c=hr(t[i]),u=r;if("__proto__"===c||"constructor"===c||"prototype"===c)return e;if(i!=s){var p=a[c];void 0===(u=n?n(p,c,a):void 0)&&(u=_(p)?p:He(t[i+1])?[]:{})}it(a,c,u),a=a[c]}return e},Zc=function(e,t,r){for(var n=-1,i=t.length,o={};++n<i;){var s=t[n],a=dr(e,s);r(a,s)&&Qc(o,pr(s,e),a)}return o},eu=function(e,t){if(null==e)return{};var r=g(Yn(e),(function(e){return[e]}));return t=Zi(t),Zc(e,r,(function(e,r){return t(e,r[0])}))},tu=function(e,t){return eu(e,qc(Zi(t)))},ru=function(e){return xr(2,e)},nu=function(e,t){if(e!==t){var r=void 0!==e,n=null===e,i=e==e,o=f(e),s=void 0!==t,a=null===t,c=t==t,u=f(t);if(!a&&!u&&!o&&e>t||o&&s&&c&&!a&&!u||n&&s&&c||!r&&c||!i)return 1;if(!n&&!o&&!u&&e<t||u&&r&&i&&!n&&!o||a&&r&&i||!s&&i||!c)return-1}return 0},iu=function(e,t,r){t=t.length?g(t,(function(e){return m(e)?function(t){return dr(t,1===e.length?e[0]:e)}:e})):[N];var n=-1;return t=g(t,Rt(Zi)),function(e,t){var r=e.length;for(e.sort(t);r--;)e[r]=e[r].value;return e}(Ms(e,(function(e,r,i){return{criteria:g(t,(function(t){return t(e)})),index:++n,value:e}})),(function(e,t){return function(e,t,r){for(var n=-1,i=e.criteria,o=t.criteria,s=i.length,a=r.length;++n<s;){var c=nu(i[n],o[n]);if(c)return n>=a?c:c*("desc"==r[n]?-1:1)}return e.index-t.index}(e,t,r)}))},ou=function(e,t,r,n){return null==e?[]:(m(t)||(t=null==t?[]:[t]),m(r=n?void 0:r)||(r=null==r?[]:[r]),iu(e,t,r))},su=function(e){return wr((function(t){return t=g(t,Rt(Zi)),ct((function(r){var n=this;return e(t,(function(e){return ne(e,n,r)}))}))}))},au=su(g),cu=ct,uu=Math.min,pu=cu((function(e,t){var r=(t=1==t.length&&m(t[0])?g(t[0],Rt(Zi)):g(yr(t,1),Rt(Zi))).length;return ct((function(n){for(var i=-1,o=uu(n.length,r);++i<o;)n[i]=t[i].call(this,n[i]);return ne(e,this,n)}))})),hu=su(vs),du=su(xi),lu=Math.floor,fu=function(e,t){var r="";if(!e||t<1||t>9007199254740991)return r;do{t%2&&(r+=e),(t=lu(t/2))&&(e+=e)}while(t);return r},vu=Xi("length"),gu="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",mu="[^\\ud800-\\udfff]",yu="(?:\\ud83c[\\udde6-\\uddff]){2}",Su="[\\ud800-\\udbff][\\udc00-\\udfff]",wu="(?:"+gu+"|\\ud83c[\\udffb-\\udfff])?",bu="[\\ufe0e\\ufe0f]?"+wu+"(?:\\u200d(?:"+[mu,yu,Su].join("|")+")[\\ufe0e\\ufe0f]?"+wu+")*",Cu="(?:"+[mu+gu+"?",gu,yu,Su,"[\\ud800-\\udfff]"].join("|")+")",Ru=RegExp("\\ud83c[\\udffb-\\udfff](?=\\ud83c[\\udffb-\\udfff])|"+Cu+bu,"g"),Pu=function(e){return Ur(e)?function(e){for(var t=Ru.lastIndex=0;Ru.test(e);)++t;return t}(e):vu(e)},Iu=Math.ceil,Eu=function(e,t){var r=(t=void 0===t?" ":w(t)).length;if(r<2)return r?fu(t,e):t;var n=fu(t,Iu(e/Pu(t)));return Ur(t)?Br(Yr(n),0,e).join(""):n.slice(0,e)},_u=Math.ceil,Tu=Math.floor,Au=function(e,t,r){e=ur(e);var n=(t=M(t))?Pu(e):0;if(!t||n>=t)return e;var i=(t-n)/2;return Eu(Tu(i),r)+e+Eu(_u(i),r)},Ou=function(e,t,r){e=ur(e);var n=(t=M(t))?Pu(e):0;return t&&n<t?e+Eu(t-n,r):e},xu=function(e,t,r){e=ur(e);var n=(t=M(t))?Pu(e):0;return t&&n<t?Eu(t-n,r)+e:e},ku=/^\s+/,Du=i.a.parseInt,Mu=function(e,t,r){return r||null==t?t=0:t&&(t=+t),Du(ur(e).replace(ku,""),t||0)},Lu=ct((function(e,t){var r=Je(t,qe(Lu));return Ze(e,32,void 0,t,r)}));Lu.placeholder={};var Nu=Lu,zu=ct((function(e,t){var r=Je(t,qe(zu));return Ze(e,64,void 0,t,r)}));zu.placeholder={};var Bu,ju,Uu=zu,Fu=ho((function(e,t,r){e[r?0:1].push(t)}),(function(){return[[],[]]})),qu=wr((function(e,t){return null==e?{}:function(e,t){return Zc(e,t,(function(t,r){return $i(e,r)}))}(e,t)})),Wu=function(e){for(var t,r=this;r instanceof ue;){var n=we(r);n.__index__=0,n.__values__=void 0,t?i.__wrapped__=n:t=n;var i=n;r=r.__wrapped__}return i.__wrapped__=e,t},Hu=function(e){return function(t){return null==e?void 0:dr(e,t)}},Ku=function(e,t,r,n){for(var i=r-1,o=e.length;++i<o;)if(n(e[i],t))return i;return-1},Vu=Array.prototype.splice,Ju=function(e,t,r,n){var i=n?Ku:ze,o=-1,s=t.length,a=e;for(e===t&&(t=Se(t)),r&&(a=g(e,Rt(r)));++o<s;)for(var c=0,u=t[o],p=r?r(u):u;(c=i(a,p,c,n))>-1;)a!==e&&Vu.call(a,c,1),Vu.call(e,c,1);return e},Gu=function(e,t){return e&&e.length&&t&&t.length?Ju(e,t):e},$u=ct(Gu),Yu=function(e,t,r){return e&&e.length&&t&&t.length?Ju(e,t,Zi(r)):e},Xu=function(e,t,r){return e&&e.length&&t&&t.length?Ju(e,t,void 0,r):e},Qu=Array.prototype.splice,Zu=function(e,t){for(var r=e?t.length:0,n=r-1;r--;){var i=t[r];if(r==n||i!==o){var o=i;He(i)?Qu.call(e,i,1):$c(e,i)}}return e},ep=wr((function(e,t){var r=null==e?0:e.length,n=fr(e,t);return Zu(e,g(t,(function(e){return He(e,r)?+e:e})).sort(nu)),n})),tp=Math.floor,rp=Math.random,np=function(e,t){return e+tp(rp()*(t-e+1))},ip=parseFloat,op=Math.min,sp=Math.random,ap=function(e,t,r){if(r&&"boolean"!=typeof r&&ht(e,t,r)&&(t=r=void 0),void 0===r&&("boolean"==typeof t?(r=t,t=void 0):"boolean"==typeof e&&(r=e,e=void 0)),void 0===e&&void 0===t?(e=0,t=1):(e=D(e),void 0===t?(t=e,e=0):t=D(t)),e>t){var n=e;e=t,t=n}if(r||e%1||t%1){var i=sp();return op(e+i*(t-e+ip("1e-"+((i+"").length-1))),t)}return np(e,t)},cp=Math.ceil,up=Math.max,pp=function(e){return function(t,r,n){return n&&"number"!=typeof n&&ht(t,r,n)&&(r=n=void 0),t=D(t),void 0===r?(r=t,t=0):r=D(r),function(e,t,r,n){for(var i=-1,o=up(cp((t-e)/(r||1)),0),s=Array(o);o--;)s[n?o:++i]=e,e+=r;return s}(t,r,n=void 0===n?t<r?1:-1:D(n),e)}},hp=pp(),dp=pp(!0),lp=wr((function(e,t){return Ze(e,256,void 0,void 0,void 0,t)})),fp=function(e,t,r,n,i){return i(e,(function(e,i,o){r=n?(n=!1,e):t(r,e,i,o)})),r},vp=function(e,t,r){var n=m(e)?en:fp,i=arguments.length<3;return n(e,Zi(t),r,i,uo)},gp=function(e,t,r,n){var i=null==e?0:e.length;for(n&&i&&(r=e[--i]);i--;)r=t(r,e[i],i,e);return r},mp=function(e,t,r){var n=m(e)?gp:fp,i=arguments.length<3;return n(e,Zi(t),r,i,rs)},yp=function(e,t){return(m(e)?qn:ws)(e,qc(Zi(t)))},Sp=function(e,t){var r=[];if(!e||!e.length)return r;var n=-1,i=[],o=e.length;for(t=Zi(t);++n<o;){var s=e[n];t(s,n,e)&&(r.push(s),i.push(n))}return Zu(e,i),r},wp=function(e,t,r){return t=(r?ht(e,t,r):void 0===t)?1:M(t),fu(ur(e),t)},bp=function(){var e=arguments,t=ur(e[0]);return e.length<3?t:t.replace(e[1],e[2])},Cp=function(e,t){if("function"!=typeof e)throw new TypeError("Expected a function");return t=void 0===t?t:M(t),ct(e,t)},Rp=function(e,t,r){var n=-1,i=(t=pr(t,e)).length;for(i||(i=1,e=void 0);++n<i;){var o=null==e?void 0:e[hr(t[n])];void 0===o&&(n=i,o=r),e=z(o)?o.call(e):o}return e},Pp=Array.prototype.reverse,Ip=function(e){return null==e?e:Pp.call(e)},Ep=On("round"),_p=function(e){var t=e.length;return t?e[np(0,t-1)]:void 0},Tp=function(e){return _p(fa(e))},Ap=function(e){return(m(e)?_p:Tp)(e)},Op=function(e,t){var r=-1,n=e.length,i=n-1;for(t=void 0===t?n:t;++r<t;){var o=np(r,i),s=e[o];e[o]=e[r],e[r]=s}return e.length=t,e},xp=function(e,t){return Op(Se(e),Nn(t,0,e.length))},kp=function(e,t){var r=fa(e);return Op(r,Nn(t,0,r.length))},Dp=function(e,t,r){return t=(r?ht(e,t,r):void 0===t)?1:M(t),(m(e)?xp:kp)(e,t)},Mp=function(e,t,r){return null==e?e:Qc(e,t,r)},Lp=function(e,t,r,n){return n="function"==typeof n?n:void 0,null==e?e:Qc(e,t,r,n)},Np=function(e){return Op(Se(e))},zp=function(e){return Op(fa(e))},Bp=function(e){return(m(e)?Np:zp)(e)},jp=function(e){if(null==e)return 0;if(pt(e))return da(e)?Pu(e):e.length;var t=si(e);return"[object Map]"==t||"[object Set]"==t?e.size:kt(e).length},Up=function(e,t,r){var n=null==e?0:e.length;return n?(r&&"number"!=typeof r&&ht(e,t,r)?(t=0,r=n):(t=null==t?0:M(t),r=void 0===r?n:M(r)),zr(e,t,r)):[]},Fp=In((function(e,t,r){return e+(r?"_":"")+t.toLowerCase()})),qp=function(e,t){var r;return uo(e,(function(e,n,i){return!(r=t(e,n,i))})),!!r},Wp=function(e,t,r){var n=m(e)?xi:qp;return r&&ht(e,t,r)&&(t=void 0),n(e,Zi(t))},Hp=ct((function(e,t){if(null==e)return[];var r=t.length;return r>1&&ht(e,t[0],t[1])?t=[]:r>2&&ht(t[0],t[1],t[2])&&(t=[t[0]]),iu(e,yr(t,1),[])})),Kp=Math.floor,Vp=Math.min,Jp=function(e,t,r,n){var i=0,o=null==e?0:e.length;if(0===o)return 0;for(var s=(t=r(t))!=t,a=null===t,c=f(t),u=void 0===t;i<o;){var p=Kp((i+o)/2),h=r(e[p]),d=void 0!==h,l=null===h,v=h==h,g=f(h);if(s)var m=n||v;else m=u?v&&(n||d):a?v&&d&&(n||!l):c?v&&d&&!l&&(n||!g):!l&&!g&&(n?h<=t:h<t);m?i=p+1:o=p}return Vp(o,4294967294)},Gp=function(e,t,r){var n=0,i=null==e?n:e.length;if("number"==typeof t&&t==t&&i<=2147483647){for(;n<i;){var o=n+i>>>1,s=e[o];null!==s&&!f(s)&&(r?s<=t:s<t)?n=o+1:i=o}return i}return Jp(e,t,N,r)},$p=function(e,t){return Gp(e,t)},Yp=function(e,t,r){return Jp(e,t,Zi(r))},Xp=function(e,t){var r=null==e?0:e.length;if(r){var n=Gp(e,t);if(n<r&&rt(e[n],t))return n}return-1},Qp=function(e,t){return Gp(e,t,!0)},Zp=function(e,t,r){return Jp(e,t,Zi(r),!0)},eh=function(e,t){if(null!=e&&e.length){var r=Gp(e,t,!0)-1;if(rt(e[r],t))return r}return-1},th=function(e,t){for(var r=-1,n=e.length,i=0,o=[];++r<n;){var s=e[r],a=t?t(s):s;if(!r||!rt(a,c)){var c=a;o[i++]=0===s?0:s}}return o},rh=function(e){return e&&e.length?th(e):[]},nh=function(e,t){return e&&e.length?th(e,Zi(t)):[]},ih=function(e,t,r){return r&&"number"!=typeof r&&ht(e,t,r)&&(t=r=void 0),(r=void 0===r?4294967295:r>>>0)?(e=ur(e))&&("string"==typeof t||null!=t&&!sc(t))&&!(t=w(t))&&Ur(e)?Br(Yr(e),0,r):e.split(t,r):[]},oh=Math.max,sh=function(e,t){if("function"!=typeof e)throw new TypeError("Expected a function");return t=null==t?0:oh(M(t),0),ct((function(r){var n=r[t],i=Br(r,0,t);return n&&vr(i,n),ne(e,this,i)}))},ah=In((function(e,t,r){return e+(r?" ":"")+Qr(t)})),ch=function(e,t,r){return e=ur(e),r=null==r?0:Nn(M(r),0,e.length),t=w(t),e.slice(r,r+t.length)==t},uh=function(){return{}},ph=function(){return""},hh=function(){return!0},dh=b((function(e,t){return e-t}),0),lh=function(e){return e&&e.length?xc(e,N):0},fh=function(e,t){return e&&e.length?xc(e,Zi(t)):0},vh=function(e){var t=null==e?0:e.length;return t?zr(e,1,t):[]},gh=function(e,t,r){return e&&e.length?(t=r||void 0===t?1:M(t),zr(e,0,t<0?0:t)):[]},mh=function(e,t,r){var n=null==e?0:e.length;return n?(t=r||void 0===t?1:M(t),zr(e,(t=n-t)<0?0:t,n)):[]},yh=function(e,t){return e&&e.length?Go(e,Zi(t),!1,!0):[]},Sh=function(e,t){return e&&e.length?Go(e,Zi(t)):[]},wh=function(e,t){return t(e),e},bh=Object.prototype,Ch=bh.hasOwnProperty,Rh=function(e,t,r,n){return void 0===e||rt(e,bh[r])&&!Ch.call(n,r)?t:e},Ph={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Ih=function(e){return"\\"+Ph[e]},Eh=/<%=([\s\S]+?)%>/g,_h={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:Eh,variable:"",imports:{_:{escape:hs}}},Th=/\b__p \+= '';/g,Ah=/\b(__p \+=) '' \+/g,Oh=/(__e\(.*?\)|\b__t\)) \+\n'';/g,xh=/[()=,{}\[\]\/\s]/,kh=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Dh=/($^)/,Mh=/['\n\r\u2028\u2029\\]/g,Lh=Object.prototype.hasOwnProperty,Nh=function(e,t,r){var n=_h.imports._.templateSettings||_h;r&&ht(e,t,r)&&(t=void 0),e=ur(e),t=Ut({},t,n,Rh);var i,o,s=Ut({},t.imports,n.imports,Rh),a=Dt(s),c=la(s,a),u=0,p=t.interpolate||Dh,h="__p += '",d=RegExp((t.escape||Dh).source+"|"+p.source+"|"+(p===Eh?kh:Dh).source+"|"+(t.evaluate||Dh).source+"|$","g"),l=Lh.call(t,"sourceURL")?"//# sourceURL="+(t.sourceURL+"").replace(/\s/g," ")+"\n":"";e.replace(d,(function(t,r,n,s,a,c){return n||(n=s),h+=e.slice(u,c).replace(Mh,Ih),r&&(i=!0,h+="' +\n__e("+r+") +\n'"),a&&(o=!0,h+="';\n"+a+";\n__p += '"),n&&(h+="' +\n((__t = ("+n+")) == null ? '' : __t) +\n'"),u=c+t.length,t})),h+="';\n";var f=Lh.call(t,"variable")&&t.variable;if(f){if(xh.test(f))throw new Error("Invalid `variable` option passed into `_.template`")}else h="with (obj) {\n"+h+"\n}\n";h=(o?h.replace(Th,""):h).replace(Ah,"$1").replace(Oh,"$1;"),h="function("+(f||"obj")+") {\n"+(f?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(i?", __e = _.escape":"")+(o?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+h+"return __p\n}";var v=Or((function(){return Function(a,l+"return "+h).apply(void 0,c)}));if(v.source=h,Ar(v))throw v;return v},zh=function(e,t,r){var n=!0,i=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return _(r)&&(n="leading"in r?!!r.leading:n,i="trailing"in r?!!r.trailing:i),Ro(e,t,{leading:n,maxWait:t,trailing:i})},Bh=function(e,t){return t(e)},jh=Math.min,Uh=function(e,t){if((e=M(e))<1||e>9007199254740991)return[];var r=4294967295,n=jh(e,4294967295);t=Xo(t),e-=4294967295;for(var i=vt(n,t);++r<e;)t(r);return i},Fh=function(){return this},qh=function(e,t){var r=e;return r instanceof he&&(r=r.value()),en(t,(function(e,t){return t.func.apply(t.thisArg,vr([e],t.args))}),r)},Wh=function(){return qh(this.__wrapped__,this.__actions__)},Hh=function(e){return ur(e).toLowerCase()},Kh=function(e){return m(e)?g(e,hr):f(e)?[e]:Se(cr(ur(e)))},Vh=function(e){return e?Nn(M(e),-9007199254740991,9007199254740991):0===e?e:0},Jh=function(e){return ur(e).toUpperCase()},Gh=function(e,t,r){var n=m(e),i=n||Object(bt.a)(e)||Et(e);if(t=Zi(t),null==r){var o=e&&e.constructor;r=i?n?new o:[]:_(e)&&z(o)?ee(Cr(e)):{}}return(i?Me:ao)(e,(function(e,n,i){return t(r,e,n,i)})),r},$h=function(e,t){for(var r=e.length;r--&&ze(t,e[r],0)>-1;);return r},Yh=function(e,t){for(var r=-1,n=e.length;++r<n&&ze(t,e[r],0)>-1;);return r},Xh=function(e,t,r){if((e=ur(e))&&(r||void 0===t))return E(e);if(!e||!(t=w(t)))return e;var n=Yr(e),i=Yr(t),o=Yh(n,i),s=$h(n,i)+1;return Br(n,o,s).join("")},Qh=function(e,t,r){if((e=ur(e))&&(r||void 0===t))return e.slice(0,P(e)+1);if(!e||!(t=w(t)))return e;var n=Yr(e),i=$h(n,Yr(t))+1;return Br(n,0,i).join("")},Zh=/^\s+/,ed=function(e,t,r){if((e=ur(e))&&(r||void 0===t))return e.replace(Zh,"");if(!e||!(t=w(t)))return e;var n=Yr(e),i=Yh(n,Yr(t));return Br(n,i).join("")},td=/\w*$/,rd=function(e,t){var r=30,n="...";if(_(t)){var i="separator"in t?t.separator:i;r="length"in t?M(t.length):r,n="omission"in t?w(t.omission):n}var o=(e=ur(e)).length;if(Ur(e)){var s=Yr(e);o=s.length}if(r>=o)return e;var a=r-Pu(n);if(a<1)return n;var c=s?Br(s,0,a).join(""):e.slice(0,a);if(void 0===i)return c+n;if(s&&(a+=c.length-a),sc(i)){if(e.slice(a).search(i)){var u,p=c;for(i.global||(i=RegExp(i.source,ur(td.exec(i))+"g")),i.lastIndex=0;u=i.exec(p);)var h=u.index;c=c.slice(0,void 0===h?a:h)}}else if(e.indexOf(w(i),a)!=a){var d=c.lastIndexOf(i);d>-1&&(c=c.slice(0,d))}return c+n},nd=function(e){return et(e,1)},id=tn({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),od=/&(?:amp|lt|gt|quot|#39);/g,sd=RegExp(od.source),ad=function(e){return(e=ur(e))&&sd.test(e)?e.replace(od,id):e},cd=Zn&&1/Li(new Zn([,-0]))[1]==1/0?function(e){return new Zn(e)}:de,ud=function(e,t,r){var n=-1,i=Be,o=e.length,s=!0,a=[],c=a;if(r)s=!1,i=jo;else if(o>=200){var u=t?null:cd(e);if(u)return Li(u);s=!1,i=ki,c=new Oi}else c=t?[]:a;e:for(;++n<o;){var p=e[n],h=t?t(p):p;if(p=r||0!==p?p:0,s&&h==h){for(var d=c.length;d--;)if(c[d]===h)continue e;t&&c.push(h),a.push(p)}else i(c,h,r)||(c!==a&&c.push(h),a.push(p))}return a},pd=ct((function(e){return ud(yr(e,1,Ao,!0))})),hd=ct((function(e){var t=qo(e);return Ao(t)&&(t=void 0),ud(yr(e,1,Ao,!0),Zi(t))})),dd=ct((function(e){var t=qo(e);return t="function"==typeof t?t:void 0,ud(yr(e,1,Ao,!0),void 0,t)})),ld=function(e){return e&&e.length?ud(e):[]},fd=function(e,t){return e&&e.length?ud(e,Zi(t)):[]},vd=function(e,t){return t="function"==typeof t?t:void 0,e&&e.length?ud(e,void 0,t):[]},gd=0,md=function(e){var t=++gd;return ur(e)+t},yd=function(e,t){return null==e||$c(e,t)},Sd=Math.max,wd=function(e){if(!e||!e.length)return[];var t=0;return e=qn(e,(function(e){if(Ao(e))return t=Sd(e.length,t),!0})),vt(t,(function(t){return g(e,Xi(t))}))},bd=function(e,t){if(!e||!e.length)return[];var r=wd(e);return null==t?r:g(r,(function(e){return ne(t,void 0,e)}))},Cd=function(e,t,r,n){return Qc(e,t,r(dr(e,t)),n)},Rd=function(e,t,r){return null==e?e:Cd(e,t,Xo(r))},Pd=function(e,t,r,n){return n="function"==typeof n?n:void 0,null==e?e:Cd(e,t,Xo(r),n)},Id=In((function(e,t,r){return e+(r?" ":"")+t.toUpperCase()})),Ed=function(e){return null==e?[]:la(e,Bt(e))},_d=ct((function(e,t){return Ao(e)?Uo(e,t):[]})),Td=function(e,t){return Nu(Xo(t),e)},Ad=wr((function(e){var t=e.length,r=t?e[0]:0,n=this.__wrapped__,i=function(t){return fr(t,e)};return!(t>1||this.__actions__.length)&&n instanceof he&&He(r)?((n=n.slice(r,+r+(t?1:0))).__actions__.push({func:Bh,args:[i],thisArg:void 0}),new ye(n,this.__chain__).thru((function(e){return t&&!e.length&&e.push(void 0),e}))):this.thru(i)})),Od=function(){return kn(this)},xd=function(){var e=this.__wrapped__;if(e instanceof he){var t=e;return this.__actions__.length&&(t=new he(this)),(t=t.reverse()).__actions__.push({func:Bh,args:[Ip],thisArg:void 0}),new ye(t,this.__chain__)}return this.thru(Ip)},kd=function(e,t,r){var n=e.length;if(n<2)return n?ud(e[0]):[];for(var i=-1,o=Array(n);++i<n;)for(var s=e[i],a=-1;++a<n;)a!=i&&(o[i]=Uo(o[i]||s,e[a],t,r));return ud(yr(o,1),t,r)},Dd=ct((function(e){return kd(qn(e,Ao))})),Md=ct((function(e){var t=qo(e);return Ao(t)&&(t=void 0),kd(qn(e,Ao),Zi(t))})),Ld=ct((function(e){var t=qo(e);return t="function"==typeof t?t:void 0,kd(qn(e,Ao),void 0,t)})),Nd=ct(wd),zd=function(e,t,r){for(var n=-1,i=e.length,o=t.length,s={};++n<i;){var a=n<o?t[n]:void 0;r(s,e[n],a)}return s},Bd=function(e,t){return zd(e||[],t||[],it)},jd=function(e,t){return zd(e||[],t||[],Qc)},Ud=ct((function(e){var t=e.length,r=t>1?e[t-1]:void 0;return r="function"==typeof r?(e.pop(),r):void 0,bd(e,r)})),Fd={chunk:Ln,compact:_i,concat:Ti,difference:Fo,differenceBy:Wo,differenceWith:Ho,drop:Vo,dropRight:Jo,dropRightWhile:$o,dropWhile:Yo,fill:Ss,findIndex:Ps,findLastIndex:Os,first:Ds,flatten:Sr,flattenDeep:js,flattenDepth:Us,fromPairs:Ys,head:Ds,indexOf:ya,initial:Sa,intersection:Ra,intersectionBy:Pa,intersectionWith:Ia,join:lc,last:qo,lastIndexOf:yc,nth:Jc,pull:$u,pullAll:Gu,pullAllBy:Yu,pullAllWith:Xu,pullAt:ep,remove:Sp,reverse:Ip,slice:Up,sortedIndex:$p,sortedIndexBy:Yp,sortedIndexOf:Xp,sortedLastIndex:Qp,sortedLastIndexBy:Zp,sortedLastIndexOf:eh,sortedUniq:rh,sortedUniqBy:nh,tail:vh,take:gh,takeRight:mh,takeRightWhile:yh,takeWhile:Sh,union:pd,unionBy:hd,unionWith:dd,uniq:ld,uniqBy:fd,uniqWith:vd,unzip:wd,unzipWith:bd,without:_d,xor:Dd,xorBy:Md,xorWith:Ld,zip:Nd,zipObject:Bd,zipObjectDeep:jd,zipWith:Ud},qd={countBy:fo,each:Qo,eachRight:ns,every:ms,filter:bs,find:Is,findLast:xs,flatMap:Ns,flatMapDeep:zs,flatMapDepth:Bs,forEach:Qo,forEachRight:ns,groupBy:ta,includes:ga,invokeMap:Na,keyBy:vc,map:Ls,orderBy:ou,partition:Fu,reduce:vp,reduceRight:mp,reject:yp,sample:Ap,sampleSize:Dp,shuffle:Bp,size:jp,some:Wp,sortBy:Hp},Wd={now:wo},Hd={after:L,ary:et,before:xr,bind:Dr,bindKey:Nr,curry:mo,curryRight:So,debounce:Ro,defer:zo,delay:Bo,flip:Fs,memoize:or,negate:qc,once:ru,overArgs:pu,partial:Nu,partialRight:Uu,rearg:lp,rest:Cp,spread:sh,throttle:zh,unary:nd,wrap:Td},Kd={castArray:_n,clone:Ci,cloneDeep:Ri,cloneDeepWith:Pi,cloneWith:Ii,conformsTo:no,eq:rt,gt:ia,gte:oa,isArguments:wt,isArray:m,isArrayBuffer:Ba,isArrayLike:pt,isArrayLikeObject:Ao,isBoolean:ja,isBuffer:bt.a,isDate:Fa,isElement:qa,isEmpty:Ha,isEqual:Ka,isEqualWith:Va,isError:Ar,isFinite:Ga,isFunction:z,isInteger:$a,isLength:ut,isMap:mi,isMatch:Ya,isMatchWith:Xa,isNaN:Za,isNative:rc,isNil:nc,isNull:ic,isNumber:Qa,isObject:_,isObjectLike:l,isPlainObject:Tr,isRegExp:sc,isSafeInteger:ac,isSet:Si,isString:da,isSymbol:f,isTypedArray:Et,isUndefined:cc,isWeakMap:uc,isWeakSet:pc,lt:Cc,lte:Rc,toArray:Hc,toFinite:D,toInteger:M,toLength:ys,toNumber:k,toPlainObject:xo,toSafeInteger:Vh,toString:ur},Vd={add:C,ceil:xn,divide:Ko,floor:qs,max:Ac,maxBy:Oc,mean:Dc,meanBy:Mc,min:Bc,minBy:jc,multiply:Fc,round:Ep,subtract:dh,sum:lh,sumBy:fh},Jd={clamp:zn,inRange:ha,random:ap},Gd={assign:Lt,assignIn:jt,assignInWith:Ut,assignWith:Ft,at:br,create:vo,defaults:_o,defaultsDeep:Lo,entries:ss,entriesIn:as,extend:jt,extendWith:Ut,findKey:_s,findLastKey:ks,forIn:Vs,forInRight:Js,forOwn:Gs,forOwnRight:$s,functions:Qs,functionsIn:Zs,get:lr,has:ca,hasIn:$i,invert:Ta,invertBy:ka,invoke:La,keys:Dt,keysIn:Bt,mapKeys:Pc,mapValues:Ic,merge:Lc,mergeWith:Mo,omit:Xc,omitBy:tu,pick:qu,pickBy:eu,result:Rp,set:Mp,setWith:Lp,toPairs:ss,toPairsIn:as,transform:Gh,unset:yd,update:Rd,updateWith:Pd,values:fa,valuesIn:Ed},$d={at:Ad,chain:kn,commit:Ei,lodash:Re,next:Kc,plant:Wu,reverse:xd,tap:wh,thru:Bh,toIterator:Fh,toJSON:Wh,value:Wh,valueOf:Wh,wrapperChain:Od},Yd={camelCase:En,capitalize:Zr,deburr:sn,endsWith:is,escape:hs,escapeRegExp:fs,kebabCase:fc,lowerCase:Sc,lowerFirst:wc,pad:Au,padEnd:Ou,padStart:xu,parseInt:Mu,repeat:wp,replace:bp,snakeCase:Fp,split:ih,startCase:ah,startsWith:ch,template:Nh,templateSettings:_h,toLower:Hh,toUpper:Jh,trim:Xh,trimEnd:Qh,trimStart:ed,truncate:rd,unescape:ad,upperCase:Id,upperFirst:Qr,words:Rn},Xd={attempt:Or,bindAll:Mr,cond:eo,conforms:ro,constant:xe,defaultTo:Po,flow:Hs,flowRight:Ks,identity:N,iteratee:hc,matches:Ec,matchesProperty:_c,method:Nc,methodOf:zc,mixin:Uc,noop:de,nthArg:Gc,over:au,overEvery:hu,overSome:du,property:Qi,propertyOf:Hu,range:hp,rangeRight:dp,stubArray:Wn,stubFalse:ec.a,stubObject:uh,stubString:ph,stubTrue:hh,times:Uh,toPath:Kh,uniqueId:md},Qd=Math.max,Zd=Math.min,el=Math.min,tl=Array.prototype,rl=Object.prototype.hasOwnProperty,nl=o?o.iterator:void 0,il=Math.max,ol=Math.min,sl=(Bu=Uc,function(e,t,r){if(null==r){var n=_(t),i=n&&Dt(t),o=i&&i.length&&Xs(t,i);(o?o.length:n)||(r=t,t=e,e=this)}return Bu(e,t,r)});
/**
 * @license
 * Lodash (Custom Build) <https://lodash.com/>
 * Build: `lodash modularize exports="es" -o ./`
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */
Re.after=Hd.after,Re.ary=Hd.ary,Re.assign=Gd.assign,Re.assignIn=Gd.assignIn,Re.assignInWith=Gd.assignInWith,Re.assignWith=Gd.assignWith,Re.at=Gd.at,Re.before=Hd.before,Re.bind=Hd.bind,Re.bindAll=Xd.bindAll,Re.bindKey=Hd.bindKey,Re.castArray=Kd.castArray,Re.chain=$d.chain,Re.chunk=Fd.chunk,Re.compact=Fd.compact,Re.concat=Fd.concat,Re.cond=Xd.cond,Re.conforms=Xd.conforms,Re.constant=Xd.constant,Re.countBy=qd.countBy,Re.create=Gd.create,Re.curry=Hd.curry,Re.curryRight=Hd.curryRight,Re.debounce=Hd.debounce,Re.defaults=Gd.defaults,Re.defaultsDeep=Gd.defaultsDeep,Re.defer=Hd.defer,Re.delay=Hd.delay,Re.difference=Fd.difference,Re.differenceBy=Fd.differenceBy,Re.differenceWith=Fd.differenceWith,Re.drop=Fd.drop,Re.dropRight=Fd.dropRight,Re.dropRightWhile=Fd.dropRightWhile,Re.dropWhile=Fd.dropWhile,Re.fill=Fd.fill,Re.filter=qd.filter,Re.flatMap=qd.flatMap,Re.flatMapDeep=qd.flatMapDeep,Re.flatMapDepth=qd.flatMapDepth,Re.flatten=Fd.flatten,Re.flattenDeep=Fd.flattenDeep,Re.flattenDepth=Fd.flattenDepth,Re.flip=Hd.flip,Re.flow=Xd.flow,Re.flowRight=Xd.flowRight,Re.fromPairs=Fd.fromPairs,Re.functions=Gd.functions,Re.functionsIn=Gd.functionsIn,Re.groupBy=qd.groupBy,Re.initial=Fd.initial,Re.intersection=Fd.intersection,Re.intersectionBy=Fd.intersectionBy,Re.intersectionWith=Fd.intersectionWith,Re.invert=Gd.invert,Re.invertBy=Gd.invertBy,Re.invokeMap=qd.invokeMap,Re.iteratee=Xd.iteratee,Re.keyBy=qd.keyBy,Re.keys=Dt,Re.keysIn=Gd.keysIn,Re.map=qd.map,Re.mapKeys=Gd.mapKeys,Re.mapValues=Gd.mapValues,Re.matches=Xd.matches,Re.matchesProperty=Xd.matchesProperty,Re.memoize=Hd.memoize,Re.merge=Gd.merge,Re.mergeWith=Gd.mergeWith,Re.method=Xd.method,Re.methodOf=Xd.methodOf,Re.mixin=sl,Re.negate=qc,Re.nthArg=Xd.nthArg,Re.omit=Gd.omit,Re.omitBy=Gd.omitBy,Re.once=Hd.once,Re.orderBy=qd.orderBy,Re.over=Xd.over,Re.overArgs=Hd.overArgs,Re.overEvery=Xd.overEvery,Re.overSome=Xd.overSome,Re.partial=Hd.partial,Re.partialRight=Hd.partialRight,Re.partition=qd.partition,Re.pick=Gd.pick,Re.pickBy=Gd.pickBy,Re.property=Xd.property,Re.propertyOf=Xd.propertyOf,Re.pull=Fd.pull,Re.pullAll=Fd.pullAll,Re.pullAllBy=Fd.pullAllBy,Re.pullAllWith=Fd.pullAllWith,Re.pullAt=Fd.pullAt,Re.range=Xd.range,Re.rangeRight=Xd.rangeRight,Re.rearg=Hd.rearg,Re.reject=qd.reject,Re.remove=Fd.remove,Re.rest=Hd.rest,Re.reverse=Fd.reverse,Re.sampleSize=qd.sampleSize,Re.set=Gd.set,Re.setWith=Gd.setWith,Re.shuffle=qd.shuffle,Re.slice=Fd.slice,Re.sortBy=qd.sortBy,Re.sortedUniq=Fd.sortedUniq,Re.sortedUniqBy=Fd.sortedUniqBy,Re.split=Yd.split,Re.spread=Hd.spread,Re.tail=Fd.tail,Re.take=Fd.take,Re.takeRight=Fd.takeRight,Re.takeRightWhile=Fd.takeRightWhile,Re.takeWhile=Fd.takeWhile,Re.tap=$d.tap,Re.throttle=Hd.throttle,Re.thru=Bh,Re.toArray=Kd.toArray,Re.toPairs=Gd.toPairs,Re.toPairsIn=Gd.toPairsIn,Re.toPath=Xd.toPath,Re.toPlainObject=Kd.toPlainObject,Re.transform=Gd.transform,Re.unary=Hd.unary,Re.union=Fd.union,Re.unionBy=Fd.unionBy,Re.unionWith=Fd.unionWith,Re.uniq=Fd.uniq,Re.uniqBy=Fd.uniqBy,Re.uniqWith=Fd.uniqWith,Re.unset=Gd.unset,Re.unzip=Fd.unzip,Re.unzipWith=Fd.unzipWith,Re.update=Gd.update,Re.updateWith=Gd.updateWith,Re.values=Gd.values,Re.valuesIn=Gd.valuesIn,Re.without=Fd.without,Re.words=Yd.words,Re.wrap=Hd.wrap,Re.xor=Fd.xor,Re.xorBy=Fd.xorBy,Re.xorWith=Fd.xorWith,Re.zip=Fd.zip,Re.zipObject=Fd.zipObject,Re.zipObjectDeep=Fd.zipObjectDeep,Re.zipWith=Fd.zipWith,Re.entries=Gd.toPairs,Re.entriesIn=Gd.toPairsIn,Re.extend=Gd.assignIn,Re.extendWith=Gd.assignInWith,sl(Re,Re),Re.add=Vd.add,Re.attempt=Xd.attempt,Re.camelCase=Yd.camelCase,Re.capitalize=Yd.capitalize,Re.ceil=Vd.ceil,Re.clamp=Jd.clamp,Re.clone=Kd.clone,Re.cloneDeep=Kd.cloneDeep,Re.cloneDeepWith=Kd.cloneDeepWith,Re.cloneWith=Kd.cloneWith,Re.conformsTo=Kd.conformsTo,Re.deburr=Yd.deburr,Re.defaultTo=Xd.defaultTo,Re.divide=Vd.divide,Re.endsWith=Yd.endsWith,Re.eq=Kd.eq,Re.escape=Yd.escape,Re.escapeRegExp=Yd.escapeRegExp,Re.every=qd.every,Re.find=qd.find,Re.findIndex=Fd.findIndex,Re.findKey=Gd.findKey,Re.findLast=qd.findLast,Re.findLastIndex=Fd.findLastIndex,Re.findLastKey=Gd.findLastKey,Re.floor=Vd.floor,Re.forEach=qd.forEach,Re.forEachRight=qd.forEachRight,Re.forIn=Gd.forIn,Re.forInRight=Gd.forInRight,Re.forOwn=Gd.forOwn,Re.forOwnRight=Gd.forOwnRight,Re.get=Gd.get,Re.gt=Kd.gt,Re.gte=Kd.gte,Re.has=Gd.has,Re.hasIn=Gd.hasIn,Re.head=Fd.head,Re.identity=N,Re.includes=qd.includes,Re.indexOf=Fd.indexOf,Re.inRange=Jd.inRange,Re.invoke=Gd.invoke,Re.isArguments=Kd.isArguments,Re.isArray=m,Re.isArrayBuffer=Kd.isArrayBuffer,Re.isArrayLike=Kd.isArrayLike,Re.isArrayLikeObject=Kd.isArrayLikeObject,Re.isBoolean=Kd.isBoolean,Re.isBuffer=Kd.isBuffer,Re.isDate=Kd.isDate,Re.isElement=Kd.isElement,Re.isEmpty=Kd.isEmpty,Re.isEqual=Kd.isEqual,Re.isEqualWith=Kd.isEqualWith,Re.isError=Kd.isError,Re.isFinite=Kd.isFinite,Re.isFunction=Kd.isFunction,Re.isInteger=Kd.isInteger,Re.isLength=Kd.isLength,Re.isMap=Kd.isMap,Re.isMatch=Kd.isMatch,Re.isMatchWith=Kd.isMatchWith,Re.isNaN=Kd.isNaN,Re.isNative=Kd.isNative,Re.isNil=Kd.isNil,Re.isNull=Kd.isNull,Re.isNumber=Kd.isNumber,Re.isObject=_,Re.isObjectLike=Kd.isObjectLike,Re.isPlainObject=Kd.isPlainObject,Re.isRegExp=Kd.isRegExp,Re.isSafeInteger=Kd.isSafeInteger,Re.isSet=Kd.isSet,Re.isString=Kd.isString,Re.isSymbol=Kd.isSymbol,Re.isTypedArray=Kd.isTypedArray,Re.isUndefined=Kd.isUndefined,Re.isWeakMap=Kd.isWeakMap,Re.isWeakSet=Kd.isWeakSet,Re.join=Fd.join,Re.kebabCase=Yd.kebabCase,Re.last=qo,Re.lastIndexOf=Fd.lastIndexOf,Re.lowerCase=Yd.lowerCase,Re.lowerFirst=Yd.lowerFirst,Re.lt=Kd.lt,Re.lte=Kd.lte,Re.max=Vd.max,Re.maxBy=Vd.maxBy,Re.mean=Vd.mean,Re.meanBy=Vd.meanBy,Re.min=Vd.min,Re.minBy=Vd.minBy,Re.stubArray=Xd.stubArray,Re.stubFalse=Xd.stubFalse,Re.stubObject=Xd.stubObject,Re.stubString=Xd.stubString,Re.stubTrue=Xd.stubTrue,Re.multiply=Vd.multiply,Re.nth=Fd.nth,Re.noop=Xd.noop,Re.now=Wd.now,Re.pad=Yd.pad,Re.padEnd=Yd.padEnd,Re.padStart=Yd.padStart,Re.parseInt=Yd.parseInt,Re.random=Jd.random,Re.reduce=qd.reduce,Re.reduceRight=qd.reduceRight,Re.repeat=Yd.repeat,Re.replace=Yd.replace,Re.result=Gd.result,Re.round=Vd.round,Re.sample=qd.sample,Re.size=qd.size,Re.snakeCase=Yd.snakeCase,Re.some=qd.some,Re.sortedIndex=Fd.sortedIndex,Re.sortedIndexBy=Fd.sortedIndexBy,Re.sortedIndexOf=Fd.sortedIndexOf,Re.sortedLastIndex=Fd.sortedLastIndex,Re.sortedLastIndexBy=Fd.sortedLastIndexBy,Re.sortedLastIndexOf=Fd.sortedLastIndexOf,Re.startCase=Yd.startCase,Re.startsWith=Yd.startsWith,Re.subtract=Vd.subtract,Re.sum=Vd.sum,Re.sumBy=Vd.sumBy,Re.template=Yd.template,Re.times=Xd.times,Re.toFinite=Kd.toFinite,Re.toInteger=M,Re.toLength=Kd.toLength,Re.toLower=Yd.toLower,Re.toNumber=Kd.toNumber,Re.toSafeInteger=Kd.toSafeInteger,Re.toString=Kd.toString,Re.toUpper=Yd.toUpper,Re.trim=Yd.trim,Re.trimEnd=Yd.trimEnd,Re.trimStart=Yd.trimStart,Re.truncate=Yd.truncate,Re.unescape=Yd.unescape,Re.uniqueId=Xd.uniqueId,Re.upperCase=Yd.upperCase,Re.upperFirst=Yd.upperFirst,Re.each=qd.forEach,Re.eachRight=qd.forEachRight,Re.first=Fd.head,sl(Re,(ju={},ao(Re,(function(e,t){rl.call(Re.prototype,t)||(ju[t]=e)})),ju),{chain:!1}),Re.VERSION="4.17.21",(Re.templateSettings=Yd.templateSettings).imports._=Re,Me(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(e){Re[e].placeholder=Re})),Me(["drop","take"],(function(e,t){he.prototype[e]=function(r){r=void 0===r?1:il(M(r),0);var n=this.__filtered__&&!t?new he(this):this.clone();return n.__filtered__?n.__takeCount__=ol(r,n.__takeCount__):n.__views__.push({size:ol(r,4294967295),type:e+(n.__dir__<0?"Right":"")}),n},he.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}})),Me(["filter","map","takeWhile"],(function(e,t){var r=t+1,n=1==r||3==r;he.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:Zi(e),type:r}),t.__filtered__=t.__filtered__||n,t}})),Me(["head","last"],(function(e,t){var r="take"+(t?"Right":"");he.prototype[e]=function(){return this[r](1).value()[0]}})),Me(["initial","tail"],(function(e,t){var r="drop"+(t?"":"Right");he.prototype[e]=function(){return this.__filtered__?new he(this):this[r](1)}})),he.prototype.compact=function(){return this.filter(N)},he.prototype.find=function(e){return this.filter(e).head()},he.prototype.findLast=function(e){return this.reverse().find(e)},he.prototype.invokeMap=ct((function(e,t){return"function"==typeof e?new he(this):this.map((function(r){return Ma(r,e,t)}))})),he.prototype.reject=function(e){return this.filter(qc(Zi(e)))},he.prototype.slice=function(e,t){e=M(e);var r=this;return r.__filtered__&&(e>0||t<0)?new he(r):(e<0?r=r.takeRight(-e):e&&(r=r.drop(e)),void 0!==t&&(r=(t=M(t))<0?r.dropRight(-t):r.take(t-e)),r)},he.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},he.prototype.toArray=function(){return this.take(4294967295)},ao(he.prototype,(function(e,t){var r=/^(?:filter|find|map|reject)|While$/.test(t),n=/^(?:head|last)$/.test(t),i=Re[n?"take"+("last"==t?"Right":""):t],o=n||/^find/.test(t);i&&(Re.prototype[t]=function(){var t=this.__wrapped__,s=n?[1]:arguments,a=t instanceof he,c=s[0],u=a||m(t),p=function(e){var t=i.apply(Re,vr([e],s));return n&&h?t[0]:t};u&&r&&"function"==typeof c&&1!=c.length&&(a=u=!1);var h=this.__chain__,d=!!this.__actions__.length,l=o&&!h,f=a&&!d;if(!o&&u){t=f?t:new he(this);var v=e.apply(t,s);return v.__actions__.push({func:Bh,args:[p],thisArg:void 0}),new ye(v,h)}return l&&f?e.apply(this,s):(v=this.thru(p),l?n?v.value()[0]:v.value():v)})})),Me(["pop","push","shift","sort","splice","unshift"],(function(e){var t=tl[e],r=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",n=/^(?:pop|shift)$/.test(e);Re.prototype[e]=function(){var e=arguments;if(n&&!this.__chain__){var i=this.value();return t.apply(m(i)?i:[],e)}return this[r]((function(r){return t.apply(m(r)?r:[],e)}))}})),ao(he.prototype,(function(e,t){var r=Re[t];if(r){var n=r.name+"";rl.call(fe,n)||(fe[n]=[]),fe[n].push({name:t,func:r})}})),fe[Ge(void 0,2).name]=[{name:"wrapper",func:void 0}],he.prototype.clone=function(){var e=new he(this.__wrapped__);return e.__actions__=Se(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Se(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Se(this.__views__),e},he.prototype.reverse=function(){if(this.__filtered__){var e=new he(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},he.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,r=m(e),n=t<0,i=r?e.length:0,o=function(e,t,r){for(var n=-1,i=r.length;++n<i;){var o=r[n],s=o.size;switch(o.type){case"drop":e+=s;break;case"dropRight":t-=s;break;case"take":t=Zd(t,e+s);break;case"takeRight":e=Qd(e,t-s)}}return{start:e,end:t}}(0,i,this.__views__),s=o.start,a=o.end,c=a-s,u=n?a:s-1,p=this.__iteratees__,h=p.length,d=0,l=el(c,this.__takeCount__);if(!r||!n&&i==c&&l==c)return qh(e,this.__actions__);var f=[];e:for(;c--&&d<l;){for(var v=-1,g=e[u+=t];++v<h;){var y=p[v],S=y.iteratee,w=y.type,b=S(g);if(2==w)g=b;else if(!b){if(1==w)continue e;break e}}f[d++]=g}return f},Re.prototype.at=$d.at,Re.prototype.chain=$d.wrapperChain,Re.prototype.commit=$d.commit,Re.prototype.next=$d.next,Re.prototype.plant=$d.plant,Re.prototype.reverse=$d.reverse,Re.prototype.toJSON=Re.prototype.valueOf=Re.prototype.value=$d.value,Re.prototype.first=Re.prototype.head,nl&&(Re.prototype[nl]=$d.toIterator);var al=Re;
/**
 * @license
 * Lodash (Custom Build) <https://lodash.com/>
 * Build: `lodash modularize exports="es" -o ./`
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StorageVal=void 0;var n=r(58),i=r(63),o=r(26),s=r(110);class a extends i.Val{static async get(e,t){return o.isExtEnv?browser.storage[e].get(t):Object.keys(t).reduce((r,n)=>(r[n]=(0,s.localStorageGet)(e,n,t[n]),r),{})}static async set(e,t){return o.isExtEnv?browser.storage[e].set(t):Object.keys(t).forEach(r=>{(0,s.localStorageSet)(e,r,t[r])})}constructor(e,t,r,i){super(r),this.area=e,this.key=t,this.compare=i||n.isEqual,this._lsVal=(0,s.getLocalStorageVal)(this.area,this.key,r),this._attachStorage(),this.ready=this.loadStorageValue()}async loadStorageValue(){if(o.isExtEnv){const e=await browser.storage[this.area].get(this.key);(0,n.has)(e,this.key)&&this._setValue(e[this.key])}else this._setValue(this._lsVal.value)}async setValue(e){if(o.isExtEnv)await browser.storage[this.area].set({[this.key]:e});else try{this._lsVal.setValue(e)}catch(e){}}async _setValue(e){if(!this.compare(e,this._value)){const t=this._value;this._value=e,this._subscribers&&this._subscribers.forEach(r=>r(e,t))}}destroy(){super.destroy(),this._detachStorage&&(this._detachStorage(),this._detachStorage=void 0)}_attachStorage(){if(o.isExtEnv){const e=(e,t)=>{t===this.area&&(0,n.has)(e,this.key)&&this._setValue(e[this.key].newValue)};browser.storage.onChanged.addListener(e),this._detachStorage=()=>{browser.storage.onChanged.addListener(e)}}else this._detachStorage=this._lsVal.reaction(e=>{try{this._setValue(e)}catch(e){}})}}t.StorageVal=a},function(e,t,r){"use strict";(function(t){var n=r(17),i=r(119),o=r(69),s={"Content-Type":"application/x-www-form-urlencoded"};function a(e,t){!n.isUndefined(e)&&n.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var c,u={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:(("undefined"!=typeof XMLHttpRequest||void 0!==t&&"[object process]"===Object.prototype.toString.call(t))&&(c=r(70)),c),transformRequest:[function(e,t){return i(t,"Accept"),i(t,"Content-Type"),n.isFormData(e)||n.isArrayBuffer(e)||n.isBuffer(e)||n.isStream(e)||n.isFile(e)||n.isBlob(e)?e:n.isArrayBufferView(e)?e.buffer:n.isURLSearchParams(e)?(a(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):n.isObject(e)||t&&"application/json"===t["Content-Type"]?(a(t,"application/json"),function(e,t,r){if(n.isString(e))try{return(0,JSON.parse)(e),n.trim(e)}catch(e){if("SyntaxError"!==e.name)throw e}return(0,JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){var t=this.transitional,r=t&&t.silentJSONParsing,i=t&&t.forcedJSONParsing,s=!r&&"json"===this.responseType;if(s||i&&n.isString(e)&&e.length)try{return JSON.parse(e)}catch(e){if(s){if("SyntaxError"===e.name)throw o(e,this,"E_JSON_PARSE");throw e}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};n.forEach(["delete","get","head"],(function(e){u.headers[e]={}})),n.forEach(["post","put","patch"],(function(e){u.headers[e]=n.merge(s)})),e.exports=u}).call(this,r(66))},,function(e,t,r){"use strict";var n;r.d(t,"a",(function(){return n})),r.d(t,"b",(function(){return i})),function(e){e.WordBoundary="WordBoundary",e.Bookmark="Bookmark",e.Viseme="Viseme",e.SentenceBoundary="SentenceBoundary",e.SessionEnd="SessionEnd"}(n||(n={}));class i{constructor(e){this.privSynthesisAudioMetadata=JSON.parse(e)}static fromJSON(e){return new i(e)}get Metadata(){return this.privSynthesisAudioMetadata.Metadata}}},function(e,t,r){"use strict";r.r(t),r.d(t,"Val",(function(){return o})),r.d(t,"combine",(function(){return s})),r.d(t,"createSideEffectBinder",(function(){return u})),r.d(t,"enhanceVal",(function(){return c})),r.d(t,"withValueEnhancer",(function(){return a}));var n=Object.defineProperty,i=(r(109),(e,t,r)=>(((e,t,r)=>{t in e?n(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r})(e,"symbol"!=typeof t?t+"":t,r),r));class o{constructor(e,t){i(this,"_value"),i(this,"_beforeDestroys"),i(this,"_subscribers"),this._value=e,t&&(this.compare=t)}get value(){return this._value}setValue(e,t){if(!this.compare(e,this._value)){const r=this._value;this._value=e,this._subscribers&&this._subscribers.forEach(n=>n(e,r,t))}}reaction(e){return this._subscribers||(this._subscribers=new Set),this._subscribers.add(e),()=>{this._subscribers&&this._subscribers.delete(e)}}subscribe(e,t){const r=this.reaction(e);return e(this._value,void 0,t),r}derive(e,t,r){const n=new o(e(this.value,void 0,r),t),i=this.reaction((t,r,i)=>{n.setValue(e(t,r,i))});return n.addBeforeDestroy(i),n}destroy(){this._beforeDestroys&&(this._beforeDestroys.forEach(e=>e()),this._beforeDestroys.clear()),this._subscribers&&this._subscribers.clear()}addBeforeDestroy(e){return this._beforeDestroys||(this._beforeDestroys=new Set),this._beforeDestroys.add(e),()=>{this._beforeDestroys&&this._beforeDestroys.delete(e)}}compare(e,t){return e===t}}function s(e,t,r,n){let i=e.map(e=>e.value);const s=new o(t(i,void 0,n),r);return e.forEach((e,r)=>{const n=e.reaction((e,n)=>{const o=i.slice();o[r]=e;const a=i;i=o,s.setValue(t(o,a,n),n)});s.addBeforeDestroy(n)}),s}function a(e,t){Object.keys(t).forEach(r=>{c(e,r,t[r])})}function c(e,t,r){var n;Object.defineProperties(e,{[t]:{get:()=>r.value},[`_${t}$`]:{value:r},["set"+(n=t,n[0].toUpperCase()+n.slice(1))]:{value:(e,t)=>r.setValue(e,t)}})}function u(e){const t=t=>{const r=e.addDisposer(()=>{t.destroy()});return t.addBeforeDestroy(()=>{e.remove(r)}),t};return{bindSideEffect:t,combine:(e,r,n,i)=>t(s(e,r,n,i)),createVal:(e,r)=>t(new o(e,r))}}},function(e,t,r){"use strict";r.d(t,"d",(function(){return s})),r.d(t,"b",(function(){return a})),r.d(t,"a",(function(){return c})),r.d(t,"c",(function(){return u}));var n,i=r(14);class o extends i.b{constructor(e,t,r,n=i.a.Info){super(e,n),this.privRequestId=t,this.privSessionId=r}get requestId(){return this.privRequestId}get sessionId(){return this.privSessionId}}class s extends o{constructor(e,t,r,n){super("RecognitionTriggeredEvent",e,t),this.privAudioSourceId=r,this.privAudioNodeId=n}get audioSourceId(){return this.privAudioSourceId}get audioNodeId(){return this.privAudioNodeId}}class a extends o{constructor(e,t,r,n){super("ListeningStartedEvent",e,t),this.privAudioSourceId=r,this.privAudioNodeId=n}get audioSourceId(){return this.privAudioSourceId}get audioNodeId(){return this.privAudioNodeId}}class c extends o{constructor(e,t,r){super("ConnectingToServiceEvent",e,r),this.privAuthFetchEventid=t}get authFetchEventid(){return this.privAuthFetchEventid}}class u extends o{constructor(e,t,r,n,i){super("RecognitionStartedEvent",e,i),this.privAudioSourceId=t,this.privAudioNodeId=r,this.privAuthFetchEventId=n}get audioSourceId(){return this.privAudioSourceId}get audioNodeId(){return this.privAudioNodeId}get authFetchEventId(){return this.privAuthFetchEventId}}!function(e){e[e.Success=0]="Success",e[e.AudioSourceError=1]="AudioSourceError",e[e.AudioSourceTimeout=2]="AudioSourceTimeout",e[e.AuthTokenFetchError=3]="AuthTokenFetchError",e[e.AuthTokenFetchTimeout=4]="AuthTokenFetchTimeout",e[e.UnAuthorized=5]="UnAuthorized",e[e.ConnectTimeout=6]="ConnectTimeout",e[e.ConnectError=7]="ConnectError",e[e.ClientRecognitionActivityTimeout=8]="ClientRecognitionActivityTimeout",e[e.UnknownError=9]="UnknownError"}(n||(n={}))},function(e,t,r){"use strict";var n=r(47),i=r(27);t.a=function(e,t,r){var o=(e=e||{}).random||(e.rng||n.a)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,t){r=r||0;for(var s=0;s<16;++s)t[r+s]=o[s];return t}return Object(i.a)(o)}},function(e,t){var r,n,i=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(e){if(r===setTimeout)return setTimeout(e,0);if((r===o||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:o}catch(e){r=o}try{n="function"==typeof clearTimeout?clearTimeout:s}catch(e){n=s}}();var c,u=[],p=!1,h=-1;function d(){p&&c&&(p=!1,c.length?u=c.concat(u):h=-1,u.length&&l())}function l(){if(!p){var e=a(d);p=!0;for(var t=u.length;t;){for(c=u,u=[];++h<t;)c&&c[h].run();h=-1,t=u.length}c=null,p=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===s||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function v(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];u.push(new f(e,t)),1!==u.length||p||a(l)},f.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=v,i.addListener=v,i.once=v,i.off=v,i.removeListener=v,i.removeAllListeners=v,i.emit=v,i.prependListener=v,i.prependOnceListener=v,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t,r){"use strict";e.exports=function(e,t){return function(){for(var r=new Array(arguments.length),n=0;n<r.length;n++)r[n]=arguments[n];return e.apply(t,r)}}},function(e,t,r){"use strict";var n=r(17);function i(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,r){if(!t)return e;var o;if(r)o=r(t);else if(n.isURLSearchParams(t))o=t.toString();else{var s=[];n.forEach(t,(function(e,t){null!=e&&(n.isArray(e)?t+="[]":e=[e],n.forEach(e,(function(e){n.isDate(e)?e=e.toISOString():n.isObject(e)&&(e=JSON.stringify(e)),s.push(i(t)+"="+i(e))})))})),o=s.join("&")}if(o){var a=e.indexOf("#");-1!==a&&(e=e.slice(0,a)),e+=(-1===e.indexOf("?")?"?":"&")+o}return e}},function(e,t,r){"use strict";e.exports=function(e,t,r,n,i){return e.config=t,r&&(e.code=r),e.request=n,e.response=i,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e}},function(e,t,r){"use strict";var n=r(17),i=r(120),o=r(121),s=r(68),a=r(122),c=r(125),u=r(126),p=r(71);e.exports=function(e){return new Promise((function(t,r){var h=e.data,d=e.headers,l=e.responseType;n.isFormData(h)&&delete d["Content-Type"];var f=new XMLHttpRequest;if(e.auth){var v=e.auth.username||"",g=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";d.Authorization="Basic "+btoa(v+":"+g)}var m=a(e.baseURL,e.url);function y(){if(f){var n="getAllResponseHeaders"in f?c(f.getAllResponseHeaders()):null,o={data:l&&"text"!==l&&"json"!==l?f.response:f.responseText,status:f.status,statusText:f.statusText,headers:n,config:e,request:f};i(t,r,o),f=null}}if(f.open(e.method.toUpperCase(),s(m,e.params,e.paramsSerializer),!0),f.timeout=e.timeout,"onloadend"in f?f.onloadend=y:f.onreadystatechange=function(){f&&4===f.readyState&&(0!==f.status||f.responseURL&&0===f.responseURL.indexOf("file:"))&&setTimeout(y)},f.onabort=function(){f&&(r(p("Request aborted",e,"ECONNABORTED",f)),f=null)},f.onerror=function(){r(p("Network Error",e,null,f)),f=null},f.ontimeout=function(){var t="timeout of "+e.timeout+"ms exceeded";e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),r(p(t,e,e.transitional&&e.transitional.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",f)),f=null},n.isStandardBrowserEnv()){var S=(e.withCredentials||u(m))&&e.xsrfCookieName?o.read(e.xsrfCookieName):void 0;S&&(d[e.xsrfHeaderName]=S)}"setRequestHeader"in f&&n.forEach(d,(function(e,t){void 0===h&&"content-type"===t.toLowerCase()?delete d[t]:f.setRequestHeader(t,e)})),n.isUndefined(e.withCredentials)||(f.withCredentials=!!e.withCredentials),l&&"json"!==l&&(f.responseType=e.responseType),"function"==typeof e.onDownloadProgress&&f.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&f.upload&&f.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then((function(e){f&&(f.abort(),r(e),f=null)})),h||(h=null),f.send(h)}))}},function(e,t,r){"use strict";var n=r(69);e.exports=function(e,t,r,i,o){var s=new Error(e);return n(s,t,r,i,o)}},function(e,t,r){"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},function(e,t,r){"use strict";var n=r(17);e.exports=function(e,t){t=t||{};var r={},i=["url","method","data"],o=["headers","auth","proxy","params"],s=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],a=["validateStatus"];function c(e,t){return n.isPlainObject(e)&&n.isPlainObject(t)?n.merge(e,t):n.isPlainObject(t)?n.merge({},t):n.isArray(t)?t.slice():t}function u(i){n.isUndefined(t[i])?n.isUndefined(e[i])||(r[i]=c(void 0,e[i])):r[i]=c(e[i],t[i])}n.forEach(i,(function(e){n.isUndefined(t[e])||(r[e]=c(void 0,t[e]))})),n.forEach(o,u),n.forEach(s,(function(i){n.isUndefined(t[i])?n.isUndefined(e[i])||(r[i]=c(void 0,e[i])):r[i]=c(void 0,t[i])})),n.forEach(a,(function(n){n in t?r[n]=c(e[n],t[n]):n in e&&(r[n]=c(void 0,e[n]))}));var p=i.concat(o).concat(s).concat(a),h=Object.keys(e).concat(Object.keys(t)).filter((function(e){return-1===p.indexOf(e)}));return n.forEach(h,u),r}},function(e,t,r){"use strict";function n(e){this.message=e}n.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},n.prototype.__CANCEL__=!0,e.exports=n},function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));var n=r(16),i=r(9);class o extends i.c{constructor(e,t,r,n,i,o,s,a,c){super(r,o,t,e),this.formatTag=e,this.avgBytesPerSec=n,this.blockAlign=i,this.priAudioFormatString=s,this.priRequestAudioFormatString=a,this.priHasHeader=c}static fromSpeechSynthesisOutputFormat(e){return void 0===e?o.getDefaultOutputFormat():o.fromSpeechSynthesisOutputFormatString(o.SpeechSynthesisOutputFormatToString[e])}static fromSpeechSynthesisOutputFormatString(e){switch(e){case"raw-8khz-8bit-mono-mulaw":return new o(i.a.MuLaw,1,8e3,8e3,1,8,e,e,!1);case"riff-16khz-16kbps-mono-siren":return new o(i.a.Siren,1,16e3,2e3,40,0,e,"audio-16khz-16kbps-mono-siren",!0);case"audio-16khz-16kbps-mono-siren":return new o(i.a.Siren,1,16e3,2e3,40,0,e,e,!1);case"audio-16khz-32kbitrate-mono-mp3":return new o(i.a.MP3,1,16e3,4096,2,16,e,e,!1);case"audio-16khz-128kbitrate-mono-mp3":return new o(i.a.MP3,1,16e3,16384,2,16,e,e,!1);case"audio-16khz-64kbitrate-mono-mp3":return new o(i.a.MP3,1,16e3,8192,2,16,e,e,!1);case"audio-24khz-48kbitrate-mono-mp3":return new o(i.a.MP3,1,24e3,6144,2,16,e,e,!1);case"audio-24khz-96kbitrate-mono-mp3":return new o(i.a.MP3,1,24e3,12288,2,16,e,e,!1);case"audio-24khz-160kbitrate-mono-mp3":return new o(i.a.MP3,1,24e3,20480,2,16,e,e,!1);case"raw-16khz-16bit-mono-truesilk":return new o(i.a.SILKSkype,1,16e3,32e3,2,16,e,e,!1);case"riff-8khz-16bit-mono-pcm":return new o(i.a.PCM,1,8e3,16e3,2,16,e,"raw-8khz-16bit-mono-pcm",!0);case"riff-24khz-16bit-mono-pcm":return new o(i.a.PCM,1,24e3,48e3,2,16,e,"raw-24khz-16bit-mono-pcm",!0);case"riff-8khz-8bit-mono-mulaw":return new o(i.a.MuLaw,1,8e3,8e3,1,8,e,"raw-8khz-8bit-mono-mulaw",!0);case"raw-16khz-16bit-mono-pcm":return new o(i.a.PCM,1,16e3,32e3,2,16,e,"raw-16khz-16bit-mono-pcm",!1);case"raw-24khz-16bit-mono-pcm":return new o(i.a.PCM,1,24e3,48e3,2,16,e,"raw-24khz-16bit-mono-pcm",!1);case"raw-8khz-16bit-mono-pcm":return new o(i.a.PCM,1,8e3,16e3,2,16,e,"raw-8khz-16bit-mono-pcm",!1);case"ogg-16khz-16bit-mono-opus":return new o(i.a.OGG_OPUS,1,16e3,8192,2,16,e,e,!1);case"ogg-24khz-16bit-mono-opus":return new o(i.a.OGG_OPUS,1,24e3,8192,2,16,e,e,!1);case"raw-48khz-16bit-mono-pcm":return new o(i.a.PCM,1,48e3,96e3,2,16,e,"raw-48khz-16bit-mono-pcm",!1);case"riff-48khz-16bit-mono-pcm":return new o(i.a.PCM,1,48e3,96e3,2,16,e,"raw-48khz-16bit-mono-pcm",!0);case"audio-48khz-96kbitrate-mono-mp3":return new o(i.a.MP3,1,48e3,12288,2,16,e,e,!1);case"audio-48khz-192kbitrate-mono-mp3":return new o(i.a.MP3,1,48e3,24576,2,16,e,e,!1);case"ogg-48khz-16bit-mono-opus":return new o(i.a.OGG_OPUS,1,48e3,12e3,2,16,e,e,!1);case"webm-16khz-16bit-mono-opus":return new o(i.a.WEBM_OPUS,1,16e3,4e3,2,16,e,e,!1);case"webm-24khz-16bit-mono-opus":return new o(i.a.WEBM_OPUS,1,24e3,6e3,2,16,e,e,!1);case"webm-24khz-16bit-24kbps-mono-opus":return new o(i.a.WEBM_OPUS,1,24e3,3e3,2,16,e,e,!1);case"audio-16khz-16bit-32kbps-mono-opus":return new o(i.a.OPUS,1,16e3,4e3,2,16,e,e,!1);case"audio-24khz-16bit-48kbps-mono-opus":return new o(i.a.OPUS,1,24e3,6e3,2,16,e,e,!1);case"audio-24khz-16bit-24kbps-mono-opus":return new o(i.a.OPUS,1,24e3,3e3,2,16,e,e,!1);case"audio-24khz-16bit-mono-flac":return new o(i.a.FLAC,1,24e3,24e3,2,16,e,e,!1);case"audio-48khz-16bit-mono-flac":return new o(i.a.FLAC,1,48e3,3e4,2,16,e,e,!1);case"raw-24khz-16bit-mono-truesilk":return new o(i.a.SILKSkype,1,24e3,48e3,2,16,e,e,!1);case"raw-8khz-8bit-mono-alaw":return new o(i.a.ALaw,1,8e3,8e3,1,8,e,e,!1);case"riff-8khz-8bit-mono-alaw":return new o(i.a.ALaw,1,8e3,8e3,1,8,e,"raw-8khz-8bit-mono-alaw",!0);case"raw-22050hz-16bit-mono-pcm":return new o(i.a.PCM,1,22050,44100,2,16,e,e,!1);case"riff-22050hz-16bit-mono-pcm":return new o(i.a.PCM,1,22050,44100,2,16,e,"raw-22050hz-16bit-mono-pcm",!0);case"raw-44100hz-16bit-mono-pcm":return new o(i.a.PCM,1,44100,88200,2,16,e,e,!1);case"riff-44100hz-16bit-mono-pcm":return new o(i.a.PCM,1,44100,88200,2,16,e,"raw-44100hz-16bit-mono-pcm",!0);case"riff-16khz-16bit-mono-pcm":default:return new o(i.a.PCM,1,16e3,32e3,2,16,"riff-16khz-16bit-mono-pcm","raw-16khz-16bit-mono-pcm",!0)}}static getDefaultOutputFormat(){return o.fromSpeechSynthesisOutputFormatString("undefined"!=typeof window?"audio-24khz-48kbitrate-mono-mp3":"riff-16khz-16bit-mono-pcm")}get hasHeader(){return this.priHasHeader}get header(){if(this.hasHeader)return this.privHeader}updateHeader(e){if(this.priHasHeader){const t=new DataView(this.privHeader);t.setUint32(4,e+this.privHeader.byteLength-8,!0),t.setUint32(40,e,!0)}}get requestAudioFormatString(){return this.priRequestAudioFormatString}}o.SpeechSynthesisOutputFormatToString={[n.a.Raw8Khz8BitMonoMULaw]:"raw-8khz-8bit-mono-mulaw",[n.a.Riff16Khz16KbpsMonoSiren]:"riff-16khz-16kbps-mono-siren",[n.a.Audio16Khz16KbpsMonoSiren]:"audio-16khz-16kbps-mono-siren",[n.a.Audio16Khz32KBitRateMonoMp3]:"audio-16khz-32kbitrate-mono-mp3",[n.a.Audio16Khz128KBitRateMonoMp3]:"audio-16khz-128kbitrate-mono-mp3",[n.a.Audio16Khz64KBitRateMonoMp3]:"audio-16khz-64kbitrate-mono-mp3",[n.a.Audio24Khz48KBitRateMonoMp3]:"audio-24khz-48kbitrate-mono-mp3",[n.a.Audio24Khz96KBitRateMonoMp3]:"audio-24khz-96kbitrate-mono-mp3",[n.a.Audio24Khz160KBitRateMonoMp3]:"audio-24khz-160kbitrate-mono-mp3",[n.a.Raw16Khz16BitMonoTrueSilk]:"raw-16khz-16bit-mono-truesilk",[n.a.Riff16Khz16BitMonoPcm]:"riff-16khz-16bit-mono-pcm",[n.a.Riff8Khz16BitMonoPcm]:"riff-8khz-16bit-mono-pcm",[n.a.Riff24Khz16BitMonoPcm]:"riff-24khz-16bit-mono-pcm",[n.a.Riff8Khz8BitMonoMULaw]:"riff-8khz-8bit-mono-mulaw",[n.a.Raw16Khz16BitMonoPcm]:"raw-16khz-16bit-mono-pcm",[n.a.Raw24Khz16BitMonoPcm]:"raw-24khz-16bit-mono-pcm",[n.a.Raw8Khz16BitMonoPcm]:"raw-8khz-16bit-mono-pcm",[n.a.Ogg16Khz16BitMonoOpus]:"ogg-16khz-16bit-mono-opus",[n.a.Ogg24Khz16BitMonoOpus]:"ogg-24khz-16bit-mono-opus",[n.a.Raw48Khz16BitMonoPcm]:"raw-48khz-16bit-mono-pcm",[n.a.Riff48Khz16BitMonoPcm]:"riff-48khz-16bit-mono-pcm",[n.a.Audio48Khz96KBitRateMonoMp3]:"audio-48khz-96kbitrate-mono-mp3",[n.a.Audio48Khz192KBitRateMonoMp3]:"audio-48khz-192kbitrate-mono-mp3",[n.a.Ogg48Khz16BitMonoOpus]:"ogg-48khz-16bit-mono-opus",[n.a.Webm16Khz16BitMonoOpus]:"webm-16khz-16bit-mono-opus",[n.a.Webm24Khz16BitMonoOpus]:"webm-24khz-16bit-mono-opus",[n.a.Webm24Khz16Bit24KbpsMonoOpus]:"webm-24khz-16bit-24kbps-mono-opus",[n.a.Raw24Khz16BitMonoTrueSilk]:"raw-24khz-16bit-mono-truesilk",[n.a.Raw8Khz8BitMonoALaw]:"raw-8khz-8bit-mono-alaw",[n.a.Riff8Khz8BitMonoALaw]:"riff-8khz-8bit-mono-alaw",[n.a.Audio16Khz16Bit32KbpsMonoOpus]:"audio-16khz-16bit-32kbps-mono-opus",[n.a.Audio24Khz16Bit48KbpsMonoOpus]:"audio-24khz-16bit-48kbps-mono-opus",[n.a.Audio24Khz16Bit24KbpsMonoOpus]:"audio-24khz-16bit-24kbps-mono-opus",[n.a.Raw22050Hz16BitMonoPcm]:"raw-22050hz-16bit-mono-pcm",[n.a.Riff22050Hz16BitMonoPcm]:"riff-22050hz-16bit-mono-pcm",[n.a.Raw44100Hz16BitMonoPcm]:"raw-44100hz-16bit-mono-pcm",[n.a.Riff44100Hz16BitMonoPcm]:"riff-44100hz-16bit-mono-pcm"}},function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var n=r(96);class i extends n.a{constructor(e,t){super(t),this.privOffset=e}get offset(){return this.privOffset}}},function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));var n=r(15),i=r(33);class o{constructor(e){this.privEventListeners={},this.privIsDisposed=!1,this.privConsoleListener=void 0,this.privMetadata=e}onEvent(e){if(this.isDisposed())throw new n.c("EventSource");if(this.metadata)for(const t in this.metadata)t&&e.metadata&&(e.metadata[t]||(e.metadata[t]=this.metadata[t]));for(const t in this.privEventListeners)t&&this.privEventListeners[t]&&this.privEventListeners[t](e)}attach(e){const t=Object(i.b)();return this.privEventListeners[t]=e,{detach:()=>(delete this.privEventListeners[t],Promise.resolve())}}attachListener(e){return this.attach(t=>e.onEvent(t))}attachConsoleListener(e){return this.privConsoleListener&&this.privConsoleListener.detach(),this.privConsoleListener=this.attach(t=>e.onEvent(t)),this.privConsoleListener}isDisposed(){return this.privIsDisposed}dispose(){this.privEventListeners=null,this.privIsDisposed=!0}get metadata(){return this.privMetadata}}},,function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setupVolcengine=function(){const e=new n.StorageVal("local","uid"),t=window,o="cyxyCollectEvent";if(t.TeaAnalyticsObject=o,!t[o]){function s(){s.q.push(arguments)}s.q=s.q||[],t[o]=s}t[o].l=+new Date,r.e(3).then(r.t.bind(null,185,7)),window.cyxyCollectEvent("init",{debug:!1,log:!1,app_id:10000007,channel_domain:"https://gather.colorfulclouds.net",autotrack:!1,enable_stay_duration:!1,disable_auto_pv:!0,disable_session:!0}),window.cyxyCollectEvent("config",{app_version:browser.runtime.getManifest().version,evtParams:{userType:"游客"}}),e.subscribe(e=>{e&&i("config",{user_unique_id:e})}),window.cyxyCollectEvent("start")},t.cyxyCollectEvent=t.setupVolcengineBackgroundListener=void 0;var n=r(59);t.setupVolcengineBackgroundListener=()=>{browser.runtime.onMessage.addListener(e=>{if(e&&"VolcengineCollectEvent"===e.type)return window.cyxyCollectEvent.apply(window,e.args),Promise.resolve()})};const i=(...e)=>window.cyxyCollectEvent?window.cyxyCollectEvent.apply(window,e):browser.runtime.sendMessage({type:"VolcengineCollectEvent",args:e});t.cyxyCollectEvent=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.firebasePageView=function(e){(0,n.reportPageview)(e),(0,i.cyxyCollectEvent)("predefinePageView",{url:e,url_path:e,time:Date.now()})},t.firebaseEvent=async function(...e){e.forEach(e=>{(0,i.cyxyCollectEvent)(e.name,e.params);const t={category:"firebase",action:e.name};if(e.params){const r=Object.values(e.params)[0];null!=r&&(t.label=r)}(0,n.reportEvent)(t)})};var n=r(89),i=r(79)},function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));class n{constructor(e,t){this.privHeaderName=e,this.privToken=t}get headerName(){return this.privHeaderName}get token(){return this.privToken}}},function(e,t,r){"use strict";r.d(t,"b",(function(){return i})),r.d(t,"a",(function(){return o}));var n=r(76);class i extends n.a{constructor(e,t,r){super(t,r),this.privResult=e}get result(){return this.privResult}}class o extends i{}},function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var n=r(55);class i extends n.a{constructor(e,t,r,n,i,o,s,a,c){super(t,r,n,i,o,void 0,void 0,void 0,s,a,c),this.privTranslations=e}get translations(){return this.privTranslations}}},function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var n=r(76);class i extends n.a{constructor(e,t,r){super(t,r),this.privResult=e}get result(){return this.privResult}}},function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var n=r(55);class i extends n.a{constructor(e,t,r,n,i,o,s,a,c,u,p){super(t,r,n,i,o,s,a,void 0,c,u,p),this.privIntentId=e}get intentId(){return this.privIntentId}}},function(e,t,r){"use strict";r.d(t,"a",(function(){return s}));var n=r(87),i=r(23),o=r(239);class s{toConnectionMessage(e){const t=new n.a;try{if(e.messageType===i.b.Text){const r=e.textContent;let n={},o=null;if(r){const e=r.split("\r\n\r\n");e&&e.length>0&&(n=this.parseHeaders(e[0]),e.length>1&&(o=e[1]))}t.resolve(new i.a(e.messageType,o,n,e.id))}else if(e.messageType===i.b.Binary){const r=e.binaryContent;let n={},o=null;if(!r||r.byteLength<2)throw new Error("Invalid binary message format. Header length missing.");const s=new DataView(r),a=s.getInt16(0);if(r.byteLength<a+2)throw new Error("Invalid binary message format. Header content missing.");let c="";for(let e=0;e<a;e++)c+=String.fromCharCode(s.getInt8(e+2));n=this.parseHeaders(c),r.byteLength>a+2&&(o=r.slice(2+a)),t.resolve(new i.a(e.messageType,o,n,e.id))}}catch(e){t.reject("Error formatting the message. Error: "+e)}return t.promise}fromConnectionMessage(e){const t=new n.a;try{if(e.messageType===i.b.Text){const r=`${this.makeHeaders(e)}\r\n${e.textBody?e.textBody:""}`;t.resolve(new o.a(i.b.Text,r,e.id))}else if(e.messageType===i.b.Binary){const r=this.makeHeaders(e),n=e.binaryBody,s=this.stringToArrayBuffer(r),a=new Int8Array(s),c=a.byteLength,u=new Int8Array(2+c+(n?n.byteLength:0));if(u[0]=c>>8&255,u[1]=255&c,u.set(a,2),n){const e=new Int8Array(n);u.set(e,2+c)}const p=u.buffer;t.resolve(new o.a(i.b.Binary,p,e.id))}}catch(e){t.reject("Error formatting the message. "+e)}return t.promise}makeHeaders(e){let t="";if(e.headers)for(const r in e.headers)r&&(t+=`${r}: ${e.headers[r]}\r\n`);return t}parseHeaders(e){const t={};if(e){const r=e.match(/[^\r\n]+/g);if(t)for(const e of r)if(e){const r=e.indexOf(":"),n=r>0?e.substr(0,r).trim().toLowerCase():e,i=r>0&&e.length>r+1?e.substr(r+1).trim():"";t[n]=i}}return t}stringToArrayBuffer(e){const t=new ArrayBuffer(e.length),r=new DataView(t);for(let t=0;t<e.length;t++)r.setUint8(t,e.charCodeAt(t));return t}}},function(e,t,r){"use strict";var n;r.d(t,"a",(function(){return i})),r.d(t,"b",(function(){return o})),function(e){e[e.None=0]="None",e[e.Resolved=1]="Resolved",e[e.Rejected=2]="Rejected"}(n||(n={}));class i{constructor(){this.resolve=e=>(this.privResolve(e),this),this.reject=e=>(this.privReject(e),this),this.privPromise=new Promise((e,t)=>{this.privResolve=e,this.privReject=t})}get promise(){return this.privPromise}}function o(e,t,r){e.then(e=>{try{t&&t(e)}catch(e){if(r)try{if(e instanceof Error){const t=e;r(t.name+": "+t.message)}else r(e)}catch(e){}}},e=>{if(r)try{if(e instanceof Error){const t=e;r(t.name+": "+t.message)}else r(e)}catch(e){}})}},function(e,t){},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setupAnalytics=function(){window.isCyxyAnalyticsStation=!0;const e=e=>{if(e){if("CYXY_ANALYTICS_REPORT"===e.type)return d(...e.args||[]);if("CYXY_ANALYTICS_PAGEVIEW"===e.type)return h(...e.args||[])}};return browser.runtime.onMessage.addListener(e),()=>browser.runtime.onMessage.removeListener(e)},t.reportPageview=function(e,t){return a.isExtEnv&&!window.isCyxyAnalyticsStation?browser.runtime.sendMessage({type:"CYXY_ANALYTICS_PAGEVIEW",args:[e,t]}):h(e,t)},t.reportEvent=function(e,t){return a.isExtEnv&&!window.isCyxyAnalyticsStation?browser.runtime.sendMessage({type:"CYXY_ANALYTICS_REPORT",args:[e,t]}):d(e,t)};var n,i=r(90),o=(n=r(113))&&n.__esModule?n:{default:n},s=r(59),a=r(26);const c=navigator.userAgent.includes("Firefox"),u=/apple/i.test(navigator.vendor),p=new s.StorageVal("local","uid");async function h(e,t){const r={t:"pageview",dp:e,de:"UTF-8",dl:document.location.href,sd:screen.colorDepth+"-bit",sr:screen.width+"x"+screen.height,ul:"zh-cn"};t&&(r.tid=t);try{await l(r)}catch(e){}}async function d(e,t){const r={t:"event"};null!=e.category&&(r.ec=e.category),null!=e.action&&(r.ea=e.action),null!=e.label&&(r.el=e.label),null!=e.value&&(r.ev=e.value),t&&(r.tid=t);try{await l(r)}catch(e){}}async function l(e){if(c||u){const{isEnableGa:e=!1}=await browser.storage.sync.get({isEnableGa:!0});if(!1===e)return}let t="cyxy-anonymous";return p.value||(await p.ready,p.value&&(t=p.value)),(0,o.default)({url:"https://www.google-analytics.com/collect",method:"post",headers:{"content-type":"text/plain;charset=UTF-8"},data:new URLSearchParams({v:"1",tid:"UA-83184075-2",cid:t,z:(0,i.v4)(),...e})})}},function(e,t,r){"use strict";r.r(t),r.d(t,"v1",(function(){return u})),r.d(t,"v3",(function(){return w})),r.d(t,"v4",(function(){return b.a})),r.d(t,"v5",(function(){return P})),r.d(t,"NIL",(function(){return I})),r.d(t,"version",(function(){return E})),r.d(t,"validate",(function(){return p.a})),r.d(t,"stringify",(function(){return s.a})),r.d(t,"parse",(function(){return h}));var n,i,o=r(47),s=r(27),a=0,c=0,u=function(e,t,r){var u=t&&r||0,p=t||new Array(16),h=(e=e||{}).node||n,d=void 0!==e.clockseq?e.clockseq:i;if(null==h||null==d){var l=e.random||(e.rng||o.a)();null==h&&(h=n=[1|l[0],l[1],l[2],l[3],l[4],l[5]]),null==d&&(d=i=16383&(l[6]<<8|l[7]))}var f=void 0!==e.msecs?e.msecs:Date.now(),v=void 0!==e.nsecs?e.nsecs:c+1,g=f-a+(v-c)/1e4;if(g<0&&void 0===e.clockseq&&(d=d+1&16383),(g<0||f>a)&&void 0===e.nsecs&&(v=0),v>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");a=f,c=v,i=d;var m=(1e4*(268435455&(f+=122192928e5))+v)%4294967296;p[u++]=m>>>24&255,p[u++]=m>>>16&255,p[u++]=m>>>8&255,p[u++]=255&m;var y=f/4294967296*1e4&268435455;p[u++]=y>>>8&255,p[u++]=255&y,p[u++]=y>>>24&15|16,p[u++]=y>>>16&255,p[u++]=d>>>8|128,p[u++]=255&d;for(var S=0;S<6;++S)p[u+S]=h[S];return t||Object(s.a)(p)},p=r(28),h=function(e){if(!Object(p.a)(e))throw TypeError("Invalid UUID");var t,r=new Uint8Array(16);return r[0]=(t=parseInt(e.slice(0,8),16))>>>24,r[1]=t>>>16&255,r[2]=t>>>8&255,r[3]=255&t,r[4]=(t=parseInt(e.slice(9,13),16))>>>8,r[5]=255&t,r[6]=(t=parseInt(e.slice(14,18),16))>>>8,r[7]=255&t,r[8]=(t=parseInt(e.slice(19,23),16))>>>8,r[9]=255&t,r[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,r[11]=t/4294967296&255,r[12]=t>>>24&255,r[13]=t>>>16&255,r[14]=t>>>8&255,r[15]=255&t,r},d=function(e,t,r){function n(e,n,i,o){if("string"==typeof e&&(e=function(e){e=unescape(encodeURIComponent(e));for(var t=[],r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t}(e)),"string"==typeof n&&(n=h(n)),16!==n.length)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var a=new Uint8Array(16+e.length);if(a.set(n),a.set(e,n.length),(a=r(a))[6]=15&a[6]|t,a[8]=63&a[8]|128,i){o=o||0;for(var c=0;c<16;++c)i[o+c]=a[c];return i}return Object(s.a)(a)}try{n.name=e}catch(e){}return n.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",n.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",n};function l(e){return 14+(e+64>>>9<<4)+1}function f(e,t){var r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}function v(e,t,r,n,i,o){return f((s=f(f(t,e),f(n,o)))<<(a=i)|s>>>32-a,r);var s,a}function g(e,t,r,n,i,o,s){return v(t&r|~t&n,e,t,i,o,s)}function m(e,t,r,n,i,o,s){return v(t&n|r&~n,e,t,i,o,s)}function y(e,t,r,n,i,o,s){return v(t^r^n,e,t,i,o,s)}function S(e,t,r,n,i,o,s){return v(r^(t|~n),e,t,i,o,s)}var w=d("v3",48,(function(e){if("string"==typeof e){var t=unescape(encodeURIComponent(e));e=new Uint8Array(t.length);for(var r=0;r<t.length;++r)e[r]=t.charCodeAt(r)}return function(e){for(var t=[],r=32*e.length,n=0;n<r;n+=8){var i=e[n>>5]>>>n%32&255,o=parseInt("0123456789abcdef".charAt(i>>>4&15)+"0123456789abcdef".charAt(15&i),16);t.push(o)}return t}(function(e,t){e[t>>5]|=128<<t%32,e[l(t)-1]=t;for(var r=1732584193,n=-271733879,i=-1732584194,o=271733878,s=0;s<e.length;s+=16){var a=r,c=n,u=i,p=o;r=g(r,n,i,o,e[s],7,-680876936),o=g(o,r,n,i,e[s+1],12,-389564586),i=g(i,o,r,n,e[s+2],17,606105819),n=g(n,i,o,r,e[s+3],22,-1044525330),r=g(r,n,i,o,e[s+4],7,-176418897),o=g(o,r,n,i,e[s+5],12,1200080426),i=g(i,o,r,n,e[s+6],17,-1473231341),n=g(n,i,o,r,e[s+7],22,-45705983),r=g(r,n,i,o,e[s+8],7,1770035416),o=g(o,r,n,i,e[s+9],12,-1958414417),i=g(i,o,r,n,e[s+10],17,-42063),n=g(n,i,o,r,e[s+11],22,-1990404162),r=g(r,n,i,o,e[s+12],7,1804603682),o=g(o,r,n,i,e[s+13],12,-40341101),i=g(i,o,r,n,e[s+14],17,-1502002290),r=m(r,n=g(n,i,o,r,e[s+15],22,1236535329),i,o,e[s+1],5,-165796510),o=m(o,r,n,i,e[s+6],9,-1069501632),i=m(i,o,r,n,e[s+11],14,643717713),n=m(n,i,o,r,e[s],20,-373897302),r=m(r,n,i,o,e[s+5],5,-701558691),o=m(o,r,n,i,e[s+10],9,38016083),i=m(i,o,r,n,e[s+15],14,-660478335),n=m(n,i,o,r,e[s+4],20,-405537848),r=m(r,n,i,o,e[s+9],5,568446438),o=m(o,r,n,i,e[s+14],9,-1019803690),i=m(i,o,r,n,e[s+3],14,-187363961),n=m(n,i,o,r,e[s+8],20,1163531501),r=m(r,n,i,o,e[s+13],5,-1444681467),o=m(o,r,n,i,e[s+2],9,-51403784),i=m(i,o,r,n,e[s+7],14,1735328473),r=y(r,n=m(n,i,o,r,e[s+12],20,-1926607734),i,o,e[s+5],4,-378558),o=y(o,r,n,i,e[s+8],11,-2022574463),i=y(i,o,r,n,e[s+11],16,1839030562),n=y(n,i,o,r,e[s+14],23,-35309556),r=y(r,n,i,o,e[s+1],4,-1530992060),o=y(o,r,n,i,e[s+4],11,1272893353),i=y(i,o,r,n,e[s+7],16,-155497632),n=y(n,i,o,r,e[s+10],23,-1094730640),r=y(r,n,i,o,e[s+13],4,681279174),o=y(o,r,n,i,e[s],11,-358537222),i=y(i,o,r,n,e[s+3],16,-722521979),n=y(n,i,o,r,e[s+6],23,76029189),r=y(r,n,i,o,e[s+9],4,-640364487),o=y(o,r,n,i,e[s+12],11,-421815835),i=y(i,o,r,n,e[s+15],16,530742520),r=S(r,n=y(n,i,o,r,e[s+2],23,-995338651),i,o,e[s],6,-198630844),o=S(o,r,n,i,e[s+7],10,1126891415),i=S(i,o,r,n,e[s+14],15,-1416354905),n=S(n,i,o,r,e[s+5],21,-57434055),r=S(r,n,i,o,e[s+12],6,1700485571),o=S(o,r,n,i,e[s+3],10,-1894986606),i=S(i,o,r,n,e[s+10],15,-1051523),n=S(n,i,o,r,e[s+1],21,-2054922799),r=S(r,n,i,o,e[s+8],6,1873313359),o=S(o,r,n,i,e[s+15],10,-30611744),i=S(i,o,r,n,e[s+6],15,-1560198380),n=S(n,i,o,r,e[s+13],21,1309151649),r=S(r,n,i,o,e[s+4],6,-145523070),o=S(o,r,n,i,e[s+11],10,-1120210379),i=S(i,o,r,n,e[s+2],15,718787259),n=S(n,i,o,r,e[s+9],21,-343485551),r=f(r,a),n=f(n,c),i=f(i,u),o=f(o,p)}return[r,n,i,o]}(function(e){if(0===e.length)return[];for(var t=8*e.length,r=new Uint32Array(l(t)),n=0;n<t;n+=8)r[n>>5]|=(255&e[n/8])<<n%32;return r}(e),8*e.length))})),b=r(65);function C(e,t,r,n){switch(e){case 0:return t&r^~t&n;case 1:return t^r^n;case 2:return t&r^t&n^r&n;case 3:return t^r^n}}function R(e,t){return e<<t|e>>>32-t}var P=d("v5",80,(function(e){var t=[1518500249,1859775393,2400959708,3395469782],r=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof e){var n=unescape(encodeURIComponent(e));e=[];for(var i=0;i<n.length;++i)e.push(n.charCodeAt(i))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);for(var o=e.length/4+2,s=Math.ceil(o/16),a=new Array(s),c=0;c<s;++c){for(var u=new Uint32Array(16),p=0;p<16;++p)u[p]=e[64*c+4*p]<<24|e[64*c+4*p+1]<<16|e[64*c+4*p+2]<<8|e[64*c+4*p+3];a[c]=u}a[s-1][14]=8*(e.length-1)/Math.pow(2,32),a[s-1][14]=Math.floor(a[s-1][14]),a[s-1][15]=8*(e.length-1)&4294967295;for(var h=0;h<s;++h){for(var d=new Uint32Array(80),l=0;l<16;++l)d[l]=a[h][l];for(var f=16;f<80;++f)d[f]=R(d[f-3]^d[f-8]^d[f-14]^d[f-16],1);for(var v=r[0],g=r[1],m=r[2],y=r[3],S=r[4],w=0;w<80;++w){var b=Math.floor(w/20),P=R(v,5)+C(b,g,m,y)+S+t[b]+d[w]>>>0;S=y,y=m,m=R(g,30)>>>0,g=v,v=P}r[0]=r[0]+v>>>0,r[1]=r[1]+g>>>0,r[2]=r[2]+m>>>0,r[3]=r[3]+y>>>0,r[4]=r[4]+S>>>0}return[r[0]>>24&255,r[0]>>16&255,r[0]>>8&255,255&r[0],r[1]>>24&255,r[1]>>16&255,r[1]>>8&255,255&r[1],r[2]>>24&255,r[2]>>16&255,r[2]>>8&255,255&r[2],r[3]>>24&255,r[3]>>16&255,r[3]>>8&255,255&r[3],r[4]>>24&255,r[4]>>16&255,r[4]>>8&255,255&r[4]]})),I="00000000-0000-0000-0000-000000000000",E=function(e){if(!Object(p.a)(e))throw TypeError("Invalid UUID");return parseInt(e.substr(14,1),16)}},function(e,t,r){"use strict";(function(e){r.d(t,"a",(function(){return h})),r.d(t,"d",(function(){return d})),r.d(t,"b",(function(){return f})),r.d(t,"c",(function(){return v}));var n=r(54),i=r(77),o=r(269),s=r(56),a=r(156),c=r(33),u=r(9),p=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};class h{constructor(){}static createPushStream(e){return d.create(e)}static createPullStream(e,t){return f.create(e,t)}}class d extends h{static create(e){return new l(e)}}class l extends d{constructor(e){super(),this.privFormat=void 0===e?u.c.getDefaultInputFormat():e,this.privEvents=new i.a,this.privId=Object(c.b)(),this.privStream=new o.a(this.privFormat.avgBytesPerSec/10)}get format(){return Promise.resolve(this.privFormat)}write(e){this.privStream.writeStreamChunk({buffer:e,isEnd:!1,timeReceived:Date.now()})}close(){this.privStream.close()}id(){return this.privId}get blob(){return this.attach("id").then(t=>{const r=[];let n=e.from("");const i=()=>t.read().then(t=>!t||t.isEnd?"undefined"!=typeof XMLHttpRequest&&"undefined"!=typeof Blob?Promise.resolve(new Blob(r)):Promise.resolve(e.from(n)):("undefined"!=typeof Blob?r.push(t.buffer):n=e.concat([n,this.toBuffer(t.buffer)]),i()));return i()})}turnOn(){this.onEvent(new s.b(this.privId)),this.onEvent(new s.d(this.privId))}attach(e){return p(this,void 0,void 0,(function*(){this.onEvent(new s.f(this.privId,e)),yield this.turnOn();const t=this.privStream;return this.onEvent(new s.e(this.privId,e)),{detach:()=>p(this,void 0,void 0,(function*(){return this.onEvent(new s.g(this.privId,e)),this.turnOff()})),id:()=>e,read:()=>t.read()}}))}detach(e){this.onEvent(new s.g(this.privId,e))}turnOff(){}get events(){return this.privEvents}get deviceInfo(){return Promise.resolve({bitspersample:this.privFormat.bitsPerSample,channelcount:this.privFormat.channels,connectivity:n.f.Unknown,manufacturer:"Speech SDK",model:"PushStream",samplerate:this.privFormat.samplesPerSec,type:n.g.Stream})}onEvent(e){this.privEvents.onEvent(e),a.a.instance.onEvent(e)}toBuffer(t){const r=e.alloc(t.byteLength),n=new Uint8Array(t);for(let e=0;e<r.length;++e)r[e]=n[e];return r}}class f extends h{constructor(){super()}static create(e,t){return new v(e,t)}}class v extends f{constructor(e,t){super(),this.privFormat=void 0===t?u.b.getDefaultInputFormat():t,this.privEvents=new i.a,this.privId=Object(c.b)(),this.privCallback=e,this.privIsClosed=!1,this.privBufferSize=this.privFormat.avgBytesPerSec/10}get format(){return Promise.resolve(this.privFormat)}close(){this.privIsClosed=!0,this.privCallback.close()}id(){return this.privId}get blob(){return Promise.reject("Not implemented")}turnOn(){this.onEvent(new s.b(this.privId)),this.onEvent(new s.d(this.privId))}attach(e){return p(this,void 0,void 0,(function*(){return this.onEvent(new s.f(this.privId,e)),yield this.turnOn(),this.onEvent(new s.e(this.privId,e)),{detach:()=>(this.privCallback.close(),this.onEvent(new s.g(this.privId,e)),this.turnOff()),id:()=>e,read:()=>{let e,t=0;for(;t<this.privBufferSize;){const r=new ArrayBuffer(this.privBufferSize-t),n=this.privCallback.read(r);if(void 0===e?e=r:new Int8Array(e).set(new Int8Array(r),t),0===n)break;t+=n}return Promise.resolve({buffer:e.slice(0,t),isEnd:this.privIsClosed||0===t,timeReceived:Date.now()})}}}))}detach(e){this.onEvent(new s.g(this.privId,e))}turnOff(){}get events(){return this.privEvents}get deviceInfo(){return Promise.resolve({bitspersample:this.privFormat.bitsPerSample,channelcount:this.privFormat.channels,connectivity:n.f.Unknown,manufacturer:"Speech SDK",model:"PullStream",samplerate:this.privFormat.samplesPerSec,type:n.g.Stream})}onEvent(e){this.privEvents.onEvent(e),a.a.instance.onEvent(e)}}}).call(this,r(207).Buffer)},function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var n=r(76);class i extends n.a{constructor(e,t,r,n,i){super(n,i),this.privReason=e,this.privErrorDetails=t,this.privErrorCode=r}get reason(){return this.privReason}get errorCode(){return this.privErrorCode}get errorDetails(){return this.privErrorDetails}}},,function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));class n{constructor(e){this.privResult=e}get result(){return this.privResult}}},function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var n=r(164);class i extends n.a{constructor(e,t,r,n,i,o){super(e,t,n,i),this.privAudioData=r,this.privAudioDuration=o}get audioData(){return this.privAudioData}get audioDuration(){return this.privAudioDuration}}},function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));class n{constructor(e){this.privSessionId=e}get sessionId(){return this.privSessionId}}},function(e,t,r){"use strict";r.d(t,"a",(function(){return P}));var n=r(271),i=r(15),o=r(77),s=r(270),a=r(23),c=r(238),u=r(157),p=r(33),h=r(50),d=r(29),l=r(5),f=r(96),v=r(76),g=r(180),m=r(171),y=r(172),S=r(149),w=r(54),b=r(153),C=r(32),R=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};class P{constructor(e,t,r,n,a){if(this.privConnectionConfigurationPromise=void 0,this.privConnectionPromise=void 0,this.privSetTimeout=setTimeout,this.privIsLiveAudio=!1,this.recognizeOverride=void 0,this.disconnectOverride=void 0,this.receiveMessageOverride=void 0,this.sendPrePayloadJSONOverride=void 0,this.postConnectImplOverride=void 0,this.configConnectionOverride=void 0,!e)throw new i.a("authentication");if(!t)throw new i.a("connectionFactory");if(!r)throw new i.a("audioSource");if(!n)throw new i.a("recognizerConfig");this.privMustReportEndOfStream=!1,this.privAuthentication=e,this.privConnectionFactory=t,this.privAudioSource=r,this.privRecognizerConfig=n,this.privIsDisposed=!1,this.privRecognizer=a,this.privRequestSession=new g.a(this.privAudioSource.id()),this.privConnectionEvents=new o.a,this.privServiceEvents=new o.a,this.privDynamicGrammar=new m.a,this.privSpeechContext=new y.a(this.privDynamicGrammar),this.privAgentConfig=new S.a,"undefined"!=typeof Blob&&"undefined"!=typeof Worker&&(this.privSetTimeout=s.a.setTimeout),this.connectionEvents.attach(e=>{if("ConnectionClosedEvent"===e.name){const t=e;(1003===t.statusCode||1007===t.statusCode||1002===t.statusCode||4e3===t.statusCode||this.privRequestSession.numConnectionAttempts>this.privRecognizerConfig.maxRetryCount)&&this.cancelRecognitionLocal(h.a.Error,1007===t.statusCode?d.a.BadRequestParameters:d.a.ConnectionFailure,`${t.reason} websocket error code: ${t.statusCode}`)}})}get audioSource(){return this.privAudioSource}get speechContext(){return this.privSpeechContext}get dynamicGrammar(){return this.privDynamicGrammar}get agentConfig(){return this.privAgentConfig}set conversationTranslatorToken(e){this.privRecognizerConfig.parameters.setProperty(l.a.ConversationTranslator_Token,e)}set authentication(e){this.privAuthentication=this.authentication}isDisposed(){return this.privIsDisposed}dispose(e){return R(this,void 0,void 0,(function*(){if(this.privIsDisposed=!0,void 0!==this.privConnectionConfigurationPromise)try{const t=yield this.privConnectionConfigurationPromise;yield t.dispose(e)}catch(e){return}}))}get connectionEvents(){return this.privConnectionEvents}get serviceEvents(){return this.privServiceEvents}get recognitionMode(){return this.privRecognizerConfig.recognitionMode}recognize(e,t,r){return R(this,void 0,void 0,(function*(){if(void 0!==this.recognizeOverride)return void(yield this.recognizeOverride(e,t,r));this.privConnectionConfigurationPromise=void 0,this.privRecognizerConfig.recognitionMode=e,this.privSuccessCallback=t,this.privErrorCallback=r,this.privRequestSession.startNewRecognition(),this.privRequestSession.listenForServiceTelemetry(this.privAudioSource.events);const i=this.connectImpl();let o;try{const e=yield this.audioSource.attach(this.privRequestSession.audioNodeId),t=yield this.audioSource.format,r=yield this.audioSource.deviceInfo;this.privIsLiveAudio=r.type&&r.type===w.g.Microphones,o=new n.a(e,t.avgBytesPerSec),yield this.privRequestSession.onAudioSourceAttachCompleted(o,!1),this.privRecognizerConfig.SpeechServiceConfig.Context.audio={source:r}}catch(e){throw yield this.privRequestSession.onStopRecognizing(),e}try{yield i}catch(e){return void(yield this.cancelRecognitionLocal(h.a.Error,d.a.ConnectionFailure,e))}const s=new f.a(this.privRequestSession.sessionId);this.privRecognizer.sessionStarted&&this.privRecognizer.sessionStarted(this.privRecognizer,s),this.receiveMessage(),this.sendAudio(o).catch(e=>R(this,void 0,void 0,(function*(){yield this.cancelRecognitionLocal(h.a.Error,d.a.RuntimeError,e)})))}))}stopRecognizing(){return R(this,void 0,void 0,(function*(){if(this.privRequestSession.isRecognizing)try{yield this.audioSource.turnOff(),yield this.sendFinalAudio(),yield this.privRequestSession.onStopRecognizing(),yield this.privRequestSession.turnCompletionPromise}finally{yield this.privRequestSession.dispose()}}))}connect(){return R(this,void 0,void 0,(function*(){return yield this.connectImpl(),Promise.resolve()}))}connectAsync(e,t){this.connectImpl().then(()=>{try{e&&e()}catch(e){t&&t(e)}},e=>{try{t&&t(e)}catch(e){}})}disconnect(){return R(this,void 0,void 0,(function*(){if(yield this.cancelRecognitionLocal(h.a.Error,d.a.NoError,"Disconnecting"),void 0!==this.disconnectOverride&&(yield this.disconnectOverride()),void 0!==this.privConnectionPromise)try{yield(yield this.privConnectionPromise).dispose()}catch(e){}this.privConnectionPromise=void 0}))}sendMessage(e){}sendNetworkMessage(e,t){return R(this,void 0,void 0,(function*(){const r="string"==typeof t?a.b.Text:a.b.Binary,n="string"==typeof t?"application/json":"";return(yield this.fetchConnection()).send(new C.a(r,e,this.privRequestSession.requestId,n,t))}))}set activityTemplate(e){this.privActivityTemplate=e}get activityTemplate(){return this.privActivityTemplate}sendTelemetryData(){return R(this,void 0,void 0,(function*(){const e=this.privRequestSession.getTelemetry();if(!0!==P.telemetryDataEnabled||this.privIsDisposed||null===e)return;if(P.telemetryData)try{P.telemetryData(e)}catch(e){}const t=yield this.fetchConnection();yield t.send(new C.a(a.b.Text,"telemetry",this.privRequestSession.requestId,"application/json",e))}))}cancelRecognitionLocal(e,t,r){return R(this,void 0,void 0,(function*(){this.privRequestSession.isRecognizing&&(yield this.privRequestSession.onStopRecognizing(),this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,e,t,r))}))}receiveMessage(){return R(this,void 0,void 0,(function*(){try{if(this.privIsDisposed)return;let e=yield this.fetchConnection();const t=yield e.read();if(void 0!==this.receiveMessageOverride)return this.receiveMessageOverride();if(!t)return this.privRequestSession.isRecognizing?this.receiveMessage():void 0;this.privServiceHasSentMessage=!0;const r=C.a.fromConnectionMessage(t);if(r.requestId.toLowerCase()===this.privRequestSession.requestId.toLowerCase())switch(r.path.toLowerCase()){case"turn.start":this.privMustReportEndOfStream=!0,this.privRequestSession.onServiceTurnStartResponse();break;case"speech.startdetected":const t=b.a.fromJSON(r.textBody),n=new v.a(t.Offset,this.privRequestSession.sessionId);this.privRecognizer.speechStartDetected&&this.privRecognizer.speechStartDetected(this.privRecognizer,n);break;case"speech.enddetected":let i;i=r.textBody.length>0?r.textBody:"{ Offset: 0 }";const o=b.a.fromJSON(i);this.privRecognizerConfig.isContinuousRecognition&&this.privRequestSession.onServiceRecognized(o.Offset+this.privRequestSession.currentTurnAudioOffset);const s=new v.a(o.Offset+this.privRequestSession.currentTurnAudioOffset,this.privRequestSession.sessionId);this.privRecognizer.speechEndDetected&&this.privRecognizer.speechEndDetected(this.privRecognizer,s);break;case"turn.end":yield this.sendTelemetryData(),this.privRequestSession.isSpeechEnded&&this.privMustReportEndOfStream&&(this.privMustReportEndOfStream=!1,yield this.cancelRecognitionLocal(h.a.EndOfStream,d.a.NoError,void 0));const a=new f.a(this.privRequestSession.sessionId);if(yield this.privRequestSession.onServiceTurnEndResponse(this.privRecognizerConfig.isContinuousRecognition),!this.privRecognizerConfig.isContinuousRecognition||this.privRequestSession.isSpeechEnded||!this.privRequestSession.isRecognizing)return void(this.privRecognizer.sessionStopped&&this.privRecognizer.sessionStopped(this.privRecognizer,a));e=yield this.fetchConnection(),yield this.sendPrePayloadJSON(e);break;default:(yield this.processTypeSpecificMessages(r))||this.privServiceEvents&&this.serviceEvents.onEvent(new c.h(r.path.toLowerCase(),r.textBody))}return this.receiveMessage()}catch(e){return null}}))}sendSpeechContext(e,t){const r=this.speechContext.toJSON();if(t&&this.privRequestSession.onSpeechContext(),r)return e.send(new C.a(a.b.Text,"speech.context",this.privRequestSession.requestId,"application/json",r))}sendPrePayloadJSON(e,t=!0){return R(this,void 0,void 0,(function*(){if(void 0!==this.sendPrePayloadJSONOverride)return this.sendPrePayloadJSONOverride(e);yield this.sendSpeechContext(e,t),yield this.sendWaveHeader(e)}))}sendWaveHeader(e){return R(this,void 0,void 0,(function*(){const t=yield this.audioSource.format;return e.send(new C.a(a.b.Binary,"audio",this.privRequestSession.requestId,"audio/x-wav",t.header))}))}connectImpl(){return void 0!==this.privConnectionPromise?this.privConnectionPromise.then(e=>e.state()===u.a.Disconnected?(this.privConnectionId=null,this.privConnectionPromise=void 0,this.privServiceHasSentMessage=!1,this.connectImpl()):this.privConnectionPromise,()=>(this.privConnectionId=null,this.privConnectionPromise=void 0,this.privServiceHasSentMessage=!1,this.connectImpl())):(this.privConnectionPromise=this.retryableConnect(),this.privConnectionPromise.catch(()=>{}),void 0!==this.postConnectImplOverride?this.postConnectImplOverride(this.privConnectionPromise):this.privConnectionPromise)}sendSpeechServiceConfig(e,t,r){if(t.onSpeechContext(),!0!==P.telemetryDataEnabled){const e={context:{system:JSON.parse(r).context.system}};r=JSON.stringify(e)}if("true"===this.privRecognizerConfig.parameters.getProperty("f0f5debc-f8c9-4892-ac4b-90a7ab359fd2","false").toLowerCase()){const e=JSON.parse(r);e.context.DisableReferenceChannel="True",e.context.MicSpec="1_0_0",r=JSON.stringify(e)}if(r)return e.send(new C.a(a.b.Text,"speech.config",t.requestId,"application/json",r))}fetchConnection(){return R(this,void 0,void 0,(function*(){return void 0!==this.privConnectionConfigurationPromise?this.privConnectionConfigurationPromise.then(e=>e.state()===u.a.Disconnected?(this.privConnectionId=null,this.privConnectionConfigurationPromise=void 0,this.privServiceHasSentMessage=!1,this.fetchConnection()):this.privConnectionConfigurationPromise,()=>(this.privConnectionId=null,this.privConnectionConfigurationPromise=void 0,this.privServiceHasSentMessage=!1,this.fetchConnection())):(this.privConnectionConfigurationPromise=this.configureConnection(),yield this.privConnectionConfigurationPromise)}))}sendAudio(e){return R(this,void 0,void 0,(function*(){const t=yield this.audioSource.format;let r=Date.now();const n=this.privRecognizerConfig.parameters.getProperty("SPEECH-TransmitLengthBeforThrottleMs","5000"),i=t.avgBytesPerSec/1e3*parseInt(n,10),o=this.privRequestSession.recogNumber,s=()=>R(this,void 0,void 0,(function*(){if(!this.privIsDisposed&&!this.privRequestSession.isSpeechEnded&&this.privRequestSession.isRecognizing&&this.privRequestSession.recogNumber===o){const n=yield this.fetchConnection(),c=yield e.read();if(this.privRequestSession.isSpeechEnded)return;let u,p;if(!c||c.isEnd?(u=null,p=0):(u=c.buffer,this.privRequestSession.onAudioSent(u.byteLength),p=i>=this.privRequestSession.bytesSent?0:Math.max(0,r-Date.now())),0!==p&&(yield this.delay(p)),null!==u&&(r=Date.now()+1e3*u.byteLength/(2*t.avgBytesPerSec)),!this.privIsDisposed&&!this.privRequestSession.isSpeechEnded&&this.privRequestSession.isRecognizing&&this.privRequestSession.recogNumber===o){if(n.send(new C.a(a.b.Binary,"audio",this.privRequestSession.requestId,null,u)).catch(()=>{this.privRequestSession.onServiceTurnEndResponse(this.privRecognizerConfig.isContinuousRecognition).catch(()=>{})}),!(null==c?void 0:c.isEnd))return s();this.privIsLiveAudio||this.privRequestSession.onSpeechEnded()}}}));return s()}))}retryableConnect(){return R(this,void 0,void 0,(function*(){let e=!1;this.privAuthFetchEventId=Object(p.b)();const t=this.privRequestSession.sessionId;this.privConnectionId=void 0!==t?t:Object(p.b)(),this.privRequestSession.onPreConnectionStart(this.privAuthFetchEventId,this.privConnectionId);let r=0,n="";for(;this.privRequestSession.numConnectionAttempts<=this.privRecognizerConfig.maxRetryCount;){const t=e?this.privAuthentication.fetchOnExpiry(this.privAuthFetchEventId):this.privAuthentication.fetch(this.privAuthFetchEventId),i=yield t;yield this.privRequestSession.onAuthCompleted(!1);const o=this.privConnectionFactory.create(this.privRecognizerConfig,i,this.privConnectionId);this.privRequestSession.listenForServiceTelemetry(o.events),o.events.attach(e=>{this.connectionEvents.onEvent(e)});const s=yield o.open();if(200===s.statusCode)return yield this.privRequestSession.onConnectionEstablishCompleted(s.statusCode),Promise.resolve(o);1006===s.statusCode&&(e=!0),r=s.statusCode,n=s.reason,this.privRequestSession.onRetryConnection()}return yield this.privRequestSession.onConnectionEstablishCompleted(r,n),Promise.reject(`Unable to contact server. StatusCode: ${r}, ${this.privRecognizerConfig.parameters.getProperty(l.a.SpeechServiceConnection_Endpoint)} Reason: ${n}`)}))}delay(e){return new Promise(t=>this.privSetTimeout(t,e))}writeBufferToConsole(e){let t="Buffer Size: ";if(null===e)t+="null";else{const r=new Uint8Array(e);t+=e.byteLength+"\r\n";for(let n=0;n<e.byteLength;n++)t+=r[n].toString(16).padStart(2,"0")+" ",(n+1)%16==0&&(t="")}}sendFinalAudio(){return R(this,void 0,void 0,(function*(){const e=yield this.fetchConnection();yield e.send(new C.a(a.b.Binary,"audio",this.privRequestSession.requestId,null,null))}))}configureConnection(){return R(this,void 0,void 0,(function*(){const e=yield this.connectImpl();return void 0!==this.configConnectionOverride?this.configConnectionOverride(e):(yield this.sendSpeechServiceConfig(e,this.privRequestSession,this.privRecognizerConfig.SpeechServiceConfig.serialize()),yield this.sendPrePayloadJSON(e,!1),e)}))}}P.telemetryDataEnabled=!0},function(e,t){},function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));class n{static get requestOptions(){return n.privDefaultRequestOptions}static get configParams(){return n.privDefaultParams}static get restErrors(){return n.privRestErrors}}n.privDefaultRequestOptions={headers:{Accept:"application/json"},ignoreCache:!1,timeout:1e4},n.privRestErrors={authInvalidSubscriptionKey:"You must specify either an authentication token to use, or a Cognitive Speech subscription key.",authInvalidSubscriptionRegion:"You must specify the Cognitive Speech region to use.",invalidArgs:"Required input not found: {arg}.",invalidCreateJoinConversationResponse:"Creating/Joining conversation failed with HTTP {status}.",invalidParticipantRequest:"The requested participant was not found.",permissionDeniedConnect:"Required credentials not found.",permissionDeniedConversation:"Invalid operation: only the host can {command} the conversation.",permissionDeniedParticipant:"Invalid operation: only the host can {command} a participant.",permissionDeniedSend:"Invalid operation: the conversation is not in a connected state.",permissionDeniedStart:"Invalid operation: there is already an active conversation."},n.privDefaultParams={apiVersion:"api-version",authorization:"Authorization",clientAppId:"X-ClientAppId",contentTypeKey:"Content-Type",correlationId:"X-CorrelationId",languageCode:"language",nickname:"nickname",profanity:"profanity",requestId:"X-RequestId",roomId:"roomid",sessionToken:"token",subscriptionKey:"Ocp-Apim-Subscription-Key",subscriptionRegion:"Ocp-Apim-Subscription-Region",token:"X-CapitoToken"}},,,,,,,,,,function(e,t){function r(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}r.keys=function(){return[]},r.resolve=r,e.exports=r,r.id=109},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getLocalStorageKey=s,t.localStorageGet=function(e,t,r){const n=s(e,t);try{const e=window.localStorage.getItem(n);if(null!=e)return JSON.parse(e);void 0!==r&&window.localStorage.setItem(n,JSON.stringify(r))}catch(e){}return r},t.localStorageSet=function(e,t,r){const n=s(e,t);try{window.localStorage.setItem(n,JSON.stringify(r))}catch(e){}},t.getLocalStorageVal=function(e,t,r){const a=s(e,t);if(o.has(a))return o.get(a);const c=new n.Val(r,i.isEqual);try{const e=window.localStorage.getItem(a);null!=e?c.setValue(JSON.parse(e)):void 0!==r&&window.localStorage.setItem(a,JSON.stringify(r))}catch(e){}return c.reaction(e=>{try{window.localStorage.setItem(a,JSON.stringify(e))}catch(e){}}),o.set(a,c),c};var n=r(63),i=r(58);const o=new Map;function s(e,t){return`${e}#${t}`}},function(e,t,r){(function(t){var n=r(144),i="undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{};function o(e){return void 0===e}function s(e){return"[object Object]"===Object.prototype.toString.call(e)}function a(e){return"[object String]"===Object.prototype.toString.call(e)}function c(e){return"[object Array]"===Object.prototype.toString.call(e)}function u(){if(!("fetch"in i))return!1;try{return new Headers,new Request(""),new Response,!0}catch(e){return!1}}function p(e,t){var r,n;if(o(e.length))for(r in e)d(e,r)&&t.call(null,r,e[r]);else if(n=e.length)for(r=0;r<n;r++)t.call(null,r,e[r])}function h(e,t){if("number"!=typeof t)throw new Error("2nd argument to `truncate` function should be a number");return"string"!=typeof e||0===t||e.length<=t?e:e.substr(0,t)+"…"}function d(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function l(e){for(var t,r=[],n=0,i=e.length;n<i;n++)a(t=e[n])?r.push(t.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1")):t&&t.source&&r.push(t.source);return new RegExp(r.join("|"),"i")}function f(e){var t,r,n,i,o,s=[];if(!e||!e.tagName)return"";if(s.push(e.tagName.toLowerCase()),e.id&&s.push("#"+e.id),(t=e.className)&&a(t))for(r=t.split(/\s+/),o=0;o<r.length;o++)s.push("."+r[o]);var c=["type","name","title","alt"];for(o=0;o<c.length;o++)n=c[o],(i=e.getAttribute(n))&&s.push("["+n+'="'+i+'"]');return s.join("")}function v(e,t){return!!(!!e^!!t)}function g(e,t){if(v(e,t))return!1;var r,n,i=e.frames,o=t.frames;if(void 0===i||void 0===o)return!1;if(i.length!==o.length)return!1;for(var s=0;s<i.length;s++)if(r=i[s],n=o[s],r.filename!==n.filename||r.lineno!==n.lineno||r.colno!==n.colno||r.function!==n.function)return!1;return!0}function m(e){if("string"==typeof e)return h(e,40);if("number"==typeof e||"boolean"==typeof e||void 0===e)return e;var t=Object.prototype.toString.call(e);return"[object Object]"===t?"[Object]":"[object Array]"===t?"[Array]":"[object Function]"===t?e.name?"[Function: "+e.name+"]":"[Function]":e}e.exports={isObject:function(e){return"object"==typeof e&&null!==e},isError:function(e){switch(Object.prototype.toString.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return e instanceof Error}},isErrorEvent:function(e){return"[object ErrorEvent]"===Object.prototype.toString.call(e)},isDOMError:function(e){return"[object DOMError]"===Object.prototype.toString.call(e)},isDOMException:function(e){return"[object DOMException]"===Object.prototype.toString.call(e)},isUndefined:o,isFunction:function(e){return"function"==typeof e},isPlainObject:s,isString:a,isArray:c,isEmptyObject:function(e){if(!s(e))return!1;for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},supportsErrorEvent:function(){try{return new ErrorEvent(""),!0}catch(e){return!1}},supportsDOMError:function(){try{return new DOMError(""),!0}catch(e){return!1}},supportsDOMException:function(){try{return new DOMException(""),!0}catch(e){return!1}},supportsFetch:u,supportsReferrerPolicy:function(){if(!u())return!1;try{return new Request("pickleRick",{referrerPolicy:"origin"}),!0}catch(e){return!1}},supportsPromiseRejectionEvent:function(){return"function"==typeof PromiseRejectionEvent},wrappedCallback:function(e){return function(t,r){var n=e(t)||t;return r&&r(n)||n}},each:p,objectMerge:function(e,t){return t?(p(t,(function(t,r){e[t]=r})),e):e},truncate:h,objectFrozen:function(e){return!!Object.isFrozen&&Object.isFrozen(e)},hasKey:d,joinRegExp:l,urlencode:function(e){var t=[];return p(e,(function(e,r){t.push(encodeURIComponent(e)+"="+encodeURIComponent(r))})),t.join("&")},uuid4:function(){var e=i.crypto||i.msCrypto;if(!o(e)&&e.getRandomValues){var t=new Uint16Array(8);e.getRandomValues(t),t[3]=4095&t[3]|16384,t[4]=16383&t[4]|32768;var r=function(e){for(var t=e.toString(16);t.length<4;)t="0"+t;return t};return r(t[0])+r(t[1])+r(t[2])+r(t[3])+r(t[4])+r(t[5])+r(t[6])+r(t[7])}return"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))},htmlTreeAsString:function(e){for(var t,r=[],n=0,i=0,o=" > ".length;e&&n++<5&&!("html"===(t=f(e))||n>1&&i+r.length*o+t.length>=80);)r.push(t),i+=t.length,e=e.parentNode;return r.reverse().join(" > ")},htmlElementAsString:f,isSameException:function(e,t){return!v(e,t)&&(e=e.values[0],t=t.values[0],e.type===t.type&&e.value===t.value&&(r=e.stacktrace,n=t.stacktrace,(!o(r)||!o(n))&&g(e.stacktrace,t.stacktrace)));var r,n},isSameStacktrace:g,parseUrl:function(e){if("string"!=typeof e)return{};var t=e.match(/^(([^:\/?#]+):)?(\/\/([^\/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/),r=t[6]||"",n=t[8]||"";return{protocol:t[2],host:t[4],path:t[5],relative:t[5]+r+n}},fill:function(e,t,r,n){if(null!=e){var i=e[t];e[t]=r(i),e[t].__raven__=!0,e[t].__orig__=i,n&&n.push([e,t,i])}},safeJoin:function(e,t){if(!c(e))return"";for(var r=[],n=0;n<e.length;n++)try{r.push(String(e[n]))}catch(e){r.push("[value cannot be serialized]")}return r.join(t)},serializeException:function e(t,r,i){if(!s(t))return t;i="number"!=typeof(r="number"!=typeof r?3:r)?51200:i;var o=function e(t,r){return 0===r?m(t):s(t)?Object.keys(t).reduce((function(n,i){return n[i]=e(t[i],r-1),n}),{}):Array.isArray(t)?t.map((function(t){return e(t,r-1)})):m(t)}(t,r);return function(e){return function(e){return~-encodeURI(e).split(/%..|./).length}(JSON.stringify(e))}(n(o))>i?e(t,r-1):o},serializeKeysForMessage:function(e,t){if("number"==typeof e||"string"==typeof e)return e.toString();if(!Array.isArray(e))return"";if(0===(e=e.filter((function(e){return"string"==typeof e}))).length)return"[object has no keys]";if(t="number"!=typeof t?40:t,e[0].length>=t)return e[0];for(var r=e.length;r>0;r--){var n=e.slice(0,r).join(", ");if(!(n.length>t))return r===e.length?n:n+"…"}return""},sanitize:function(e,t){if(!c(t)||c(t)&&0===t.length)return e;var r,i=l(t);try{r=JSON.parse(n(e))}catch(t){return e}return function e(t){return c(t)?t.map((function(t){return e(t)})):s(t)?Object.keys(t).reduce((function(r,n){return i.test(n)?r[n]="********":r[n]=e(t[n]),r}),{}):t}(r)}}}).call(this,r(38))},,function(e,t,r){e.exports=r(114)},function(e,t,r){"use strict";var n=r(17),i=r(67),o=r(115),s=r(73);function a(e){var t=new o(e),r=i(o.prototype.request,t);return n.extend(r,o.prototype,t),n.extend(r,t),r}var c=a(r(60));c.Axios=o,c.create=function(e){return a(s(c.defaults,e))},c.Cancel=r(74),c.CancelToken=r(129),c.isCancel=r(72),c.all=function(e){return Promise.all(e)},c.spread=r(130),c.isAxiosError=r(131),e.exports=c,e.exports.default=c},function(e,t,r){"use strict";var n=r(17),i=r(68),o=r(116),s=r(117),a=r(73),c=r(127),u=c.validators;function p(e){this.defaults=e,this.interceptors={request:new o,response:new o}}p.prototype.request=function(e){"string"==typeof e?(e=arguments[1]||{}).url=arguments[0]:e=e||{},(e=a(this.defaults,e)).method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var t=e.transitional;void 0!==t&&c.assertOptions(t,{silentJSONParsing:u.transitional(u.boolean,"1.0.0"),forcedJSONParsing:u.transitional(u.boolean,"1.0.0"),clarifyTimeoutError:u.transitional(u.boolean,"1.0.0")},!1);var r=[],n=!0;this.interceptors.request.forEach((function(t){"function"==typeof t.runWhen&&!1===t.runWhen(e)||(n=n&&t.synchronous,r.unshift(t.fulfilled,t.rejected))}));var i,o=[];if(this.interceptors.response.forEach((function(e){o.push(e.fulfilled,e.rejected)})),!n){var p=[s,void 0];for(Array.prototype.unshift.apply(p,r),p=p.concat(o),i=Promise.resolve(e);p.length;)i=i.then(p.shift(),p.shift());return i}for(var h=e;r.length;){var d=r.shift(),l=r.shift();try{h=d(h)}catch(e){l(e);break}}try{i=s(h)}catch(e){return Promise.reject(e)}for(;o.length;)i=i.then(o.shift(),o.shift());return i},p.prototype.getUri=function(e){return e=a(this.defaults,e),i(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},n.forEach(["delete","get","head","options"],(function(e){p.prototype[e]=function(t,r){return this.request(a(r||{},{method:e,url:t,data:(r||{}).data}))}})),n.forEach(["post","put","patch"],(function(e){p.prototype[e]=function(t,r,n){return this.request(a(n||{},{method:e,url:t,data:r}))}})),e.exports=p},function(e,t,r){"use strict";var n=r(17);function i(){this.handlers=[]}i.prototype.use=function(e,t,r){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!r&&r.synchronous,runWhen:r?r.runWhen:null}),this.handlers.length-1},i.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},i.prototype.forEach=function(e){n.forEach(this.handlers,(function(t){null!==t&&e(t)}))},e.exports=i},function(e,t,r){"use strict";var n=r(17),i=r(118),o=r(72),s=r(60);function a(e){e.cancelToken&&e.cancelToken.throwIfRequested()}e.exports=function(e){return a(e),e.headers=e.headers||{},e.data=i.call(e,e.data,e.headers,e.transformRequest),e.headers=n.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),n.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||s.adapter)(e).then((function(t){return a(e),t.data=i.call(e,t.data,t.headers,e.transformResponse),t}),(function(t){return o(t)||(a(e),t&&t.response&&(t.response.data=i.call(e,t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))}},function(e,t,r){"use strict";var n=r(17),i=r(60);e.exports=function(e,t,r){var o=this||i;return n.forEach(r,(function(r){e=r.call(o,e,t)})),e}},function(e,t,r){"use strict";var n=r(17);e.exports=function(e,t){n.forEach(e,(function(r,n){n!==t&&n.toUpperCase()===t.toUpperCase()&&(e[t]=r,delete e[n])}))}},function(e,t,r){"use strict";var n=r(71);e.exports=function(e,t,r){var i=r.config.validateStatus;r.status&&i&&!i(r.status)?t(n("Request failed with status code "+r.status,r.config,null,r.request,r)):e(r)}},function(e,t,r){"use strict";var n=r(17);e.exports=n.isStandardBrowserEnv()?{write:function(e,t,r,i,o,s){var a=[];a.push(e+"="+encodeURIComponent(t)),n.isNumber(r)&&a.push("expires="+new Date(r).toGMTString()),n.isString(i)&&a.push("path="+i),n.isString(o)&&a.push("domain="+o),!0===s&&a.push("secure"),document.cookie=a.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},function(e,t,r){"use strict";var n=r(123),i=r(124);e.exports=function(e,t){return e&&!n(t)?i(e,t):t}},function(e,t,r){"use strict";e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},function(e,t,r){"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},function(e,t,r){"use strict";var n=r(17),i=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,r,o,s={};return e?(n.forEach(e.split("\n"),(function(e){if(o=e.indexOf(":"),t=n.trim(e.substr(0,o)).toLowerCase(),r=n.trim(e.substr(o+1)),t){if(s[t]&&i.indexOf(t)>=0)return;s[t]="set-cookie"===t?(s[t]?s[t]:[]).concat([r]):s[t]?s[t]+", "+r:r}})),s):s}},function(e,t,r){"use strict";var n=r(17);e.exports=n.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a");function i(e){var n=e;return t&&(r.setAttribute("href",n),n=r.href),r.setAttribute("href",n),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:"/"===r.pathname.charAt(0)?r.pathname:"/"+r.pathname}}return e=i(window.location.href),function(t){var r=n.isString(t)?i(t):t;return r.protocol===e.protocol&&r.host===e.host}}():function(){return!0}},function(e,t,r){"use strict";var n=r(128),i={};["object","boolean","number","function","string","symbol"].forEach((function(e,t){i[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}}));var o={},s=n.version.split(".");function a(e,t){for(var r=t?t.split("."):s,n=e.split("."),i=0;i<3;i++){if(r[i]>n[i])return!0;if(r[i]<n[i])return!1}return!1}i.transitional=function(e,t,r){var i=t&&a(t);return function(s,a,c){if(!1===e)throw new Error(function(e,t){return"[Axios v"+n.version+"] Transitional option '"+e+"'"+t+(r?". "+r:"")}(a," has been removed in "+t));return i&&!o[a]&&(o[a]=!0),!e||e(s,a,c)}},e.exports={isOlderVersion:a,assertOptions:function(e,t,r){if("object"!=typeof e)throw new TypeError("options must be an object");for(var n=Object.keys(e),i=n.length;i-- >0;){var o=n[i],s=t[o];if(s){var a=e[o],c=void 0===a||s(a,o,e);if(!0!==c)throw new TypeError("option "+o+" must be "+c)}else if(!0!==r)throw Error("Unknown option "+o)}},validators:i}},function(e){e.exports=JSON.parse('{"name":"axios","version":"0.21.4","description":"Promise based HTTP client for the browser and node.js","main":"index.js","scripts":{"test":"grunt test","start":"node ./sandbox/server.js","build":"NODE_ENV=production grunt build","preversion":"npm test","version":"npm run build && grunt version && git add -A dist && git add CHANGELOG.md bower.json package.json","postversion":"git push && git push --tags","examples":"node ./examples/server.js","coveralls":"cat coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js","fix":"eslint --fix lib/**/*.js"},"repository":{"type":"git","url":"https://github.com/axios/axios.git"},"keywords":["xhr","http","ajax","promise","node"],"author":"Matt Zabriskie","license":"MIT","bugs":{"url":"https://github.com/axios/axios/issues"},"homepage":"https://axios-http.com","devDependencies":{"coveralls":"^3.0.0","es6-promise":"^4.2.4","grunt":"^1.3.0","grunt-banner":"^0.6.0","grunt-cli":"^1.2.0","grunt-contrib-clean":"^1.1.0","grunt-contrib-watch":"^1.0.0","grunt-eslint":"^23.0.0","grunt-karma":"^4.0.0","grunt-mocha-test":"^0.13.3","grunt-ts":"^6.0.0-beta.19","grunt-webpack":"^4.0.2","istanbul-instrumenter-loader":"^1.0.0","jasmine-core":"^2.4.1","karma":"^6.3.2","karma-chrome-launcher":"^3.1.0","karma-firefox-launcher":"^2.1.0","karma-jasmine":"^1.1.1","karma-jasmine-ajax":"^0.1.13","karma-safari-launcher":"^1.0.0","karma-sauce-launcher":"^4.3.6","karma-sinon":"^1.0.5","karma-sourcemap-loader":"^0.3.8","karma-webpack":"^4.0.2","load-grunt-tasks":"^3.5.2","minimist":"^1.2.0","mocha":"^8.2.1","sinon":"^4.5.0","terser-webpack-plugin":"^4.2.3","typescript":"^4.0.5","url-search-params":"^0.10.0","webpack":"^4.44.2","webpack-dev-server":"^3.11.0"},"browser":{"./lib/adapters/http.js":"./lib/adapters/xhr.js"},"jsdelivr":"dist/axios.min.js","unpkg":"dist/axios.min.js","typings":"./index.d.ts","dependencies":{"follow-redirects":"^1.14.0"},"bundlesize":[{"path":"./dist/axios.min.js","threshold":"5kB"}]}')},function(e,t,r){"use strict";var n=r(74);function i(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var r=this;e((function(e){r.reason||(r.reason=new n(e),t(r.reason))}))}i.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},i.source=function(){var e;return{token:new i((function(t){e=t})),cancel:e}},e.exports=i},function(e,t,r){"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},function(e,t,r){"use strict";e.exports=function(e){return"object"==typeof e&&!0===e.isAxiosError}},,,,function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));class n{constructor(e){this.privSpeechHypothesis=JSON.parse(e)}static fromJSON(e){return new n(e)}get Text(){return this.privSpeechHypothesis.Text}get Offset(){return this.privSpeechHypothesis.Offset}get Duration(){return this.privSpeechHypothesis.Duration}get Language(){return void 0===this.privSpeechHypothesis.PrimaryLanguage?void 0:this.privSpeechHypothesis.PrimaryLanguage.Language}get LanguageDetectionConfidence(){return void 0===this.privSpeechHypothesis.PrimaryLanguage?void 0:this.privSpeechHypothesis.PrimaryLanguage.Confidence}get SpeakerId(){return this.privSpeechHypothesis.SpeakerId}}},function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var n=r(20);class i{constructor(e){this.privSimpleSpeechPhrase=JSON.parse(e),this.privSimpleSpeechPhrase.RecognitionStatus=n.a[this.privSimpleSpeechPhrase.RecognitionStatus]}static fromJSON(e){return new i(e)}get RecognitionStatus(){return this.privSimpleSpeechPhrase.RecognitionStatus}get DisplayText(){return this.privSimpleSpeechPhrase.DisplayText}get Offset(){return this.privSimpleSpeechPhrase.Offset}get Duration(){return this.privSimpleSpeechPhrase.Duration}get Language(){return void 0===this.privSimpleSpeechPhrase.PrimaryLanguage?void 0:this.privSimpleSpeechPhrase.PrimaryLanguage.Language}get LanguageDetectionConfidence(){return void 0===this.privSimpleSpeechPhrase.PrimaryLanguage?void 0:this.privSimpleSpeechPhrase.PrimaryLanguage.Confidence}get SpeakerId(){return this.privSimpleSpeechPhrase.SpeakerId}}},function(e,t,r){"use strict";var n;r.d(t,"a",(function(){return n})),function(e){e[e.TextIndependentIdentification=0]="TextIndependentIdentification",e[e.TextDependentVerification=1]="TextDependentVerification",e[e.TextIndependentVerification=2]="TextIndependentVerification"}(n||(n={}))},function(e,t,r){"use strict";var n;r.d(t,"a",(function(){return n})),function(e){e[e.Success=0]="Success",e[e.Error=1]="Error"}(n||(n={}))},function(e,t,r){"use strict";r.d(t,"a",(function(){return s}));var n=r(3),i=r(20),o=r(138);class s{constructor(e){this.privTranslationPhrase=e,this.privTranslationPhrase.RecognitionStatus=i.a[this.privTranslationPhrase.RecognitionStatus],void 0!==this.privTranslationPhrase.Translation&&(this.privTranslationPhrase.Translation.TranslationStatus=o.a[this.privTranslationPhrase.Translation.TranslationStatus])}static fromJSON(e){return new s(JSON.parse(e))}static fromTranslationResponse(e){n.a.throwIfNullOrUndefined(e,"translationResponse");const t=e.SpeechPhrase;return e.SpeechPhrase=void 0,t.Translation=e,t.Text=t.DisplayText,new s(t)}get RecognitionStatus(){return this.privTranslationPhrase.RecognitionStatus}get Offset(){return this.privTranslationPhrase.Offset}get Duration(){return this.privTranslationPhrase.Duration}get Text(){return this.privTranslationPhrase.Text}get Translation(){return this.privTranslationPhrase.Translation}}},function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var n=r(5);class i{constructor(e,t,r,n){this.privProxyHostName=e,this.privProxyPort=t,this.privProxyUserName=r,this.privProxyPassword=n}static fromParameters(e){return new i(e.getProperty(n.a.SpeechServiceConnection_ProxyHostName),parseInt(e.getProperty(n.a.SpeechServiceConnection_ProxyPort),10),e.getProperty(n.a.SpeechServiceConnection_ProxyUserName),e.getProperty(n.a.SpeechServiceConnection_ProxyPassword))}static fromRecognizerConfig(e){return this.fromParameters(e.parameters)}get HostName(){return this.privProxyHostName}get Port(){return this.privProxyPort}get UserName(){return this.privProxyUserName}get Password(){return this.privProxyPassword}}},function(e,t,r){"use strict";r.d(t,"a",(function(){return b}));var n=r(15),i=r(33),o=r(229),s=r.n(o),a=r(19),c=r(77),u=r(157),p=r(87),h=r(183),d=r(156),l=r(301);class f{constructor(e,t){this.privStatusCode=e,this.privReason=t}get statusCode(){return this.privStatusCode}get reason(){return this.privReason}}var v=r(238),g=r(239),m=r(23),y=r(230),S=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};class w{constructor(e,t,r,i,o,s){if(!e)throw new n.a("uri");if(!r)throw new n.a("messageFormatter");this.proxyInfo=i,this.privConnectionEvents=new c.a,this.privConnectionId=t,this.privMessageFormatter=r,this.privConnectionState=u.a.None,this.privUri=e,this.privHeaders=o,this.privEnableCompression=s,this.privHeaders[a.a.ConnectionId]=this.privConnectionId,this.privLastErrorReceived=""}get state(){return this.privConnectionState}open(){if(this.privConnectionState===u.a.Disconnected)return Promise.reject(`Cannot open a connection that is in ${this.privConnectionState} state`);if(this.privConnectionEstablishDeferral)return this.privConnectionEstablishDeferral.promise;this.privConnectionEstablishDeferral=new p.a,this.privCertificateValidatedDeferral=new p.a,this.privConnectionState=u.a.Connecting;try{if("undefined"==typeof WebSocket||w.forceNpmWebSocket){const e={headers:this.privHeaders,perMessageDeflate:this.privEnableCompression};this.privCertificateValidatedDeferral.resolve();const t=new y.a(this.proxyInfo);e.agent=t.GetAgent();let r=new URL(this.privUri).protocol;"wss:"===(null==r?void 0:r.toLocaleLowerCase())?r="https:":"ws:"===(null==r?void 0:r.toLocaleLowerCase())&&(r="http:"),e.agent.protocol=r,this.privWebsocketClient=new s.a(this.privUri,e)}else this.privCertificateValidatedDeferral.resolve(),this.privWebsocketClient=new WebSocket(this.privUri);this.privWebsocketClient.binaryType="arraybuffer",this.privReceivingMessageQueue=new h.a,this.privDisconnectDeferral=new p.a,this.privSendMessageQueue=new h.a,this.processSendQueue().catch(e=>{d.a.instance.onEvent(new l.a(e))})}catch(e){return this.privConnectionEstablishDeferral.resolve(new f(500,e)),this.privConnectionEstablishDeferral.promise}return this.onEvent(new v.g(this.privConnectionId,this.privUri)),this.privWebsocketClient.onopen=()=>{this.privCertificateValidatedDeferral.promise.then(()=>{this.privConnectionState=u.a.Connected,this.onEvent(new v.d(this.privConnectionId)),this.privConnectionEstablishDeferral.resolve(new f(200,""))},e=>{this.privConnectionEstablishDeferral.reject(e)})},this.privWebsocketClient.onerror=e=>{this.onEvent(new v.b(this.privConnectionId,e.message,e.type)),this.privLastErrorReceived=e.message},this.privWebsocketClient.onclose=e=>{this.privConnectionState===u.a.Connecting?(this.privConnectionState=u.a.Disconnected,this.privConnectionEstablishDeferral.resolve(new f(e.code,e.reason+" "+this.privLastErrorReceived))):(this.privConnectionState=u.a.Disconnected,this.privWebsocketClient=null,this.onEvent(new v.a(this.privConnectionId,e.code,e.reason))),this.onClose(e.code,e.reason).catch(e=>{d.a.instance.onEvent(new l.a(e))})},this.privWebsocketClient.onmessage=e=>{const t=(new Date).toISOString();if(this.privConnectionState===u.a.Connected){const r=new p.a;if(this.privReceivingMessageQueue.enqueueFromPromise(r.promise),e.data instanceof ArrayBuffer){const n=new g.a(m.b.Binary,e.data);this.privMessageFormatter.toConnectionMessage(n).then(e=>{this.onEvent(new v.e(this.privConnectionId,t,e)),r.resolve(e)},e=>{r.reject("Invalid binary message format. Error: "+e)})}else{const n=new g.a(m.b.Text,e.data);this.privMessageFormatter.toConnectionMessage(n).then(e=>{this.onEvent(new v.e(this.privConnectionId,t,e)),r.resolve(e)},e=>{r.reject("Invalid text message format. Error: "+e)})}}},this.privConnectionEstablishDeferral.promise}send(e){if(this.privConnectionState!==u.a.Connected)return Promise.reject(`Cannot send on connection that is in ${u.a[this.privConnectionState]} state`);const t=new p.a,r=new p.a;return this.privSendMessageQueue.enqueueFromPromise(r.promise),this.privMessageFormatter.fromConnectionMessage(e).then(n=>{r.resolve({Message:e,RawWebsocketMessage:n,sendStatusDeferral:t})},e=>{r.reject("Error formatting the message. "+e)}),t.promise}read(){return this.privConnectionState!==u.a.Connected?Promise.reject(`Cannot read on connection that is in ${this.privConnectionState} state`):this.privReceivingMessageQueue.dequeue()}close(e){return this.privWebsocketClient?(this.privConnectionState!==u.a.Disconnected&&this.privWebsocketClient.close(1e3,e||"Normal closure by client"),this.privDisconnectDeferral.promise):Promise.resolve()}get events(){return this.privConnectionEvents}sendRawMessage(e){try{return e?(this.onEvent(new v.f(this.privConnectionId,(new Date).toISOString(),e.Message)),this.isWebsocketOpen?(this.privWebsocketClient.send(e.RawWebsocketMessage.payload),Promise.resolve()):Promise.reject("websocket send error: Websocket not ready "+this.privConnectionId+" "+e.Message.id+" "+(new Error).stack)):Promise.resolve()}catch(e){return Promise.reject("websocket send error: "+e)}}onClose(e,t){return S(this,void 0,void 0,(function*(){const r=`Connection closed. ${e}: ${t}`;this.privConnectionState=u.a.Disconnected,this.privDisconnectDeferral.resolve(),yield this.privReceivingMessageQueue.drainAndDispose(()=>{},r),yield this.privSendMessageQueue.drainAndDispose(e=>{e.sendStatusDeferral.reject(r)},r)}))}processSendQueue(){return S(this,void 0,void 0,(function*(){for(;;){const e=this.privSendMessageQueue.dequeue(),t=yield e;if(!t)return;try{yield this.sendRawMessage(t),t.sendStatusDeferral.resolve()}catch(e){t.sendStatusDeferral.reject(e)}}}))}onEvent(e){this.privConnectionEvents.onEvent(e),d.a.instance.onEvent(e)}get isWebsocketOpen(){return this.privWebsocketClient&&this.privWebsocketClient.readyState===this.privWebsocketClient.OPEN}}w.forceNpmWebSocket=!1;class b{constructor(e,t,r,o,s,a=!1,c){if(this.privIsDisposed=!1,!e)throw new n.a("uri");if(!o)throw new n.a("messageFormatter");this.privMessageFormatter=o;let u="",p=0;if(t)for(const r in t)r&&(u+=0===p&&-1===e.indexOf("?")?"?":"&",u+=`${r}=${encodeURIComponent(t[r])}`,p++);if(r)for(const t in r)t&&(u+=0===p&&-1===e.indexOf("?")?"?":"&",u+=`${t}=${encodeURIComponent(r[t])}`,p++);this.privUri=e+u,this.privId=c||Object(i.b)(),this.privConnectionMessageAdapter=new w(this.privUri,this.id,this.privMessageFormatter,s,r,a)}dispose(){return function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))}(this,void 0,void 0,(function*(){this.privIsDisposed=!0,this.privConnectionMessageAdapter&&(yield this.privConnectionMessageAdapter.close())}))}isDisposed(){return this.privIsDisposed}get id(){return this.privId}state(){return this.privConnectionMessageAdapter.state}open(){return this.privConnectionMessageAdapter.open()}send(e){return this.privConnectionMessageAdapter.send(e)}read(){return this.privConnectionMessageAdapter.read()}get events(){return this.privConnectionMessageAdapter.events}}},,,function(e,t){function r(e,t){for(var r=0;r<e.length;++r)if(e[r]===t)return r;return-1}function n(e,t){var n=[],i=[];return null==t&&(t=function(e,t){return n[0]===t?"[Circular ~]":"[Circular ~."+i.slice(0,r(n,t)).join(".")+"]"}),function(o,s){if(n.length>0){var a=r(n,this);~a?n.splice(a+1):n.push(this),~a?i.splice(a,1/0,o):i.push(o),~r(n,s)&&(s=t.call(this,o,s))}else n.push(s);return null==e?s instanceof Error?function(e){var t={stack:e.stack,message:e.message,name:e.name};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}(s):s:e.call(this,o,s)}}(e.exports=function(e,t,r,i){return JSON.stringify(e,n(t,i),r)}).getSerialize=n},,,function(e,t,r){"use strict";r.d(t,"a",(function(){return E}));var n=r(15),i=r(77),o=r(23),s=r(238),a=r(157),c=r(33),u=r(50),p=r(29),h=r(94),d=r(95),l=r(22),f=r(39),v=r(165),g=r(166),m=r(167),y=r(5),S=r(179),w=r(163),b=r(149),C=r(7),R=r(62),P=r(32),I=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};class E{constructor(e,t,r,o,s){if(this.speakOverride=void 0,this.receiveMessageOverride=void 0,this.connectImplOverride=void 0,this.configConnectionOverride=void 0,this.privConnectionConfigurationPromise=void 0,!e)throw new n.a("authentication");if(!t)throw new n.a("connectionFactory");if(!r)throw new n.a("synthesizerConfig");this.privAuthentication=e,this.privConnectionFactory=t,this.privSynthesizerConfig=r,this.privIsDisposed=!1,this.privSpeechSynthesizer=o,this.privSessionAudioDestination=s,this.privSynthesisTurn=new S.a,this.privConnectionEvents=new i.a,this.privServiceEvents=new i.a,this.privSynthesisContext=new w.a(this.privSpeechSynthesizer),this.privAgentConfig=new b.a,this.connectionEvents.attach(e=>{if("ConnectionClosedEvent"===e.name){const t=e;1e3!==t.statusCode&&this.cancelSynthesisLocal(u.a.Error,1007===t.statusCode?p.a.BadRequestParameters:p.a.ConnectionFailure,`${t.reason} websocket error code: ${t.statusCode}`)}})}get synthesisContext(){return this.privSynthesisContext}get agentConfig(){return this.privAgentConfig}get connectionEvents(){return this.privConnectionEvents}get serviceEvents(){return this.privServiceEvents}set activityTemplate(e){this.privActivityTemplate=e}get activityTemplate(){return this.privActivityTemplate}set audioOutputFormat(e){this.privAudioOutputFormat=e,this.privSynthesisTurn.audioOutputFormat=e,void 0!==this.privSessionAudioDestination&&(this.privSessionAudioDestination.format=e),void 0!==this.synthesisContext&&(this.synthesisContext.audioOutputFormat=e)}static addHeader(e,t){if(!t.hasHeader)return e;t.updateHeader(e.byteLength);const r=new Uint8Array(e.byteLength+t.header.byteLength);return r.set(new Uint8Array(t.header),0),r.set(new Uint8Array(e),t.header.byteLength),r.buffer}isDisposed(){return this.privIsDisposed}dispose(e){return I(this,void 0,void 0,(function*(){if(this.privIsDisposed=!0,void 0!==this.privSessionAudioDestination&&this.privSessionAudioDestination.close(),void 0!==this.privConnectionConfigurationPromise){const t=yield this.privConnectionConfigurationPromise;yield t.dispose(e)}}))}connect(){return I(this,void 0,void 0,(function*(){yield this.connectImpl()}))}sendNetworkMessage(e,t){return I(this,void 0,void 0,(function*(){const r="string"==typeof t?o.b.Text:o.b.Binary,n="string"==typeof t?"application/json":"";return(yield this.fetchConnection()).send(new P.a(r,e,this.privSynthesisTurn.requestId,n,t))}))}Speak(e,t,r,n,i,o){return I(this,void 0,void 0,(function*(){let s;if(s=t?e:this.privSpeechSynthesizer.buildSsml(e),void 0!==this.speakOverride)return this.speakOverride(s,r,n,i);this.privSuccessCallback=n,this.privErrorCallback=i,this.privSynthesisTurn.startNewSynthesis(r,e,t,o);try{yield this.connectImpl();const e=yield this.fetchConnection();yield this.sendSynthesisContext(e),yield this.sendSsmlMessage(e,s,r);const t=new h.a(new d.a(r,l.a.SynthesizingAudioStarted));this.privSpeechSynthesizer.synthesisStarted&&this.privSpeechSynthesizer.synthesisStarted(this.privSpeechSynthesizer,t),this.receiveMessage()}catch(e){return this.cancelSynthesisLocal(u.a.Error,p.a.ConnectionFailure,e),Promise.reject(e)}}))}cancelSynthesis(e,t,r,n){const i=new f.a;i.setProperty(C.CancellationErrorCodePropertyName,p.a[r]);const o=new d.a(e,l.a.Canceled,void 0,n,i);if(this.privSpeechSynthesizer.SynthesisCanceled){const t=new h.a(o);try{this.privSpeechSynthesizer.SynthesisCanceled(this.privSpeechSynthesizer,t)}catch(e){}}if(this.privSuccessCallback)try{this.privSuccessCallback(o)}catch(e){}}cancelSynthesisLocal(e,t,r){this.privSynthesisTurn.isSynthesizing&&(this.privSynthesisTurn.onStopSynthesizing(),this.cancelSynthesis(this.privSynthesisTurn.requestId,e,t,r))}processTypeSpecificMessages(e){return!0}receiveMessage(){return I(this,void 0,void 0,(function*(){try{const e=yield this.fetchConnection(),t=yield e.read();if(void 0!==this.receiveMessageOverride)return this.receiveMessageOverride();if(this.privIsDisposed)return;if(!t)return this.privSynthesisTurn.isSynthesizing?this.receiveMessage():void 0;const r=P.a.fromConnectionMessage(t);if(r.requestId.toLowerCase()===this.privSynthesisTurn.requestId.toLowerCase())switch(r.path.toLowerCase()){case"turn.start":this.privSynthesisTurn.onServiceTurnStartResponse();break;case"response":this.privSynthesisTurn.onServiceResponseMessage(r.textBody);break;case"audio":if(this.privSynthesisTurn.streamId.toLowerCase()===r.streamId.toLowerCase()&&r.binaryBody){if(this.privSynthesisTurn.onAudioChunkReceived(r.binaryBody),this.privSpeechSynthesizer.synthesizing)try{const e=E.addHeader(r.binaryBody,this.privSynthesisTurn.audioOutputFormat),t=new h.a(new d.a(this.privSynthesisTurn.requestId,l.a.SynthesizingAudio,e));this.privSpeechSynthesizer.synthesizing(this.privSpeechSynthesizer,t)}catch(e){}void 0!==this.privSessionAudioDestination&&this.privSessionAudioDestination.write(r.binaryBody)}break;case"audio.metadata":const e=R.b.fromJSON(r.textBody).Metadata;for(const t of e)switch(t.Type){case R.a.WordBoundary:case R.a.SentenceBoundary:this.privSynthesisTurn.onTextBoundaryEvent(t);const e=new v.a(t.Data.Offset,t.Data.Duration,t.Data.text.Text,t.Data.text.Length,t.Type===R.a.WordBoundary?this.privSynthesisTurn.currentTextOffset:this.privSynthesisTurn.currentSentenceOffset,t.Data.text.BoundaryType);if(this.privSpeechSynthesizer.wordBoundary)try{this.privSpeechSynthesizer.wordBoundary(this.privSpeechSynthesizer,e)}catch(e){}break;case R.a.Bookmark:const r=new g.a(t.Data.Offset,t.Data.Bookmark);if(this.privSpeechSynthesizer.bookmarkReached)try{this.privSpeechSynthesizer.bookmarkReached(this.privSpeechSynthesizer,r)}catch(e){}break;case R.a.Viseme:if(this.privSynthesisTurn.onVisemeMetadataReceived(t),t.Data.IsLastAnimation){const e=new m.a(t.Data.Offset,t.Data.VisemeId,this.privSynthesisTurn.getAndClearVisemeAnimation());if(this.privSpeechSynthesizer.visemeReceived)try{this.privSpeechSynthesizer.visemeReceived(this.privSpeechSynthesizer,e)}catch(e){}}break;case R.a.SessionEnd:this.privSynthesisTurn.onSessionEnd(t)}break;case"turn.end":let t;this.privSynthesisTurn.onServiceTurnEndResponse();try{const e=yield this.privSynthesisTurn.getAllReceivedAudioWithHeader();t=new d.a(this.privSynthesisTurn.requestId,l.a.SynthesizingAudioCompleted,e,void 0,void 0,this.privSynthesisTurn.audioDuration),this.privSuccessCallback&&this.privSuccessCallback(t)}catch(e){this.privErrorCallback&&this.privErrorCallback(e)}if(this.privSpeechSynthesizer.synthesisCompleted)try{this.privSpeechSynthesizer.synthesisCompleted(this.privSpeechSynthesizer,new h.a(t))}catch(e){}break;default:this.processTypeSpecificMessages(r)||this.privServiceEvents&&this.serviceEvents.onEvent(new s.h(r.path.toLowerCase(),r.textBody))}return this.receiveMessage()}catch(e){}}))}sendSynthesisContext(e){const t=this.synthesisContext.toJSON();if(t)return e.send(new P.a(o.b.Text,"synthesis.context",this.privSynthesisTurn.requestId,"application/json",t))}connectImpl(e=!1){if(null!=this.privConnectionPromise)return this.privConnectionPromise.then(e=>e.state()===a.a.Disconnected?(this.privConnectionId=null,this.privConnectionPromise=null,this.connectImpl()):this.privConnectionPromise,()=>(this.privConnectionId=null,this.privConnectionPromise=null,this.connectImpl()));this.privAuthFetchEventId=Object(c.b)(),this.privConnectionId=Object(c.b)(),this.privSynthesisTurn.onPreConnectionStart(this.privAuthFetchEventId);const t=e?this.privAuthentication.fetchOnExpiry(this.privAuthFetchEventId):this.privAuthentication.fetch(this.privAuthFetchEventId);return this.privConnectionPromise=t.then(t=>I(this,void 0,void 0,(function*(){this.privSynthesisTurn.onAuthCompleted(!1);const r=this.privConnectionFactory.create(this.privSynthesizerConfig,t,this.privConnectionId);r.events.attach(e=>{this.connectionEvents.onEvent(e)});const n=yield r.open();return 200===n.statusCode?(this.privSynthesisTurn.onConnectionEstablishCompleted(n.statusCode),Promise.resolve(r)):403!==n.statusCode||e?(this.privSynthesisTurn.onConnectionEstablishCompleted(n.statusCode),Promise.reject(`Unable to contact server. StatusCode: ${n.statusCode}, ${this.privSynthesizerConfig.parameters.getProperty(y.a.SpeechServiceConnection_Endpoint)} Reason: ${n.reason}`)):this.connectImpl(!0)})),e=>{throw this.privSynthesisTurn.onAuthCompleted(!0),new Error(e)}),this.privConnectionPromise.catch(()=>{}),this.privConnectionPromise}sendSpeechServiceConfig(e,t){if(t)return e.send(new P.a(o.b.Text,"speech.config",this.privSynthesisTurn.requestId,"application/json",t))}sendSsmlMessage(e,t,r){return e.send(new P.a(o.b.Text,"ssml",r,"application/ssml+xml",t))}fetchConnection(){return I(this,void 0,void 0,(function*(){return void 0!==this.privConnectionConfigurationPromise?this.privConnectionConfigurationPromise.then(e=>e.state()===a.a.Disconnected?(this.privConnectionId=null,this.privConnectionConfigurationPromise=void 0,this.fetchConnection()):this.privConnectionConfigurationPromise,()=>(this.privConnectionId=null,this.privConnectionConfigurationPromise=void 0,this.fetchConnection())):(this.privConnectionConfigurationPromise=this.configureConnection(),yield this.privConnectionConfigurationPromise)}))}configureConnection(){return I(this,void 0,void 0,(function*(){const e=yield this.connectImpl();return void 0!==this.configConnectionOverride?this.configConnectionOverride(e):(yield this.sendSpeechServiceConfig(e,this.privSynthesizerConfig.SpeechServiceConfig.serialize()),e)}))}}E.telemetryDataEnabled=!0},function(e,t,r){"use strict";r.d(t,"a",(function(){return p})),r.d(t,"b",(function(){return h}));var n=r(7),i=r(3),o=r(5),s=r(39),a=r(36),c=r(170),u=r(16);class p{constructor(){}static fromSubscription(e,t){i.a.throwIfNullOrWhitespace(e,"subscriptionKey"),i.a.throwIfNullOrWhitespace(t,"region");const r=new h;return r.setProperty(o.a.SpeechServiceConnection_Region,t),r.setProperty(o.a.SpeechServiceConnection_IntentRegion,t),r.setProperty(o.a.SpeechServiceConnection_Key,e),r}static fromEndpoint(e,t){i.a.throwIfNull(e,"endpoint");const r=new h;return r.setProperty(o.a.SpeechServiceConnection_Endpoint,e.href),void 0!==t&&r.setProperty(o.a.SpeechServiceConnection_Key,t),r}static fromHost(e,t){i.a.throwIfNull(e,"hostName");const r=new h;return r.setProperty(o.a.SpeechServiceConnection_Host,e.protocol+"//"+e.hostname+(""===e.port?"":":"+e.port)),void 0!==t&&r.setProperty(o.a.SpeechServiceConnection_Key,t),r}static fromAuthorizationToken(e,t){i.a.throwIfNull(e,"authorizationToken"),i.a.throwIfNullOrWhitespace(t,"region");const r=new h;return r.setProperty(o.a.SpeechServiceConnection_Region,t),r.setProperty(o.a.SpeechServiceConnection_IntentRegion,t),r.authorizationToken=e,r}close(){}}class h extends p{constructor(){super(),this.privProperties=new s.a,this.speechRecognitionLanguage="en-US",this.outputFormat=a.a.Simple}get properties(){return this.privProperties}get endPoint(){return new URL(this.privProperties.getProperty(o.a.SpeechServiceConnection_Endpoint))}get subscriptionKey(){return this.privProperties.getProperty(o.a.SpeechServiceConnection_Key)}get region(){return this.privProperties.getProperty(o.a.SpeechServiceConnection_Region)}get authorizationToken(){return this.privProperties.getProperty(o.a.SpeechServiceAuthorization_Token)}set authorizationToken(e){this.privProperties.setProperty(o.a.SpeechServiceAuthorization_Token,e)}get speechRecognitionLanguage(){return this.privProperties.getProperty(o.a.SpeechServiceConnection_RecoLanguage)}set speechRecognitionLanguage(e){this.privProperties.setProperty(o.a.SpeechServiceConnection_RecoLanguage,e)}get autoDetectSourceLanguages(){return this.privProperties.getProperty(o.a.SpeechServiceConnection_AutoDetectSourceLanguages)}set autoDetectSourceLanguages(e){this.privProperties.setProperty(o.a.SpeechServiceConnection_AutoDetectSourceLanguages,e)}get outputFormat(){return a.a[this.privProperties.getProperty(n.OutputFormatPropertyName,void 0)]}set outputFormat(e){this.privProperties.setProperty(n.OutputFormatPropertyName,a.a[e])}get endpointId(){return this.privProperties.getProperty(o.a.SpeechServiceConnection_EndpointId)}set endpointId(e){this.privProperties.setProperty(o.a.SpeechServiceConnection_EndpointId,e)}setProperty(e,t){i.a.throwIfNull(t,"value"),this.privProperties.setProperty(e,t)}getProperty(e,t){return this.privProperties.getProperty(e,t)}setProxy(e,t,r,n){this.setProperty(o.a[o.a.SpeechServiceConnection_ProxyHostName],e),this.setProperty(o.a[o.a.SpeechServiceConnection_ProxyPort],t),this.setProperty(o.a[o.a.SpeechServiceConnection_ProxyUserName],r),this.setProperty(o.a[o.a.SpeechServiceConnection_ProxyPassword],n)}setServiceProperty(e,t){const r=JSON.parse(this.privProperties.getProperty(n.ServicePropertiesPropertyName,"{}"));r[e]=t,this.privProperties.setProperty(n.ServicePropertiesPropertyName,JSON.stringify(r))}setProfanity(e){this.privProperties.setProperty(o.a.SpeechServiceResponse_ProfanityOption,c.a[e])}enableAudioLogging(){this.privProperties.setProperty(o.a.SpeechServiceConnection_EnableAudioLogging,"true")}requestWordLevelTimestamps(){this.privProperties.setProperty(o.a.SpeechServiceResponse_RequestWordLevelTimestamps,"true")}enableDictation(){this.privProperties.setProperty(n.ForceDictationPropertyName,"true")}clone(){const e=new h;return e.privProperties=this.privProperties.clone(),e}get speechSynthesisLanguage(){return this.privProperties.getProperty(o.a.SpeechServiceConnection_SynthLanguage)}set speechSynthesisLanguage(e){this.privProperties.setProperty(o.a.SpeechServiceConnection_SynthLanguage,e)}get speechSynthesisVoiceName(){return this.privProperties.getProperty(o.a.SpeechServiceConnection_SynthVoice)}set speechSynthesisVoiceName(e){this.privProperties.setProperty(o.a.SpeechServiceConnection_SynthVoice,e)}get speechSynthesisOutputFormat(){return u.a[this.privProperties.getProperty(o.a.SpeechServiceConnection_SynthOutputFormat,void 0)]}set speechSynthesisOutputFormat(e){this.privProperties.setProperty(o.a.SpeechServiceConnection_SynthOutputFormat,u.a[e])}}},function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));class n{toJsonString(){return JSON.stringify(this.iPrivConfig)}get(){return this.iPrivConfig}set(e){this.iPrivConfig=e}}},function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var n=r(76);class i extends n.a{constructor(e,t,r){super(t,r),this.privResult=e}get result(){return this.privResult}}},function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var n=r(96);class i extends n.a{constructor(e,t){super(t),this.privResult=e}get result(){return this.privResult}}},function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));class n{constructor(e,t){this.privReason=e,this.privAudio=t}get audio(){return this.privAudio}get reason(){return this.privReason}}},function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));class n{constructor(e){this.privSpeechStartDetected=JSON.parse(e)}static fromJSON(e){return new n(e)}get Offset(){return this.privSpeechStartDetected.Offset}}},function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var n=r(20);class i{constructor(e){this.privDetailedSpeechPhrase=JSON.parse(e),this.privDetailedSpeechPhrase.RecognitionStatus=n.a[this.privDetailedSpeechPhrase.RecognitionStatus]}static fromJSON(e){return new i(e)}getJsonWithCorrectedOffsets(e){if(this.privDetailedSpeechPhrase.NBest){let t;for(const e of this.privDetailedSpeechPhrase.NBest)if(e.Words&&e.Words[0]){t=e.Words[0].Offset;break}if(t&&t<e){const r=e-t;for(const e of this.privDetailedSpeechPhrase.NBest)if(e.Words)for(const t of e.Words)t.Offset+=r}}return JSON.stringify(this.privDetailedSpeechPhrase)}get RecognitionStatus(){return this.privDetailedSpeechPhrase.RecognitionStatus}get NBest(){return this.privDetailedSpeechPhrase.NBest}get Duration(){return this.privDetailedSpeechPhrase.Duration}get Offset(){return this.privDetailedSpeechPhrase.Offset}get Language(){return void 0===this.privDetailedSpeechPhrase.PrimaryLanguage?void 0:this.privDetailedSpeechPhrase.PrimaryLanguage.Language}get LanguageDetectionConfidence(){return void 0===this.privDetailedSpeechPhrase.PrimaryLanguage?void 0:this.privDetailedSpeechPhrase.PrimaryLanguage.Confidence}get Text(){return this.privDetailedSpeechPhrase.NBest&&this.privDetailedSpeechPhrase.NBest[0]?this.privDetailedSpeechPhrase.NBest[0].Display||this.privDetailedSpeechPhrase.NBest[0].DisplayText:this.privDetailedSpeechPhrase.DisplayText}get SpeakerId(){return this.privDetailedSpeechPhrase.SpeakerId}}},function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));class n{constructor(e,t,r,n,i){this.privCancelReason=t,this.privErrorDetails=r,this.privResult=i,this.privSessionId=e,this.privErrorCode=n}get result(){return this.privResult}get sessionId(){return this.privSessionId}get reason(){return this.privCancelReason}get errorCode(){return this.privErrorCode}get errorDetails(){return this.privErrorDetails}}},function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));var n=r(15),i=r(77);class o{static setEventSource(e){if(!e)throw new n.a("eventSource");o.privInstance=e}static get instance(){return o.privInstance}}o.privInstance=new i.a},function(e,t,r){"use strict";var n;r.d(t,"a",(function(){return n})),function(e){e[e.None=0]="None",e[e.Connected=1]="Connected",e[e.Connecting=2]="Connecting",e[e.Disconnected=3]="Disconnected"}(n||(n={}))},function(e,t,r){(function(t){var n=r(199),i="undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{},o=i.Raven,s=new n;s.noConflict=function(){return i.Raven=o,s},s.afterLoad(),e.exports=s,e.exports.Client=n}).call(this,r(38))},function(e,t,r){"use strict";r.r(t),r.d(t,"AsyncSideEffectManager",(function(){return c})),r.d(t,"Disposable",(function(){return p})),r.d(t,"SideEffectManager",(function(){return s})),r.d(t,"genUID",(function(){return i})),r.d(t,"joinAsyncDisposers",(function(){return u})),r.d(t,"joinDisposers",(function(){return a}));const n=[],i=()=>{for(let e=0;e<20;e++)n[e]="!#%()*+,-./:;=?@[]^_`{|}~ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(87*Math.random());return n.join("")};function o(e){try{return e()}catch(e){}}class s{constructor(){this.push=this.addDisposer,this.disposers=new Map}addDisposer(e,t=this.genUID()){return this.flush(t),this.disposers.set(t,Array.isArray(e)?a(e):e),t}add(e,t=this.genUID()){const r=e();return r?this.addDisposer(r,t):t}addEventListener(e,t,r,n,i=this.genUID()){return e.addEventListener(t,r,n),this.addDisposer(()=>e.removeEventListener(t,r,n),i),i}setTimeout(e,t,r=this.genUID()){const n=window.setTimeout(()=>{this.remove(r),e()},t);return this.addDisposer(()=>window.clearTimeout(n),r)}setInterval(e,t,r=this.genUID()){const n=window.setInterval(e,t);return this.addDisposer(()=>window.clearInterval(n),r)}remove(e){const t=this.disposers.get(e);return this.disposers.delete(e),t}flush(e){const t=this.remove(e);t&&t()}flushAll(){this.disposers.forEach(o),this.disposers.clear()}genUID(){let e;do{e=i()}while(this.disposers.has(e));return e}}function a(e){return()=>e.forEach(o)}class c{constructor(){this.push=this.addDisposer,this.finished=Promise.resolve(),this.disposers=new Map,this._nextTask=new Map,this._isRunning=new Set}add(e,t=this.genUID()){return this._isRunning.has(t)?this._nextTask.set(t,()=>this._add(e,t)):this._add(e,t),t}async _add(e,t){this._startTask(t);const r=this.remove(t);if(r)try{await r()}catch(e){}try{const r=await e();r&&this.disposers.set(t,Array.isArray(r)?u(r):r)}catch(e){}this._endTask(t);const n=this._nextTask.get(t);n&&(this._nextTask.delete(t),n())}addDisposer(e,t=this.genUID()){return this.add(()=>e,t)}remove(e){const t=this.disposers.get(e);return this.disposers.delete(e),t}flush(e){this._isRunning.has(e)?this._nextTask.set(e,()=>this._flush(e)):this._flush(e)}async _flush(e){const t=this.remove(e);if(t){this._startTask(e);try{await t()}catch(e){}this._endTask(e)}const r=this._nextTask.get(e);r&&(this._nextTask.delete(e),r())}flushAll(){this.disposers.forEach((e,t)=>this.flush(t))}genUID(){let e;do{e=i()}while(this.disposers.has(e));return e}_startTask(e){this._isRunning.add(e),this._resolveFinished||(this.finished=new Promise(e=>{this._resolveFinished=e}))}_endTask(e){this._isRunning.delete(e),this._resolveFinished&&this._isRunning.size<=0&&this._nextTask.size<=0&&(this._resolveFinished(),this._resolveFinished=void 0)}}function u(e){return()=>Promise.all(e.map(o))}class p{constructor(){this.push=this.addDisposer,this.disposers=new Set}addDisposer(e){Array.isArray(e)?e.forEach(e=>{this.disposers.add(e)}):this.disposers.add(e)}add(e){const t=e();t&&this.push(t)}addEventListener(e,t,r,n){e.addEventListener(t,r,n);const i=()=>e.removeEventListener(t,r,n);return this.push(i),i}setTimeout(e,t){const r=window.setTimeout(()=>{this.remove(n),e()},t),n=()=>window.clearTimeout(r);return this.push(n),n}setInterval(e,t){const r=setInterval(e,t),n=()=>clearInterval(r);return this.push(n),n}remove(e){this.disposers.delete(e)}flush(e){this.remove(e),e()}flushAll(){this.disposers.forEach(o),this.disposers.clear()}}},,function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.testCookies=function(){if(!n.isExtEnv||i)return o();try{return browser.runtime.sendMessage({type:"CYTestCookies"})}catch(e){return null}},t.setupTestCookies=function(){i=!0,n.isExtEnv&&browser.runtime.onMessage.addListener((e,t)=>{if(e)switch(e.type){case"CYTestCookies":return o()}})};var n=r(26);let i=!1;async function o(){const e=await browser.cookies.get({url:"https://caiyunapp.com",name:"cy_user"});if(e&&e.value){try{return JSON.parse(decodeURIComponent(e.value).replace('}"',"}").replace('"{',"{"))||null}catch(e){}return null}}},,function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var n=r(5);class i{constructor(e){this.privContext={},this.privSpeechSynthesizer=e}setSection(e,t){this.privContext[e]=t}set audioOutputFormat(e){this.privAudioOutputFormat=e}toJSON(){const e=this.buildSynthesisContext();return this.setSection("synthesis",e),JSON.stringify(this.privContext)}buildSynthesisContext(){return{audio:{metadataOptions:{bookmarkEnabled:!!this.privSpeechSynthesizer.bookmarkReached,punctuationBoundaryEnabled:this.privSpeechSynthesizer.properties.getProperty(n.a.SpeechServiceResponse_RequestPunctuationBoundary,!!this.privSpeechSynthesizer.wordBoundary),sentenceBoundaryEnabled:this.privSpeechSynthesizer.properties.getProperty(n.a.SpeechServiceResponse_RequestSentenceBoundary,!1),sessionEndEnabled:!0,visemeEnabled:!!this.privSpeechSynthesizer.visemeReceived,wordBoundaryEnabled:this.privSpeechSynthesizer.properties.getProperty(n.a.SpeechServiceResponse_RequestWordBoundary,!!this.privSpeechSynthesizer.wordBoundary)},outputFormat:this.privAudioOutputFormat.requestAudioFormatString},language:{autoDetection:this.privSpeechSynthesizer.autoDetectSourceLanguage}}}}},function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));class n{constructor(e,t,r,n){this.privResultId=e,this.privReason=t,this.privErrorDetails=r,this.privProperties=n}get resultId(){return this.privResultId}get reason(){return this.privReason}get errorDetails(){return this.privErrorDetails}get properties(){return this.privProperties}}},function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));class n{constructor(e,t,r,n,i,o){this.privAudioOffset=e,this.privDuration=t,this.privText=r,this.privWordLength=n,this.privTextOffset=i,this.privBoundaryType=o}get audioOffset(){return this.privAudioOffset}get duration(){return this.privDuration}get text(){return this.privText}get wordLength(){return this.privWordLength}get textOffset(){return this.privTextOffset}get boundaryType(){return this.privBoundaryType}}},function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));class n{constructor(e,t){this.privAudioOffset=e,this.privText=t}get audioOffset(){return this.privAudioOffset}get text(){return this.privText}}},function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));class n{constructor(e,t,r){this.privAudioOffset=e,this.privVisemeId=t,this.privAnimation=r}get audioOffset(){return this.privAudioOffset}get visemeId(){return this.privVisemeId}get animation(){return this.privAnimation}}},function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));class n{constructor(e,t,r,n,i,o,s,a,c,u){this.privResultId=e,this.privReason=t,this.privText=r,this.privDuration=n,this.privOffset=i,this.privLanguage=o,this.privLanguageDetectionConfidence=s,this.privErrorDetails=a,this.privJson=c,this.privProperties=u}get resultId(){return this.privResultId}get reason(){return this.privReason}get text(){return this.privText}get duration(){return this.privDuration}get offset(){return this.privOffset}get language(){return this.privLanguage}get languageDetectionConfidence(){return this.privLanguageDetectionConfidence}get errorDetails(){return this.privErrorDetails}get json(){return this.privJson}get properties(){return this.privProperties}}},function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var n=r(92);class i extends n.a{}},function(e,t,r){"use strict";var n;r.d(t,"a",(function(){return n})),function(e){e[e.Masked=0]="Masked",e[e.Removed=1]="Removed",e[e.Raw=2]="Raw"}(n||(n={}))},function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));class n{addPhrase(e){this.privPhrases||(this.privPhrases=[]),e instanceof Array?this.privPhrases=this.privPhrases.concat(e):this.privPhrases.push(e)}clearPhrases(){this.privPhrases=void 0}addReferenceGrammar(e){this.privGrammars||(this.privGrammars=[]),e instanceof Array?this.privGrammars=this.privGrammars.concat(e):this.privGrammars.push(e)}clearGrammars(){this.privGrammars=void 0}generateGrammarObject(){if(void 0===this.privGrammars&&void 0===this.privPhrases)return;const e={};if(e.ReferenceGrammars=this.privGrammars,void 0!==this.privPhrases&&0!==this.privPhrases.length){const t=[];this.privPhrases.forEach(e=>{t.push({Text:e})}),e.Groups=[{Type:"Generic",Items:t}]}return e}}},function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));class n{constructor(e){this.privContext={},this.privDynamicGrammar=e}setSection(e,t){this.privContext[e]=t}setPronunciationAssessmentParams(e){void 0===this.privContext.phraseDetection&&(this.privContext.phraseDetection={enrichment:{pronunciationAssessment:{}}}),this.privContext.phraseDetection.enrichment.pronunciationAssessment=JSON.parse(e),this.setWordLevelTimings(),this.privContext.phraseOutput.detailed.options.push("PronunciationAssessment"),-1===this.privContext.phraseOutput.detailed.options.indexOf("SNR")&&this.privContext.phraseOutput.detailed.options.push("SNR")}setWordLevelTimings(){void 0===this.privContext.phraseOutput&&(this.privContext.phraseOutput={detailed:{options:[]},format:{}}),void 0===this.privContext.phraseOutput.detailed&&(this.privContext.phraseOutput.detailed={options:[]}),this.privContext.phraseOutput.format="Detailed",-1===this.privContext.phraseOutput.detailed.options.indexOf("WordTimings")&&this.privContext.phraseOutput.detailed.options.push("WordTimings")}toJSON(){const e=this.privDynamicGrammar.generateGrammarObject();return this.setSection("dgi",e),JSON.stringify(this.privContext)}}},function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));class n{constructor(e){this.privIntentResponse=""===e?{}:JSON.parse(e)}static fromJSON(e){return new n(e)}get query(){return this.privIntentResponse.query}get topScoringIntent(){return this.privIntentResponse.topScoringIntent}get entities(){return this.privIntentResponse.entities}}},function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var n=r(84);class i extends n.a{constructor(e,t,r,n,i,o){super(n,i,o),this.privReason=e,this.privErrorDetails=t,this.privErrorCode=r}get reason(){return this.privReason}get errorCode(){return this.privErrorCode}get errorDetails(){return this.privErrorDetails}}},function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var n=r(138);class i{constructor(e){this.privTranslationHypothesis=JSON.parse(e),this.privTranslationHypothesis.Translation.TranslationStatus=n.a[this.privTranslationHypothesis.Translation.TranslationStatus]}static fromJSON(e){return new i(e)}get Duration(){return this.privTranslationHypothesis.Duration}get Offset(){return this.privTranslationHypothesis.Offset}get Text(){return this.privTranslationHypothesis.Text}get Translation(){return this.privTranslationHypothesis.Translation}}},function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var n=r(20);class i{constructor(e){this.privSynthesisEnd=JSON.parse(e),this.privSynthesisEnd.SynthesisStatus=n.b[this.privSynthesisEnd.SynthesisStatus]}static fromJSON(e){return new i(e)}get SynthesisStatus(){return this.privSynthesisEnd.SynthesisStatus}get FailureReason(){return this.privSynthesisEnd.FailureReason}}},function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var n=r(39);class i{constructor(){this.privMap=new n.a}get languages(){return this.privMap.keys}get(e,t){return this.privMap.getProperty(e,t)}set(e,t){this.privMap.setProperty(e,t)}}},function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var n=r(92);class i extends n.a{}},function(e,t,r){"use strict";r.d(t,"a",(function(){return v}));var n=r(33),i=r(87),o=r(156),s=r(46),a=r(62),c=r(147),u=r(14);class p extends u.b{constructor(e,t,r=u.a.Info){super(e,r),this.privRequestId=t}get requestId(){return this.privRequestId}}class h extends p{constructor(e,t,r){super("SynthesisTriggeredEvent",e),this.privSessionAudioDestinationId=t,this.privTurnAudioDestinationId=r}get audioSessionDestinationId(){return this.privSessionAudioDestinationId}get audioTurnDestinationId(){return this.privTurnAudioDestinationId}}class d extends p{constructor(e,t){super("ConnectingToSynthesisServiceEvent",e),this.privAuthFetchEventId=t}get authFetchEventId(){return this.privAuthFetchEventId}}class l extends p{constructor(e,t){super("SynthesisStartedEvent",e),this.privAuthFetchEventId=t}get authFetchEventId(){return this.privAuthFetchEventId}}var f=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};class v{constructor(){this.privIsDisposed=!1,this.privIsSynthesizing=!1,this.privIsSynthesisEnded=!1,this.privBytesReceived=0,this.privInTurn=!1,this.privTextOffset=0,this.privNextSearchTextIndex=0,this.privSentenceOffset=0,this.privNextSearchSentenceIndex=0,this.privRequestId=Object(n.b)(),this.privTurnDeferral=new i.a,this.privTurnDeferral.resolve()}get requestId(){return this.privRequestId}get streamId(){return this.privStreamId}set streamId(e){this.privStreamId=e}get audioOutputFormat(){return this.privAudioOutputFormat}set audioOutputFormat(e){this.privAudioOutputFormat=e}get turnCompletionPromise(){return this.privTurnDeferral.promise}get isSynthesisEnded(){return this.privIsSynthesisEnded}get isSynthesizing(){return this.privIsSynthesizing}get currentTextOffset(){return this.privTextOffset}get currentSentenceOffset(){return this.privSentenceOffset}get bytesReceived(){return this.privBytesReceived}get audioDuration(){return this.privAudioDuration}getAllReceivedAudio(){return f(this,void 0,void 0,(function*(){return this.privReceivedAudio?Promise.resolve(this.privReceivedAudio):this.privIsSynthesisEnded?(yield this.readAllAudioFromStream(),Promise.resolve(this.privReceivedAudio)):null}))}getAllReceivedAudioWithHeader(){return f(this,void 0,void 0,(function*(){if(this.privReceivedAudioWithHeader)return this.privReceivedAudioWithHeader;if(!this.privIsSynthesisEnded)return null;if(this.audioOutputFormat.hasHeader){const e=yield this.getAllReceivedAudio();return this.privReceivedAudioWithHeader=c.a.addHeader(e,this.audioOutputFormat),this.privReceivedAudioWithHeader}return this.getAllReceivedAudio()}))}startNewSynthesis(e,t,r,n){this.privIsSynthesisEnded=!1,this.privIsSynthesizing=!0,this.privRequestId=e,this.privRawText=t,this.privIsSSML=r,this.privAudioOutputStream=new s.c,this.privAudioOutputStream.format=this.privAudioOutputFormat,this.privReceivedAudio=null,this.privReceivedAudioWithHeader=null,this.privBytesReceived=0,this.privTextOffset=0,this.privNextSearchTextIndex=0,this.privSentenceOffset=0,this.privNextSearchSentenceIndex=0,this.privPartialVisemeAnimation="",void 0!==n&&(this.privTurnAudioDestination=n,this.privTurnAudioDestination.format=this.privAudioOutputFormat),this.onEvent(new h(this.requestId,void 0,void 0===n?void 0:n.id()))}onPreConnectionStart(e){this.privAuthFetchEventId=e,this.onEvent(new d(this.privRequestId,this.privAuthFetchEventId))}onAuthCompleted(e){e&&this.onComplete()}onConnectionEstablishCompleted(e){if(200===e)return this.onEvent(new l(this.requestId,this.privAuthFetchEventId)),void(this.privBytesReceived=0);403===e&&this.onComplete()}onServiceResponseMessage(e){const t=JSON.parse(e);this.streamId=t.audio.streamId}onServiceTurnEndResponse(){this.privInTurn=!1,this.privTurnDeferral.resolve(),this.onComplete()}onServiceTurnStartResponse(){this.privTurnDeferral&&this.privInTurn&&(this.privTurnDeferral.reject("Another turn started before current completed."),this.privTurnDeferral.promise.then().catch(()=>{})),this.privInTurn=!0,this.privTurnDeferral=new i.a}onAudioChunkReceived(e){this.isSynthesizing&&(this.privAudioOutputStream.write(e),this.privBytesReceived+=e.byteLength,void 0!==this.privTurnAudioDestination&&this.privTurnAudioDestination.write(e))}onTextBoundaryEvent(e){this.updateTextOffset(e.Data.text.Text,e.Type)}onVisemeMetadataReceived(e){void 0!==e.Data.AnimationChunk&&(this.privPartialVisemeAnimation+=e.Data.AnimationChunk)}onSessionEnd(e){this.privAudioDuration=e.Data.Offset}dispose(){this.privIsDisposed||(this.privIsDisposed=!0)}onStopSynthesizing(){this.onComplete()}getAndClearVisemeAnimation(){const e=this.privPartialVisemeAnimation;return this.privPartialVisemeAnimation="",e}onEvent(e){o.a.instance.onEvent(e)}static isXmlTag(e){return e.length>=2&&"<"===e[0]&&">"===e[e.length-1]}updateTextOffset(e,t){t===a.a.WordBoundary?(this.privTextOffset=this.privRawText.indexOf(e,this.privNextSearchTextIndex),this.privTextOffset>=0&&(this.privNextSearchTextIndex=this.privTextOffset+e.length,this.privIsSSML&&this.withinXmlTag(this.privTextOffset)&&!v.isXmlTag(e)&&this.updateTextOffset(e,t))):(this.privSentenceOffset=this.privRawText.indexOf(e,this.privNextSearchSentenceIndex),this.privSentenceOffset>=0&&(this.privNextSearchSentenceIndex=this.privSentenceOffset+e.length,this.privIsSSML&&this.withinXmlTag(this.privSentenceOffset)&&!v.isXmlTag(e)&&this.updateTextOffset(e,t)))}onComplete(){this.privIsSynthesizing&&(this.privIsSynthesizing=!1,this.privIsSynthesisEnded=!0,this.privAudioOutputStream.close(),this.privInTurn=!1,void 0!==this.privTurnAudioDestination&&(this.privTurnAudioDestination.close(),this.privTurnAudioDestination=void 0))}readAllAudioFromStream(){return f(this,void 0,void 0,(function*(){if(this.privIsSynthesisEnded){this.privReceivedAudio=new ArrayBuffer(this.bytesReceived);try{yield this.privAudioOutputStream.read(this.privReceivedAudio)}catch(e){this.privReceivedAudio=new ArrayBuffer(0)}}}))}withinXmlTag(e){return this.privRawText.indexOf("<",e+1)>this.privRawText.indexOf(">",e+1)}}},function(e,t,r){"use strict";r.d(t,"a",(function(){return h}));var n=r(33),i=r(87),o=r(156),s=r(64),a=r(56),c=r(238);class u{constructor(e,t,r){this.privIsDisposed=!1,this.privListeningTriggerMetric=null,this.privMicMetric=null,this.privConnectionEstablishMetric=null,this.privRequestId=e,this.privAudioSourceId=t,this.privAudioNodeId=r,this.privReceivedMessages={},this.privPhraseLatencies=[],this.privHypothesisLatencies=[]}phraseReceived(e){e>0&&this.privPhraseLatencies.push(Date.now()-e)}hypothesisReceived(e){e>0&&this.privHypothesisLatencies.push(Date.now()-e)}onEvent(e){if(!this.privIsDisposed&&(e instanceof s.d&&e.requestId===this.privRequestId&&(this.privListeningTriggerMetric={End:e.eventTime,Name:"ListeningTrigger",Start:e.eventTime}),e instanceof a.f&&e.audioSourceId===this.privAudioSourceId&&e.audioNodeId===this.privAudioNodeId&&(this.privMicStartTime=e.eventTime),e instanceof a.e&&e.audioSourceId===this.privAudioSourceId&&e.audioNodeId===this.privAudioNodeId&&(this.privMicStartTime=e.eventTime),e instanceof a.a&&e.audioSourceId===this.privAudioSourceId&&(this.privMicMetric||(this.privMicMetric={End:e.eventTime,Error:e.error,Name:"Microphone",Start:this.privMicStartTime})),e instanceof a.h&&e.audioSourceId===this.privAudioSourceId&&e.audioNodeId===this.privAudioNodeId&&(this.privMicMetric||(this.privMicMetric={End:e.eventTime,Error:e.error,Name:"Microphone",Start:this.privMicStartTime})),e instanceof a.g&&e.audioSourceId===this.privAudioSourceId&&e.audioNodeId===this.privAudioNodeId&&(this.privMicMetric||(this.privMicMetric={End:e.eventTime,Name:"Microphone",Start:this.privMicStartTime})),e instanceof s.a&&e.requestId===this.privRequestId&&(this.privConnectionId=e.sessionId),e instanceof c.g&&e.connectionId===this.privConnectionId&&(this.privConnectionStartTime=e.eventTime),e instanceof c.d&&e.connectionId===this.privConnectionId&&(this.privConnectionEstablishMetric||(this.privConnectionEstablishMetric={End:e.eventTime,Id:this.privConnectionId,Name:"Connection",Start:this.privConnectionStartTime})),e instanceof c.c&&e.connectionId===this.privConnectionId&&(this.privConnectionEstablishMetric||(this.privConnectionEstablishMetric={End:e.eventTime,Error:this.getConnectionError(e.statusCode),Id:this.privConnectionId,Name:"Connection",Start:this.privConnectionStartTime})),e instanceof c.e&&e.connectionId===this.privConnectionId&&e.message&&e.message.headers&&e.message.headers.path)){this.privReceivedMessages[e.message.headers.path]||(this.privReceivedMessages[e.message.headers.path]=new Array);const t=50;this.privReceivedMessages[e.message.headers.path].length<t&&this.privReceivedMessages[e.message.headers.path].push(e.networkReceivedTime)}}getTelemetry(){const e=new Array;this.privListeningTriggerMetric&&e.push(this.privListeningTriggerMetric),this.privMicMetric&&e.push(this.privMicMetric),this.privConnectionEstablishMetric&&e.push(this.privConnectionEstablishMetric),this.privPhraseLatencies.length>0&&e.push({PhraseLatencyMs:this.privPhraseLatencies}),this.privHypothesisLatencies.length>0&&e.push({FirstHypothesisLatencyMs:this.privHypothesisLatencies});const t={Metrics:e,ReceivedMessages:this.privReceivedMessages},r=JSON.stringify(t);return this.privReceivedMessages={},this.privListeningTriggerMetric=null,this.privMicMetric=null,this.privConnectionEstablishMetric=null,this.privPhraseLatencies=[],this.privHypothesisLatencies=[],r}get hasTelemetry(){return 0!==Object.keys(this.privReceivedMessages).length||null!==this.privListeningTriggerMetric||null!==this.privMicMetric||null!==this.privConnectionEstablishMetric||0!==this.privPhraseLatencies.length||0!==this.privHypothesisLatencies.length}dispose(){this.privIsDisposed=!0}getConnectionError(e){switch(e){case 400:case 1002:case 1003:case 1005:case 1007:case 1008:case 1009:return"BadRequest";case 401:return"Unauthorized";case 403:return"Forbidden";case 503:case 1001:return"ServerUnavailable";case 500:case 1011:return"ServerError";case 408:case 504:return"Timeout";default:return"statuscode:"+e.toString()}}}var p=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};class h{constructor(e){this.privIsDisposed=!1,this.privDetachables=new Array,this.privIsAudioNodeDetached=!1,this.privIsRecognizing=!1,this.privIsSpeechEnded=!1,this.privTurnStartAudioOffset=0,this.privLastRecoOffset=0,this.privHypothesisReceived=!1,this.privBytesSent=0,this.privRecogNumber=0,this.privInTurn=!1,this.privConnectionAttempts=0,this.privAudioSourceId=e,this.privRequestId=Object(n.b)(),this.privAudioNodeId=Object(n.b)(),this.privTurnDeferral=new i.a,this.privTurnDeferral.resolve()}get sessionId(){return this.privSessionId}get requestId(){return this.privRequestId}get audioNodeId(){return this.privAudioNodeId}get turnCompletionPromise(){return this.privTurnDeferral.promise}get isSpeechEnded(){return this.privIsSpeechEnded}get isRecognizing(){return this.privIsRecognizing}get currentTurnAudioOffset(){return this.privTurnStartAudioOffset}get recogNumber(){return this.privRecogNumber}get numConnectionAttempts(){return this.privConnectionAttempts}get bytesSent(){return this.privBytesSent}listenForServiceTelemetry(e){this.privServiceTelemetryListener&&this.privDetachables.push(e.attachListener(this.privServiceTelemetryListener))}startNewRecognition(){this.privIsSpeechEnded=!1,this.privIsRecognizing=!0,this.privTurnStartAudioOffset=0,this.privLastRecoOffset=0,this.privRecogNumber++,this.privServiceTelemetryListener=new u(this.privRequestId,this.privAudioSourceId,this.privAudioNodeId),this.onEvent(new s.d(this.requestId,this.privSessionId,this.privAudioSourceId,this.privAudioNodeId))}onAudioSourceAttachCompleted(e,t){return p(this,void 0,void 0,(function*(){this.privAudioNode=e,this.privIsAudioNodeDetached=!1,t?yield this.onComplete():this.onEvent(new s.b(this.privRequestId,this.privSessionId,this.privAudioSourceId,this.privAudioNodeId))}))}onPreConnectionStart(e,t){this.privAuthFetchEventId=e,this.privSessionId=t,this.onEvent(new s.a(this.privRequestId,this.privAuthFetchEventId,this.privSessionId))}onAuthCompleted(e){return p(this,void 0,void 0,(function*(){e&&(yield this.onComplete())}))}onConnectionEstablishCompleted(e,t){return p(this,void 0,void 0,(function*(){if(200===e)return this.onEvent(new s.c(this.requestId,this.privAudioSourceId,this.privAudioNodeId,this.privAuthFetchEventId,this.privSessionId)),this.privAudioNode&&this.privAudioNode.replay(),this.privTurnStartAudioOffset=this.privLastRecoOffset,void(this.privBytesSent=0);403===e&&(yield this.onComplete())}))}onServiceTurnEndResponse(e){return p(this,void 0,void 0,(function*(){this.privTurnDeferral.resolve(),!e||this.isSpeechEnded?(yield this.onComplete(),this.privInTurn=!1):(this.privTurnStartAudioOffset=this.privLastRecoOffset,this.privAudioNode.replay())}))}onSpeechContext(){this.privRequestId=Object(n.b)()}onServiceTurnStartResponse(){this.privTurnDeferral&&this.privInTurn&&(this.privTurnDeferral.reject("Another turn started before current completed."),this.privTurnDeferral.promise.then().catch(()=>{})),this.privInTurn=!0,this.privTurnDeferral=new i.a}onHypothesis(e){this.privHypothesisReceived||(this.privHypothesisReceived=!0,this.privServiceTelemetryListener.hypothesisReceived(this.privAudioNode.findTimeAtOffset(e)))}onPhraseRecognized(e){this.privServiceTelemetryListener.phraseReceived(this.privAudioNode.findTimeAtOffset(e)),this.onServiceRecognized(e)}onServiceRecognized(e){this.privLastRecoOffset=e,this.privHypothesisReceived=!1,this.privAudioNode.shrinkBuffers(e),this.privConnectionAttempts=0}onAudioSent(e){this.privBytesSent+=e}onRetryConnection(){this.privConnectionAttempts++}dispose(){return p(this,void 0,void 0,(function*(){if(!this.privIsDisposed){this.privIsDisposed=!0;for(const e of this.privDetachables)yield e.detach();this.privServiceTelemetryListener&&this.privServiceTelemetryListener.dispose(),this.privIsRecognizing=!1}}))}getTelemetry(){return this.privServiceTelemetryListener.hasTelemetry?this.privServiceTelemetryListener.getTelemetry():null}onStopRecognizing(){return p(this,void 0,void 0,(function*(){yield this.onComplete()}))}onSpeechEnded(){this.privIsSpeechEnded=!0}onEvent(e){this.privServiceTelemetryListener&&this.privServiceTelemetryListener.onEvent(e),o.a.instance.onEvent(e)}onComplete(){return p(this,void 0,void 0,(function*(){this.privIsRecognizing&&(this.privIsRecognizing=!1,yield this.detachAudioNode())}))}detachAudioNode(){return p(this,void 0,void 0,(function*(){this.privIsAudioNodeDetached||(this.privIsAudioNodeDetached=!0,this.privAudioNode&&(yield this.privAudioNode.detach()))}))}}},function(e,t){},,function(e,t,r){"use strict";r.d(t,"a",(function(){return c}));var n=r(15);class i{constructor(e){if(this.privSubscriptionIdCounter=0,this.privAddSubscriptions={},this.privRemoveSubscriptions={},this.privDisposedSubscriptions={},this.privDisposeReason=null,this.privList=[],e)for(const t of e)this.privList.push(t)}get(e){return this.throwIfDisposed(),this.privList[e]}first(){return this.get(0)}last(){return this.get(this.length()-1)}add(e){this.throwIfDisposed(),this.insertAt(this.privList.length,e)}insertAt(e,t){this.throwIfDisposed(),0===e?this.privList.unshift(t):e===this.privList.length?this.privList.push(t):this.privList.splice(e,0,t),this.triggerSubscriptions(this.privAddSubscriptions)}removeFirst(){return this.throwIfDisposed(),this.removeAt(0)}removeLast(){return this.throwIfDisposed(),this.removeAt(this.length()-1)}removeAt(e){return this.throwIfDisposed(),this.remove(e,1)[0]}remove(e,t){this.throwIfDisposed();const r=this.privList.splice(e,t);return this.triggerSubscriptions(this.privRemoveSubscriptions),r}clear(){this.throwIfDisposed(),this.remove(0,this.length())}length(){return this.throwIfDisposed(),this.privList.length}onAdded(e){this.throwIfDisposed();const t=this.privSubscriptionIdCounter++;return this.privAddSubscriptions[t]=e,{detach:()=>(delete this.privAddSubscriptions[t],Promise.resolve())}}onRemoved(e){this.throwIfDisposed();const t=this.privSubscriptionIdCounter++;return this.privRemoveSubscriptions[t]=e,{detach:()=>(delete this.privRemoveSubscriptions[t],Promise.resolve())}}onDisposed(e){this.throwIfDisposed();const t=this.privSubscriptionIdCounter++;return this.privDisposedSubscriptions[t]=e,{detach:()=>(delete this.privDisposedSubscriptions[t],Promise.resolve())}}join(e){return this.throwIfDisposed(),this.privList.join(e)}toArray(){const e=Array();return this.privList.forEach(t=>{e.push(t)}),e}any(e){return this.throwIfDisposed(),e?this.where(e).length()>0:this.length()>0}all(e){return this.throwIfDisposed(),this.where(e).length()===this.length()}forEach(e){this.throwIfDisposed();for(let t=0;t<this.length();t++)e(this.privList[t],t)}select(e){this.throwIfDisposed();const t=[];for(let r=0;r<this.privList.length;r++)t.push(e(this.privList[r],r));return new i(t)}where(e){this.throwIfDisposed();const t=new i;for(let r=0;r<this.privList.length;r++)e(this.privList[r],r)&&t.add(this.privList[r]);return t}orderBy(e){this.throwIfDisposed();const t=this.toArray().sort(e);return new i(t)}orderByDesc(e){return this.throwIfDisposed(),this.orderBy((t,r)=>e(r,t))}clone(){return this.throwIfDisposed(),new i(this.toArray())}concat(e){return this.throwIfDisposed(),new i(this.privList.concat(e.toArray()))}concatArray(e){return this.throwIfDisposed(),new i(this.privList.concat(e))}isDisposed(){return null==this.privList}dispose(e){this.isDisposed()||(this.privDisposeReason=e,this.privList=null,this.privAddSubscriptions=null,this.privRemoveSubscriptions=null,this.triggerSubscriptions(this.privDisposedSubscriptions))}throwIfDisposed(){if(this.isDisposed())throw new n.c("List",this.privDisposeReason)}triggerSubscriptions(e){if(e)for(const t in e)t&&e[t]()}}var o,s=r(87),a=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};!function(e){e[e.Dequeue=0]="Dequeue",e[e.Peek=1]="Peek"}(o||(o={}));class c{constructor(e){this.privPromiseStore=new i,this.privIsDrainInProgress=!1,this.privIsDisposing=!1,this.privDisposeReason=null,this.privList=e||new i,this.privDetachables=[],this.privSubscribers=new i,this.privDetachables.push(this.privList.onAdded(()=>this.drain()))}enqueue(e){this.throwIfDispose(),this.enqueueFromPromise(new Promise(t=>t(e)))}enqueueFromPromise(e){this.throwIfDispose(),e.then(e=>{this.privList.add(e)},()=>{})}dequeue(){this.throwIfDispose();const e=new s.a;return this.privSubscribers&&(this.privSubscribers.add({deferral:e,type:o.Dequeue}),this.drain()),e.promise}peek(){this.throwIfDispose();const e=new s.a;return this.privSubscribers&&(this.privSubscribers.add({deferral:e,type:o.Peek}),this.drain()),e.promise}length(){return this.throwIfDispose(),this.privList.length()}isDisposed(){return null==this.privSubscribers}drainAndDispose(e,t){return a(this,void 0,void 0,(function*(){if(!this.isDisposed()&&!this.privIsDisposing){this.privDisposeReason=t,this.privIsDisposing=!0;const r=this.privSubscribers;if(r){for(;r.length()>0;)r.removeFirst().deferral.resolve(void 0);this.privSubscribers===r&&(this.privSubscribers=r)}for(const e of this.privDetachables)yield e.detach();if(this.privPromiseStore.length()>0&&e){const t=[];return this.privPromiseStore.toArray().forEach(e=>{t.push(e)}),Promise.all(t).finally(()=>{this.privSubscribers=null,this.privList.forEach(t=>{e(t)}),this.privList=null}).then()}this.privSubscribers=null,this.privList=null}}))}dispose(e){return a(this,void 0,void 0,(function*(){yield this.drainAndDispose(null,e)}))}drain(){if(!this.privIsDrainInProgress&&!this.privIsDisposing){this.privIsDrainInProgress=!0;const e=this.privSubscribers,t=this.privList;if(e&&t){for(;t.length()>0&&e.length()>0&&!this.privIsDisposing;){const r=e.removeFirst();if(r.type===o.Peek)r.deferral.resolve(t.first());else{const e=t.removeFirst();r.deferral.resolve(e)}}this.privSubscribers===e&&(this.privSubscribers=e),this.privList===t&&(this.privList=t)}this.privIsDrainInProgress=!1}}throwIfDispose(){if(this.isDisposed()){if(this.privDisposeReason)throw new n.b(this.privDisposeReason);throw new n.c("Queue")}if(this.privIsDisposing)throw new n.b("Queue disposing")}}},,,,,,,,,,,,,,,function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.cyxyFetch=function(e={}){return o.isExtEnv&&!window.IsCyxyFetchStation?browser.runtime.sendMessage({type:"CYXY_FETCH",config:e}):s(e)},t.setupCyxyFetch=function(){window.IsCyxyFetchStation=!0;const e=e=>{if(e&&"CYXY_FETCH"===e.type)return s(e.config)};return browser.runtime.onMessage.addListener(e),()=>browser.runtime.onMessage.removeListener(e)};var n,i=(n=r(158))&&n.__esModule?n:{default:n},o=r(26);async function s(e={}){const t={method:e.method||"POST",credentials:"include",headers:Object.assign({"Content-Type":"application/json"},e.headers||{})};if(e.data)try{t.body=JSON.stringify(e.data)}catch(e){}try{const r=await fetch(e.url,t);return{ok:r.ok,redirected:r.redirected,status:r.status,statusText:r.statusText,type:r.type,url:r.url,data:await r.json()}}catch(e){return i.default.captureException(e),{error:e}}}},function(e,t,r){(function(t){var n=r(200),i=r(144),o=r(201),s=r(202),a=r(111),c=a.isErrorEvent,u=a.isDOMError,p=a.isDOMException,h=a.isError,d=a.isObject,l=a.isPlainObject,f=a.isUndefined,v=a.isFunction,g=a.isString,m=a.isArray,y=a.isEmptyObject,S=a.each,w=a.objectMerge,b=a.truncate,C=a.objectFrozen,R=a.hasKey,P=a.joinRegExp,I=a.urlencode,E=a.uuid4,_=a.htmlTreeAsString,T=a.isSameException,A=a.isSameStacktrace,O=a.parseUrl,x=a.fill,k=a.supportsFetch,D=a.supportsReferrerPolicy,M=a.serializeKeysForMessage,L=a.serializeException,N=a.sanitize,z=r(203).wrapMethod,B="source protocol user pass host port path".split(" "),j=/^(?:(\w+):)?\/\/(?:(\w+)(:\w+)?@)?([\w\.-]+)(?::(\d+))?(\/.*)/;function U(){return+new Date}var F="undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{},q=F.document,W=F.navigator;function H(e,t){return v(t)?function(r){return t(r,e)}:t}function K(){for(var e in this._hasJSON=!("object"!=typeof JSON||!JSON.stringify),this._hasDocument=!f(q),this._hasNavigator=!f(W),this._lastCapturedException=null,this._lastData=null,this._lastEventId=null,this._globalServer=null,this._globalKey=null,this._globalProject=null,this._globalContext={},this._globalOptions={release:F.SENTRY_RELEASE&&F.SENTRY_RELEASE.id,logger:"javascript",ignoreErrors:[],ignoreUrls:[],whitelistUrls:[],includePaths:[],headers:null,collectWindowErrors:!0,captureUnhandledRejections:!0,maxMessageLength:0,maxUrlLength:250,stackTraceLimit:50,autoBreadcrumbs:!0,instrument:!0,sampleRate:1,sanitizeKeys:[]},this._fetchDefaults={method:"POST",referrerPolicy:D()?"origin":""},this._ignoreOnError=0,this._isRavenInstalled=!1,this._originalErrorStackTraceLimit=Error.stackTraceLimit,this._originalConsole=F.console||{},this._originalConsoleMethods={},this._plugins=[],this._startTime=U(),this._wrappedBuiltIns=[],this._breadcrumbs=[],this._lastCapturedEvent=null,this._keypressTimeout,this._location=F.location,this._lastHref=this._location&&this._location.href,this._resetBackoff(),this._originalConsole)this._originalConsoleMethods[e]=this._originalConsole[e]}K.prototype={VERSION:"3.27.2",debug:!1,TraceKit:n,config:function(e,t){var r=this;if(r._globalServer)return this._logDebug("error","Error: Raven has already been configured"),r;if(!e)return r;var i=r._globalOptions;t&&S(t,(function(e,t){"tags"===e||"extra"===e||"user"===e?r._globalContext[e]=t:i[e]=t})),r.setDSN(e),i.ignoreErrors.push(/^Script error\.?$/),i.ignoreErrors.push(/^Javascript error: Script error\.? on line 0$/),i.ignoreErrors=P(i.ignoreErrors),i.ignoreUrls=!!i.ignoreUrls.length&&P(i.ignoreUrls),i.whitelistUrls=!!i.whitelistUrls.length&&P(i.whitelistUrls),i.includePaths=P(i.includePaths),i.maxBreadcrumbs=Math.max(0,Math.min(i.maxBreadcrumbs||100,100));var o={xhr:!0,console:!0,dom:!0,location:!0,sentry:!0},s=i.autoBreadcrumbs;"[object Object]"==={}.toString.call(s)?s=w(o,s):!1!==s&&(s=o),i.autoBreadcrumbs=s;var a={tryCatch:!0},c=i.instrument;return"[object Object]"==={}.toString.call(c)?c=w(a,c):!1!==c&&(c=a),i.instrument=c,n.collectWindowErrors=!!i.collectWindowErrors,r},install:function(){var e=this;return e.isSetup()&&!e._isRavenInstalled&&(n.report.subscribe((function(){e._handleOnErrorStackInfo.apply(e,arguments)})),e._globalOptions.captureUnhandledRejections&&e._attachPromiseRejectionHandler(),e._patchFunctionToString(),e._globalOptions.instrument&&e._globalOptions.instrument.tryCatch&&e._instrumentTryCatch(),e._globalOptions.autoBreadcrumbs&&e._instrumentBreadcrumbs(),e._drainPlugins(),e._isRavenInstalled=!0),Error.stackTraceLimit=e._globalOptions.stackTraceLimit,this},setDSN:function(e){var t=this._parseDSN(e),r=t.path.lastIndexOf("/"),n=t.path.substr(1,r);this._dsn=e,this._globalKey=t.user,this._globalSecret=t.pass&&t.pass.substr(1),this._globalProject=t.path.substr(r+1),this._globalServer=this._getGlobalServer(t),this._globalEndpoint=this._globalServer+"/"+n+"api/"+this._globalProject+"/store/",this._resetBackoff()},context:function(e,t,r){return v(e)&&(r=t||[],t=e,e={}),this.wrap(e,t).apply(this,r)},wrap:function(e,t,r){var n=this;if(f(t)&&!v(e))return e;if(v(e)&&(t=e,e=void 0),!v(t))return t;try{if(t.__raven__)return t;if(t.__raven_wrapper__)return t.__raven_wrapper__}catch(e){return t}function i(){var i=[],o=arguments.length,s=!e||e&&!1!==e.deep;for(r&&v(r)&&r.apply(this,arguments);o--;)i[o]=s?n.wrap(e,arguments[o]):arguments[o];try{return t.apply(this,i)}catch(t){throw n._ignoreNextOnError(),n.captureException(t,e),t}}for(var o in t)R(t,o)&&(i[o]=t[o]);return i.prototype=t.prototype,t.__raven_wrapper__=i,i.__raven__=!0,i.__orig__=t,i},uninstall:function(){return n.report.uninstall(),this._detachPromiseRejectionHandler(),this._unpatchFunctionToString(),this._restoreBuiltIns(),this._restoreConsole(),Error.stackTraceLimit=this._originalErrorStackTraceLimit,this._isRavenInstalled=!1,this},_promiseRejectionHandler:function(e){this._logDebug("debug","Raven caught unhandled promise rejection:",e),this.captureException(e.reason,{mechanism:{type:"onunhandledrejection",handled:!1}})},_attachPromiseRejectionHandler:function(){return this._promiseRejectionHandler=this._promiseRejectionHandler.bind(this),F.addEventListener&&F.addEventListener("unhandledrejection",this._promiseRejectionHandler),this},_detachPromiseRejectionHandler:function(){return F.removeEventListener&&F.removeEventListener("unhandledrejection",this._promiseRejectionHandler),this},captureException:function(e,t){if(t=w({trimHeadFrames:0},t||{}),c(e)&&e.error)e=e.error;else{if(u(e)||p(e)){var r=e.name||(u(e)?"DOMError":"DOMException"),i=e.message?r+": "+e.message:r;return this.captureMessage(i,w(t,{stacktrace:!0,trimHeadFrames:t.trimHeadFrames+1}))}if(h(e))e=e;else{if(!l(e))return this.captureMessage(e,w(t,{stacktrace:!0,trimHeadFrames:t.trimHeadFrames+1}));t=this._getCaptureExceptionOptionsFromPlainObject(t,e),e=new Error(t.message)}}this._lastCapturedException=e;try{var o=n.computeStackTrace(e);this._handleStackInfo(o,t)}catch(t){if(e!==t)throw t}return this},_getCaptureExceptionOptionsFromPlainObject:function(e,t){var r=Object.keys(t).sort(),n=w(e,{message:"Non-Error exception captured with keys: "+M(r),fingerprint:[o(r)],extra:e.extra||{}});return n.extra.__serialized__=L(t),n},captureMessage:function(e,t){if(!this._globalOptions.ignoreErrors.test||!this._globalOptions.ignoreErrors.test(e)){var r,i=w({message:e+=""},t=t||{});try{throw new Error(e)}catch(e){r=e}r.name=null;var o=n.computeStackTrace(r),s=m(o.stack)&&o.stack[1];s&&"Raven.captureException"===s.func&&(s=o.stack[2]);var a=s&&s.url||"";if((!this._globalOptions.ignoreUrls.test||!this._globalOptions.ignoreUrls.test(a))&&(!this._globalOptions.whitelistUrls.test||this._globalOptions.whitelistUrls.test(a))){if(this._globalOptions.stacktrace||t.stacktrace||""===i.message){i.fingerprint=null==i.fingerprint?e:i.fingerprint,(t=w({trimHeadFrames:0},t)).trimHeadFrames+=1;var c=this._prepareFrames(o,t);i.stacktrace={frames:c.reverse()}}return i.fingerprint&&(i.fingerprint=m(i.fingerprint)?i.fingerprint:[i.fingerprint]),this._send(i),this}}},captureBreadcrumb:function(e){var t=w({timestamp:U()/1e3},e);if(v(this._globalOptions.breadcrumbCallback)){var r=this._globalOptions.breadcrumbCallback(t);if(d(r)&&!y(r))t=r;else if(!1===r)return this}return this._breadcrumbs.push(t),this._breadcrumbs.length>this._globalOptions.maxBreadcrumbs&&this._breadcrumbs.shift(),this},addPlugin:function(e){var t=[].slice.call(arguments,1);return this._plugins.push([e,t]),this._isRavenInstalled&&this._drainPlugins(),this},setUserContext:function(e){return this._globalContext.user=e,this},setExtraContext:function(e){return this._mergeContext("extra",e),this},setTagsContext:function(e){return this._mergeContext("tags",e),this},clearContext:function(){return this._globalContext={},this},getContext:function(){return JSON.parse(i(this._globalContext))},setEnvironment:function(e){return this._globalOptions.environment=e,this},setRelease:function(e){return this._globalOptions.release=e,this},setDataCallback:function(e){var t=this._globalOptions.dataCallback;return this._globalOptions.dataCallback=H(t,e),this},setBreadcrumbCallback:function(e){var t=this._globalOptions.breadcrumbCallback;return this._globalOptions.breadcrumbCallback=H(t,e),this},setShouldSendCallback:function(e){var t=this._globalOptions.shouldSendCallback;return this._globalOptions.shouldSendCallback=H(t,e),this},setTransport:function(e){return this._globalOptions.transport=e,this},lastException:function(){return this._lastCapturedException},lastEventId:function(){return this._lastEventId},isSetup:function(){return!(!this._hasJSON||!this._globalServer&&(this.ravenNotConfiguredError||(this.ravenNotConfiguredError=!0,this._logDebug("error","Error: Raven has not been configured.")),1))},afterLoad:function(){var e=F.RavenConfig;e&&this.config(e.dsn,e.config).install()},showReportDialog:function(e){if(q){if(!(e=w({eventId:this.lastEventId(),dsn:this._dsn,user:this._globalContext.user||{}},e)).eventId)throw new s("Missing eventId");if(!e.dsn)throw new s("Missing DSN");var t=encodeURIComponent,r=[];for(var n in e)if("user"===n){var i=e.user;i.name&&r.push("name="+t(i.name)),i.email&&r.push("email="+t(i.email))}else r.push(t(n)+"="+t(e[n]));var o=this._getGlobalServer(this._parseDSN(e.dsn)),a=q.createElement("script");a.async=!0,a.src=o+"/api/embed/error-page/?"+r.join("&"),(q.head||q.body).appendChild(a)}},_ignoreNextOnError:function(){var e=this;this._ignoreOnError+=1,setTimeout((function(){e._ignoreOnError-=1}))},_triggerEvent:function(e,t){var r,n;if(this._hasDocument){for(n in t=t||{},e="raven"+e.substr(0,1).toUpperCase()+e.substr(1),q.createEvent?(r=q.createEvent("HTMLEvents")).initEvent(e,!0,!0):(r=q.createEventObject()).eventType=e,t)R(t,n)&&(r[n]=t[n]);if(q.createEvent)q.dispatchEvent(r);else try{q.fireEvent("on"+r.eventType.toLowerCase(),r)}catch(e){}}},_breadcrumbEventHandler:function(e){var t=this;return function(r){if(t._keypressTimeout=null,t._lastCapturedEvent!==r){var n;t._lastCapturedEvent=r;try{n=_(r.target)}catch(e){n="<unknown>"}t.captureBreadcrumb({category:"ui."+e,message:n})}}},_keypressEventHandler:function(){var e=this;return function(t){var r;try{r=t.target}catch(e){return}var n=r&&r.tagName;if(n&&("INPUT"===n||"TEXTAREA"===n||r.isContentEditable)){var i=e._keypressTimeout;i||e._breadcrumbEventHandler("input")(t),clearTimeout(i),e._keypressTimeout=setTimeout((function(){e._keypressTimeout=null}),1e3)}}},_captureUrlChange:function(e,t){var r=O(this._location.href),n=O(t),i=O(e);this._lastHref=t,r.protocol===n.protocol&&r.host===n.host&&(t=n.relative),r.protocol===i.protocol&&r.host===i.host&&(e=i.relative),this.captureBreadcrumb({category:"navigation",data:{to:t,from:e}})},_patchFunctionToString:function(){var e=this;e._originalFunctionToString=Function.prototype.toString,Function.prototype.toString=function(){return"function"==typeof this&&this.__raven__?e._originalFunctionToString.apply(this.__orig__,arguments):e._originalFunctionToString.apply(this,arguments)}},_unpatchFunctionToString:function(){this._originalFunctionToString&&(Function.prototype.toString=this._originalFunctionToString)},_instrumentTryCatch:function(){var e=this,t=e._wrappedBuiltIns;function r(t){return function(r,n){for(var i=new Array(arguments.length),o=0;o<i.length;++o)i[o]=arguments[o];var s=i[0];return v(s)&&(i[0]=e.wrap({mechanism:{type:"instrument",data:{function:t.name||"<anonymous>"}}},s)),t.apply?t.apply(this,i):t(i[0],i[1])}}var n=this._globalOptions.autoBreadcrumbs;function i(r){var i=F[r]&&F[r].prototype;i&&i.hasOwnProperty&&i.hasOwnProperty("addEventListener")&&(x(i,"addEventListener",(function(t){return function(i,o,s,a){try{o&&o.handleEvent&&(o.handleEvent=e.wrap({mechanism:{type:"instrument",data:{target:r,function:"handleEvent",handler:o&&o.name||"<anonymous>"}}},o.handleEvent))}catch(e){}var c,u,p;return n&&n.dom&&("EventTarget"===r||"Node"===r)&&(u=e._breadcrumbEventHandler("click"),p=e._keypressEventHandler(),c=function(e){if(e){var t;try{t=e.type}catch(e){return}return"click"===t?u(e):"keypress"===t?p(e):void 0}}),t.call(this,i,e.wrap({mechanism:{type:"instrument",data:{target:r,function:"addEventListener",handler:o&&o.name||"<anonymous>"}}},o,c),s,a)}}),t),x(i,"removeEventListener",(function(e){return function(t,r,n,i){try{r=r&&(r.__raven_wrapper__?r.__raven_wrapper__:r)}catch(e){}return e.call(this,t,r,n,i)}}),t))}x(F,"setTimeout",r,t),x(F,"setInterval",r,t),F.requestAnimationFrame&&x(F,"requestAnimationFrame",(function(t){return function(r){return t(e.wrap({mechanism:{type:"instrument",data:{function:"requestAnimationFrame",handler:t&&t.name||"<anonymous>"}}},r))}}),t);for(var o=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],s=0;s<o.length;s++)i(o[s])},_instrumentBreadcrumbs:function(){var e=this,t=this._globalOptions.autoBreadcrumbs,r=e._wrappedBuiltIns;function n(t,r){t in r&&v(r[t])&&x(r,t,(function(r){return e.wrap({mechanism:{type:"instrument",data:{function:t,handler:r&&r.name||"<anonymous>"}}},r)}))}if(t.xhr&&"XMLHttpRequest"in F){var i=F.XMLHttpRequest&&F.XMLHttpRequest.prototype;x(i,"open",(function(t){return function(r,n){return g(n)&&-1===n.indexOf(e._globalKey)&&(this.__raven_xhr={method:r,url:n,status_code:null}),t.apply(this,arguments)}}),r),x(i,"send",(function(t){return function(){var r=this;function i(){if(r.__raven_xhr&&4===r.readyState){try{r.__raven_xhr.status_code=r.status}catch(e){}e.captureBreadcrumb({type:"http",category:"xhr",data:r.__raven_xhr})}}for(var o=["onload","onerror","onprogress"],s=0;s<o.length;s++)n(o[s],r);return"onreadystatechange"in r&&v(r.onreadystatechange)?x(r,"onreadystatechange",(function(t){return e.wrap({mechanism:{type:"instrument",data:{function:"onreadystatechange",handler:t&&t.name||"<anonymous>"}}},t,i)})):r.onreadystatechange=i,t.apply(this,arguments)}}),r)}t.xhr&&k()&&x(F,"fetch",(function(t){return function(){for(var r=new Array(arguments.length),n=0;n<r.length;++n)r[n]=arguments[n];var i,o=r[0],s="GET";if("string"==typeof o?i=o:"Request"in F&&o instanceof F.Request?(i=o.url,o.method&&(s=o.method)):i=""+o,-1!==i.indexOf(e._globalKey))return t.apply(this,r);r[1]&&r[1].method&&(s=r[1].method);var a={method:s,url:i,status_code:null};return t.apply(this,r).then((function(t){return a.status_code=t.status,e.captureBreadcrumb({type:"http",category:"fetch",data:a}),t})).catch((function(t){throw e.captureBreadcrumb({type:"http",category:"fetch",data:a,level:"error"}),t}))}}),r),t.dom&&this._hasDocument&&(q.addEventListener?(q.addEventListener("click",e._breadcrumbEventHandler("click"),!1),q.addEventListener("keypress",e._keypressEventHandler(),!1)):q.attachEvent&&(q.attachEvent("onclick",e._breadcrumbEventHandler("click")),q.attachEvent("onkeypress",e._keypressEventHandler())));var o=F.chrome,s=!(o&&o.app&&o.app.runtime)&&F.history&&F.history.pushState&&F.history.replaceState;if(t.location&&s){var a=F.onpopstate;F.onpopstate=function(){var t=e._location.href;if(e._captureUrlChange(e._lastHref,t),a)return a.apply(this,arguments)};var c=function(t){return function(){var r=arguments.length>2?arguments[2]:void 0;return r&&e._captureUrlChange(e._lastHref,r+""),t.apply(this,arguments)}};x(F.history,"pushState",c,r),x(F.history,"replaceState",c,r)}if(t.console&&"console"in F&&console.log){var u=function(t,r){e.captureBreadcrumb({message:t,level:r.level,category:"console"})};S(["debug","info","warn","error","log"],(function(e,t){z(console,t,u)}))}},_restoreBuiltIns:function(){for(var e;this._wrappedBuiltIns.length;){var t=(e=this._wrappedBuiltIns.shift())[0],r=e[1],n=e[2];t[r]=n}},_restoreConsole:function(){for(var e in this._originalConsoleMethods)this._originalConsole[e]=this._originalConsoleMethods[e]},_drainPlugins:function(){var e=this;S(this._plugins,(function(t,r){var n=r[0],i=r[1];n.apply(e,[e].concat(i))}))},_parseDSN:function(e){var t=j.exec(e),r={},n=7;try{for(;n--;)r[B[n]]=t[n]||""}catch(t){throw new s("Invalid DSN: "+e)}if(r.pass&&!this._globalOptions.allowSecretKey)throw new s("Do not specify your secret key in the DSN. See: http://bit.ly/raven-secret-key");return r},_getGlobalServer:function(e){var t="//"+e.host+(e.port?":"+e.port:"");return e.protocol&&(t=e.protocol+":"+t),t},_handleOnErrorStackInfo:function(e,t){(t=t||{}).mechanism=t.mechanism||{type:"onerror",handled:!1},this._ignoreOnError||this._handleStackInfo(e,t)},_handleStackInfo:function(e,t){var r=this._prepareFrames(e,t);this._triggerEvent("handle",{stackInfo:e,options:t}),this._processException(e.name,e.message,e.url,e.lineno,r,t)},_prepareFrames:function(e,t){var r=this,n=[];if(e.stack&&e.stack.length&&(S(e.stack,(function(t,i){var o=r._normalizeFrame(i,e.url);o&&n.push(o)})),t&&t.trimHeadFrames))for(var i=0;i<t.trimHeadFrames&&i<n.length;i++)n[i].in_app=!1;return n=n.slice(0,this._globalOptions.stackTraceLimit)},_normalizeFrame:function(e,t){var r={filename:e.url,lineno:e.line,colno:e.column,function:e.func||"?"};return e.url||(r.filename=t),r.in_app=!(this._globalOptions.includePaths.test&&!this._globalOptions.includePaths.test(r.filename)||/(Raven|TraceKit)\./.test(r.function)||/raven\.(min\.)?js$/.test(r.filename)),r},_processException:function(e,t,r,n,i,o){var s,a=(e?e+": ":"")+(t||"");if((!this._globalOptions.ignoreErrors.test||!this._globalOptions.ignoreErrors.test(t)&&!this._globalOptions.ignoreErrors.test(a))&&(i&&i.length?(r=i[0].filename||r,i.reverse(),s={frames:i}):r&&(s={frames:[{filename:r,lineno:n,in_app:!0}]}),(!this._globalOptions.ignoreUrls.test||!this._globalOptions.ignoreUrls.test(r))&&(!this._globalOptions.whitelistUrls.test||this._globalOptions.whitelistUrls.test(r)))){var c=w({exception:{values:[{type:e,value:t,stacktrace:s}]},transaction:r},o),u=c.exception.values[0];null==u.type&&""===u.value&&(u.value="Unrecoverable error caught"),!c.exception.mechanism&&c.mechanism&&(c.exception.mechanism=c.mechanism,delete c.mechanism),c.exception.mechanism=w({type:"generic",handled:!0},c.exception.mechanism||{}),this._send(c)}},_trimPacket:function(e){var t=this._globalOptions.maxMessageLength;if(e.message&&(e.message=b(e.message,t)),e.exception){var r=e.exception.values[0];r.value=b(r.value,t)}var n=e.request;return n&&(n.url&&(n.url=b(n.url,this._globalOptions.maxUrlLength)),n.Referer&&(n.Referer=b(n.Referer,this._globalOptions.maxUrlLength))),e.breadcrumbs&&e.breadcrumbs.values&&this._trimBreadcrumbs(e.breadcrumbs),e},_trimBreadcrumbs:function(e){for(var t,r,n,i=["to","from","url"],o=0;o<e.values.length;++o)if((r=e.values[o]).hasOwnProperty("data")&&d(r.data)&&!C(r.data)){n=w({},r.data);for(var s=0;s<i.length;++s)t=i[s],n.hasOwnProperty(t)&&n[t]&&(n[t]=b(n[t],this._globalOptions.maxUrlLength));e.values[o].data=n}},_getHttpData:function(){if(this._hasNavigator||this._hasDocument){var e={};return this._hasNavigator&&W.userAgent&&(e.headers={"User-Agent":W.userAgent}),F.location&&F.location.href&&(e.url=F.location.href),this._hasDocument&&q.referrer&&(e.headers||(e.headers={}),e.headers.Referer=q.referrer),e}},_resetBackoff:function(){this._backoffDuration=0,this._backoffStart=null},_shouldBackoff:function(){return this._backoffDuration&&U()-this._backoffStart<this._backoffDuration},_isRepeatData:function(e){var t=this._lastData;return!(!t||e.message!==t.message||e.transaction!==t.transaction)&&(e.stacktrace||t.stacktrace?A(e.stacktrace,t.stacktrace):e.exception||t.exception?T(e.exception,t.exception):!e.fingerprint&&!t.fingerprint||Boolean(e.fingerprint&&t.fingerprint)&&JSON.stringify(e.fingerprint)===JSON.stringify(t.fingerprint))},_setBackoffState:function(e){if(!this._shouldBackoff()){var t=e.status;if(400===t||401===t||429===t){var r;try{r=k()?e.headers.get("Retry-After"):e.getResponseHeader("Retry-After"),r=1e3*parseInt(r,10)}catch(e){}this._backoffDuration=r||2*this._backoffDuration||1e3,this._backoffStart=U()}}},_send:function(e){var t=this._globalOptions,r={project:this._globalProject,logger:t.logger,platform:"javascript"},n=this._getHttpData();n&&(r.request=n),e.trimHeadFrames&&delete e.trimHeadFrames,(e=w(r,e)).tags=w(w({},this._globalContext.tags),e.tags),e.extra=w(w({},this._globalContext.extra),e.extra),e.extra["session:duration"]=U()-this._startTime,this._breadcrumbs&&this._breadcrumbs.length>0&&(e.breadcrumbs={values:[].slice.call(this._breadcrumbs,0)}),this._globalContext.user&&(e.user=this._globalContext.user),t.environment&&(e.environment=t.environment),t.release&&(e.release=t.release),t.serverName&&(e.server_name=t.serverName),e=this._sanitizeData(e),Object.keys(e).forEach((function(t){(null==e[t]||""===e[t]||y(e[t]))&&delete e[t]})),v(t.dataCallback)&&(e=t.dataCallback(e)||e),e&&!y(e)&&(v(t.shouldSendCallback)&&!t.shouldSendCallback(e)||(this._shouldBackoff()?this._logDebug("warn","Raven dropped error due to backoff: ",e):"number"==typeof t.sampleRate?Math.random()<t.sampleRate&&this._sendProcessedPayload(e):this._sendProcessedPayload(e)))},_sanitizeData:function(e){return N(e,this._globalOptions.sanitizeKeys)},_getUuid:function(){return E()},_sendProcessedPayload:function(e,t){var r=this,n=this._globalOptions;if(this.isSetup())if(e=this._trimPacket(e),this._globalOptions.allowDuplicates||!this._isRepeatData(e)){this._lastEventId=e.event_id||(e.event_id=this._getUuid()),this._lastData=e,this._logDebug("debug","Raven about to send:",e);var i={sentry_version:"7",sentry_client:"raven-js/"+this.VERSION,sentry_key:this._globalKey};this._globalSecret&&(i.sentry_secret=this._globalSecret);var o=e.exception&&e.exception.values[0];this._globalOptions.autoBreadcrumbs&&this._globalOptions.autoBreadcrumbs.sentry&&this.captureBreadcrumb({category:"sentry",message:o?(o.type?o.type+": ":"")+o.value:e.message,event_id:e.event_id,level:e.level||"error"});var s=this._globalEndpoint;(n.transport||this._makeRequest).call(this,{url:s,auth:i,data:e,options:n,onSuccess:function(){r._resetBackoff(),r._triggerEvent("success",{data:e,src:s}),t&&t()},onError:function(n){r._logDebug("error","Raven transport failed to send: ",n),n.request&&r._setBackoffState(n.request),r._triggerEvent("failure",{data:e,src:s}),n=n||new Error("Raven send failed (no additional details provided)"),t&&t(n)}})}else this._logDebug("warn","Raven dropped repeat event: ",e)},_makeRequest:function(e){var t=e.url+"?"+I(e.auth),r=null,n={};if(e.options.headers&&(r=this._evaluateHash(e.options.headers)),e.options.fetchParameters&&(n=this._evaluateHash(e.options.fetchParameters)),k()){n.body=i(e.data);var o=w({},this._fetchDefaults),s=w(o,n);return r&&(s.headers=r),F.fetch(t,s).then((function(t){if(t.ok)e.onSuccess&&e.onSuccess();else{var r=new Error("Sentry error code: "+t.status);r.request=t,e.onError&&e.onError(r)}})).catch((function(){e.onError&&e.onError(new Error("Sentry error code: network unavailable"))}))}var a=F.XMLHttpRequest&&new F.XMLHttpRequest;a&&("withCredentials"in a||"undefined"!=typeof XDomainRequest)&&("withCredentials"in a?a.onreadystatechange=function(){if(4===a.readyState)if(200===a.status)e.onSuccess&&e.onSuccess();else if(e.onError){var t=new Error("Sentry error code: "+a.status);t.request=a,e.onError(t)}}:(a=new XDomainRequest,t=t.replace(/^https?:/,""),e.onSuccess&&(a.onload=e.onSuccess),e.onError&&(a.onerror=function(){var t=new Error("Sentry error code: XDomainRequest");t.request=a,e.onError(t)})),a.open("POST",t),r&&S(r,(function(e,t){a.setRequestHeader(e,t)})),a.send(i(e.data)))},_evaluateHash:function(e){var t={};for(var r in e)if(e.hasOwnProperty(r)){var n=e[r];t[r]="function"==typeof n?n():n}return t},_logDebug:function(e){this._originalConsoleMethods[e]&&(this.debug||this._globalOptions.debug)&&Function.prototype.apply.call(this._originalConsoleMethods[e],this._originalConsole,[].slice.call(arguments,1))},_mergeContext:function(e,t){f(t)?delete this._globalContext[e]:this._globalContext[e]=w(this._globalContext[e]||{},t)}},K.prototype.setUser=K.prototype.setUserContext,K.prototype.setReleaseContext=K.prototype.setRelease,e.exports=K}).call(this,r(38))},function(e,t,r){(function(t){var n=r(111),i={collectWindowErrors:!0,debug:!1},o="undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{},s=[].slice,a=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/;function c(){return"undefined"==typeof document||null==document.location?"":document.location.href}i.report=function(){var e,t,r=[],u=null,p=null,h=null;function d(e,t){var n=null;if(!t||i.collectWindowErrors){for(var o in r)if(r.hasOwnProperty(o))try{r[o].apply(null,[e].concat(s.call(arguments,2)))}catch(e){n=e}if(n)throw n}}function l(t,r,o,s,u){var p=n.isErrorEvent(u)?u.error:u,l=n.isErrorEvent(t)?t.message:t;if(h)i.computeStackTrace.augmentStackTraceWithInitialElement(h,r,o,l),f();else if(p&&n.isError(p))d(i.computeStackTrace(p),!0);else{var v,g={url:r,line:o,column:s},m=void 0;"[object String]"==={}.toString.call(l)&&(v=l.match(a))&&(m=v[1],l=v[2]),g.func="?",d({name:m,message:l,url:c(),stack:[g]},!0)}return!!e&&e.apply(this,arguments)}function f(){var e=h,t=u;u=null,h=null,p=null,d.apply(null,[e,!1].concat(t))}function v(e,t){var r=s.call(arguments,1);if(h){if(p===e)return;f()}var n=i.computeStackTrace(e);if(h=n,p=e,u=r,setTimeout((function(){p===e&&f()}),n.incomplete?2e3:0),!1!==t)throw e}return v.subscribe=function(n){t||(e=o.onerror,o.onerror=l,t=!0),r.push(n)},v.unsubscribe=function(e){for(var t=r.length-1;t>=0;--t)r[t]===e&&r.splice(t,1)},v.uninstall=function(){t&&(o.onerror=e,t=!1,e=void 0),r=[]},v}(),i.computeStackTrace=function(){function e(e){if(void 0!==e.stack&&e.stack){for(var t,r,n,i=/^\s*at (?:(.*?) ?\()?((?:file|https?|blob|chrome-extension|native|eval|webpack|<anonymous>|[a-z]:|\/).*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,o=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx(?:-web)|https?|webpack|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i,s=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)((?:file|https?|blob|chrome|webpack|resource|moz-extension).*?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js))(?::(\d+))?(?::(\d+))?\s*$/i,a=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,u=/\((\S*)(?::(\d+))(?::(\d+))\)/,p=e.stack.split("\n"),h=[],d=(/^(.*) is undefined$/.exec(e.message),0),l=p.length;d<l;++d){if(r=i.exec(p[d])){var f=r[2]&&0===r[2].indexOf("native");r[2]&&0===r[2].indexOf("eval")&&(t=u.exec(r[2]))&&(r[2]=t[1],r[3]=t[2],r[4]=t[3]),n={url:f?null:r[2],func:r[1]||"?",args:f?[r[2]]:[],line:r[3]?+r[3]:null,column:r[4]?+r[4]:null}}else if(r=o.exec(p[d]))n={url:r[2],func:r[1]||"?",args:[],line:+r[3],column:r[4]?+r[4]:null};else{if(!(r=s.exec(p[d])))continue;r[3]&&r[3].indexOf(" > eval")>-1&&(t=a.exec(r[3]))?(r[3]=t[1],r[4]=t[2],r[5]=null):0!==d||r[5]||void 0===e.columnNumber||(h[0].column=e.columnNumber+1),n={url:r[3],func:r[1]||"?",args:r[2]?r[2].split(","):[],line:r[4]?+r[4]:null,column:r[5]?+r[5]:null}}if(!n.func&&n.line&&(n.func="?"),n.url&&"blob:"===n.url.substr(0,5)){var v=new XMLHttpRequest;if(v.open("GET",n.url,!1),v.send(null),200===v.status){var g=v.responseText||"",m=(g=g.slice(-300)).match(/\/\/# sourceMappingURL=(.*)$/);if(m){var y=m[1];"~"===y.charAt(0)&&(y=("undefined"==typeof document||null==document.location?"":document.location.origin?document.location.origin:document.location.protocol+"//"+document.location.hostname+(document.location.port?":"+document.location.port:""))+y.slice(1)),n.url=y.slice(0,-4)}}}h.push(n)}return h.length?{name:e.name,message:e.message,url:c(),stack:h}:null}}function t(e,t,r,n){var i={url:t,line:r};if(i.url&&i.line){if(e.incomplete=!1,i.func||(i.func="?"),e.stack.length>0&&e.stack[0].url===i.url){if(e.stack[0].line===i.line)return!1;if(!e.stack[0].line&&e.stack[0].func===i.func)return e.stack[0].line=i.line,!1}return e.stack.unshift(i),e.partial=!0,!0}return e.incomplete=!0,!1}function r(e,o){for(var s,a,u=/function\s+([_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*)?\s*\(/i,p=[],h={},d=!1,l=r.caller;l&&!d;l=l.caller)if(l!==n&&l!==i.report){if(a={url:null,func:"?",line:null,column:null},l.name?a.func=l.name:(s=u.exec(l.toString()))&&(a.func=s[1]),void 0===a.func)try{a.func=s.input.substring(0,s.input.indexOf("{"))}catch(e){}h[""+l]?d=!0:h[""+l]=!0,p.push(a)}o&&p.splice(0,o);var f={name:e.name,message:e.message,url:c(),stack:p};return t(f,e.sourceURL||e.fileName,e.line||e.lineNumber,e.message||e.description),f}function n(t,n){var o=null;n=null==n?0:+n;try{if(o=e(t))return o}catch(e){if(i.debug)throw e}try{if(o=r(t,n+1))return o}catch(e){if(i.debug)throw e}return{name:t.name,message:t.message,url:c()}}return n.augmentStackTraceWithInitialElement=t,n.computeStackTraceFromStackProp=e,n}(),e.exports=i}).call(this,r(38))},function(e,t){function r(e,t){var r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}function n(e,t,n,i,o,s){return r((a=r(r(t,e),r(i,s)))<<(c=o)|a>>>32-c,n);var a,c}function i(e,t,r,i,o,s,a){return n(t&r|~t&i,e,t,o,s,a)}function o(e,t,r,i,o,s,a){return n(t&i|r&~i,e,t,o,s,a)}function s(e,t,r,i,o,s,a){return n(t^r^i,e,t,o,s,a)}function a(e,t,r,i,o,s,a){return n(r^(t|~i),e,t,o,s,a)}function c(e,t){var n,c,u,p,h;e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;var d=1732584193,l=-271733879,f=-1732584194,v=271733878;for(n=0;n<e.length;n+=16)c=d,u=l,p=f,h=v,d=i(d,l,f,v,e[n],7,-680876936),v=i(v,d,l,f,e[n+1],12,-389564586),f=i(f,v,d,l,e[n+2],17,606105819),l=i(l,f,v,d,e[n+3],22,-1044525330),d=i(d,l,f,v,e[n+4],7,-176418897),v=i(v,d,l,f,e[n+5],12,1200080426),f=i(f,v,d,l,e[n+6],17,-1473231341),l=i(l,f,v,d,e[n+7],22,-45705983),d=i(d,l,f,v,e[n+8],7,1770035416),v=i(v,d,l,f,e[n+9],12,-1958414417),f=i(f,v,d,l,e[n+10],17,-42063),l=i(l,f,v,d,e[n+11],22,-1990404162),d=i(d,l,f,v,e[n+12],7,1804603682),v=i(v,d,l,f,e[n+13],12,-40341101),f=i(f,v,d,l,e[n+14],17,-1502002290),d=o(d,l=i(l,f,v,d,e[n+15],22,1236535329),f,v,e[n+1],5,-165796510),v=o(v,d,l,f,e[n+6],9,-1069501632),f=o(f,v,d,l,e[n+11],14,643717713),l=o(l,f,v,d,e[n],20,-373897302),d=o(d,l,f,v,e[n+5],5,-701558691),v=o(v,d,l,f,e[n+10],9,38016083),f=o(f,v,d,l,e[n+15],14,-660478335),l=o(l,f,v,d,e[n+4],20,-405537848),d=o(d,l,f,v,e[n+9],5,568446438),v=o(v,d,l,f,e[n+14],9,-1019803690),f=o(f,v,d,l,e[n+3],14,-187363961),l=o(l,f,v,d,e[n+8],20,1163531501),d=o(d,l,f,v,e[n+13],5,-1444681467),v=o(v,d,l,f,e[n+2],9,-51403784),f=o(f,v,d,l,e[n+7],14,1735328473),d=s(d,l=o(l,f,v,d,e[n+12],20,-1926607734),f,v,e[n+5],4,-378558),v=s(v,d,l,f,e[n+8],11,-2022574463),f=s(f,v,d,l,e[n+11],16,1839030562),l=s(l,f,v,d,e[n+14],23,-35309556),d=s(d,l,f,v,e[n+1],4,-1530992060),v=s(v,d,l,f,e[n+4],11,1272893353),f=s(f,v,d,l,e[n+7],16,-155497632),l=s(l,f,v,d,e[n+10],23,-1094730640),d=s(d,l,f,v,e[n+13],4,681279174),v=s(v,d,l,f,e[n],11,-358537222),f=s(f,v,d,l,e[n+3],16,-722521979),l=s(l,f,v,d,e[n+6],23,76029189),d=s(d,l,f,v,e[n+9],4,-640364487),v=s(v,d,l,f,e[n+12],11,-421815835),f=s(f,v,d,l,e[n+15],16,530742520),d=a(d,l=s(l,f,v,d,e[n+2],23,-995338651),f,v,e[n],6,-198630844),v=a(v,d,l,f,e[n+7],10,1126891415),f=a(f,v,d,l,e[n+14],15,-1416354905),l=a(l,f,v,d,e[n+5],21,-57434055),d=a(d,l,f,v,e[n+12],6,1700485571),v=a(v,d,l,f,e[n+3],10,-1894986606),f=a(f,v,d,l,e[n+10],15,-1051523),l=a(l,f,v,d,e[n+1],21,-2054922799),d=a(d,l,f,v,e[n+8],6,1873313359),v=a(v,d,l,f,e[n+15],10,-30611744),f=a(f,v,d,l,e[n+6],15,-1560198380),l=a(l,f,v,d,e[n+13],21,1309151649),d=a(d,l,f,v,e[n+4],6,-145523070),v=a(v,d,l,f,e[n+11],10,-1120210379),f=a(f,v,d,l,e[n+2],15,718787259),l=a(l,f,v,d,e[n+9],21,-343485551),d=r(d,c),l=r(l,u),f=r(f,p),v=r(v,h);return[d,l,f,v]}function u(e){var t,r="",n=32*e.length;for(t=0;t<n;t+=8)r+=String.fromCharCode(e[t>>5]>>>t%32&255);return r}function p(e){var t,r=[];for(r[(e.length>>2)-1]=void 0,t=0;t<r.length;t+=1)r[t]=0;var n=8*e.length;for(t=0;t<n;t+=8)r[t>>5]|=(255&e.charCodeAt(t/8))<<t%32;return r}function h(e){var t,r,n="";for(r=0;r<e.length;r+=1)t=e.charCodeAt(r),n+="0123456789abcdef".charAt(t>>>4&15)+"0123456789abcdef".charAt(15&t);return n}function d(e){return unescape(encodeURIComponent(e))}function l(e){return function(e){return u(c(p(e),8*e.length))}(d(e))}function f(e,t){return function(e,t){var r,n,i=p(e),o=[],s=[];for(o[15]=s[15]=void 0,i.length>16&&(i=c(i,8*e.length)),r=0;r<16;r+=1)o[r]=909522486^i[r],s[r]=1549556828^i[r];return n=c(o.concat(p(t)),512+8*t.length),u(c(s.concat(n),640))}(d(e),d(t))}e.exports=function(e,t,r){return t?r?f(t,e):h(f(t,e)):r?l(e):h(l(e))}},function(e,t){function r(e){this.name="RavenConfigError",this.message=e}r.prototype=new Error,r.prototype.constructor=r,e.exports=r},function(e,t,r){var n=r(111);e.exports={wrapMethod:function(e,t,r){var i=e[t],o=e;if(t in e){var s="warn"===t?"warning":t;e[t]=function(){var e=[].slice.call(arguments),a=n.safeJoin(e," "),c={level:s,logger:"console",extra:{arguments:e}};"assert"===t?!1===e[0]&&(a="Assertion failed: "+(n.safeJoin(e.slice(1)," ")||"console.assert"),c.extra.arguments=e.slice(1),r&&r(a,c)):r&&r(a,c),i&&Function.prototype.apply.call(i,o,e)}}}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.openPage=function(e,t=!0){if(e){const r=document.createElement("a");r.href=e,t&&(r.target="_blank"),r.rel="noopener",r.click()}},t.openOptionsPage=function(){n.isExtEnv&&(i?browser.runtime.openOptionsPage():browser.runtime.sendMessage({type:"openOptionsPage"}))},t.activeCurrentTab=function(){n.isExtEnv&&(i||browser.runtime.sendMessage({type:"activeCurrentTab"}))},t.setupOpenPage=function(){i=!0,n.isExtEnv&&browser.runtime.onMessage.addListener((e,t)=>{if(e)switch(e.type){case"openOptionsPage":return browser.runtime.openOptionsPage();case"activeCurrentTab":if(t.tab&&t.tab.id)return browser.tabs.update(t.tab.id,{active:!0})}})};var n=r(26);let i=!1},,,function(e,t,r){"use strict";(function(e){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <http://feross.org>
 * @license  MIT
 */
var n=r(259),i=r(260),o=r(261);function s(){return c.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function a(e,t){if(s()<t)throw new RangeError("Invalid typed array length");return c.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=c.prototype:(null===e&&(e=new c(t)),e.length=t),e}function c(e,t,r){if(!(c.TYPED_ARRAY_SUPPORT||this instanceof c))return new c(e,t,r);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return h(this,e)}return u(this,e,t,r)}function u(e,t,r,n){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,r,n){if(t.byteLength,r<0||t.byteLength<r)throw new RangeError("'offset' is out of bounds");if(t.byteLength<r+(n||0))throw new RangeError("'length' is out of bounds");return t=void 0===r&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,r):new Uint8Array(t,r,n),c.TYPED_ARRAY_SUPPORT?(e=t).__proto__=c.prototype:e=d(e,t),e}(e,t,r,n):"string"==typeof t?function(e,t,r){if("string"==typeof r&&""!==r||(r="utf8"),!c.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var n=0|f(t,r),i=(e=a(e,n)).write(t,r);return i!==n&&(e=e.slice(0,i)),e}(e,t,r):function(e,t){if(c.isBuffer(t)){var r=0|l(t.length);return 0===(e=a(e,r)).length||t.copy(e,0,0,r),e}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(n=t.length)!=n?a(e,0):d(e,t);if("Buffer"===t.type&&o(t.data))return d(e,t.data)}var n;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function p(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function h(e,t){if(p(t),e=a(e,t<0?0:0|l(t)),!c.TYPED_ARRAY_SUPPORT)for(var r=0;r<t;++r)e[r]=0;return e}function d(e,t){var r=t.length<0?0:0|l(t.length);e=a(e,r);for(var n=0;n<r;n+=1)e[n]=255&t[n];return e}function l(e){if(e>=s())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s().toString(16)+" bytes");return 0|e}function f(e,t){if(c.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var r=e.length;if(0===r)return 0;for(var n=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return U(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return F(e).length;default:if(n)return U(e).length;t=(""+t).toLowerCase(),n=!0}}function v(e,t,r){var n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return A(this,t,r);case"utf8":case"utf-8":return E(this,t,r);case"ascii":return _(this,t,r);case"latin1":case"binary":return T(this,t,r);case"base64":return I(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function g(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function m(e,t,r,n,i){if(0===e.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=i?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(i)return-1;r=e.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof t&&(t=c.from(t,n)),c.isBuffer(t))return 0===t.length?-1:y(e,t,r,n,i);if("number"==typeof t)return t&=255,c.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):y(e,[t],r,n,i);throw new TypeError("val must be string, number or Buffer")}function y(e,t,r,n,i){var o,s=1,a=e.length,c=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;s=2,a/=2,c/=2,r/=2}function u(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}if(i){var p=-1;for(o=r;o<a;o++)if(u(e,o)===u(t,-1===p?0:o-p)){if(-1===p&&(p=o),o-p+1===c)return p*s}else-1!==p&&(o-=o-p),p=-1}else for(r+c>a&&(r=a-c),o=r;o>=0;o--){for(var h=!0,d=0;d<c;d++)if(u(e,o+d)!==u(t,d)){h=!1;break}if(h)return o}return-1}function S(e,t,r,n){r=Number(r)||0;var i=e.length-r;n?(n=Number(n))>i&&(n=i):n=i;var o=t.length;if(o%2!=0)throw new TypeError("Invalid hex string");n>o/2&&(n=o/2);for(var s=0;s<n;++s){var a=parseInt(t.substr(2*s,2),16);if(isNaN(a))return s;e[r+s]=a}return s}function w(e,t,r,n){return q(U(t,e.length-r),e,r,n)}function b(e,t,r,n){return q(function(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,n)}function C(e,t,r,n){return b(e,t,r,n)}function R(e,t,r,n){return q(F(t),e,r,n)}function P(e,t,r,n){return q(function(e,t){for(var r,n,i,o=[],s=0;s<e.length&&!((t-=2)<0);++s)n=(r=e.charCodeAt(s))>>8,i=r%256,o.push(i),o.push(n);return o}(t,e.length-r),e,r,n)}function I(e,t,r){return 0===t&&r===e.length?n.fromByteArray(e):n.fromByteArray(e.slice(t,r))}function E(e,t,r){r=Math.min(e.length,r);for(var n=[],i=t;i<r;){var o,s,a,c,u=e[i],p=null,h=u>239?4:u>223?3:u>191?2:1;if(i+h<=r)switch(h){case 1:u<128&&(p=u);break;case 2:128==(192&(o=e[i+1]))&&(c=(31&u)<<6|63&o)>127&&(p=c);break;case 3:o=e[i+1],s=e[i+2],128==(192&o)&&128==(192&s)&&(c=(15&u)<<12|(63&o)<<6|63&s)>2047&&(c<55296||c>57343)&&(p=c);break;case 4:o=e[i+1],s=e[i+2],a=e[i+3],128==(192&o)&&128==(192&s)&&128==(192&a)&&(c=(15&u)<<18|(63&o)<<12|(63&s)<<6|63&a)>65535&&c<1114112&&(p=c)}null===p?(p=65533,h=1):p>65535&&(p-=65536,n.push(p>>>10&1023|55296),p=56320|1023&p),n.push(p),i+=h}return function(e){var t=e.length;if(t<=4096)return String.fromCharCode.apply(String,e);for(var r="",n=0;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=4096));return r}(n)}function _(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(127&e[i]);return n}function T(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(e[i]);return n}function A(e,t,r){var n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);for(var i="",o=t;o<r;++o)i+=j(e[o]);return i}function O(e,t,r){for(var n=e.slice(t,r),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function x(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function k(e,t,r,n,i,o){if(!c.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function D(e,t,r,n){t<0&&(t=65535+t+1);for(var i=0,o=Math.min(e.length-r,2);i<o;++i)e[r+i]=(t&255<<8*(n?i:1-i))>>>8*(n?i:1-i)}function M(e,t,r,n){t<0&&(t=4294967295+t+1);for(var i=0,o=Math.min(e.length-r,4);i<o;++i)e[r+i]=t>>>8*(n?i:3-i)&255}function L(e,t,r,n,i,o){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function N(e,t,r,n,o){return o||L(e,0,r,4),i.write(e,t,r,n,23,4),r+4}function z(e,t,r,n,o){return o||L(e,0,r,8),i.write(e,t,r,n,52,8),r+8}t.Buffer=c,t.SlowBuffer=function(e){return+e!=e&&(e=0),c.alloc(+e)},t.INSPECT_MAX_BYTES=50,c.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=s(),c.poolSize=8192,c._augment=function(e){return e.__proto__=c.prototype,e},c.from=function(e,t,r){return u(null,e,t,r)},c.TYPED_ARRAY_SUPPORT&&(c.prototype.__proto__=Uint8Array.prototype,c.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&c[Symbol.species]===c&&Object.defineProperty(c,Symbol.species,{value:null,configurable:!0})),c.alloc=function(e,t,r){return function(e,t,r,n){return p(t),t<=0?a(e,t):void 0!==r?"string"==typeof n?a(e,t).fill(r,n):a(e,t).fill(r):a(e,t)}(null,e,t,r)},c.allocUnsafe=function(e){return h(null,e)},c.allocUnsafeSlow=function(e){return h(null,e)},c.isBuffer=function(e){return!(null==e||!e._isBuffer)},c.compare=function(e,t){if(!c.isBuffer(e)||!c.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var r=e.length,n=t.length,i=0,o=Math.min(r,n);i<o;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return r<n?-1:n<r?1:0},c.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(e,t){if(!o(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return c.alloc(0);var r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;var n=c.allocUnsafe(t),i=0;for(r=0;r<e.length;++r){var s=e[r];if(!c.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(n,i),i+=s.length}return n},c.byteLength=f,c.prototype._isBuffer=!0,c.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)g(this,t,t+1);return this},c.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)g(this,t,t+3),g(this,t+1,t+2);return this},c.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)g(this,t,t+7),g(this,t+1,t+6),g(this,t+2,t+5),g(this,t+3,t+4);return this},c.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?E(this,0,e):v.apply(this,arguments)},c.prototype.equals=function(e){if(!c.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===c.compare(this,e)},c.prototype.inspect=function(){var e="",r=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(e+=" ... ")),"<Buffer "+e+">"},c.prototype.compare=function(e,t,r,n,i){if(!c.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),t<0||r>e.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&t>=r)return 0;if(n>=i)return-1;if(t>=r)return 1;if(this===e)return 0;for(var o=(i>>>=0)-(n>>>=0),s=(r>>>=0)-(t>>>=0),a=Math.min(o,s),u=this.slice(n,i),p=e.slice(t,r),h=0;h<a;++h)if(u[h]!==p[h]){o=u[h],s=p[h];break}return o<s?-1:s<o?1:0},c.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},c.prototype.indexOf=function(e,t,r){return m(this,e,t,r,!0)},c.prototype.lastIndexOf=function(e,t,r){return m(this,e,t,r,!1)},c.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(r)?(r|=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var i=this.length-t;if((void 0===r||r>i)&&(r=i),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var o=!1;;)switch(n){case"hex":return S(this,e,t,r);case"utf8":case"utf-8":return w(this,e,t,r);case"ascii":return b(this,e,t,r);case"latin1":case"binary":return C(this,e,t,r);case"base64":return R(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return P(this,e,t,r);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},c.prototype.slice=function(e,t){var r,n=this.length;if((e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e),c.TYPED_ARRAY_SUPPORT)(r=this.subarray(e,t)).__proto__=c.prototype;else{var i=t-e;r=new c(i,void 0);for(var o=0;o<i;++o)r[o]=this[o+e]}return r},c.prototype.readUIntLE=function(e,t,r){e|=0,t|=0,r||x(e,t,this.length);for(var n=this[e],i=1,o=0;++o<t&&(i*=256);)n+=this[e+o]*i;return n},c.prototype.readUIntBE=function(e,t,r){e|=0,t|=0,r||x(e,t,this.length);for(var n=this[e+--t],i=1;t>0&&(i*=256);)n+=this[e+--t]*i;return n},c.prototype.readUInt8=function(e,t){return t||x(e,1,this.length),this[e]},c.prototype.readUInt16LE=function(e,t){return t||x(e,2,this.length),this[e]|this[e+1]<<8},c.prototype.readUInt16BE=function(e,t){return t||x(e,2,this.length),this[e]<<8|this[e+1]},c.prototype.readUInt32LE=function(e,t){return t||x(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},c.prototype.readUInt32BE=function(e,t){return t||x(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},c.prototype.readIntLE=function(e,t,r){e|=0,t|=0,r||x(e,t,this.length);for(var n=this[e],i=1,o=0;++o<t&&(i*=256);)n+=this[e+o]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*t)),n},c.prototype.readIntBE=function(e,t,r){e|=0,t|=0,r||x(e,t,this.length);for(var n=t,i=1,o=this[e+--n];n>0&&(i*=256);)o+=this[e+--n]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*t)),o},c.prototype.readInt8=function(e,t){return t||x(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},c.prototype.readInt16LE=function(e,t){t||x(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},c.prototype.readInt16BE=function(e,t){t||x(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},c.prototype.readInt32LE=function(e,t){return t||x(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},c.prototype.readInt32BE=function(e,t){return t||x(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},c.prototype.readFloatLE=function(e,t){return t||x(e,4,this.length),i.read(this,e,!0,23,4)},c.prototype.readFloatBE=function(e,t){return t||x(e,4,this.length),i.read(this,e,!1,23,4)},c.prototype.readDoubleLE=function(e,t){return t||x(e,8,this.length),i.read(this,e,!0,52,8)},c.prototype.readDoubleBE=function(e,t){return t||x(e,8,this.length),i.read(this,e,!1,52,8)},c.prototype.writeUIntLE=function(e,t,r,n){e=+e,t|=0,r|=0,n||k(this,e,t,r,Math.pow(2,8*r)-1,0);var i=1,o=0;for(this[t]=255&e;++o<r&&(i*=256);)this[t+o]=e/i&255;return t+r},c.prototype.writeUIntBE=function(e,t,r,n){e=+e,t|=0,r|=0,n||k(this,e,t,r,Math.pow(2,8*r)-1,0);var i=r-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+r},c.prototype.writeUInt8=function(e,t,r){return e=+e,t|=0,r||k(this,e,t,1,255,0),c.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},c.prototype.writeUInt16LE=function(e,t,r){return e=+e,t|=0,r||k(this,e,t,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):D(this,e,t,!0),t+2},c.prototype.writeUInt16BE=function(e,t,r){return e=+e,t|=0,r||k(this,e,t,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):D(this,e,t,!1),t+2},c.prototype.writeUInt32LE=function(e,t,r){return e=+e,t|=0,r||k(this,e,t,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):M(this,e,t,!0),t+4},c.prototype.writeUInt32BE=function(e,t,r){return e=+e,t|=0,r||k(this,e,t,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):M(this,e,t,!1),t+4},c.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t|=0,!n){var i=Math.pow(2,8*r-1);k(this,e,t,r,i-1,-i)}var o=0,s=1,a=0;for(this[t]=255&e;++o<r&&(s*=256);)e<0&&0===a&&0!==this[t+o-1]&&(a=1),this[t+o]=(e/s>>0)-a&255;return t+r},c.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t|=0,!n){var i=Math.pow(2,8*r-1);k(this,e,t,r,i-1,-i)}var o=r-1,s=1,a=0;for(this[t+o]=255&e;--o>=0&&(s*=256);)e<0&&0===a&&0!==this[t+o+1]&&(a=1),this[t+o]=(e/s>>0)-a&255;return t+r},c.prototype.writeInt8=function(e,t,r){return e=+e,t|=0,r||k(this,e,t,1,127,-128),c.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},c.prototype.writeInt16LE=function(e,t,r){return e=+e,t|=0,r||k(this,e,t,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):D(this,e,t,!0),t+2},c.prototype.writeInt16BE=function(e,t,r){return e=+e,t|=0,r||k(this,e,t,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):D(this,e,t,!1),t+2},c.prototype.writeInt32LE=function(e,t,r){return e=+e,t|=0,r||k(this,e,t,4,2147483647,-2147483648),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):M(this,e,t,!0),t+4},c.prototype.writeInt32BE=function(e,t,r){return e=+e,t|=0,r||k(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):M(this,e,t,!1),t+4},c.prototype.writeFloatLE=function(e,t,r){return N(this,e,t,!0,r)},c.prototype.writeFloatBE=function(e,t,r){return N(this,e,t,!1,r)},c.prototype.writeDoubleLE=function(e,t,r){return z(this,e,t,!0,r)},c.prototype.writeDoubleBE=function(e,t,r){return z(this,e,t,!1,r)},c.prototype.copy=function(e,t,r,n){if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);var i,o=n-r;if(this===e&&r<t&&t<n)for(i=o-1;i>=0;--i)e[i+t]=this[i+r];else if(o<1e3||!c.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)e[i+t]=this[i+r];else Uint8Array.prototype.set.call(e,this.subarray(r,r+o),t);return o},c.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!c.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;var o;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(o=t;o<r;++o)this[o]=e;else{var s=c.isBuffer(e)?e:U(new c(e,n).toString()),a=s.length;for(o=0;o<r-t;++o)this[o+t]=s[o%a]}return this};var B=/[^+\/0-9A-Za-z-_]/g;function j(e){return e<16?"0"+e.toString(16):e.toString(16)}function U(e,t){var r;t=t||1/0;for(var n=e.length,i=null,o=[],s=0;s<n;++s){if((r=e.charCodeAt(s))>55295&&r<57344){if(!i){if(r>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(s+1===n){(t-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(t-=3)>-1&&o.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((t-=1)<0)break;o.push(r)}else if(r<2048){if((t-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function F(e){return n.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(B,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function q(e,t,r,n){for(var i=0;i<n&&!(i+r>=t.length||i>=e.length);++i)t[i+r]=e[i];return i}}).call(this,r(38))},function(e,t,r){"use strict";r.d(t,"a",(function(){return s}));var n=r(15),i=r(19),o=r(81);class s{constructor(e){if(!e)throw new n.a("subscriptionKey");this.privAuthInfo=new o.a(i.a.AuthKey,e)}fetch(e){return Promise.resolve(this.privAuthInfo)}fetchOnExpiry(e){return Promise.resolve(this.privAuthInfo)}}},function(e,t,r){"use strict";r.d(t,"a",(function(){return s}));var n=r(15),i=r(81),o=r(19);class s{constructor(e,t){if(!e)throw new n.a("fetchCallback");if(!t)throw new n.a("fetchOnExpiryCallback");this.privFetchCallback=e,this.privFetchOnExpiryCallback=t}fetch(e){return this.privFetchCallback(e).then(e=>new i.a(o.a.Authorization,void 0===e?void 0:s.privTokenPrefix+e))}fetchOnExpiry(e){return this.privFetchOnExpiryCallback(e).then(e=>new i.a(o.a.Authorization,void 0===e?void 0:s.privTokenPrefix+e))}}s.privTokenPrefix="bearer "},function(e,t,r){"use strict";r.d(t,"a",(function(){return l}));var n=r(141),i=r(140),o=r(7),s=r(5),a=r(36),c=r(31),u=r(54),p=r(86),h=r(19),d=r(21);class l extends c.a{constructor(){super(...arguments),this.interactiveRelativeUri="/speech/recognition/interactive/cognitiveservices/v1",this.conversationRelativeUri="/speech/recognition/conversation/cognitiveservices/v1",this.dictationRelativeUri="/speech/recognition/dictation/cognitiveservices/v1",this.universalUri="/speech/universal/v"}create(e,t,r){let l=e.parameters.getProperty(s.a.SpeechServiceConnection_Endpoint,void 0);const f=e.parameters.getProperty(s.a.SpeechServiceConnection_Region,void 0),v=c.a.getHostSuffix(f),g=e.parameters.getProperty(s.a.SpeechServiceConnection_Host,"wss://"+f+".stt.speech"+v),m={},y=e.parameters.getProperty(s.a.SpeechServiceConnection_EndpointId,void 0),S=e.parameters.getProperty(s.a.SpeechServiceConnection_RecoLanguage,void 0);if(y?l&&-1!==l.search(d.a.CustomSpeechDeploymentId)||(m[d.a.CustomSpeechDeploymentId]=y):S&&(l&&-1!==l.search(d.a.Language)||(m[d.a.Language]=S)),l&&-1!==l.search(d.a.Format)||(m[d.a.Format]=e.parameters.getProperty(o.OutputFormatPropertyName,a.a[a.a.Simple]).toLowerCase()),void 0!==e.autoDetectSourceLanguages&&(m[d.a.EnableLanguageId]="true"),this.setCommonUrlParams(e,m,l),!l)switch(e.recognitionMode){case u.c.Conversation:l="true"===e.parameters.getProperty(o.ForceDictationPropertyName,"false")?g+this.dictationRelativeUri:void 0!==e.recognitionEndpointVersion&&parseInt(e.recognitionEndpointVersion,10)>1?`${g}${this.universalUri}${e.recognitionEndpointVersion}`:g+this.conversationRelativeUri;break;case u.c.Dictation:l=g+this.dictationRelativeUri;break;default:l=void 0!==e.recognitionEndpointVersion&&parseInt(e.recognitionEndpointVersion,10)>1?`${g}${this.universalUri}${e.recognitionEndpointVersion}`:g+this.interactiveRelativeUri}const w={};void 0!==t.token&&""!==t.token&&(w[t.headerName]=t.token),w[h.a.ConnectionId]=r,e.parameters.setProperty(s.a.SpeechServiceConnection_Url,l);const b="true"===e.parameters.getProperty("SPEECH-EnableWebsocketCompression","false");return new n.a(l,m,w,new p.a,i.a.fromRecognizerConfig(e),b,r)}}},function(e,t,r){"use strict";r.d(t,"a",(function(){return y}));var n=r(5),i=r(39),o=r(55),s=r(22),a=r(82),c=r(36),u=r(29),p=r(169),h=r(97),d=r(135),l=r(136),f=r(42),v=r(20),g=r(7),m=r(154);class y extends h.a{constructor(e,t,r,i,o){super(e,t,r,i,o),this.privSpeechRecognizer=o;const s={},a=i.parameters.getProperty(n.a.Speech_SegmentationSilenceTimeoutMs,void 0);if(void 0!==a){const e=parseInt(a,10);s.mode="INTERACTIVE",s.INTERACTIVE={segmentation:{mode:"Custom",segmentationSilenceTimeoutMs:e}}}if(void 0!==i.autoDetectSourceLanguages){const e=i.autoDetectSourceLanguages.split(",");this.privSpeechContext.setSection("languageId",{Priority:i.languageIdPriority,languages:e,mode:i.languageIdMode,onSuccess:{action:"Recognize"},onUnknown:{action:"None"}}),this.privSpeechContext.setSection("phraseOutput",{interimResults:{resultType:"Auto"},phraseResults:{resultType:"Always"}});const t=i.sourceLanguageModels;void 0!==t&&(s.customModels=t,s.onInterim={action:"None"},s.onSuccess={action:"None"})}(e=>{for(const t in e)return!1;return!0})(s)||this.privSpeechContext.setSection("phraseDetection",s)}processTypeSpecificMessages(e){return function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))}(this,void 0,void 0,(function*(){let t;const r=new i.a;r.setProperty(n.a.SpeechServiceResponse_JsonResult,e.textBody);let u=!1;switch(e.path.toLowerCase()){case"speech.hypothesis":case"speech.fragment":const n=d.a.fromJSON(e.textBody),i=n.Offset+this.privRequestSession.currentTurnAudioOffset;t=new o.a(this.privRequestSession.requestId,s.a.RecognizingSpeech,n.Text,n.Duration,i,n.Language,n.LanguageDetectionConfidence,void 0,void 0,e.textBody,r),this.privRequestSession.onHypothesis(i);const p=new a.b(t,n.Duration,this.privRequestSession.sessionId);if(this.privSpeechRecognizer.recognizing)try{this.privSpeechRecognizer.recognizing(this.privSpeechRecognizer,p)}catch(e){}u=!0;break;case"speech.phrase":const h=l.a.fromJSON(e.textBody),y=f.a.implTranslateRecognitionResult(h.RecognitionStatus);if(this.privRequestSession.onPhraseRecognized(this.privRequestSession.currentTurnAudioOffset+h.Offset+h.Duration),s.a.Canceled===y){const e=f.a.implTranslateCancelResult(h.RecognitionStatus),t=f.a.implTranslateCancelErrorCode(h.RecognitionStatus);yield this.cancelRecognitionLocal(e,t,f.a.implTranslateErrorDetails(t))}else{if(!this.privRequestSession.isSpeechEnded||y!==s.a.NoMatch||h.RecognitionStatus===v.a.InitialSilenceTimeout){if(this.privRecognizerConfig.parameters.getProperty(g.OutputFormatPropertyName)===c.a[c.a.Simple])t=new o.a(this.privRequestSession.requestId,y,h.DisplayText,h.Duration,h.Offset+this.privRequestSession.currentTurnAudioOffset,h.Language,h.LanguageDetectionConfidence,void 0,void 0,e.textBody,r);else{const n=m.a.fromJSON(e.textBody),i=n.Offset+this.privRequestSession.currentTurnAudioOffset,s=n.getJsonWithCorrectedOffsets(i);t=new o.a(this.privRequestSession.requestId,y,n.RecognitionStatus===v.a.Success?n.NBest[0].Display:void 0,n.Duration,i,n.Language,n.LanguageDetectionConfidence,void 0,void 0,s,r)}const n=new a.b(t,t.offset,this.privRequestSession.sessionId);if(this.privSpeechRecognizer.recognized)try{this.privSpeechRecognizer.recognized(this.privSpeechRecognizer,n)}catch(e){}}if(this.privSuccessCallback){try{this.privSuccessCallback(t)}catch(e){this.privErrorCallback&&this.privErrorCallback(e)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}}u=!0}return u}))}cancelRecognition(e,t,r,n,a){const c=new i.a;if(c.setProperty(g.CancellationErrorCodePropertyName,u.a[n]),this.privSpeechRecognizer.canceled){const t=new p.a(r,a,n,void 0,e);try{this.privSpeechRecognizer.canceled(this.privSpeechRecognizer,t)}catch(e){}}if(this.privSuccessCallback){const r=new o.a(t,s.a.Canceled,void 0,void 0,void 0,void 0,void 0,void 0,a,void 0,c);try{this.privSuccessCallback(r),this.privSuccessCallback=void 0}catch(e){}}}}},function(e,t,r){"use strict";r.d(t,"a",(function(){return u}));var n=r(141),i=r(140),o=r(5),s=r(31),a=r(86),c=r(19);class u extends s.a{create(e,t,r){let u=e.parameters.getProperty(o.a.SpeechServiceConnection_Endpoint);if(!u){const t=e.parameters.getProperty(o.a.SpeechServiceConnection_IntentRegion),r=s.a.getHostSuffix(t);u=e.parameters.getProperty(o.a.SpeechServiceConnection_Host,"wss://"+t+".sr.speech"+r)+"/speech/recognition/interactive/cognitiveservices/v1"}const p={format:"simple",language:e.parameters.getProperty(o.a.SpeechServiceConnection_RecoLanguage)};this.setCommonUrlParams(e,p,u);const h={};void 0!==t.token&&""!==t.token&&(h[t.headerName]=t.token),h[c.a.ConnectionId]=r,e.parameters.setProperty(o.a.SpeechServiceConnection_Url,u);const d="true"===e.parameters.getProperty("SPEECH-EnableWebsocketCompression","false");return new n.a(u,p,h,new a.a,i.a.fromRecognizerConfig(e),d,r)}getSpeechRegionFromIntentRegion(e){switch(e){case"West US":case"US West":case"westus":return"uswest";case"West US 2":case"US West 2":case"westus2":return"uswest2";case"South Central US":case"US South Central":case"southcentralus":return"ussouthcentral";case"West Central US":case"US West Central":case"westcentralus":return"uswestcentral";case"East US":case"US East":case"eastus":return"useast";case"East US 2":case"US East 2":case"eastus2":return"useast2";case"West Europe":case"Europe West":case"westeurope":return"europewest";case"North Europe":case"Europe North":case"northeurope":return"europenorth";case"Brazil South":case"South Brazil":case"southbrazil":return"brazilsouth";case"Australia East":case"East Australia":case"eastaustralia":return"australiaeast";case"Southeast Asia":case"Asia Southeast":case"southeastasia":return"asiasoutheast";case"East Asia":case"Asia East":case"eastasia":return"asiaeast";default:return e}}}},function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));class n{constructor(e,t){this.modelImpl=e,this.intentName=t}}},function(e,t,r){"use strict";r.d(t,"a",(function(){return y}));var n=r(23),i=r(87),o=r(39),s=r(5),a=r(85),c=r(22),u=r(84),p=r(29),h=r(174),d=r(97),l=r(135),f=r(136),v=r(42),g=r(173),m=r(7);class y extends d.a{constructor(e,t,r,n,i){super(e,t,r,n,i),this.privIntentRecognizer=i,this.privIntentDataSent=!1}setIntents(e,t){this.privAddedLmIntents=e,this.privUmbrellaIntent=t,this.privIntentDataSent=!0}processTypeSpecificMessages(e){let t,r,p=!1;const h=new o.a;switch(e.messageType===n.b.Text&&h.setProperty(s.a.SpeechServiceResponse_JsonResult,e.textBody),e.path.toLowerCase()){case"speech.hypothesis":const n=l.a.fromJSON(e.textBody);if(t=new a.a(void 0,this.privRequestSession.requestId,c.a.RecognizingIntent,n.Text,n.Duration,n.Offset+this.privRequestSession.currentTurnAudioOffset,n.Language,n.LanguageDetectionConfidence,void 0,e.textBody,h),this.privRequestSession.onHypothesis(t.offset),r=new u.a(t,n.Offset+this.privRequestSession.currentTurnAudioOffset,this.privRequestSession.sessionId),this.privIntentRecognizer.recognizing)try{this.privIntentRecognizer.recognizing(this.privIntentRecognizer,r)}catch(e){}p=!0;break;case"speech.phrase":const i=f.a.fromJSON(e.textBody);t=new a.a(void 0,this.privRequestSession.requestId,v.a.implTranslateRecognitionResult(i.RecognitionStatus),i.DisplayText,i.Duration,i.Offset+this.privRequestSession.currentTurnAudioOffset,i.Language,i.LanguageDetectionConfidence,void 0,e.textBody,h),r=new u.a(t,t.offset,this.privRequestSession.sessionId);const d=()=>{if(this.privIntentRecognizer.recognized)try{this.privIntentRecognizer.recognized(this.privIntentRecognizer,r)}catch(e){}if(this.privSuccessCallback){try{this.privSuccessCallback(t)}catch(e){this.privErrorCallback&&this.privErrorCallback(e)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}};!1===this.privIntentDataSent||c.a.NoMatch===r.result.reason?(this.privRequestSession.onPhraseRecognized(r.offset+r.result.duration),d()):this.privPendingIntentArgs=r,p=!0;break;case"response":if(r=this.privPendingIntentArgs,this.privPendingIntentArgs=void 0,void 0===r){if(""===e.textBody)return;r=new u.a(new a.a,0,this.privRequestSession.sessionId)}const m=g.a.fromJSON(e.textBody);if(null!==m&&m.topScoringIntent&&m.topScoringIntent.intent){let t=this.privAddedLmIntents[m.topScoringIntent.intent];if(void 0!==this.privUmbrellaIntent&&(t=this.privUmbrellaIntent),t){const n=void 0===t||void 0===t.intentName?m.topScoringIntent.intent:t.intentName;let i=r.result.reason;void 0!==n&&(i=c.a.RecognizedIntent);const p=void 0!==r.result.properties?r.result.properties:new o.a;p.setProperty(s.a.LanguageUnderstandingServiceResponse_JsonResult,e.textBody),r=new u.a(new a.a(n,r.result.resultId,i,r.result.text,r.result.duration,r.result.offset,void 0,void 0,r.result.errorDetails,r.result.json,p),r.offset,r.sessionId)}}if(this.privRequestSession.onPhraseRecognized(r.offset+r.result.duration),this.privIntentRecognizer.recognized)try{this.privIntentRecognizer.recognized(this.privIntentRecognizer,r)}catch(e){}if(this.privSuccessCallback){try{this.privSuccessCallback(r.result)}catch(e){this.privErrorCallback&&this.privErrorCallback(e)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}p=!0}const d=new i.a;return d.resolve(p),d.promise}cancelRecognition(e,t,r,n,i){const s=new o.a;if(s.setProperty(m.CancellationErrorCodePropertyName,p.a[n]),this.privIntentRecognizer.canceled){const t=new h.a(r,i,n,void 0,void 0,e);try{this.privIntentRecognizer.canceled(this.privIntentRecognizer,t)}catch(e){}}if(this.privSuccessCallback){const r=new a.a(void 0,t,c.a.Canceled,void 0,void 0,void 0,void 0,void 0,i,void 0,s);try{this.privSuccessCallback(r),this.privSuccessCallback=void 0}catch(e){}}}}},function(e,t,r){"use strict";r.d(t,"a",(function(){return p}));var n=r(141),i=r(140),o=r(5),s=r(31),a=r(86),c=r(19),u=r(21);class p extends s.a{create(e,t,r){let p=e.parameters.getProperty(o.a.SpeechServiceConnection_Endpoint,void 0);if(!p){const t=e.parameters.getProperty(o.a.SpeechServiceConnection_Region,void 0),r=s.a.getHostSuffix(t);p=e.parameters.getProperty(o.a.SpeechServiceConnection_Host,"wss://"+t+".s2s.speech"+r)+"/speech/translation/cognitiveservices/v1"}const h={from:e.parameters.getProperty(o.a.SpeechServiceConnection_RecoLanguage),to:e.parameters.getProperty(o.a.SpeechServiceConnection_TranslationToLanguages)};this.setCommonUrlParams(e,h,p),this.setUrlParameter(o.a.SpeechServiceResponse_TranslationRequestStablePartialResult,u.a.StableTranslation,e,h,p),void 0!==e.parameters.getProperty(o.a.SpeechServiceConnection_TranslationVoice,void 0)&&(h.voice=e.parameters.getProperty(o.a.SpeechServiceConnection_TranslationVoice),h.features="texttospeech");const d={};void 0!==t.token&&""!==t.token&&(d[t.headerName]=t.token),d[c.a.ConnectionId]=r,e.parameters.setProperty(o.a.SpeechServiceConnection_Url,p);const l="true"===e.parameters.getProperty("SPEECH-EnableWebsocketCompression","false");return new n.a(p,h,d,new a.a,i.a.fromRecognizerConfig(e),l,r)}}},function(e,t,r){"use strict";r.d(t,"a",(function(){return P}));var n=r(23),i=r(138),o=r(39),s=r(83),a=r(22),c=r(150),u=r(5),p=r(152),h=r(151),d=r(155),l=r(50),f=r(29),v=r(177),g=r(97),m=r(20),y=r(42),S=r(175),w=r(139),b=r(176),C=r(7),R=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};class P extends g.a{constructor(e,t,r,n,i){super(e,t,r,n,i),this.privTranslationRecognizer=i,this.connectionEvents.attach(e=>{"ConnectionEstablishedEvent"===e.name?this.privTranslationRecognizer.onConnection():"ConnectionClosedEvent"===e.name&&this.privTranslationRecognizer.onDisconnection()})}processTypeSpecificMessages(e){return R(this,void 0,void 0,(function*(){const t=new o.a;let r=!1;const i=n=>R(this,void 0,void 0,(function*(){if(this.privRequestSession.onPhraseRecognized(this.privRequestSession.currentTurnAudioOffset+n.Offset+n.Duration),n.RecognitionStatus===m.a.Success){const e=this.fireEventForResult(n,t);if(this.privTranslationRecognizer.recognized)try{this.privTranslationRecognizer.recognized(this.privTranslationRecognizer,e)}catch(e){}if(this.privSuccessCallback){try{this.privSuccessCallback(e.result)}catch(e){this.privErrorCallback&&this.privErrorCallback(e)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}}else{const i=y.a.implTranslateRecognitionResult(n.RecognitionStatus),o=new s.a(void 0,this.privRequestSession.requestId,i,n.Text,n.Duration,this.privRequestSession.currentTurnAudioOffset+n.Offset,void 0,e.textBody,t);if(i===a.a.Canceled){const e=y.a.implTranslateCancelResult(n.RecognitionStatus),t=y.a.implTranslateCancelErrorCode(n.RecognitionStatus);yield this.cancelRecognitionLocal(e,t,y.a.implTranslateErrorDetails(t))}else{if(!this.privRequestSession.isSpeechEnded||i!==a.a.NoMatch||n.RecognitionStatus===m.a.InitialSilenceTimeout){const e=new c.a(o,o.offset,this.privRequestSession.sessionId);if(this.privTranslationRecognizer.recognized)try{this.privTranslationRecognizer.recognized(this.privTranslationRecognizer,e)}catch(e){}}if(this.privSuccessCallback){try{this.privSuccessCallback(o)}catch(e){this.privErrorCallback&&this.privErrorCallback(e)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}}r=!0}}));switch(e.messageType===n.b.Text&&t.setProperty(u.a.SpeechServiceResponse_JsonResult,e.textBody),e.path.toLowerCase()){case"translation.hypothesis":const n=this.fireEventForResult(S.a.fromJSON(e.textBody),t);if(this.privRequestSession.onHypothesis(this.privRequestSession.currentTurnAudioOffset+n.offset),this.privTranslationRecognizer.recognizing)try{this.privTranslationRecognizer.recognizing(this.privTranslationRecognizer,n)}catch(e){}r=!0;break;case"translation.response":const o=JSON.parse(e.textBody);o.SpeechPhrase&&(yield i(w.a.fromTranslationResponse(o)));break;case"translation.phrase":yield i(w.a.fromJSON(e.textBody));break;case"translation.synthesis":this.sendSynthesisAudio(e.binaryBody,this.privRequestSession.sessionId),r=!0;break;case"translation.synthesis.end":const s=b.a.fromJSON(e.textBody);switch(s.SynthesisStatus){case m.b.Error:if(this.privTranslationRecognizer.synthesizing){const e=new p.a(a.a.Canceled,void 0),t=new h.a(e,this.privRequestSession.sessionId);try{this.privTranslationRecognizer.synthesizing(this.privTranslationRecognizer,t)}catch(e){}}if(this.privTranslationRecognizer.canceled){const e=new d.a(this.privRequestSession.sessionId,l.a.Error,s.FailureReason,f.a.ServiceError,null);try{this.privTranslationRecognizer.canceled(this.privTranslationRecognizer,e)}catch(e){}}break;case m.b.Success:this.sendSynthesisAudio(void 0,this.privRequestSession.sessionId)}r=!0}return r}))}cancelRecognition(e,t,r,n,i){const c=new o.a;if(c.setProperty(C.CancellationErrorCodePropertyName,f.a[n]),this.privTranslationRecognizer.canceled){const t=new d.a(e,r,i,n,void 0);try{this.privTranslationRecognizer.canceled(this.privTranslationRecognizer,t)}catch(e){}}if(this.privSuccessCallback){const r=new s.a(void 0,t,a.a.Canceled,void 0,void 0,void 0,i,void 0,c);try{this.privSuccessCallback(r),this.privSuccessCallback=void 0}catch(e){}}}fireEventForResult(e,t){let r,n;if(void 0!==e.Translation.Translations){r=new v.a;for(const t of e.Translation.Translations)r.set(t.Language,t.Text||t.DisplayText)}n=e instanceof w.a?e.Translation.TranslationStatus===i.a.Success?a.a.TranslatedSpeech:a.a.RecognizedSpeech:a.a.TranslatingSpeech;const o=e.Offset+this.privRequestSession.currentTurnAudioOffset,u=new s.a(r,this.privRequestSession.requestId,n,e.Text,e.Duration,o,e.Translation.FailureReason,JSON.stringify(e),t);return new c.a(u,o,this.privRequestSession.sessionId)}sendSynthesisAudio(e,t){const r=void 0===e?a.a.SynthesizingAudioCompleted:a.a.SynthesizingAudio,n=new p.a(r,e),i=new h.a(n,t);if(this.privTranslationRecognizer.synthesizing)try{this.privTranslationRecognizer.synthesizing(this.privTranslationRecognizer,i)}catch(e){}}}},function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));class n{constructor(e){this.privSpeechKeyword=JSON.parse(e)}static fromJSON(e){return new n(e)}get Status(){return this.privSpeechKeyword.Status}get Text(){return this.privSpeechKeyword.Text}get Offset(){return this.privSpeechKeyword.Offset}get Duration(){return this.privSpeechKeyword.Duration}}},function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));class n{constructor(e,t){this.privActivity=e,this.privAudioStream=t}get activity(){return this.privActivity}get audioStream(){return this.privAudioStream}}},function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var n=r(54);class i{constructor(e,t){this.privContext=e||new n.a(null),this.privParameters=t}get parameters(){return this.privParameters}get Context(){return this.privContext}}},function(e,t,r){"use strict";r.d(t,"a",(function(){return u}));var n=r(99),i=r(57),o=r(5),s=r(137),a=r(31),c=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};class u{constructor(e){let t=e.parameters.getProperty(o.a.SpeechServiceConnection_Endpoint,void 0);if(!t){const r=e.parameters.getProperty(o.a.SpeechServiceConnection_Region,"westus"),n=a.a.getHostSuffix(r);t=e.parameters.getProperty(o.a.SpeechServiceConnection_Host,`https://${r}.api.cognitive${n}`)}this.privUri=t+"/speaker-recognition/{mode}/{dependency}/profiles";const r=n.a.requestOptions;r.headers[n.a.configParams.subscriptionKey]=e.parameters.getProperty(o.a.SpeechServiceConnection_Key,void 0),this.privApiVersion=e.parameters.getProperty(o.a.SpeakerRecognition_Api_Version,"2021-09-05"),this.privRestAdapter=new i.a(r)}createProfile(e,t){const r=this.getOperationUri(e);return this.privRestAdapter.request(i.b.Post,r,this.getQueryParams({}),{locale:t})}createEnrollment(e,t){const r=this.getOperationUri(e.profileType)+"/"+e.profileId+"/enrollments";return t.blob.then(e=>this.privRestAdapter.request(i.b.File,r,this.getQueryParams({ignoreMinLength:"true"}),null,e))}verifySpeaker(e,t){return c(this,void 0,void 0,(function*(){const r=this.getOperationUri(e.voiceProfile.profileType)+"/"+e.voiceProfile.profileId+":verify";try{const e=yield t.blob;return this.privRestAdapter.request(i.b.File,r,this.getQueryParams({ignoreMinLength:"true"}),null,e)}catch(e){return Promise.resolve({data:e})}}))}identifySpeaker(e,t){return c(this,void 0,void 0,(function*(){const r=this.getOperationUri(s.a.TextIndependentIdentification)+":identifySingleSpeaker";try{const n=yield t.blob;return this.privRestAdapter.request(i.b.File,r,this.getQueryParams({profileIds:e.voiceProfileIds,ignoreMinLength:"true"}),null,n)}catch(e){return Promise.resolve({data:e})}}))}getProfileStatus(e){const t=`${this.getOperationUri(e.profileType)}/${e.profileId}`;return this.privRestAdapter.request(i.b.Get,t,this.getQueryParams())}getProfiles(e){const t=this.getOperationUri(e);return this.privRestAdapter.request(i.b.Get,t,this.getQueryParams())}getPhrases(e,t){const r=(""+this.getOperationUri(e)).replace("profiles","phrases")+"/"+t;return this.privRestAdapter.request(i.b.Get,r,this.getQueryParams())}deleteProfile(e){const t=this.getOperationUri(e.profileType)+"/"+e.profileId;return this.privRestAdapter.request(i.b.Delete,t,this.getQueryParams())}resetProfile(e){const t=this.getOperationUri(e.profileType)+"/"+e.profileId+":reset";return this.privRestAdapter.request(i.b.Post,t,this.getQueryParams())}getOperationUri(e){const t=e===s.a.TextIndependentIdentification?"identification":"verification",r=e===s.a.TextDependentVerification?"text-dependent":"text-independent";return this.privUri.replace("{mode}",t).replace("{dependency}",r)}getQueryParams(e={}){return e[n.a.configParams.apiVersion]=this.privApiVersion,e}}},function(e,t,r){"use strict";r.d(t,"a",(function(){return d}));var n=r(141),i=r(140),o=r(5),s=r(36),a=r(31),c=r(7),u=r(86),p=r(19),h=r(21);class d extends a.a{constructor(){super(...arguments),this.multiaudioRelativeUri="/speech/recognition/multiaudio"}create(e,t,r){let d=e.parameters.getProperty(o.a.SpeechServiceConnection_Endpoint,void 0);const l=e.parameters.getProperty(o.a.SpeechServiceConnection_Region,"centralus"),f="wss://transcribe."+l+".cts.speech"+a.a.getHostSuffix(l)+this.multiaudioRelativeUri,v=e.parameters.getProperty(o.a.SpeechServiceConnection_Host,f),g={},m=e.parameters.getProperty(o.a.SpeechServiceConnection_EndpointId,void 0),y=e.parameters.getProperty(o.a.SpeechServiceConnection_RecoLanguage,void 0);m?d&&-1!==d.search(h.a.CustomSpeechDeploymentId)||(g[h.a.CustomSpeechDeploymentId]=m):y&&(d&&-1!==d.search(h.a.Language)||(g[h.a.Language]=y));const S="true"===e.parameters.getProperty(o.a.SpeechServiceResponse_RequestWordLevelTimestamps,"false").toLowerCase(),w=e.parameters.getProperty(c.OutputFormatPropertyName,s.a[s.a.Simple])!==s.a[s.a.Simple];(S||w)&&(g[h.a.Format]=s.a[s.a.Detailed].toLowerCase()),this.setCommonUrlParams(e,g,d),d||(d=v);const b={};void 0!==t.token&&""!==t.token&&(b[t.headerName]=t.token),b[p.a.ConnectionId]=r,e.parameters.setProperty(o.a.SpeechServiceConnection_Url,d);const C="true"===e.parameters.getProperty("SPEECH-EnableWebsocketCompression","false");return new n.a(d,g,b,new u.a,i.a.fromRecognizerConfig(e),C,r)}}},function(e,t,r){"use strict";r.d(t,"a",(function(){return b}));var n=r(23),i=r(5),o=r(39),s=r(55),a=r(22),c=r(82),u=r(36),p=r(29),h=r(178),d=r(97),l=r(135),f=r(136),v=r(42),g=r(20),m=r(7),y=r(154),S=r(32),w=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};class b extends d.a{constructor(e,t,r,n,o){super(e,t,r,n,o),this.privTranscriberRecognizer=o,this.sendPrePayloadJSONOverride=e=>this.sendTranscriptionStartJSON(e),"true"===this.privRecognizerConfig.parameters.getProperty(i.a.SpeechServiceResponse_RequestWordLevelTimestamps)&&this.privSpeechContext.setWordLevelTimings()}sendSpeechEventAsync(e,t){return w(this,void 0,void 0,(function*(){if(this.privRequestSession.isRecognizing){const r=yield this.fetchConnection();yield this.sendSpeechEvent(r,this.createSpeechEventPayload(e,t))}}))}processTypeSpecificMessages(e){return w(this,void 0,void 0,(function*(){let t;const r=new o.a;r.setProperty(i.a.SpeechServiceResponse_JsonResult,e.textBody);let n=!1;switch(e.path.toLowerCase()){case"speech.hypothesis":case"speech.fragment":const i=l.a.fromJSON(e.textBody),o=i.Offset+this.privRequestSession.currentTurnAudioOffset;t=new s.a(this.privRequestSession.requestId,a.a.RecognizingSpeech,i.Text,i.Duration,o,i.Language,i.LanguageDetectionConfidence,i.SpeakerId,void 0,e.textBody,r),this.privRequestSession.onHypothesis(o);const p=new c.b(t,i.Duration,this.privRequestSession.sessionId);if(this.privTranscriberRecognizer.recognizing)try{this.privTranscriberRecognizer.recognizing(this.privTranscriberRecognizer,p)}catch(e){}n=!0;break;case"speech.phrase":const h=f.a.fromJSON(e.textBody),d=v.a.implTranslateRecognitionResult(h.RecognitionStatus);if(this.privRequestSession.onPhraseRecognized(this.privRequestSession.currentTurnAudioOffset+h.Offset+h.Duration),a.a.Canceled===d){const e=v.a.implTranslateCancelResult(h.RecognitionStatus),t=v.a.implTranslateCancelErrorCode(h.RecognitionStatus);yield this.cancelRecognitionLocal(e,t,v.a.implTranslateErrorDetails(t))}else{if(!this.privRequestSession.isSpeechEnded||d!==a.a.NoMatch||h.RecognitionStatus===g.a.InitialSilenceTimeout){if(this.privRecognizerConfig.parameters.getProperty(m.OutputFormatPropertyName)===u.a[u.a.Simple])t=new s.a(this.privRequestSession.requestId,d,h.DisplayText,h.Duration,h.Offset+this.privRequestSession.currentTurnAudioOffset,h.Language,h.LanguageDetectionConfidence,h.SpeakerId,void 0,e.textBody,r);else{const n=y.a.fromJSON(e.textBody),i=n.Offset+this.privRequestSession.currentTurnAudioOffset,o=n.getJsonWithCorrectedOffsets(i);t=new s.a(this.privRequestSession.requestId,d,n.Text,n.Duration,i,n.Language,n.LanguageDetectionConfidence,n.SpeakerId,void 0,o,r)}const n=new c.b(t,t.offset,this.privRequestSession.sessionId);if(this.privTranscriberRecognizer.recognized)try{this.privTranscriberRecognizer.recognized(this.privTranscriberRecognizer,n)}catch(e){}}if(this.privSuccessCallback){try{this.privSuccessCallback(t)}catch(e){this.privErrorCallback&&this.privErrorCallback(e)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}}n=!0}return n}))}cancelRecognition(e,t,r,n,i){const c=new o.a;if(c.setProperty(m.CancellationErrorCodePropertyName,p.a[n]),this.privTranscriberRecognizer.canceled){const t=new h.a(r,i,n,void 0,e);try{this.privTranscriberRecognizer.canceled(this.privTranscriberRecognizer,t)}catch(e){}}if(this.privSuccessCallback){const r=new s.a(t,a.a.Canceled,void 0,void 0,void 0,void 0,void 0,void 0,i,void 0,c);try{this.privSuccessCallback(r),this.privSuccessCallback=void 0}catch(e){}}}sendTranscriptionStartJSON(e){return w(this,void 0,void 0,(function*(){yield this.sendSpeechContext(e,!0);const t=this.privTranscriberRecognizer.getConversationInfo(),r=this.createSpeechEventPayload(t,"start");yield this.sendSpeechEvent(e,r),yield this.sendWaveHeader(e)}))}sendSpeechEvent(e,t){const r=JSON.stringify(t);if(r)return e.send(new S.a(n.b.Text,"speech.event",this.privRequestSession.requestId,"application/json",r))}createSpeechEventPayload(e,t){const r={id:"meeting",name:t,meeting:e.conversationProperties};return r.meeting.id=e.id,r.meeting.attendees=e.participants,r.meeting.record="on"===e.conversationProperties.audiorecording?"true":"false",r}}},function(e,t,r){"use strict";r.d(t,"a",(function(){return p}));var n=r(141),i=r(140),o=r(5),s=r(31),a=r(86),c=r(19),u=r(21);class p{constructor(){this.synthesisUri="/cognitiveservices/websocket/v1"}create(e,t,r){let p=e.parameters.getProperty(o.a.SpeechServiceConnection_Endpoint,void 0);const h=e.parameters.getProperty(o.a.SpeechServiceConnection_Region,void 0),d=s.a.getHostSuffix(h),l=e.parameters.getProperty(o.a.SpeechServiceConnection_EndpointId,void 0),f=void 0===l?"tts":"voice",v=e.parameters.getProperty(o.a.SpeechServiceConnection_Host,"wss://"+h+"."+f+".speech"+d);p||(p=v+this.synthesisUri);const g={};void 0!==t.token&&""!==t.token&&(g[t.headerName]=t.token),g[c.a.ConnectionId]=r,void 0!==l&&(g[u.a.CustomVoiceDeploymentId]=l),e.parameters.setProperty(o.a.SpeechServiceConnection_Url,p);const m="true"===e.parameters.getProperty("SPEECH-EnableWebsocketCompression","false");return new n.a(p,{},g,new a.a,i.a.fromParameters(e.parameters),m,r)}}},function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));var n,i=r(54);!function(e){e[e.Standard=0]="Standard",e[e.Custom=1]="Custom"}(n||(n={}));class o{constructor(e,t){this.privSynthesisServiceType=n.Standard,this.privSpeechServiceConfig=e||new i.e(new i.a(null)),this.privParameters=t}get parameters(){return this.privParameters}get synthesisServiceType(){return this.privSynthesisServiceType}set synthesisServiceType(e){this.privSynthesisServiceType=e}get SpeechServiceConfig(){return this.privSpeechServiceConfig}}},function(e,t,r){"use strict";r.d(t,"a",(function(){return c}));var n=r(99),i=r(57),o=r(5),s=r(31),a=r(19);class c{constructor(e,t){let r=e.parameters.getProperty(o.a.SpeechServiceConnection_Endpoint,void 0);if(!r){const t=e.parameters.getProperty(o.a.SpeechServiceConnection_Region,"westus"),n=s.a.getHostSuffix(t);r=e.parameters.getProperty(o.a.SpeechServiceConnection_Host,`https://${t}.tts.speech${n}`)}this.privUri=r+"/cognitiveservices/voices/list";const a=n.a.requestOptions;this.privRestAdapter=new i.a(a),this.privAuthentication=t}getVoicesList(e){return this.privRestAdapter.setHeaders(a.a.ConnectionId,e),this.privAuthentication.fetch(e).then(e=>(this.privRestAdapter.setHeaders(e.headerName,e.token),this.privRestAdapter.request(i.b.Get,this.privUri)))}}},,function(e,t,r){"use strict";r.d(t,"a",(function(){return H}));var n=r(271),i=r(14);class o extends i.b{constructor(e,t=i.a.Info){super(e,t)}}class s extends o{constructor(e){super("SendingAgentContextMessageEvent"),this.privAgentConfig=e}get agentConfig(){return this.privAgentConfig}}var a,c=r(77),u=r(33),p=r(23),h=r(87),d=r(238),l=r(156),f=r(301),v=r(75),g=r(50),m=r(29),y=r(39),S=r(5),w=r(55),b=r(22),C=r(82),R=r(169),P=r(96),I=r(76),E=r(35),_=r(218),T=r(228),A=r(15),O=r(46);class x{constructor(e){this.privActivityResponse=JSON.parse(e)}static fromJSON(e){return new x(e)}get conversationId(){return this.privActivityResponse.conversationId}get messageDataStreamType(){return this.privActivityResponse.messageDataStreamType}get messagePayload(){return this.privActivityResponse.messagePayload}get version(){return this.privActivityResponse.version}}!function(e){e[e.None=0]="None",e[e.TextToSpeechAudio=1]="TextToSpeechAudio"}(a||(a={}));class k{constructor(e,t){this.privRequestId=t,this.privIsCompleted=!1,this.privAudioStream=null,this.privTurnManager=e,this.resetTurnEndTimeout()}get audioStream(){return this.resetTurnEndTimeout(),this.privAudioStream}processActivityPayload(e,t){return e.messageDataStreamType===a.TextToSpeechAudio&&(this.privAudioStream=O.a.createPullStream(),this.privAudioStream.format=void 0!==t?t:v.a.getDefaultOutputFormat()),this.privAudioStream}endAudioStream(){null===this.privAudioStream||this.privAudioStream.isClosed||this.privAudioStream.close()}complete(){void 0!==this.privTimeoutToken&&clearTimeout(this.privTimeoutToken),this.endAudioStream()}resetTurnEndTimeout(){void 0!==this.privTimeoutToken&&clearTimeout(this.privTimeoutToken),this.privTimeoutToken=setTimeout(()=>{this.privTurnManager.CompleteTurn(this.privRequestId)},2e3)}}class D{constructor(){this.privTurnMap=new Map}StartTurn(e){if(this.privTurnMap.has(e))throw new A.b("Service error: There is already a turn with id:"+e);const t=new k(this,e);return this.privTurnMap.set(e,t),this.privTurnMap.get(e)}GetTurn(e){return this.privTurnMap.get(e)}CompleteTurn(e){if(!this.privTurnMap.has(e))throw new A.b("Service error: Received turn end for an unknown turn id:"+e);const t=this.privTurnMap.get(e);return t.complete(),this.privTurnMap.delete(e),t}}var M=r(97),L=r(136),N=r(20),z=r(135),B=r(217),j=r(7),U=r(153),F=r(42),q=r(32),W=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};class H extends M.a{constructor(e,t,r,n,i){super(e,t,r,n,i),this.privEvents=new c.a,this.privDialogServiceConnector=i,this.receiveMessageOverride=()=>this.receiveDialogMessageOverride(),this.privTurnStateManager=new D,this.recognizeOverride=(e,t,r)=>this.listenOnce(e,t,r),this.postConnectImplOverride=e=>this.dialogConnectImpl(e),this.configConnectionOverride=e=>this.configConnection(e),this.disconnectOverride=()=>this.privDisconnect(),this.privDialogAudioSource=r,this.agentConfigSent=!1,this.privLastResult=null,this.connectionEvents.attach(e=>{"ConnectionClosedEvent"===e.name&&(this.terminateMessageLoop=!0)})}sendMessage(e){return W(this,void 0,void 0,(function*(){const t=Object(u.a)(),r=Object(u.b)(),n={context:{interactionId:t},messagePayload:JSON.parse(e),version:.5},i=JSON.stringify(n),o=yield this.fetchConnection();yield o.send(new q.a(p.b.Text,"agent",r,"application/json",i))}))}privDisconnect(){return W(this,void 0,void 0,(function*(){yield this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,g.a.Error,m.a.NoError,"Disconnecting"),this.terminateMessageLoop=!0,this.agentConfigSent=!1}))}processTypeSpecificMessages(e){const t=new y.a;let r,n;switch(e.messageType===p.b.Text&&t.setProperty(S.a.SpeechServiceResponse_JsonResult,e.textBody),e.path.toLowerCase()){case"speech.phrase":const i=L.a.fromJSON(e.textBody);if(this.privRequestSession.onPhraseRecognized(this.privRequestSession.currentTurnAudioOffset+i.Offset+i.Duration),i.RecognitionStatus!==N.a.TooManyRequests&&i.RecognitionStatus!==N.a.Error){const r=this.fireEventForResult(i,t);if(this.privLastResult=r.result,this.privDialogServiceConnector.recognized)try{this.privDialogServiceConnector.recognized(this.privDialogServiceConnector,r)}catch(e){}}n=!0;break;case"speech.hypothesis":const o=z.a.fromJSON(e.textBody),s=o.Offset+this.privRequestSession.currentTurnAudioOffset;r=new w.a(this.privRequestSession.requestId,b.a.RecognizingSpeech,o.Text,o.Duration,s,o.Language,o.LanguageDetectionConfidence,void 0,void 0,e.textBody,t),this.privRequestSession.onHypothesis(s);const a=new C.b(r,o.Duration,this.privRequestSession.sessionId);if(this.privDialogServiceConnector.recognizing)try{this.privDialogServiceConnector.recognizing(this.privDialogServiceConnector,a)}catch(e){}n=!0;break;case"speech.keyword":const c=B.a.fromJSON(e.textBody);r=new w.a(this.privRequestSession.requestId,"Accepted"===c.Status?b.a.RecognizedKeyword:b.a.NoMatch,c.Text,c.Duration,c.Offset,void 0,void 0,void 0,void 0,e.textBody,t),"Accepted"!==c.Status&&(this.privLastResult=r);const u=new C.b(r,r.duration,r.resultId);if(this.privDialogServiceConnector.recognized)try{this.privDialogServiceConnector.recognized(this.privDialogServiceConnector,u)}catch(e){}n=!0;break;case"audio":{const t=e.requestId.toUpperCase(),r=this.privTurnStateManager.GetTurn(t);try{e.binaryBody?r.audioStream.write(e.binaryBody):r.endAudioStream()}catch(e){}}n=!0;break;case"response":this.handleResponseMessage(e),n=!0}const i=new h.a;return i.resolve(n),i.promise}cancelRecognition(e,t,r,n,i){return W(this,void 0,void 0,(function*(){if(this.terminateMessageLoop=!0,this.privRequestSession.isRecognizing&&(yield this.privRequestSession.onStopRecognizing()),this.privDialogServiceConnector.canceled){const t=new y.a;t.setProperty(j.CancellationErrorCodePropertyName,m.a[n]);const o=new R.a(r,i,n,void 0,e);try{this.privDialogServiceConnector.canceled(this.privDialogServiceConnector,o)}catch(e){}if(this.privSuccessCallback){const e=new w.a(void 0,b.a.Canceled,void 0,void 0,void 0,void 0,void 0,void 0,i,void 0,t);try{this.privSuccessCallback(e),this.privSuccessCallback=void 0}catch(e){}}}}))}listenOnce(e,t,r){return W(this,void 0,void 0,(function*(){this.privRecognizerConfig.recognitionMode=e,this.privSuccessCallback=t,this.privErrorCallback=r,this.privRequestSession.startNewRecognition(),this.privRequestSession.listenForServiceTelemetry(this.privDialogAudioSource.events),this.privRecognizerConfig.parameters.setProperty(S.a.Speech_SessionId,this.privRequestSession.sessionId);const i=this.connectImpl(),o=this.sendPreAudioMessages(),s=yield this.privDialogAudioSource.attach(this.privRequestSession.audioNodeId),a=yield this.privDialogAudioSource.format,c=yield this.privDialogAudioSource.deviceInfo,u=new n.a(s,a.avgBytesPerSec);yield this.privRequestSession.onAudioSourceAttachCompleted(u,!1),this.privRecognizerConfig.SpeechServiceConfig.Context.audio={source:c};try{yield i,yield o}catch(e){return yield this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,g.a.Error,m.a.ConnectionFailure,e),Promise.resolve()}const p=new P.a(this.privRequestSession.sessionId);this.privRecognizer.sessionStarted&&this.privRecognizer.sessionStarted(this.privRecognizer,p),this.sendAudio(u).then(()=>{},e=>W(this,void 0,void 0,(function*(){yield this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,g.a.Error,m.a.RuntimeError,e)})))}))}dialogConnectImpl(e){return this.privConnectionLoop=this.startMessageLoop(),e}receiveDialogMessageOverride(){const e=new h.a,t=()=>W(this,void 0,void 0,(function*(){try{const r=this.isDisposed(),n=!this.isDisposed()&&this.terminateMessageLoop;if(r||n)return void e.resolve(void 0);const i=yield this.fetchConnection(),o=yield i.read();if(!o)return t();const s=q.a.fromConnectionMessage(o);switch(s.path.toLowerCase()){case"turn.start":{const e=s.requestId.toUpperCase();e!==this.privRequestSession.requestId.toUpperCase()?this.privTurnStateManager.StartTurn(e):this.privRequestSession.onServiceTurnStartResponse()}break;case"speech.startdetected":const e=U.a.fromJSON(s.textBody),t=new I.a(e.Offset,this.privRequestSession.sessionId);this.privRecognizer.speechStartDetected&&this.privRecognizer.speechStartDetected(this.privRecognizer,t);break;case"speech.enddetected":let r;r=s.textBody.length>0?s.textBody:"{ Offset: 0 }";const n=U.a.fromJSON(r);this.privRequestSession.onServiceRecognized(n.Offset+this.privRequestSession.currentTurnAudioOffset);const i=new I.a(n.Offset+this.privRequestSession.currentTurnAudioOffset,this.privRequestSession.sessionId);this.privRecognizer.speechEndDetected&&this.privRecognizer.speechEndDetected(this.privRecognizer,i);break;case"turn.end":{const e=s.requestId.toUpperCase();if(e!==this.privRequestSession.requestId.toUpperCase())this.privTurnStateManager.CompleteTurn(e);else{const e=new P.a(this.privRequestSession.sessionId);if(yield this.privRequestSession.onServiceTurnEndResponse(!1),this.privRecognizerConfig.isContinuousRecognition&&!this.privRequestSession.isSpeechEnded&&this.privRequestSession.isRecognizing||this.privRecognizer.sessionStopped&&this.privRecognizer.sessionStopped(this.privRecognizer,e),this.privSuccessCallback&&this.privLastResult){try{this.privSuccessCallback(this.privLastResult),this.privLastResult=null}catch(e){this.privErrorCallback&&this.privErrorCallback(e)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}}}break;default:try{(yield this.processTypeSpecificMessages(s))||this.serviceEvents&&this.serviceEvents.onEvent(new d.h(s.path.toLowerCase(),s.textBody))}catch(e){}}return t()}catch(t){this.terminateMessageLoop=!0,e.resolve()}}));return t().catch(e=>{l.a.instance.onEvent(new f.a(e))}),e.promise}startMessageLoop(){return W(this,void 0,void 0,(function*(){this.terminateMessageLoop=!1;try{yield this.receiveDialogMessageOverride()}catch(e){yield this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,g.a.Error,m.a.RuntimeError,e)}return Promise.resolve()}))}configConnection(e){return W(this,void 0,void 0,(function*(){return this.terminateMessageLoop?(this.terminateMessageLoop=!1,Promise.reject("Connection to service terminated.")):(yield this.sendSpeechServiceConfig(e,this.privRequestSession,this.privRecognizerConfig.SpeechServiceConfig.serialize()),yield this.sendAgentConfig(e),e)}))}sendPreAudioMessages(){return W(this,void 0,void 0,(function*(){const e=yield this.fetchConnection();this.addKeywordContextData(),yield this.sendSpeechContext(e,!0),yield this.sendAgentContext(e),yield this.sendWaveHeader(e)}))}sendAgentConfig(e){if(this.agentConfig&&!this.agentConfigSent){if(this.privRecognizerConfig.parameters.getProperty(S.a.Conversation_DialogType)===E.a.DialogTypes.CustomCommands){const e=this.agentConfig.get();e.botInfo.commandsCulture=this.privRecognizerConfig.parameters.getProperty(S.a.SpeechServiceConnection_RecoLanguage,"en-us"),this.agentConfig.set(e)}this.onEvent(new s(this.agentConfig));const t=this.agentConfig.toJsonString();return this.agentConfigSent=!0,e.send(new q.a(p.b.Text,"agent.config",this.privRequestSession.requestId,"application/json",t))}}sendAgentContext(e){const t=Object(u.a)(),r=this.privDialogServiceConnector.properties.getProperty(S.a.Conversation_Speech_Activity_Template),n={channelData:"",context:{interactionId:t},messagePayload:void 0===typeof r?void 0:r,version:.5},i=JSON.stringify(n);return e.send(new q.a(p.b.Text,"speech.agent.context",this.privRequestSession.requestId,"application/json",i))}fireEventForResult(e,t){const r=F.a.implTranslateRecognitionResult(e.RecognitionStatus),n=e.Offset+this.privRequestSession.currentTurnAudioOffset,i=new w.a(this.privRequestSession.requestId,r,e.DisplayText,e.Duration,n,e.Language,e.LanguageDetectionConfidence,void 0,void 0,JSON.stringify(e),t);return new C.b(i,n,this.privRequestSession.sessionId)}handleResponseMessage(e){const t=JSON.parse(e.textBody);switch(t.messageType.toLowerCase()){case"message":const r=e.requestId.toUpperCase(),n=x.fromJSON(e.textBody),i=this.privTurnStateManager.GetTurn(r);if(n.conversationId){const e=this.agentConfig.get();e.botInfo.conversationId=n.conversationId,this.agentConfig.set(e)}const o=i.processActivityPayload(n,v.a.fromSpeechSynthesisOutputFormatString(this.privDialogServiceConnector.properties.getProperty(S.a.SpeechServiceConnection_SynthOutputFormat,void 0))),s=new _.a(n.messagePayload,o);if(this.privDialogServiceConnector.activityReceived)try{this.privDialogServiceConnector.activityReceived(this.privDialogServiceConnector,s)}catch(e){}break;case"messagestatus":if(this.privDialogServiceConnector.turnStatusReceived)try{this.privDialogServiceConnector.turnStatusReceived(this.privDialogServiceConnector,new T.a(e.textBody))}catch(e){}break;default:l.a.instance.onEvent(new f.a(`Unexpected response of type ${t.messageType}. Ignoring.`))}}onEvent(e){this.privEvents.onEvent(e),l.a.instance.onEvent(e)}addKeywordContextData(){const e=this.privRecognizerConfig.parameters.getProperty("SPEECH-KeywordsToDetect");if(void 0===e)return;const t=this.privRecognizerConfig.parameters.getProperty("SPEECH-KeywordsToDetect-Offsets"),r=this.privRecognizerConfig.parameters.getProperty("SPEECH-KeywordsToDetect-Durations"),n=e.split(";"),i=void 0===t?[]:t.split(";"),o=void 0===r?[]:r.split(";"),s=[];for(let e=0;e<n.length;e++){const t={};t.text=n[e],e<i.length&&(t.offset=Number(i[e])),e<o.length&&(t.duration=Number(o[e])),s.push(t)}this.speechContext.setSection("invocationSource","VoiceActivationWithKeyword"),this.speechContext.setSection("keywordDetection",[{clientDetectedKeywords:s,onReject:{action:"EndOfTurn"},type:"startTrigger"}])}}},function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));class n{constructor(e){this.privMessageStatusResponse=JSON.parse(e)}static fromJSON(e){return new n(e)}get interactionId(){return this.privMessageStatusResponse.interactionId}get conversationId(){return this.privMessageStatusResponse.conversationId}get statusCode(){switch(this.privMessageStatusResponse.statusCode){case"Success":return 200;case"Failed":return 400;case"TimedOut":return 429;default:return this.privMessageStatusResponse.statusCode}}}class i{constructor(e){this.privTurnStatus=n.fromJSON(e)}get interactionId(){return this.privTurnStatus.interactionId}get conversationId(){return this.privTurnStatus.conversationId}get statusCode(){return this.privTurnStatus.statusCode}}},function(e,t){},function(e,t,r){"use strict";(function(e,n){r.d(t,"a",(function(){return g}));var i=r(231),o=r(88),s=r(37),a=r(156),c=r(232),u=r.n(c),p=r(233),h=r.n(p),d=r(234),l=r.n(d),f=r(235),v=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};class g{constructor(t){t&&(this.privProxyInfo=t),g.privDiskCache||(g.privDiskCache=new h.a("microsoft-cognitiveservices-speech-sdk-cache",{supportBuffer:!0,location:void 0!==e&&e.env.SPEECH_OCSP_CACHE_ROOT?e.env.SPEECH_OCSP_CACHE_ROOT:void 0}))}static forceReinitDiskCache(){g.privDiskCache=void 0,g.privMemCache={}}GetAgent(e){const t=new u.a.Agent(this.CreateConnection);return void 0!==this.privProxyInfo&&void 0!==this.privProxyInfo.HostName&&this.privProxyInfo.Port>0&&(t.privProxyInfo=this.privProxyInfo),t}static GetProxyAgent(e){const t={host:e.HostName,port:e.Port};return e.UserName?t.headers={"Proxy-Authentication":"Basic "+new n(`${e.UserName}:${void 0===e.Password?"":e.Password}`).toString("base64")}:t.headers={},t.headers.requestOCSP="true",new l.a(t)}static OCSPCheck(e,t){return v(this,void 0,void 0,(function*(){let r,n,i=!1;const a=yield e;a.cork();const c=a;return new Promise((e,u)=>{a.on("OCSPResponse",e=>{e&&(this.onEvent(new s.n),n=e)}),a.on("error",e=>{i||(i=!0,a.destroy(),u(e))}),c.on("secure",()=>v(this,void 0,void 0,(function*(){const s=c.getPeerCertificate(!0);try{const c=yield this.GetIssuer(s);r=o.request.generate(s.raw,c.raw);const u=r.id.toString("hex");if(!n){const e=yield g.GetResponseFromCache(u,r,t);n=e}yield this.VerifyOCSPResponse(n,r,t),a.uncork(),i=!0,e(a)}catch(e){a.destroy(),i=!0,u(e)}})))})}))}static GetIssuer(e){return e.issuerCertificate?Promise.resolve(e.issuerCertificate):new Promise((t,r)=>{new o.Agent({}).fetchIssuer(e,null,(e,n)=>{e?r(e):t(n)})})}static GetResponseFromCache(e,t,r){return v(this,void 0,void 0,(function*(){let n=g.privMemCache[e];if(n&&this.onEvent(new s.k(e)),!n)try{const t=yield g.privDiskCache.get(e);t.isCached&&(g.onEvent(new s.i(e)),g.StoreMemoryCacheEntry(e,t.value),n=t.value)}catch(e){n=null}if(!n)return n;try{const i=o.utils.parseResponse(n).value.tbsResponseData;if(i.responses.length<1)return void this.onEvent(new s.c(e,"Not enough data in cached response"));const a=i.responses[0].thisUpdate,c=i.responses[0].nextUpdate;if(c<Date.now()+this.testTimeOffset-6e4)this.onEvent(new s.a(e,c)),n=null;else{const n=Math.min(864e5,(c-a)/2);c-(Date.now()+this.testTimeOffset)<n?(this.onEvent(new s.b(e,a,c)),this.UpdateCache(t,r).catch(t=>{this.onEvent(new s.g(e,t.toString()))})):this.onEvent(new s.d(e,a,c))}}catch(t){this.onEvent(new s.c(e,t)),n=null}return n||this.onEvent(new s.e(e)),n}))}static VerifyOCSPResponse(e,t,r){return v(this,void 0,void 0,(function*(){let n=e;return n||(n=yield g.GetOCSPResponse(t,r)),new Promise((i,a)=>{o.verify({request:t,response:n},o=>{o?(g.onEvent(new s.o(t.id.toString("hex"),o)),e?this.VerifyOCSPResponse(null,t,r).then(()=>{i()},e=>{a(e)}):a(o)):(e||g.StoreCacheEntry(t.id.toString("hex"),n),i())})})}))}static UpdateCache(e,t){return v(this,void 0,void 0,(function*(){const r=e.id.toString("hex");this.onEvent(new s.h(r));const n=yield this.GetOCSPResponse(e,t);this.StoreCacheEntry(r,n),this.onEvent(new s.f(e.id.toString("hex")))}))}static StoreCacheEntry(e,t){this.StoreMemoryCacheEntry(e,t),this.StoreDiskCacheEntry(e,t)}static StoreMemoryCacheEntry(e,t){this.privMemCache[e]=t,this.onEvent(new s.l(e))}static StoreDiskCacheEntry(e,t){this.privDiskCache.set(e,t).then(()=>{this.onEvent(new s.j(e))})}static GetOCSPResponse(e,t){let r={};if(t){const e=g.GetProxyAgent(t);r.agent=e}return new Promise((t,n)=>{o.utils.getAuthorityInfo(e.cert,"1.3.6.1.5.5.7.48.1",(i,a)=>{if(i)return void n(i);const c=new URL(a);r=Object.assign(Object.assign({},r),{host:c.host,protocol:c.protocol,port:c.port,path:c.pathname,hostname:c.host}),o.utils.getResponse(r,e.data,(r,i)=>{if(r)return void n(r);const o=e.certID;this.onEvent(new s.m(o.toString("hex"))),t(i)})})})}static onEvent(e){a.a.instance.onEvent(e)}CreateConnection(t,r){const n=void 0!==e&&"0"!==e.env.NODE_TLS_REJECT_UNAUTHORIZED&&"0"!==e.env.SPEECH_CONDUCT_OCSP_CHECK&&r.secureEndpoint;let o;if(r=Object.assign(Object.assign({},r),{requestOCSP:!g.forceDisableOCSPStapling,servername:r.host}),this.privProxyInfo){const e=g.GetProxyAgent(this.privProxyInfo);o=new Promise((n,i)=>{e.callback(t,r,(e,t)=>{e?i(e):n(t)})})}else o=r.secureEndpoint?Promise.resolve(i.connect(r)):Promise.resolve(f.connect(r));return n?g.OCSPCheck(o,this.privProxyInfo):o}}g.testTimeOffset=0,g.forceDisableOCSPStapling=!1,g.privMemCache={}}).call(this,r(66),r(207).Buffer)},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t,r){"use strict";const n=r(262);class i extends Error{constructor(e,...t){let r;super(...t),Error.captureStackTrace&&Error.captureStackTrace(this,i),this.name="StatusError",this.message=e.statusMessage,this.statusCode=e.status,this.res=e,this.json=e.json.bind(e),this.text=e.text.bind(e),this.arrayBuffer=e.arrayBuffer.bind(e),Object.defineProperty(this,"responseBody",{get:()=>(r||(r=this.arrayBuffer()),r)}),this.headers={};for(const[t,r]of e.headers.entries())this.headers[t.toLowerCase()]=r}}e.exports=n((e,t,r,n,o)=>async(s,a,c={})=>{s=o+(s||"");let u=new URL(s);if(n||(n={}),u.username&&(n.Authorization="Basic "+btoa(u.username+":"+u.password),u=new URL(u.protocol+"//"+u.host+u.pathname+u.search)),"https:"!==u.protocol&&"http:"!==u.protocol)throw new Error("Unknown protocol, "+u.protocol);if(a)if(a instanceof ArrayBuffer||ArrayBuffer.isView(a)||"string"==typeof a);else{if("object"!=typeof a)throw new Error("Unknown body type.");a=JSON.stringify(a),n["Content-Type"]="application/json"}c=new Headers({...n||{},...c});const p=await fetch(u,{method:t,headers:c,body:a});if(p.statusCode=p.status,!e.has(p.status))throw new i(p);return"json"===r?p.json():"buffer"===r?p.arrayBuffer():"string"===r?p.text():p})},function(e,t,r){"use strict";r.d(t,"a",(function(){return s}));var n=r(15),i=r(33),o=r(183);class s{constructor(e){this.privIsWriteEnded=!1,this.privIsReadEnded=!1,this.privId=e||Object(i.b)(),this.privReaderQueue=new o.a}get isClosed(){return this.privIsWriteEnded}get isReadEnded(){return this.privIsReadEnded}get id(){return this.privId}close(){this.privIsWriteEnded||(this.writeStreamChunk({buffer:null,isEnd:!0,timeReceived:Date.now()}),this.privIsWriteEnded=!0)}writeStreamChunk(e){if(this.throwIfClosed(),!this.privReaderQueue.isDisposed())try{this.privReaderQueue.enqueue(e)}catch(e){}}read(){if(this.privIsReadEnded)throw new n.b("Stream read has already finished");return this.privReaderQueue.dequeue().then(e=>function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))}(this,void 0,void 0,(function*(){return(void 0===e||e.isEnd)&&(yield this.privReaderQueue.dispose("End of stream reached")),e})))}readEnded(){this.privIsReadEnded||(this.privIsReadEnded=!0,this.privReaderQueue=new o.a)}throwIfClosed(){if(this.privIsWriteEnded)throw new n.b("Stream closed")}}},function(e,t,r){"use strict";r.d(t,"h",(function(){return i})),r.d(t,"g",(function(){return s})),r.d(t,"d",(function(){return a})),r.d(t,"a",(function(){return c})),r.d(t,"b",(function(){return u})),r.d(t,"c",(function(){return p})),r.d(t,"e",(function(){return h})),r.d(t,"f",(function(){return d}));var n=r(14);class i extends n.b{constructor(e,t,r=n.a.Info){super(e,r),this.privJsonResult=t}get jsonString(){return this.privJsonResult}}class o extends n.b{constructor(e,t,r=n.a.Info){super(e,r),this.privConnectionId=t}get connectionId(){return this.privConnectionId}}class s extends o{constructor(e,t,r){super("ConnectionStartEvent",e),this.privUri=t,this.privHeaders=r}get uri(){return this.privUri}get headers(){return this.privHeaders}}class a extends o{constructor(e){super("ConnectionEstablishedEvent",e)}}class c extends o{constructor(e,t,r){super("ConnectionClosedEvent",e,n.a.Debug),this.privReason=r,this.privStatusCode=t}get reason(){return this.privReason}get statusCode(){return this.privStatusCode}}class u extends o{constructor(e,t,r){super("ConnectionErrorEvent",e,n.a.Debug),this.privMessage=t,this.privType=r}get message(){return this.privMessage}get type(){return this.privType}}class p extends o{constructor(e,t,r){super("ConnectionEstablishErrorEvent",e,n.a.Error),this.privStatusCode=t,this.privReason=r}get reason(){return this.privReason}get statusCode(){return this.privStatusCode}}class h extends o{constructor(e,t,r){super("ConnectionMessageReceivedEvent",e),this.privNetworkReceivedTime=t,this.privMessage=r}get networkReceivedTime(){return this.privNetworkReceivedTime}get message(){return this.privMessage}}class d extends o{constructor(e,t,r){super("ConnectionMessageSentEvent",e),this.privNetworkSentTime=t,this.privMessage=r}get networkSentTime(){return this.privNetworkSentTime}get message(){return this.privMessage}}},function(e,t,r){"use strict";r.d(t,"a",(function(){return s}));var n=r(23),i=r(15),o=r(33);class s{constructor(e,t,r){if(this.privPayload=null,!t)throw new i.a("payload");if(e===n.b.Binary&&"ArrayBuffer"!==t.__proto__.constructor.name)throw new i.b("Payload must be ArrayBuffer");if(e===n.b.Text&&"string"!=typeof t)throw new i.b("Payload must be a string");this.privMessageType=e,this.privPayload=t,this.privId=r||Object(o.b)()}get messageType(){return this.privMessageType}get payload(){return this.privPayload}get textContent(){if(this.privMessageType===n.b.Binary)throw new i.b("Not supported for binary message");return this.privPayload}get binaryContent(){if(this.privMessageType===n.b.Text)throw new i.b("Not supported for text message");return this.privPayload}get id(){return this.privId}}},function(e,t,r){"use strict";let n;Object.defineProperty(t,"__esModule",{value:!0}),t.apiAddSafariMessageListener=function(e){return n||o(),i.add(e),()=>{i.delete(e)}},t.apiSendSafariMessage=async function(e,t){try{const r=browser.runtime.sendNativeMessage("application.id",e);return t>0?await Promise.race([r,new Promise(e=>setTimeout(e,t))]):await r}catch(e){}};const i=new Set;function o(){n=browser.runtime.connectNative("application.id");const e=e=>{i.forEach(t=>{try{t(e)}catch(e){}})};n.onMessage.addListener(e),n.onDisconnect.addListener(t=>{n.onMessage.removeListener(e),setTimeout(o,6e4)})}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isTabWithTRS=async function(e){if(n.isExtEnv&&e)try{return await browser.tabs.sendMessage(e,{type:"isTabWithTRS"})}catch{return!1}return!1},t.addIsTabWithTRSListener=i,t.setupIsTabWithTRS=function(){return i(()=>Promise.resolve(!0))};var n=r(26);function i(e){if(n.isExtEnv){const t=(t,r)=>{if(t)switch(t.type){case"isTabWithTRS":return e()}};return browser.runtime.onMessage.addListener(t),()=>browser.runtime.onMessage.removeListener(t)}return()=>{}}},,,,function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.INTERPRETER_API=t.DISTILLER_WHITE_LIST=t.TRS_TOKEN=t.PUBLIC_SENTRY_URL=t.SUB_TYPE_l=t.DEFAULT_SUB_TYPE=t.SUB_TYPE_TGT=t.SUB_TYPE_ORG=t.SUB_TYPE_BIL=t.LANG_L=t.DEFAULT_LANG=t.JA=t.EN=t.ZH=void 0;t.INTERPRETER_API="https://api.interpreter.caiyunai.com/",t.DISTILLER_WHITE_LIST=["popsci.com","sciencealert.com","livescience.com","sciencedaily.com","aeon.co","thoughtco.com","pixiv","verywellmind.com","wired.com","buzzfeed.com","brightside.me","boredpanda.com","iflscience.com","archiveofourown.org"],t.TRS_TOKEN="lqkr1tfixq1wa9kmj9po",t.PUBLIC_SENTRY_URL="http://c49231b0334e4624b8941767b8f6bfa4@sentry.in.caiyunapp.com/22",t.SUB_TYPE_l=["bilingual","original","target"],t.DEFAULT_SUB_TYPE="bilingual",t.SUB_TYPE_TGT="target",t.SUB_TYPE_ORG="original",t.SUB_TYPE_BIL="bilingual",t.LANG_L=["zh","en","ja-JP"],t.DEFAULT_LANG="en",t.JA="ja-JP",t.EN="en",t.ZH="zh"},,,,,,,,,,,function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.injectTRS=async function(e){n.isExtEnv&&await browser.runtime.sendMessage({type:"injectTRSToCurrentTab",tab:e})},t.setupInjectTRS=function(e){n.isExtEnv&&browser.runtime.onMessage.addListener((t,r)=>{if(t)switch(t.type){case"injectTRSToCurrentTab":return e(t.tab)}})};var n=r(26)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getTTSPlayer=i,t.setupMsTTS=function(){const e=i();browser.runtime.onMessage.addListener(t=>{if(t&&"CYXY_PLAY_TTS"===t.type)return e(t.word),Promise.resolve()})};var n=r(258);function i(){const e=n.SpeechConfig.fromSubscription("19c0c31c0bf34b8994403b7acbf6ee33","southeastasia");let t=1;return browser.storage.sync.get({ttsSpeed:1}).then(e=>{e&&e.ttsSpeed&&(t=e.ttsSpeed)}),browser.storage.onChanged.addListener((e,r)=>{"sync"===r&&e.ttsSpeed&&(t=e.ttsSpeed.newValue)}),function(r){if(r){const i=function(e){try{if("string"!=typeof e)return null;if(null!==/^[\d\.,]*$/.exec(e))return null;const t=e.match(/[\u3020-\u303F]|[\u3040-\u309F]|[\u30A0-\u30FF]|[\u31F0-\u31FF]/g);if((t?t.length/e.length:0)>.03)return"jp";const r=e.match(/[\u1100-\u11FF\u3130-\u318F\uA960-\uA97F\uAC00-\uD7AF\uD7B0-\uD7FF]/g);if((r?r.length/e.length:0)>.03)return"ko";const n=e.match(/[\u4e00-\u9fa5]/g);return(n?n.length/e.length:0)>.1?"zh":/[a-z]/i.test(e)?"en":null}catch(e){return null}}(r);"ja"===i||"jp"===i?(e.speechRecognitionLanguage="ja-JP",e.speechSynthesisVoiceName="ja-JP-NanamiNeural"):"en"===i?(e.speechRecognitionLanguage="en-US",e.speechSynthesisVoiceName="en-US-JennyNeural"):"ko"===i?(e.speechRecognitionLanguage="ko-KR",e.speechSynthesisVoiceName="ko-KR-SunHiNeural"):(e.speechRecognitionLanguage="zh-CN",e.speechSynthesisVoiceName="zh-CN-XiaochenNeural");const o=new n.SpeechSynthesizer(e);o.speakSsmlAsync(`<speak version="1.0" xmlns="http://www.w3.org/2001/10/synthesis" xml:lang="${e.speechRecognitionLanguage}"><voice name="${e.speechSynthesisVoiceName}"><prosody rate="${t}">${r}</prosody></voice></speak>`,e=>(o.close(),e.audioData),e=>{o.close()})}}}},function(e,t,r){"use strict";r.r(t);var n=r(268),i=r(156),o=r(18);r.d(t,"AudioConfig",(function(){return o.b})),r.d(t,"AudioStreamFormat",(function(){return o.f})),r.d(t,"AudioFormatTag",(function(){return o.c})),r.d(t,"AudioInputStream",(function(){return o.d})),r.d(t,"PullAudioInputStream",(function(){return o.cb})),r.d(t,"PushAudioInputStream",(function(){return o.fb})),r.d(t,"AudioOutputStream",(function(){return o.e})),r.d(t,"PullAudioOutputStream",(function(){return o.eb})),r.d(t,"PushAudioOutputStream",(function(){return o.gb})),r.d(t,"CancellationReason",(function(){return o.n})),r.d(t,"PullAudioInputStreamCallback",(function(){return o.db})),r.d(t,"PushAudioOutputStreamCallback",(function(){return o.hb})),r.d(t,"KeywordRecognitionModel",(function(){return o.K})),r.d(t,"SessionEventArgs",(function(){return o.ob})),r.d(t,"RecognitionEventArgs",(function(){return o.ib})),r.d(t,"OutputFormat",(function(){return o.R})),r.d(t,"IntentRecognitionEventArgs",(function(){return o.H})),r.d(t,"RecognitionResult",(function(){return o.jb})),r.d(t,"SpeechRecognitionResult",(function(){return o.Bb})),r.d(t,"IntentRecognitionResult",(function(){return o.I})),r.d(t,"LanguageUnderstandingModel",(function(){return o.N})),r.d(t,"SpeechRecognitionEventArgs",(function(){return o.Ab})),r.d(t,"ConversationTranscriptionEventArgs",(function(){return o.x})),r.d(t,"SpeechRecognitionCanceledEventArgs",(function(){return o.zb})),r.d(t,"TranslationRecognitionEventArgs",(function(){return o.Qb})),r.d(t,"TranslationSynthesisEventArgs",(function(){return o.Tb})),r.d(t,"TranslationRecognitionResult",(function(){return o.Rb})),r.d(t,"TranslationSynthesisResult",(function(){return o.Ub})),r.d(t,"ResultReason",(function(){return o.lb})),r.d(t,"SpeechConfig",(function(){return o.xb})),r.d(t,"SpeechConfigImpl",(function(){return o.yb})),r.d(t,"SpeechTranslationConfig",(function(){return o.Lb})),r.d(t,"SpeechTranslationConfigImpl",(function(){return o.Mb})),r.d(t,"PropertyCollection",(function(){return o.ab})),r.d(t,"PropertyId",(function(){return o.bb})),r.d(t,"Recognizer",(function(){return o.kb})),r.d(t,"SpeechRecognizer",(function(){return o.Cb})),r.d(t,"IntentRecognizer",(function(){return o.J})),r.d(t,"VoiceProfileType",(function(){return o.gc})),r.d(t,"TranslationRecognizer",(function(){return o.Sb})),r.d(t,"Translations",(function(){return o.Vb})),r.d(t,"NoMatchReason",(function(){return o.Q})),r.d(t,"NoMatchDetails",(function(){return o.P})),r.d(t,"TranslationRecognitionCanceledEventArgs",(function(){return o.Pb})),r.d(t,"IntentRecognitionCanceledEventArgs",(function(){return o.G})),r.d(t,"CancellationDetailsBase",(function(){return o.l})),r.d(t,"CancellationDetails",(function(){return o.k})),r.d(t,"CancellationErrorCode",(function(){return o.m})),r.d(t,"ConnectionEventArgs",(function(){return o.p})),r.d(t,"ServiceEventArgs",(function(){return o.mb})),r.d(t,"Connection",(function(){return o.o})),r.d(t,"PhraseListGrammar",(function(){return o.U})),r.d(t,"DialogServiceConfig",(function(){return o.E})),r.d(t,"BotFrameworkConfig",(function(){return o.j})),r.d(t,"CustomCommandsConfig",(function(){return o.C})),r.d(t,"DialogServiceConnector",(function(){return o.F})),r.d(t,"ActivityReceivedEventArgs",(function(){return o.a})),r.d(t,"TurnStatusReceivedEventArgs",(function(){return o.Wb})),r.d(t,"ServicePropertyChannel",(function(){return o.nb})),r.d(t,"ProfanityOption",(function(){return o.V})),r.d(t,"BaseAudioPlayer",(function(){return o.i})),r.d(t,"ConnectionMessageEventArgs",(function(){return o.r})),r.d(t,"ConnectionMessage",(function(){return o.q})),r.d(t,"VoiceProfile",(function(){return o.Zb})),r.d(t,"VoiceProfileEnrollmentResult",(function(){return o.dc})),r.d(t,"VoiceProfileEnrollmentCancellationDetails",(function(){return o.cc})),r.d(t,"VoiceProfileResult",(function(){return o.fc})),r.d(t,"VoiceProfileCancellationDetails",(function(){return o.ac})),r.d(t,"VoiceProfilePhraseResult",(function(){return o.ec})),r.d(t,"VoiceProfileClient",(function(){return o.bc})),r.d(t,"SpeakerRecognizer",(function(){return o.vb})),r.d(t,"SpeakerIdentificationModel",(function(){return o.rb})),r.d(t,"SpeakerVerificationModel",(function(){return o.wb})),r.d(t,"AutoDetectSourceLanguageConfig",(function(){return o.g})),r.d(t,"AutoDetectSourceLanguageResult",(function(){return o.h})),r.d(t,"SourceLanguageConfig",(function(){return o.pb})),r.d(t,"SpeakerRecognitionResult",(function(){return o.tb})),r.d(t,"SpeakerRecognitionResultType",(function(){return o.ub})),r.d(t,"SpeakerRecognitionCancellationDetails",(function(){return o.sb})),r.d(t,"Conversation",(function(){return o.s})),r.d(t,"ConversationExpirationEventArgs",(function(){return o.t})),r.d(t,"ConversationParticipantsChangedEventArgs",(function(){return o.u})),r.d(t,"ConversationTranslationCanceledEventArgs",(function(){return o.y})),r.d(t,"ConversationTranslationEventArgs",(function(){return o.z})),r.d(t,"ConversationTranslationResult",(function(){return o.A})),r.d(t,"ConversationTranslator",(function(){return o.B})),r.d(t,"ConversationTranscriber",(function(){return o.v})),r.d(t,"Participant",(function(){return o.S})),r.d(t,"ParticipantChangedReason",(function(){return o.T})),r.d(t,"User",(function(){return o.Xb})),r.d(t,"SpeechSynthesisOutputFormat",(function(){return o.Gb})),r.d(t,"SpeechSynthesizer",(function(){return o.Kb})),r.d(t,"SynthesisResult",(function(){return o.Nb})),r.d(t,"SpeechSynthesisResult",(function(){return o.Hb})),r.d(t,"SpeechSynthesisEventArgs",(function(){return o.Fb})),r.d(t,"SpeechSynthesisWordBoundaryEventArgs",(function(){return o.Jb})),r.d(t,"SpeechSynthesisBookmarkEventArgs",(function(){return o.Db})),r.d(t,"SpeechSynthesisVisemeEventArgs",(function(){return o.Ib})),r.d(t,"SpeechSynthesisBoundaryType",(function(){return o.Eb})),r.d(t,"SynthesisVoicesResult",(function(){return o.Ob})),r.d(t,"VoiceInfo",(function(){return o.Yb})),r.d(t,"SpeakerAudioDestination",(function(){return o.qb})),r.d(t,"ConversationTranscriptionCanceledEventArgs",(function(){return o.w})),r.d(t,"PronunciationAssessmentGradingSystem",(function(){return o.X})),r.d(t,"PronunciationAssessmentGranularity",(function(){return o.Y})),r.d(t,"PronunciationAssessmentConfig",(function(){return o.W})),r.d(t,"PronunciationAssessmentResult",(function(){return o.Z})),r.d(t,"LanguageIdMode",(function(){return o.L})),r.d(t,"LanguageIdPriority",(function(){return o.M})),r.d(t,"Diagnostics",(function(){return o.D})),r.d(t,"LogLevel",(function(){return o.O})),i.a.instance.attachConsoleListener(new n.a)},function(e,t,r){"use strict";t.byteLength=function(e){var t=u(e),r=t[0],n=t[1];return 3*(r+n)/4-n},t.toByteArray=function(e){var t,r,n=u(e),s=n[0],a=n[1],c=new o(function(e,t,r){return 3*(t+r)/4-r}(0,s,a)),p=0,h=a>0?s-4:s;for(r=0;r<h;r+=4)t=i[e.charCodeAt(r)]<<18|i[e.charCodeAt(r+1)]<<12|i[e.charCodeAt(r+2)]<<6|i[e.charCodeAt(r+3)],c[p++]=t>>16&255,c[p++]=t>>8&255,c[p++]=255&t;return 2===a&&(t=i[e.charCodeAt(r)]<<2|i[e.charCodeAt(r+1)]>>4,c[p++]=255&t),1===a&&(t=i[e.charCodeAt(r)]<<10|i[e.charCodeAt(r+1)]<<4|i[e.charCodeAt(r+2)]>>2,c[p++]=t>>8&255,c[p++]=255&t),c},t.fromByteArray=function(e){for(var t,r=e.length,i=r%3,o=[],s=0,a=r-i;s<a;s+=16383)o.push(p(e,s,s+16383>a?a:s+16383));return 1===i?(t=e[r-1],o.push(n[t>>2]+n[t<<4&63]+"==")):2===i&&(t=(e[r-2]<<8)+e[r-1],o.push(n[t>>10]+n[t>>4&63]+n[t<<2&63]+"=")),o.join("")};for(var n=[],i=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,c=s.length;a<c;++a)n[a]=s[a],i[s.charCodeAt(a)]=a;function u(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");return-1===r&&(r=t),[r,r===t?0:4-r%4]}function p(e,t,r){for(var i,o,s=[],a=t;a<r;a+=3)i=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]),s.push(n[(o=i)>>18&63]+n[o>>12&63]+n[o>>6&63]+n[63&o]);return s.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},function(e,t){
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
t.read=function(e,t,r,n,i){var o,s,a=8*i-n-1,c=(1<<a)-1,u=c>>1,p=-7,h=r?i-1:0,d=r?-1:1,l=e[t+h];for(h+=d,o=l&(1<<-p)-1,l>>=-p,p+=a;p>0;o=256*o+e[t+h],h+=d,p-=8);for(s=o&(1<<-p)-1,o>>=-p,p+=n;p>0;s=256*s+e[t+h],h+=d,p-=8);if(0===o)o=1-u;else{if(o===c)return s?NaN:1/0*(l?-1:1);s+=Math.pow(2,n),o-=u}return(l?-1:1)*s*Math.pow(2,o-n)},t.write=function(e,t,r,n,i,o){var s,a,c,u=8*o-i-1,p=(1<<u)-1,h=p>>1,d=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,l=n?0:o-1,f=n?1:-1,v=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=p):(s=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-s))<1&&(s--,c*=2),(t+=s+h>=1?d/c:d*Math.pow(2,1-h))*c>=2&&(s++,c/=2),s+h>=p?(a=0,s=p):s+h>=1?(a=(t*c-1)*Math.pow(2,i),s+=h):(a=t*Math.pow(2,h-1)*Math.pow(2,i),s=0));i>=8;e[r+l]=255&a,l+=f,a/=256,i-=8);for(s=s<<i|a,u+=i;u>0;e[r+l]=255&s,l+=f,s/=256,u-=8);e[r+l-f]|=128*v}},function(e,t){var r={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==r.call(e)}},function(e,t,r){"use strict";const n=new Set(["json","buffer","string"]);e.exports=e=>(...t)=>{const r=new Set;let i,o,s,a="";return t.forEach(e=>{if("string"==typeof e)if(e.toUpperCase()===e){if(i)throw new Error(`Can't set method to ${e}, already set to ${i}.`);i=e}else if(e.startsWith("http:")||e.startsWith("https:"))a=e;else{if(!n.has(e))throw new Error("Unknown encoding, "+e);o=e}else if("number"==typeof e)r.add(e);else{if("object"!=typeof e)throw new Error("Unknown type: "+typeof e);if(Array.isArray(e)||e instanceof Set)e.forEach(e=>r.add(e));else{if(s)throw new Error("Cannot set headers twice.");s=e}}}),i||(i="GET"),0===r.size&&r.add(200),e(r,i,o,s,a)}},,,,,,function(e,t,r){"use strict";r.d(t,"a",(function(){return s}));var n=r(181),i=r(14),o=r(3);class s{constructor(e=i.a.None){this.privLogPath=void 0,this.privLogLevelFilter=e}set logPath(e){o.a.throwIfNullOrUndefined(n.openSync,"\nFile System access not available"),this.privLogPath=e}onEvent(e){if(e.eventType>=this.privLogLevelFilter){const t=this.toString(e);switch(this.privLogPath&&n.writeFileSync(this.privLogPath,t+"\n",{flag:"a+"}),e.eventType){case i.a.Debug:case i.a.Info:case i.a.Warning:case i.a.Error:}}}toString(e){const t=[""+e.eventTime,""+e.name],r=e;for(const n in r)if(n&&e.hasOwnProperty(n)&&"eventTime"!==n&&"eventType"!==n&&"eventId"!==n&&"name"!==n&&"constructor"!==n){const e=r[n];let i="<NULL>";null!=e&&(i="number"==typeof e||"string"==typeof e?e.toString():JSON.stringify(e)),t.push(`${n}: ${i}`)}return t.join(" | ")}}},function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var n=r(237);class i extends n.a{constructor(e,t){super(t),this.privTargetChunkSize=e,this.privNextBufferReadyBytes=0}writeStreamChunk(e){if(e.isEnd||0===this.privNextBufferReadyBytes&&e.buffer.byteLength===this.privTargetChunkSize)return void super.writeStreamChunk(e);let t=0;for(;t<e.buffer.byteLength;){void 0===this.privNextBufferToWrite&&(this.privNextBufferToWrite=new ArrayBuffer(this.privTargetChunkSize),this.privNextBufferStartTime=e.timeReceived);const r=Math.min(e.buffer.byteLength-t,this.privTargetChunkSize-this.privNextBufferReadyBytes),n=new Uint8Array(this.privNextBufferToWrite),i=new Uint8Array(e.buffer.slice(t,r+t));n.set(i,this.privNextBufferReadyBytes),this.privNextBufferReadyBytes+=r,t+=r,this.privNextBufferReadyBytes===this.privTargetChunkSize&&(super.writeStreamChunk({buffer:this.privNextBufferToWrite,isEnd:!1,timeReceived:this.privNextBufferStartTime}),this.privNextBufferReadyBytes=0,this.privNextBufferToWrite=void 0)}}close(){0===this.privNextBufferReadyBytes||this.isClosed||super.writeStreamChunk({buffer:this.privNextBufferToWrite.slice(0,this.privNextBufferReadyBytes),isEnd:!1,timeReceived:this.privNextBufferStartTime}),super.close()}}},function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));class n{static load(){const e=new Map([[0,()=>{}]]),t=new Map,r="data:text/javascript;base64,"+btoa('!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=14)}([function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return a})),n.d(t,"d",(function(){return d}));const r=new Map,o=new Map,i=e=>{const t=r.get(e);if(void 0===t)throw new Error(\'There is no interval scheduled with the given id "\'.concat(e,\'".\'));clearTimeout(t),r.delete(e)},u=e=>{const t=o.get(e);if(void 0===t)throw new Error(\'There is no timeout scheduled with the given id "\'.concat(e,\'".\'));clearTimeout(t),o.delete(e)},f=(e,t)=>{let n,r;if("performance"in self){const o=performance.now();n=o,r=e-Math.max(0,o-t)}else n=Date.now(),r=e;return{expected:n+r,remainingDelay:r}},c=(e,t,n,r)=>{const o="performance"in self?performance.now():Date.now();o>n?postMessage({id:null,method:"call",params:{timerId:t}}):e.set(t,setTimeout(c,n-o,e,t,n))},a=(e,t,n)=>{const{expected:o,remainingDelay:i}=f(e,n);r.set(t,setTimeout(c,i,r,t,o))},d=(e,t,n)=>{const{expected:r,remainingDelay:i}=f(e,n);o.set(t,setTimeout(c,i,o,t,r))}},function(e,t,n){"use strict";n.r(t);var r=n(2);for(var o in r)"default"!==o&&function(e){n.d(t,e,(function(){return r[e]}))}(o);var i=n(3);for(var o in i)"default"!==o&&function(e){n.d(t,e,(function(){return i[e]}))}(o);var u=n(4);for(var o in u)"default"!==o&&function(e){n.d(t,e,(function(){return u[e]}))}(o);var f=n(5);for(var o in f)"default"!==o&&function(e){n.d(t,e,(function(){return f[e]}))}(o);var c=n(6);for(var o in c)"default"!==o&&function(e){n.d(t,e,(function(){return c[e]}))}(o);var a=n(7);for(var o in a)"default"!==o&&function(e){n.d(t,e,(function(){return a[e]}))}(o);var d=n(8);for(var o in d)"default"!==o&&function(e){n.d(t,e,(function(){return d[e]}))}(o);var s=n(9);for(var o in s)"default"!==o&&function(e){n.d(t,e,(function(){return s[e]}))}(o)},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t,n){"use strict";n.r(t);var r=n(11);for(var o in r)"default"!==o&&function(e){n.d(t,e,(function(){return r[e]}))}(o);var i=n(12);for(var o in i)"default"!==o&&function(e){n.d(t,e,(function(){return i[e]}))}(o);var u=n(13);for(var o in u)"default"!==o&&function(e){n.d(t,e,(function(){return u[e]}))}(o)},function(e,t){},function(e,t){},function(e,t){},function(e,t,n){"use strict";n.r(t);var r=n(0),o=n(1);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);var u=n(10);for(var i in u)"default"!==i&&function(e){n.d(t,e,(function(){return u[e]}))}(i);addEventListener("message",({data:e})=>{try{if("clear"===e.method){const{id:t,params:{timerId:n}}=e;Object(r.b)(n),postMessage({error:null,id:t})}else{if("set"!==e.method)throw new Error(\'The given method "\'.concat(e.method,\'" is not supported\'));{const{params:{delay:t,now:n,timerId:o}}=e;Object(r.d)(t,o,n)}}}catch(t){postMessage({error:{message:t.message},id:e.id,result:null})}})}]);'),i=new Worker(r);return i.addEventListener("message",({data:r})=>{if(n.isCallNotification(r)){const{params:{timerId:n}}=r,i=e.get(n);if("number"==typeof i){const e=t.get(i);if(void 0===e||e!==n)throw new Error("The timer is in an undefined state.")}else{if(void 0===i)throw new Error("The timer is in an undefined state.");i(),e.delete(n)}}else{if(!n.isClearResponse(r)){const{error:{message:e}}=r;throw new Error(e)}{const{id:n}=r,i=t.get(n);if(void 0===i)throw new Error("The timer is in an undefined state.");t.delete(n),e.delete(i)}}}),{clearTimeout:r=>{const n=Math.random();t.set(n,r),e.set(r,n),i.postMessage({id:n,method:"clear",params:{timerId:r}})},setTimeout:(t,r)=>{const n=Math.random();return e.set(n,t),i.postMessage({id:null,method:"set",params:{delay:r,now:performance.now(),timerId:n}}),n}}}static loadWorkerTimers(){return()=>(null!==n.workerTimers||(n.workerTimers=n.load()),n.workerTimers)}static isCallNotification(e){return void 0!==e.method&&"call"===e.method}static isClearResponse(e){return null===e.error&&"number"==typeof e.id}}n.workerTimers=null,n.clearTimeout=e=>n.timers().clearTimeout(e),n.setTimeout=(e,t)=>n.timers().setTimeout(e,t),n.timers=n.loadWorkerTimers()},function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));class n{constructor(e,t){this.privBuffers=[],this.privReplayOffset=0,this.privLastShrinkOffset=0,this.privBufferStartOffset=0,this.privBufferSerial=0,this.privBufferedBytes=0,this.privReplay=!1,this.privLastChunkAcquiredTime=0,this.privAudioNode=e,this.privBytesPerSecond=t}id(){return this.privAudioNode.id()}read(){if(this.privReplay&&0!==this.privBuffers.length){const e=this.privReplayOffset-this.privBufferStartOffset;let t=Math.round(e*this.privBytesPerSecond*1e-7);0!=t%2&&t++;let r=0;for(;r<this.privBuffers.length&&t>=this.privBuffers[r].chunk.buffer.byteLength;)t-=this.privBuffers[r++].chunk.buffer.byteLength;if(r<this.privBuffers.length){const e=this.privBuffers[r].chunk.buffer.slice(t);return this.privReplayOffset+=e.byteLength/this.privBytesPerSecond*1e7,r===this.privBuffers.length-1&&(this.privReplay=!1),Promise.resolve({buffer:e,isEnd:!1,timeReceived:this.privBuffers[r].chunk.timeReceived})}}return this.privAudioNode.read().then(e=>(e&&e.buffer&&(this.privBuffers.push(new i(e,this.privBufferSerial++,this.privBufferedBytes)),this.privBufferedBytes+=e.buffer.byteLength),e))}detach(){return this.privBuffers=void 0,this.privAudioNode.detach()}replay(){this.privBuffers&&0!==this.privBuffers.length&&(this.privReplay=!0,this.privReplayOffset=this.privLastShrinkOffset)}shrinkBuffers(e){if(void 0===this.privBuffers||0===this.privBuffers.length)return;this.privLastShrinkOffset=e;const t=e-this.privBufferStartOffset;let r=Math.round(t*this.privBytesPerSecond*1e-7),n=0;for(;n<this.privBuffers.length&&r>=this.privBuffers[n].chunk.buffer.byteLength;)r-=this.privBuffers[n++].chunk.buffer.byteLength;this.privBufferStartOffset=Math.round(e-r/this.privBytesPerSecond*1e7),this.privBuffers=this.privBuffers.slice(n)}findTimeAtOffset(e){if(e<this.privBufferStartOffset||void 0===this.privBuffers)return 0;for(const t of this.privBuffers){const r=t.byteOffset/this.privBytesPerSecond*1e7,n=r+t.chunk.buffer.byteLength/this.privBytesPerSecond*1e7;if(e>=r&&e<=n)return t.chunk.timeReceived}return 0}}class i{constructor(e,t,r){this.chunk=e,this.serial=t,this.byteOffset=r}}},,,,function(e,t,r){"use strict";var n=r(79),i=r(58),o=r(63),s=r(159),a=r(161),c=r(245),u=r(89),p=r(80),h=r(256);r(276),r(277);var d=r(240),l=r(59),f=r(285),v=r(241),g=r(286);r(287);const m=navigator.userAgent.includes("Firefox"),y=/apple/i.test(navigator.vendor);var S,w;(0,n.setupVolcengine)(),(0,n.setupVolcengineBackgroundListener)(),(0,f.setupEncodeImg)(),browser.runtime.onInstalled.addListener(()=>{(0,p.firebasePageView)("onInstalled"),y?chrome.storage.sync.clear():(m&&chrome.storage.sync.clear(),browser.tabs.create({url:"bootPage.html"}))});var b=r(158),C=!1,R=c.DEFAULT_LANG,P=c.DEFAULT_SUB_TYPE;const I=new s.SideEffectManager;function E(e){browser.tabs.sendMessage(M,{type:"show_msg",msg_str:e})}function _(e,t,r){if(w.readyState==WebSocket.OPEN){for(let t=0;t<e.length;t++)w.send(e[t]);e.length=0}else w.readyState==WebSocket.CONNECTING?E(browser.i18n.getMessage("WsIsConnecting")):(E(browser.i18n.getMessage("WsIsNotOpened")),x())}var T=null,A=!1,O="";function x(){var e=6;R==c.JA&&(e=12),(w=new WebSocket("ws://api.interpreter.caiyunai.com/v1/audio",["subprotocols","lang#"+R,"if_interim_results#true","trans_interval#"+e,"token#"+O,"app#chrome_ext"])).onopen=function(){E(browser.i18n.getMessage("wsIsOpened")),L=M,A||(S&&(S.start(),E(browser.i18n.getMessage("recording"))),A=!0)},browser.runtime.lastError,w.onmessage=function(e){!function(e){let t=JSON.parse(e);1==t.to_close&&null==T&&(E(T=t.msg),E(browser.i18n.getMessage("closeRecorder")),browser.tabs.sendMessage(M,{type:"stopSubtitle"}),(0,u.reportEvent)({category:z,action:"closeSubByWS",label:T})),t&&0==t.rc&&t.target?browser.tabs.sendMessage(M,{type:"subtitleMsg",subtitle:t}):browser.tabs.sendMessage(M,{type:"subtitleMsg",subtitle:null})}(e.data)},w.onerror=function(e){E(browser.i18n.getMessage("wsError")),function(e){for(var t=(new Date).getTime();(new Date).getTime()<t+e;);}(2500),k((function(){E(browser.i18n.getMessage("closeRecorder")),browser.tabs.sendMessage(M,{type:"stopSubtitle"}),(0,u.reportEvent)({category:z,action:"closeSubByWS",label:"ws.onerror"})}))}}function k(e){e=e||NOOP,S?S.close(e):e(),A=!1,w&&(w.CLOSED||w.close())}var D="",M=-1,L=-11,N=[],z="cyxy-video";function B(e,t){if("showSubByVideoBtn"==e.type)browser.tabs.query({active:!0,currentWindow:!0}).then((function(e){if(!e[0])return;let t=e[0].url;var r;V(t)&&(D=t,M=e[0].id,r={audio:!0,video:!1,audioConstraints:{mandatory:{chromeMediaSource:"tab"}}},browser.tabCapture.capture(r,e=>{if(e){j(M);let t=e.getTracks();for(let e=0;e<t.length;e++)t[e].stop()}else browser.runtime.lastError.message.includes("permission")?(alert(browser.i18n.getMessage("requestReloadAndReload")),browser.tabs.sendMessage(M,{type:"closeVideoBtn"})):j(M)}))}));else if("closeSubByVideoBtn"==e.type)browser.tabs.sendMessage(M,{type:"closeSubtitle"}),(0,u.reportEvent)({category:z,action:e.type,label:R});else{if("recopen"==e.type)return(0,u.reportEvent)({category:z,action:e.type,label:e.lang}),new Promise(t=>{k((function(){R=e.lang,(S=Recorder({bitRate:16,sampleRate:16e3,type:"wav",bufferSize:4096,onProcess:_})).open_tab_audio_stream((function(){E(browser.i18n.getMessage("openRecorder")),x()}),(function(e){E(browser.i18n.getMessage("openRecorderError")+e)})),t({type:"accept"})}))});if("recclose"==e.type)return(0,u.reportEvent)({category:z,action:e.type,label:e.lang}),new Promise(e=>{k((function(){E(browser.i18n.getMessage("closeRecorder")),e({type:"reset"})}))});if("switchTrack"==e.type)(0,u.reportEvent)({category:z,action:e.type,label:e.newTrack});else if("clickCyxyBtn"==e.type)de()?(0,u.reportEvent)({category:"cyxy-"+e.btnName,action:"click",label:"isLoggedIn"}):(0,u.reportEvent)({category:"cyxy-"+e.btnName,action:"click",label:"isUnlogin"});else if("showSWTview"==e.type){let t=ee(e.direction);(0,p.firebasePageView)(`${e.type}?utm_source=${t}&utm_medium=website`)}else"optionsPageview"==e.type&&(0,p.firebasePageView)("options")}}function j(e){!async function(e,t){if(e=e||(()=>{}),t=t||(()=>{}),de())return void e();const r=await(0,a.testCookies)();if(r)return U.setValue(r._id),O=r.token,pe=U.value,void e();browser.tabs.sendMessage(M,{type:"alert",content:browser.i18n.getMessage("VideoTransReqLogin"),time:5}),t()}((function(){!function(e,t,r){M=e,browser.tabs.sendMessage(M,{type:"showSubtitle",lang:t,showLangMenu:!0}),N=N.filter(e=>e!==M);for(let e=0;e<N.length;e++){let t=N[e];browser.tabs.get(t,(function(){if(browser.runtime.lastError){let e=browser.runtime.lastError.message;b.captureException(e)}else le(t)}))}N=[M]}(e,R),(0,u.reportEvent)({category:"video",action:"transByVideoBtn:"+R}),(0,p.firebasePageView)("subtitle")}),(function(){(0,u.reportEvent)({category:"video",action:"requestLogin"})}))}const U=new l.StorageVal("local","uid");if(y){const e=new o.Val,t=new l.StorageVal("local","userInfo",{},i.isEqual);t.subscribe(async e=>{U.setValue(e.user_id);try{await browser.cookies.set({domain:".caiyunapp.com",url:"https://caiyunapp.com",name:"sf_user",value:encodeURIComponent(JSON.stringify({_id:e.user_id||""})),expirationDate:Date.now()/1e3+31536e3})}catch(e){}});const r=(e={user_id:""})=>{U.setValue(e.user_id),pe=U.value,t.setValue(e)},n=t=>{if(t)switch(t.name){case"updateUserInfo":r(t.userInfo);break;case"logout":r({user_id:""});break;case"launch":(0,d.apiSendSafariMessage)({type:"getUserInfo"},3e3).then(r);break;case"websocket":e.setValue(t.userInfo.port);break;case"eventLog":t.userInfo.params?(0,p.firebaseEvent)({name:t.userInfo.action,params:t.userInfo.params}):(0,p.firebaseEvent)({name:t.userInfo.action})}};e.subscribe(t=>{t?I.add(()=>{const r=new WebSocket(`ws://localhost:${t}/main`),i=()=>{},o=()=>{e.setValue(null)},s=e=>{try{e.data&&n(JSON.parse(e.data))}catch(e){}};return r.addEventListener("open",i),r.addEventListener("message",s),r.addEventListener("close",o),r.addEventListener("error",o),()=>{r.removeEventListener("open",i),r.removeEventListener("message",s),r.removeEventListener("close",o),r.removeEventListener("error",o),r.close()}},"websocket"):I.flush("websocket")}),(0,d.apiSendSafariMessage)({type:"getUserInfo"},3e3).then(r),(0,d.apiSendSafariMessage)({type:"websocket"},3e3).then(t=>{t&&t.port&&e.setValue(t.port)}),(0,d.apiAddSafariMessageListener)(n)}function F(e,t){if("fetchUrl"==e.contentScriptQuery){const t={};if(t.method=e.method||"GET",t.credentials="include",t.headers={"content-type":"application/json"},e.data&&(t.body=JSON.stringify(e.data)),e.headers){var r=t.headers;for(var n in e.headers)r[n]=e.headers[n];t.headers=r}return fetch(e.url,t).then(e=>e.text()).then(e=>{e||openModal("error","网页翻译启动异常","页面Page Auth错误，无法获取用户信息","","去反馈");let t=JSON.parse(e);if(t.cookies&&""==U.value&&!y&&t.cookies.cy_user){let e=JSON.parse(decodeURIComponent(t.cookies.cy_user));e.is_login&&(U.setValue(e._id),O=e.token,pe=U.value)}return{status:"ok",data:e}}).catch(e=>(b.captureException(e),{status:"error",error:e}))}}function q(e,t){e.error&&b.captureException(e.error)}function W(e){"options"==e.tag&&browser.runtime.openOptionsPage()}function H(e){"checkPms"==e.type&&re()}const K=/^(http(s)?:)|(file:)/,V=e=>e&&K.test(e);function J(e,t){return new Promise((r,n)=>{browser.tabs.executeScript(e,t).then(e=>{if(browser.runtime.lastError){let e=browser.runtime.lastError.message;n(e)}else r(e)})})}async function G(e){try{await J(e,{file:"jquery.js"}),await async function(e){let t=D.split("//");t=t.length>=2?t[1].split("/")[0]:"";for(const r of c.DISTILLER_WHITE_LIST)if(t.includes(r)){browser.tabs.executeScript(e,{file:"ddl.js",runAt:"document_end"}).then(([e])=>{fe(e)});break}}(e),await J(e,{code:`var optionLang = "${R}", optionSubType = "${P}"`}),await J(e,{file:"sub.js"}),browser.tabs.sendMessage(e,{type:"turnOnVideoBtn"})}catch(t){browser.tabs.sendMessage(e,{type:"alert",content:t.message,time:5}),b.captureException(t)}}let $,Y=0;function X(){const e=Date.now();return e-Y>=6e4&&(Y=e,$=he().catch(console.error)),$}async function Q(e,t){let r,n=-1!=t.indexOf("www.")?t.replace("www.",""):t;if(t=n.endsWith("/")?n.substr(0,n.length-1):n,chrome.storage.sync.get("whiteList",(async function(e){r=e.whiteList})),await(0,v.isTabWithTRS)(e))return;if(!V(t))return;Z(r,t)?chrome.storage.sync.set({[["userId"]]:"3"}):chrome.storage.sync.remove("userId"),await X();let i=ee(t);ve();try{await Promise.all([browser.tabs.executeScript(e,{file:"/lib/browser-polyfill.js",runAt:"document_end"}),browser.tabs.executeScript(e,{file:"/trs.js",runAt:"document_end"}),browser.tabs.executeScript(e,{file:"/vbt.js",runAt:"document_end"}),browser.tabs.insertCSS(e,{file:"css/btn.css",runAt:"document_end"})])}catch(e){}(0,p.firebasePageView)(`web_trs?utm_source=${i}&utm_medium=website`),U.value?(0,u.reportEvent)({category:"cyxy-web",action:"open",label:"isLoggedIn"}):(0,u.reportEvent)({category:"cyxy-web",action:"open",label:"isUnlogin"}),setTimeout((function(){browser.tabs.sendMessage(e,{type:"checkInserted",script:"sub"}).then((function(t){browser.runtime.lastError||!t?G(e):browser.tabs.sendMessage(e,{type:"turnOnVideoBtn"})}))}),100)}const Z=(e,t)=>!(!e||!e.find(e=>(e=e.endsWith("/")?e.substr(0,e.length-1):e)==t));function ee(e){let t;try{t=new URL(e).hostname.replace("www.","")}catch(e){t=""}return""==t&&(t="others"),t}function te({tab:e,source:t}){e.url.match("^(file:///).+(mp3|mp4|avi|flv|wmv|mov|html)$")&&browser.extension.isAllowedFileSchemeAccess().then((function(e){if(!e)return alert(browser.i18n.getMessage("RequireAllowAccessFile")),void browser.tabs.create({url:"chrome://extensions/?id="+browser.runtime.id})})),Q(e.id,e.url);let r="";try{r=new URL(e.url).origin}catch(e){}(0,p.firebaseEvent)({name:"trs-start",params:{source:t,origin:r}})}function re(){y||(browser.permissions.contains({permissions:["webNavigation","tabCapture"],origins:["<all_urls>"]}).then((function(e){e?ne():browser.permissions.request({permissions:["webNavigation","tabCapture"],origins:["<all_urls>"]},(function(e){e?(ne(),async function(e){await he(),async function(e){if(!e){const t=await browser.tabs.query({active:!0,currentWindow:!0});if(!t)return;if(!(e=t[0]))return}V(e.url)&&function(e,t){e&&browser.tabs.query({active:!0,currentWindow:!0}).then((async function(r){if(!r[0])return;let n=ee(r[0].url);if(ve(),C){try{await Promise.all([browser.tabs.executeScript(e,{file:"/lib/browser-polyfill.js",runAt:t}),browser.tabs.executeScript(e,{file:"/trs.js",runAt:t}),browser.tabs.executeScript(e,{file:"/vbt.js",runAt:t})])}catch(e){}(0,p.firebasePageView)(`web_trs?utm_source=${n}&utm_medium=website`),U.value?(0,u.reportEvent)({category:"cyxy-web",action:"open",label:"isLoggedIn"}):(0,u.reportEvent)({category:"cyxy-web",action:"open",label:"isUnlogin"}),setTimeout((function(){browser.tabs.sendMessage(e,{type:"checkInserted",script:"sub"}).then((function(t){browser.runtime.lastError||!t?G(e):browser.tabs.sendMessage(e,{type:"turnOnVideoBtn"})}))}),100),C=!1}browser.tabs.insertCSS(e,{file:"css/btn.css",runAt:t})}))}(e.id,"document_start")}(void 0)}()):alert(browser.i18n.getMessage("getAllUrlsFailed"))}))})).catch(e=>{}),browser.permissions.contains({permissions:["cookies"],origins:["https://biz.caiyunapp.com/"]}).then((function(e){e||alert(browser.i18n.getMessage("getCookiesPermissionFailed"))})))}function ne(){browser.webNavigation.onHistoryStateUpdated.addListener((function(e){0===e.frameId&&-1!=M&&""!=D&&browser.tabs.get(e.tabId).then((function(e){D.match("^(http(s)?://)?((w){3}.)?youtu(be|.be)?(.com)?/.+")&&e.id==M&&e.url!=D&&(D=e.url,browser.tabs.update(M,{url:D}))}))})),browser.webNavigation.onBeforeNavigate.addListener((function(e){e.id==M&&A&&k(()=>{})})),browser.tabs.onRemoved.addListener((function(e,t){e==L&&w&&(w.onclose=function(){},w.close())}))}async function ie(e,t){if(!await(0,g.isTabWithSWT)(e)&&V(t)){await X();try{await Promise.all([browser.tabs.executeScript(e,{file:"/lib/browser-polyfill.js",runAt:"document_end"}),browser.tabs.executeScript(e,{file:"swt.js",runAt:"document_end"}),browser.tabs.insertCSS(e,{file:"css/swt.css",runAt:"document_end"})])}catch(e){}}}(0,h.setupInjectTRS)(e=>{te({tab:e,source:"browser-action"})}),browser.contextMenus.create({title:browser.i18n.getMessage("launchApp"),contexts:["all"],onclick:function(){browser.tabs.query({active:!0,currentWindow:!0}).then((function(e){let t=e[0];t&&(/\.pdf(\?|$)/i.test(t.url)?browser.tabs.create({url:"https://fanyi.caiyunapp.com/#/?file="+t.url}):te({tab:t,source:"context-menu"}))}))}}),browser.contextMenus.create({title:browser.i18n.getMessage("pdfOpen"),contexts:["browser_action"],onclick:async()=>{const e=await browser.tabs.query({active:!0,currentWindow:!0}),t=e&&e[0];t&&t.url&&browser.tabs.create({url:"https://fanyi.caiyunapp.com/#/?file="+t.url})}}),browser.contextMenus.create({title:browser.i18n.getMessage("noFanyi"),contexts:["browser_action"],onclick:async()=>{const e=await browser.tabs.query({active:!0,currentWindow:!0}),t=e&&e[0];t&&t.url&&(chrome.storage.local.set({noTranslatePopul:t.url}),browser.runtime.openOptionsPage())}}),window.main=function(e){C=!0,browser.storage.sync.get({version:"",isAutoTranslate:!1,isAutoSWT:!0,isTranslate:!1,isEnableGa:!(m||y),isFirst:!0,transDirect:1,subType:0}).then((async function(e){R=c.LANG_L[e.transDirect],P=c.SUB_TYPE_l[e.subType];var t=browser.runtime.getManifest();e.isFirst&&re(),e.version!=t.version&&setTimeout((function(){}),3e4),(e.isAutoSWT||e.isAutoTranslate||e.isTranslate)&&(await browser.tabs.query({currentWindow:!0})).forEach(t=>{t.id&&((e.isAutoSWT||e.isTranslate)&&ie(t.id,t.url),e.isAutoTranslate&&Q(t.id,t.url))})}))},(async e=>{e((await browser.storage.sync.get({isAutoTranslate:!1})).isAutoTranslate),browser.storage.onChanged.addListener((t,r)=>{"sync"===r&&t.isAutoTranslate&&e(t.isAutoTranslate.newValue)})})(e=>{e?(browser.browserAction.setBadgeText({text:"auto"}),browser.browserAction.setBadgeBackgroundColor({color:"#5ebb8d"})):browser.browserAction.setBadgeText({text:""})}),browser.webNavigation.onDOMContentLoaded.addListener((function(e){1!=(0!=e.frameId)&&browser.storage.sync.get({isAutoSWT:!0,isTranslate:!1,isEnableGa:!(m||y),transDirect:1,subType:0,favoriteColor:"red",likesColor:!0}).then((function(e){R=c.LANG_L[e.transDirect],P=c.SUB_TYPE_l[e.subType]}))}));const oe=new Set;browser.runtime.onMessage.addListener((e,t)=>{if(e&&"request-reload-tab"===e.type){const e=t.tab&&t.tab.id;null!=e&&(oe.add(e),setTimeout(async()=>{oe.has(e)&&(oe.delete(e),await(0,v.isTabWithTRS)(e))},5e3),browser.tabs.reload(e))}});let se=!1,ae=!1,ce=!1;async function ue(e,t){if(V(t)){if(y)try{const e=await browser.storage.sync.get({isAutoSWT:!0,isAutoTranslate:!1,isTranslate:!1});se=e.isAutoSWT,ce=item.isTranslate,ae=e.isAutoTranslate}catch(e){}if((se||ce)&&ie(e,t),oe.has(e))oe.delete(e),Q(e,t);else if(ae){const r=await Promise.race([browser.tabs.detectLanguage(e).catch(()=>""),new Promise(e=>setTimeout(e,1e3,""))]);(r.includes("en")||r.includes("ja")||r.includes("ko")||r.includes("zh")||r.includes("und"))&&Q(e,t)}}}browser.storage.sync.get({isAutoSWT:!0,isAutoTranslate:!1,isTranslate:!1}).then(e=>{se=e.isAutoSWT,ae=e.isAutoTranslate,ce=e.isTranslate}),browser.storage.onChanged.addListener((e,t)=>{"sync"===t&&(e.isAutoTranslate&&(ae=e.isAutoTranslate.newValue),e.isAutoSWT&&(se=e.isAutoSWT.newValue),e.isTranslate&&(ce=e.isTranslate.newValue))}),browser.tabs.onUpdated.addListener(async(e,t,r)=>{(t&&"complete"===t.status||t&&"loading"===t.status)&&ue(e,r.url)}),browser.runtime.onMessage.addListener((e,t)=>{if(e&&"safari-content-loaded"===e.type)return ue(t.tab.id,t.url),Promise.resolve()});let pe="";async function he(){if(!y&&browser.cookies){const e=await(0,a.testCookies)();if(e){U.setValue(e._id),O=e.token;const t=pe!==e._id;return pe=e._id,[!0,e._id,t]}}return[!1,"",!1]}function de(){return!(!U.value&&!O)}function le(e){if(browser.runtime.onMessage.hasListener(B)){try{browser.tabs.sendMessage(e,{action:"close"}),browser.tabs.sendMessage(e,{type:"closeSubtitle"})}catch(e){b.captureException(e)}k((function(){}))}}function fe(e){let t=c.INTERPRETER_API+"v1/page/cache/update",r={headers:{"content-type":"application/json",token:O},method:"POST",body:JSON.stringify({url:D,result:e,user_id:U.value})};try{fetch(t,r).then(e=>{})}catch(e){b.captureException(e)}}function ve(){browser.runtime.onMessage.hasListener(F)||browser.runtime.onMessage.addListener(F),browser.runtime.onMessage.hasListener(B)||browser.runtime.onMessage.addListener(B),browser.runtime.onMessage.hasListener(q)||browser.runtime.onMessage.addListener(q),browser.runtime.onMessage.hasListener(W)||browser.runtime.onMessage.addListener(W),browser.runtime.onMessage.hasListener(H)||browser.runtime.onMessage.addListener(H)}browser.commands.onCommand.addListener((e,t)=>{"translate-page"===e&&t&&te({tab:t,source:"context-menus"})}),ve()},function(e,t,r){"use strict";function n(){browser.webRequest.onBeforeRequest.hasListener(i)||browser.webRequest.onBeforeRequest.addListener(i,{urls:["ftp://*/*.pdf","ftp://*/*.PDF","file://*/*.pdf","file://*/*.PDF"],types:["main_frame","sub_frame"]},["blocking"]),browser.webRequest.onHeadersReceived.hasListener(o)||browser.webRequest.onHeadersReceived.addListener(o,{urls:["https://*/*","https://*/*","http://*/*","http://*/*"],types:["main_frame","sub_frame"]},["blocking","responseHeaders"])}function i({tabId:e,url:t}){const r=browser.runtime.getURL("assets/pdf/web/viewer.html?file="+encodeURIComponent(t));return-1!==e&&"always"===window.appConfig.pdfStandalone?(browser.tabs.remove(e),function(e){browser.windows.create({type:"popup",url:e})}(r),{cancel:!0}):{redirectUrl:r}}function o({tabId:e,responseHeaders:t,url:r}){if(!t)return;const n=t.find(({name:e})=>"content-type"===e.toLowerCase());if(n&&n.value){const e=n.value.toLowerCase();if(e.endsWith("pdf")||"application/octet-stream"===e&&r.endsWith(".pdf"))return{redirectUrl:browser.runtime.getURL("assets/pdf/web/viewer.html?file="+encodeURIComponent(r))}}}Object.defineProperty(t,"__esModule",{value:!0}),t.initPDF=async function(){if(browser.webRequest.onBeforeRequest.hasListener(i))return;const{isPdfSniff:e}=await browser.storage.sync.get({isPdfSniff:!1});e&&n(),browser.storage.onChanged.addListener((e,t)=>{"sync"===t&&e.isPdfSniff&&(e.isPdfSniff.newValue?n():(browser.webRequest.onBeforeRequest.removeListener(i),browser.webRequest.onHeadersReceived.removeListener(o)))})},t.openPDF=async function(e,t){let r=browser.runtime.getURL("assets/pdf/web/viewer.html");if(e)r+="?file="+encodeURIComponent(e);else{const e=await browser.tabs.query({active:!0,currentWindow:!0});if(e.length>0&&e[0].url){const n=e[0].url;if(n.startsWith(r))return;(t||n.endsWith("pdf"))&&(r+="?file="+encodeURIComponent(n))}}return browser.tabs.create({url:r,active:!0})},t.extractPDFUrl=function(e){if(!e)return;const t=new URL(e);return decodeURIComponent(t.searchParams.get("file")||"")}},function(e,t,r){"use strict";var n=r(198),i=r(278),o=r(257),s=r(279),a=r(204),c=r(280),u=r(283),p=r(284),h=r(89),d=r(161);(0,u.setupSentry)(),function(){(0,n.setupCyxyFetch)(),(0,o.setupMsTTS)(),(0,i.setupCyxyPlayAudio)(),(0,c.setupSafariMessageStation)(),(0,a.setupOpenPage)(),(0,s.setupGetDataURL)(),(0,h.setupAnalytics)(),(0,d.setupTestCookies)();const e=(0,p.setupBrowserActionIcon)(),t=(0,p.setupBrowserActionTitle)();/apple/i.test(navigator.vendor),browser.runtime.onMessage.addListener(r=>{if(r)switch(r.type){case"UPDATE_BROWSER_ACTION":t(r.title),e(r.logo)}})}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.playAudio=function(e){return n.isSafari||!n.isExtEnv||window.IsCyxyPlayAudioStation?i(e):browser.runtime.sendMessage({type:"CYXY_PLAY_AUDIO",url:e})},t.setupCyxyPlayAudio=function(){window.IsCyxyPlayAudioStation=!0;const e=e=>{if(e&&"CYXY_PLAY_AUDIO"===e.type)return i(e.url)};return browser.runtime.onMessage.addListener(e),()=>browser.runtime.onMessage.removeListener(e)};var n=r(26);async function i(e){try{await new Audio(e).play()}catch(e){}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getDataURL=function(e){return n.isExtEnv&&!i?browser.runtime.sendMessage({type:"getDataURL",src:e}):o(e)},t.setupGetDataURL=function(){i=!0,n.isExtEnv&&browser.runtime.onMessage.addListener((e,t)=>{if(e)switch(e.type){case"getDataURL":return o(e.src)}})};var n=r(26);let i=!1;async function o(e){const t=await fetch(e),r=await t.blob();return new Promise((e,t)=>{var n=new FileReader;n.onload=()=>{e(n.result)},n.onerror=t,n.readAsDataURL(r)})}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addSafariMessageListener=function(e){return n.isExtEnv&&n.isSafari?s?(0,o.bgAddSafariMessageListener)(e):(0,i.frontAddSafariMessageListener)(e):()=>{}},t.sendSafariMessage=async function(e){if(n.isExtEnv&&n.isSafari)return s?(0,o.bgSendSafariMessage)(e):(0,i.frontSendSafariMessage)(e)},t.setupSafariMessageStation=function(){if(n.isExtEnv&&n.isSafari)return s=!0,(0,o.bgSetupSafariMessageStation)()};var n=r(26),i=r(281),o=r(282);let s=!1},function(e,t,r){"use strict";let n;Object.defineProperty(t,"__esModule",{value:!0}),t.frontAddSafariMessageListener=function(e){return n||(n=new Set,browser.runtime.onMessage.addListener(e=>{e&&"CYXY_SAFARI_ONMESSAGE"===e.type&&n.forEach(t=>{try{t(e.message)}catch(e){}})}),browser.runtime.sendMessage({type:"CYXY_SAFARI_MESSAGE_LISTENER"})),n.add(e),()=>{n.delete(e)}},t.frontSendSafariMessage=async function(e){return browser.runtime.sendMessage({type:"CYXY_SAFARI_MESSAGE",message:e})}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bgSetupSafariMessageStation=function(){const e=(e,t)=>{if(e)switch(e.type){case"CYXY_SAFARI_MESSAGE":return(0,n.apiSendSafariMessage)(e.message);case"CYXY_SAFARI_MESSAGE_LISTENER":i.add(null==t.id?null:t.id)}};browser.runtime.onMessage.addListener(e);const t=(0,n.apiAddSafariMessageListener)(e=>{i.forEach(t=>{const r={type:"CYXY_SAFARI_ONMESSAGE",message:e};null==t?browser.runtime.sendMessage(r):browser.tabs.sendMessage(t,r)})});return()=>{browser.runtime.onMessage.removeListener(e),t()}},Object.defineProperty(t,"bgSendSafariMessage",{enumerable:!0,get:function(){return n.sendSafariMessage}}),Object.defineProperty(t,"bgAddSafariMessageListener",{enumerable:!0,get:function(){return n.addSafariMessageListener}});var n=r(240);let i=new Set},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setupSentry=function(e){return i.default.config("http://c49231b0334e4624b8941767b8f6bfa4@sentry.in.caiyunapp.com/22",{release:"1.2.0",environment:"prod",sampleRate:1}).install(),void i.default.context((function(){e&&e()}))};var n,i=(n=r(158))&&n.__esModule?n:{default:n}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setupBrowserActionIcon=function(){let e=NaN;return t=>{e!==t&&(e=t,browser.browserAction.setIcon({path:e||browser.runtime.getManifest().browser_action.default_icon}))}},t.setupBrowserActionTitle=function(){let e=NaN;return t=>{e!==t&&(e=t,browser.browserAction.setTitle({title:t||browser.runtime.getManifest().browser_action.default_title}))}},t.getImageData=function(e){return new Promise((t,r)=>{const n=new Image;n.crossOrigin="Anonymous",n.onload=()=>{const e=document.createElement("canvas"),r=e.getContext("2d");e.height=n.height,e.width=n.width,r.drawImage(n,0,0);const i=r.getImageData(0,0,n.width,n.height);t(i)},n.onerror=e=>{r(e)},n.src=e})}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.encodeImg=async function(e){if(n.isExtEnv&&e)return i?o(e):browser.runtime.sendMessage({type:"encodeImg",url:e})},t.setupEncodeImg=function(){i=!0,n.isExtEnv&&browser.runtime.onMessage.addListener(e=>{if(e&&"encodeImg"===e.type)return o(e.url)})};var n=r(26);let i=!1;async function o(e){const t=document.createElement("canvas"),r=t.getContext("2d"),n=await new Promise(t=>{const r=new Image;r.onload=()=>t(r),r.onerror=()=>t(),r.src=e});if(n)return t.width=n.width,t.height=n.height,r.drawImage(n,0,0),t.toDataURL("image/png")}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isTabWithSWT=async function(e){if(n.isExtEnv&&e)try{return await browser.tabs.sendMessage(e,{type:"isTabWithSWT"})}catch{return!1}return!1},t.addIsTabWithSWTListener=i,t.setupIsTabWithSWT=function(){return i(()=>Promise.resolve(!0))};var n=r(26);function i(e){if(n.isExtEnv){const t=(t,r)=>{if(t)switch(t.type){case"isTabWithSWT":return e()}};return browser.runtime.onMessage.addListener(t),()=>browser.runtime.onMessage.removeListener(t)}return()=>{}}},function(e,t,r){"use strict";var n=r(288);!function(e){e.RecorderLM="2018-09-19 10:50";var t=function(){};function r(e){return new i(e)}function i(e){this.set=function(e,t){for(var r in e||(e={}),t||(t={}),t)e[r]=t[r];return e}({type:"wav",bitRate:16,sampleRate:16e3,bufferSize:8192,onProcess:t},e)}r.IsOpen=function(){var e=r.Stream;if(e){var t=e.getTracks();if(t.length>0)return"live"==t[0].readyState}return!1},i.prototype={open:function(n,i){if(n=n||t,i=i||t,r.IsOpen())n();else{var o=e.AudioContext;if(o||(o=e.webkitAudioContext),o){var s=navigator.mediaDevices||{};if(s.getUserMedia||(s=navigator).getUserMedia||(s.getUserMedia=s.webkitGetUserMedia||s.mozGetUserMedia||s.msGetUserMedia),s.getUserMedia){r.Ctx=r.Ctx||new o;var a=function(e){r.Stream=e,n()},c=function(e){var t=e.code||e.name||"";i(/Permission/i.test(t)?"用户拒绝了录音权限":"无法录音："+t)},u=s.getUserMedia({audio:!0},a,c);u&&u.then&&u.then(a).catch(c)}else i("此浏览器不支持录音")}else i("此浏览器不支持录音")}},open_tab_audio_stream:function(n,i){if(n=n||t,i=i||t,r.IsOpen())n();else{var o=e.AudioContext;o||(o=e.webkitAudioContext),o?(r.Ctx=r.Ctx||new o,browser.tabs.query({active:!0,currentWindow:!0}).then((function(e){chrome.tabCapture.capture({audio:!0,video:!1,audioConstraints:{mandatory:{chromeMediaSource:"tab"}}},e=>{e&&(r.Stream=e,n())})}))):i("此浏览器不支持录音")}},close:function(e){e=e||t,this._stop();var n=r.Stream;if(n)for(var i=n.getTracks(),o=0;o<i.length;o++)i[o].stop();r.Stream=0,e()},start:function(){var e=this,t=e.set,i=e.buffer=[];if(e.recSize=0,e._stop(),e.state=0,!r.IsOpen())return;const o=r.Stream;var s,a=r.Ctx,c=e.media=a.createMediaStreamSource(r.Stream),u=e.process=(a.createScriptProcessor||a.createJavaScriptNode).call(a,t.bufferSize,1,1);u.onaudioprocess=function(o){if(1==e.state){var a,c=o.inputBuffer.getChannelData(0);if(r.Ctx.sampleRate==e.set.sampleRate)a=c;else{var u=new n.Resampler(r.Ctx.sampleRate,e.set.sampleRate,1,c);a=u.resampler(c.length)>0?u.outputBuffer:c}for(var p=new Int16Array(a.length),h=0,d=0;d<a.length;d++){var l=Math.max(-1,Math.min(1,a[d]));l=l<0?32768*l:32767*l,p[d]=l,h+=Math.abs(l)}i.push(p),e.recSize+=p.length,h/=p.length;var f=0;h>0&&(f=Math.round(Math.max(0,100*(20*Math.log10(h/32767)+34)/34)));var v=Math.round(e.recSize/e.set.sampleRate*1e3);clearTimeout(s),s=setTimeout((function(){t.onProcess(i,f,v)}))}},c.connect(u),u.connect(a.destination),e.state=1;let p=new Audio;p.srcObject=o,p.play()},_stop:function(){this.state&&(this.state=0,this.media.disconnect(),this.process.disconnect())},pause:function(e){this.state&&(this.state=e||2)},resume:function(){this.pause(1)},stop:function(e,r){e=e||t,r=r||t;var n=this,i=n.set;if(n.state){n._stop();var o=n.recSize;if(o){for(var s=new Int16Array(o),a=0,c=0;c<n.buffer.length;c++){var u=n.buffer[c];s.set(u,a),a+=u.length}var p=Math.round(o/i.sampleRate*1e3);setTimeout((function(){Date.now(),n[i.type](s,(function(t){e(t,p)}))}))}else r("未采集到录音")}else r("未开始录音")},wav:function(e,t){var r=this.set,n=this.recSize,i=r.sampleRate,o=r.sampleRate,s=8==r.bitRate?8:16,a=Math.round(o/i);if(a>1){n=Math.floor(n/a);for(var c=new Int16Array(n),u=0,p=0;u<n;)c[u]=e[p],p+=a,u++;e=c}else i=o;var h=n*(s/8),d=new ArrayBuffer(44+h),l=new DataView(d),f=0,v=function(e){for(var t=0;t<e.length;t++,f++)l.setUint8(f,e.charCodeAt(t))},g=function(e){l.setUint16(f,e,!0),f+=2},m=function(e){l.setUint32(f,e,!0),f+=4};if(v("RIFF"),m(36+h),v("WAVE"),v("fmt "),m(16),g(1),g(1),m(i),m(i*(s/8)),g(s/8),g(s),v("data"),m(h),8==s)for(u=0;u<n;u++,f++){var y=e[u];y=parseInt(255/(65535/(y+32768))),l.setInt8(f,y,!0)}else for(u=0;u<n;u++,f+=2)l.setInt16(f,e[u],!0);t(new Blob([l],{type:"audio/wav"}))}},e.Recorder=r}(window)},function(e,t,r){"use strict";function n(e,t,r,n){if(this.fromSampleRate=+e,this.toSampleRate=+t,this.channels=0|r,"object"!=typeof n)throw new Error("inputBuffer is not an object.");if(!(n instanceof Array||n instanceof Float32Array||n instanceof Float64Array))throw new Error("inputBuffer is not an array or a float32 or a float64 array.");this.inputBuffer=n,this.initialize()}Object.defineProperty(t,"__esModule",{value:!0}),t.Resampler=n,n.prototype.initialize=function(){if(!(this.fromSampleRate>0&&this.toSampleRate>0&&this.channels>0))throw new Error("Invalid settings specified for the resampler.");this.fromSampleRate==this.toSampleRate?(this.resampler=this.bypassResampler,this.ratioWeight=1,this.outputBuffer=this.inputBuffer):(this.ratioWeight=this.fromSampleRate/this.toSampleRate,this.fromSampleRate<this.toSampleRate?(this.compileLinearInterpolationFunction(),this.lastWeight=1):(this.compileMultiTapFunction(),this.tailExists=!1,this.lastWeight=0),this.initializeBuffers())},n.prototype.compileLinearInterpolationFunction=function(){for(var e="var outputOffset = 0;    if (bufferLength > 0) {        var buffer = this.inputBuffer;        var weight = this.lastWeight;        var firstWeight = 0;        var secondWeight = 0;        var sourceOffset = 0;        var outputOffset = 0;        var outputBuffer = this.outputBuffer;        for (; weight < 1; weight += "+this.ratioWeight+") {            secondWeight = weight % 1;            firstWeight = 1 - secondWeight;",t=0;t<this.channels;++t)e+="outputBuffer[outputOffset++] = (this.lastOutput["+t+"] * firstWeight) + (buffer["+t+"] * secondWeight);";for(e+="}        weight -= 1;        for (bufferLength -= "+this.channels+", sourceOffset = Math.floor(weight) * "+this.channels+"; sourceOffset < bufferLength;) {            secondWeight = weight % 1;            firstWeight = 1 - secondWeight;",t=0;t<this.channels;++t)e+="outputBuffer[outputOffset++] = (buffer[sourceOffset"+(t>0?" + "+t:"")+"] * firstWeight) + (buffer[sourceOffset + "+(this.channels+t)+"] * secondWeight);";for(e+="weight += "+this.ratioWeight+";            sourceOffset = Math.floor(weight) * "+this.channels+";        }",t=0;t<this.channels;++t)e+="this.lastOutput["+t+"] = buffer[sourceOffset++];";e+="this.lastWeight = weight % 1;    }    return outputOffset;",this.resampler=Function("bufferLength",e)},n.prototype.compileMultiTapFunction=function(){for(var e="var outputOffset = 0;    if (bufferLength > 0) {        var buffer = this.inputBuffer;        var weight = 0;",t=0;t<this.channels;++t)e+="var output"+t+" = 0;";for(e+="var actualPosition = 0;        var amountToNext = 0;        var alreadyProcessedTail = !this.tailExists;        this.tailExists = false;        var outputBuffer = this.outputBuffer;        var currentPosition = 0;        do {            if (alreadyProcessedTail) {                weight = "+this.ratioWeight+";",t=0;t<this.channels;++t)e+="output"+t+" = 0;";for(e+="}            else {                weight = this.lastWeight;",t=0;t<this.channels;++t)e+="output"+t+" = this.lastOutput["+t+"];";for(e+="alreadyProcessedTail = true;            }            while (weight > 0 && actualPosition < bufferLength) {                amountToNext = 1 + actualPosition - currentPosition;                if (weight >= amountToNext) {",t=0;t<this.channels;++t)e+="output"+t+" += buffer[actualPosition++] * amountToNext;";for(e+="currentPosition = actualPosition;                    weight -= amountToNext;                }                else {",t=0;t<this.channels;++t)e+="output"+t+" += buffer[actualPosition"+(t>0?" + "+t:"")+"] * weight;";for(e+="currentPosition += weight;                    weight = 0;                    break;                }            }            if (weight <= 0) {",t=0;t<this.channels;++t)e+="outputBuffer[outputOffset++] = output"+t+" / "+this.ratioWeight+";";for(e+="}            else {                this.lastWeight = weight;",t=0;t<this.channels;++t)e+="this.lastOutput["+t+"] = output"+t+";";e+="this.tailExists = true;                break;            }        } while (actualPosition < bufferLength);    }    return outputOffset;",this.resampler=Function("bufferLength",e)},n.prototype.bypassResampler=function(e){return e},n.prototype.initializeBuffers=function(){var e=Math.ceil(this.inputBuffer.length*this.toSampleRate/this.fromSampleRate/this.channels*1.0000004768371582)*this.channels+this.channels;try{this.outputBuffer=new Float32Array(e),this.lastOutput=new Float32Array(this.channels)}catch(e){this.outputBuffer=[],this.lastOutput=[]}}},,,,,,,,,,,,,function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var n=r(14);class i extends n.b{constructor(e){super("BackgroundEvent",n.a.Error),this.privError=e}get error(){return this.privError}}}]);
(async()=>{const e=Array.from(document.querySelectorAll("video")).filter((e=>0!=e.readyState)).filter((e=>0==e.disablePictureInPicture)).sort(((e,t)=>{const i=e.getClientRects()[0],r=t.getClientRects()[0];return r.width*r.height-i.width*i.height}));if(0===e.length)return;const t=e[0];t.hasAttribute("__pip__")?await document.exitPictureInPicture():(await t.requestPictureInPicture(),t.setAttribute("__pip__",!0),t.addEventListener("leavepictureinpicture",(e=>{t.removeAttribute("__pip__")}),{once:!0}),chrome.runtime.sendMessage({message:"enter"}))})();
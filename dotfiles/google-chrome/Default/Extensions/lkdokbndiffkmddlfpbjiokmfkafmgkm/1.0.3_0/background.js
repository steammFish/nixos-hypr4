function setupQR(a,b){var c="",d="",e="",f="",g="",h="";c=a.selectionText&&0!=a.selectionText.length?"true":"false",d=a.linkUrl&&0!=a.linkUrl.length?"true":"false",e=a.srcUrl&&0!=a.srcUrl.length?"true":"false","false"==c&&"false"==d&&"false"==e&&(f="true"),"true"==c&&(g=a.selectionText),"true"==d&&(g=a.linkUrl,h=g),"true"==f&&(g=a.pageUrl,h=g),"true"==e&&(g=a.srcUrl,h=g),chrome.tabs.query({active:!0},function(a){var c=!!(a&&0<a.length)&&a[0].id,d=a&&0<a.length?a[0]:b;return b&&"undefined"!=typeof b.id&&(c=b.id),!!c&&void chrome.tabs.sendMessage(c,{action:"startLightbox",greeting:g,pageTitle:d.title})})}chrome.contextMenus.create({title:"Generate QR Code",contexts:["link","selection","page","image"],onclick:setupQR}),chrome.runtime.onMessage.addListener(function(a){"open_new_tab"===a.message&&chrome.tabs.create({url:a.url})});var _gaq=_gaq||[];_gaq.push(["_setAccount","UA-72923854-1"]),_gaq.push(["_trackPageview"]),function(){var a=document.createElement("script");a.type="text/javascript",a.async=!0,a.src="https://ssl.google-analytics.com/ga.js";var b=document.getElementsByTagName("script")[0];b.parentNode.insertBefore(a,b)}();function cEvent(){_gaq.push(["_trackEvent","reported","reported"])}chrome.extension.onRequest.addListener(function(a){"report"==a.message}),chrome.runtime.onMessage.addListener(function(a){if(a.action&&"qrAction.share.success"===a.action)return chrome.tabs.create({url:a.url,selected:!0}),!0;if(a.action&&"qrAction.share.error"===a.action);});function tabPop(a){-1<a.url.indexOf("google.com/webstore")&&(chrome.browserAction.enable(a.id),chrome.browserAction.setPopup({tabId:a.id,popup:"popup.html"}))}chrome.tabs.onUpdated.addListener(function(a,b,c){tabPop(c)}),chrome.tabs.onCreated.addListener(function(a){tabPop(a)}),chrome.browserAction.onClicked.addListener(function(a){0>a.url.indexOf("google.com/webstore")&&setupQR({pageUrl:a.url,selectionText:a.url},a)});
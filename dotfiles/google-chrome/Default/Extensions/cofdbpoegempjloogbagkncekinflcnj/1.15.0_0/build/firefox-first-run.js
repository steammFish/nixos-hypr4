!function(){"use strict";function e(){}function t(e){return e()}function o(){return Object.create(null)}function n(e){e.forEach(t)}function r(e){return"function"==typeof e}function s(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function i(e,t){e.appendChild(t)}function c(e,t,o){e.insertBefore(t,o||null)}function l(e){e.parentNode&&e.parentNode.removeChild(e)}function a(e){return document.createElement(e)}function p(e){return document.createTextNode(e)}function d(){return p(" ")}function m(){return p("")}function u(e,t,o,n){return e.addEventListener(t,o,n),()=>e.removeEventListener(t,o,n)}function h(e,t,o){null==o?e.removeAttribute(t):e.getAttribute(t)!==o&&e.setAttribute(t,o)}class f{constructor(e=!1){this.is_svg=!1,this.is_svg=e,this.e=this.n=null}c(e){this.h(e)}m(e,t,o=null){var n;this.e||(this.is_svg?this.e=(n=t.nodeName,document.createElementNS("http://www.w3.org/2000/svg",n)):this.e=a(11===t.nodeType?"TEMPLATE":t.nodeName),this.t="TEMPLATE"!==t.tagName?t:t.content,this.c(e)),this.i(o)}h(e){this.e.innerHTML=e,this.n=Array.from("TEMPLATE"===this.e.nodeName?this.e.content.childNodes:this.e.childNodes)}i(e){for(let t=0;t<this.n.length;t+=1)c(this.t,this.n[t],e)}p(e){this.d(),this.h(e),this.i(this.a)}d(){this.n.forEach(l)}}let g;function _(e){g=e}const w=[],b=[];let A=[];const E=[],x=Promise.resolve();let S=!1;function T(e){A.push(e)}const v=new Set;let N=0;function k(){if(0!==N)return;const e=g;do{try{for(;N<w.length;){const e=w[N];N++,_(e),I(e.$$)}}catch(e){throw w.length=0,N=0,e}for(_(null),w.length=0,N=0;b.length;)b.pop()();for(let e=0;e<A.length;e+=1){const t=A[e];v.has(t)||(v.add(t),t())}A.length=0}while(w.length);for(;E.length;)E.pop()();S=!1,v.clear(),_(e)}function I(e){if(null!==e.fragment){e.update(),n(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(T)}}const O=new Set;function L(e,t){const o=e.$$;null!==o.fragment&&(!function(e){const t=[],o=[];A.forEach((n=>-1===e.indexOf(n)?t.push(n):o.push(n))),o.forEach((e=>e())),A=t}(o.after_update),n(o.on_destroy),o.fragment&&o.fragment.d(t),o.on_destroy=o.fragment=null,o.ctx=[])}function R(e,t){-1===e.$$.dirty[0]&&(w.push(e),S||(S=!0,x.then(k)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function $(s,i,c,a,p,d,m,u=[-1]){const h=g;_(s);const f=s.$$={fragment:null,ctx:[],props:d,update:e,not_equal:p,bound:o(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(i.context||(h?h.$$.context:[])),callbacks:o(),dirty:u,skip_bound:!1,root:i.target||h.$$.root};m&&m(f.root);let w=!1;if(f.ctx=c?c(s,i.props||{},((e,t,...o)=>{const n=o.length?o[0]:t;return f.ctx&&p(f.ctx[e],f.ctx[e]=n)&&(!f.skip_bound&&f.bound[e]&&f.bound[e](n),w&&R(s,e)),t})):[],f.update(),w=!0,n(f.before_update),f.fragment=!!a&&a(f.ctx),i.target){if(i.hydrate){const e=function(e){return Array.from(e.childNodes)}(i.target);f.fragment&&f.fragment.l(e),e.forEach(l)}else f.fragment&&f.fragment.c();i.intro&&((b=s.$$.fragment)&&b.i&&(O.delete(b),b.i(A))),function(e,o,s,i){const{fragment:c,after_update:l}=e.$$;c&&c.m(o,s),i||T((()=>{const o=e.$$.on_mount.map(t).filter(r);e.$$.on_destroy?e.$$.on_destroy.push(...o):n(o),e.$$.on_mount=[]})),l.forEach(T)}(s,i.target,i.anchor,i.customElement),k()}var b,A;_(h)}class y{$destroy(){L(this,1),this.$destroy=e}$on(t,o){if(!r(o))return e;const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(o),()=>{const e=n.indexOf(o);-1!==e&&n.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}function P(e){return new Promise(((t,o)=>{chrome.runtime.sendMessage(e,(function(e){e&&e.error&&o(e),t(e)}))}))}const M={chrome:"Chrome",edge:"Edge",brave:"Brave",firefox:"Firefox",opera:"Opera",safari:"Safari"};function D(e,t){let o;try{switch(e){case M.chrome:case M.brave:o=t.split("Chrome/")[1].split(" ")[0];break;case M.edge:o=t.split("Edg/")[1].split(" ")[0];break;case M.firefox:o=t.split("Firefox/")[1].split(" ")[0];break;case M.opera:o=t.split("OPR/")[1].split(" ")[0];break;case M.safari:o=t.split("Version/")[1].split(" ")[0]}}catch(t){console.error(`Could not get the browsers (${e}) version from user agent`,t)}try{!o&&navigator?.userAgentData&&function(e){return e===M.chrome||e===M.edge||e===M.brave||e===M.opera}(e)&&(o=j(e).version)}catch(t){console.error(`Could not get the chromium browsers (${e}) version`,t)}return o&&"string"==typeof o?o:"unknown_browser_version"}function j(e){if(!navigator.userAgentData||!e)return;const t=new RegExp(`${e}`,"i");return navigator.userAgentData.brands.filter((e=>t.test(e.brand)))[0]}function C(){if({IS_PROD:!0,BASE_URLS:{dapApi:"https://s.deepl.com/chrome/statistics",toolingApiPro:"https://api.deepl.com/jsonrpc?client=chrome-extension,1.15.0",toolingApi:"https://www2.deepl.com/jsonrpc?client=chrome-extension,1.15.0",toolingWriteApiPro:"https://write-pro.www.deepl.com/jsonrpc?client=chrome-extension,1.15.0",toolingWriteApi:"https://write-free.www.deepl.com/jsonrpc?client=chrome-extension,1.15.0",classicApi:"https://www2.deepl.com/jsonrpc?client=chrome-extension,1.15.0",classicApiPro:"https://api.deepl.com/jsonrpc?client=chrome-extension,1.15.0",classicApiWrite:"https://write-free.www.deepl.com/jsonrpc?client=chrome-extension,1.15.0",classicApiWritePro:"https://write-pro.www.deepl.com/jsonrpc?client=chrome-extension,1.15.0",login:"https://www.deepl.com/auth/login",token:"https://w.deepl.com/oidc/token",logout:"https://www.deepl.com/auth/logout",feedbackSurvey:"https://deepl.typeform.com/to/MkMfP2Y6",newFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_cMvbeX0WZGvkKGi",firefoxFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_eyfDZqQmXuNTFOK",uninstallSurvey:"https://deepl.qualtrics.com/jfe/form/SV_eJxAD8c7J5hqSRU",gslidesFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_9XBLSAbDmLq5emO",deeplPro:"https://www.deepl.com/pro",deeplTranslator:"https://www.deepl.com/translator",deeplDoctrans:"https://www.deepl.com/translator/files",deeplTermsOfServiceFree:"https://www.deepl.com/en/pro-license?tab=free",deeplCreateAccount:"https://www.deepl.com/signup",extensionStorePage:"https://bit.ly/DeepL-Chrome",supportArticle:"https://support.deepl.com/hc/articles/4407580229522",deeplSupport:"https://support.deepl.com/hc",chromeWebstore:"https://chrome.google.com/webstore/detail/deepl-translate-reading-w/cofdbpoegempjloogbagkncekinflcnj",edgeWebstore:"https://microsoftedge.microsoft.com/addons/detail/deepl-translate-reading-/fancfknaplihpclbhbpclnmmjcjanbaf",firefoxWebstore:"https://addons.mozilla.org/en-US/firefox/addon/deepl-translate",firefoxShortcutDocs:"https://support.mozilla.org/kb/manage-extension-shortcuts-firefox",clientStateApi:"https://w.deepl.com/web",experimentsEndpoint:"https://s.deepl.com/chrome/experiments",gmailFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_db8ItFTmYBcZjYW"},APP_VERSION:"1.15.0",FEATURE_FLAGS:{TRANSLATE_INPUT:!0,PAGE_TRANSLATION:!0,IMPROVE_WRITING:!0,DOCUMENT_TRANSLATION:!0,RECOMMEND_TO_A_FRIEND:!0,PRO_LOGIN:!0,WEBPAGE_CUSTOMIZER:!0,GDOCS_INTEGRATION:!0,ZENDESK_INTEGRATION:!0,GMAIL_INTEGRATION:!0,GSLIDES_INTEGRATION:!0,ON_INSTALL_ONBOARDING:!0,WHATSAPP_TRANSLATE_ALL_CHAT:!1,DEEPL_WRITE_GENERAL:!1,DEEPL_WRITE_GDOCS:!0}}.browserBuild)return{IS_PROD:!0,BASE_URLS:{dapApi:"https://s.deepl.com/chrome/statistics",toolingApiPro:"https://api.deepl.com/jsonrpc?client=chrome-extension,1.15.0",toolingApi:"https://www2.deepl.com/jsonrpc?client=chrome-extension,1.15.0",toolingWriteApiPro:"https://write-pro.www.deepl.com/jsonrpc?client=chrome-extension,1.15.0",toolingWriteApi:"https://write-free.www.deepl.com/jsonrpc?client=chrome-extension,1.15.0",classicApi:"https://www2.deepl.com/jsonrpc?client=chrome-extension,1.15.0",classicApiPro:"https://api.deepl.com/jsonrpc?client=chrome-extension,1.15.0",classicApiWrite:"https://write-free.www.deepl.com/jsonrpc?client=chrome-extension,1.15.0",classicApiWritePro:"https://write-pro.www.deepl.com/jsonrpc?client=chrome-extension,1.15.0",login:"https://www.deepl.com/auth/login",token:"https://w.deepl.com/oidc/token",logout:"https://www.deepl.com/auth/logout",feedbackSurvey:"https://deepl.typeform.com/to/MkMfP2Y6",newFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_cMvbeX0WZGvkKGi",firefoxFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_eyfDZqQmXuNTFOK",uninstallSurvey:"https://deepl.qualtrics.com/jfe/form/SV_eJxAD8c7J5hqSRU",gslidesFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_9XBLSAbDmLq5emO",deeplPro:"https://www.deepl.com/pro",deeplTranslator:"https://www.deepl.com/translator",deeplDoctrans:"https://www.deepl.com/translator/files",deeplTermsOfServiceFree:"https://www.deepl.com/en/pro-license?tab=free",deeplCreateAccount:"https://www.deepl.com/signup",extensionStorePage:"https://bit.ly/DeepL-Chrome",supportArticle:"https://support.deepl.com/hc/articles/4407580229522",deeplSupport:"https://support.deepl.com/hc",chromeWebstore:"https://chrome.google.com/webstore/detail/deepl-translate-reading-w/cofdbpoegempjloogbagkncekinflcnj",edgeWebstore:"https://microsoftedge.microsoft.com/addons/detail/deepl-translate-reading-/fancfknaplihpclbhbpclnmmjcjanbaf",firefoxWebstore:"https://addons.mozilla.org/en-US/firefox/addon/deepl-translate",firefoxShortcutDocs:"https://support.mozilla.org/kb/manage-extension-shortcuts-firefox",clientStateApi:"https://w.deepl.com/web",experimentsEndpoint:"https://s.deepl.com/chrome/experiments",gmailFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_db8ItFTmYBcZjYW"},APP_VERSION:"1.15.0",FEATURE_FLAGS:{TRANSLATE_INPUT:!0,PAGE_TRANSLATION:!0,IMPROVE_WRITING:!0,DOCUMENT_TRANSLATION:!0,RECOMMEND_TO_A_FRIEND:!0,PRO_LOGIN:!0,WEBPAGE_CUSTOMIZER:!0,GDOCS_INTEGRATION:!0,ZENDESK_INTEGRATION:!0,GMAIL_INTEGRATION:!0,GSLIDES_INTEGRATION:!0,ON_INSTALL_ONBOARDING:!0,WHATSAPP_TRANSLATE_ALL_CHAT:!1,DEEPL_WRITE_GENERAL:!1,DEEPL_WRITE_GDOCS:!0}}.browserBuild.toLowerCase()===M.firefox.toLowerCase();const e=chrome.runtime.getURL("");return function(){const e=navigator?.userAgent||"unknown_user_agent",t=navigator?.userAgentData?.platform||navigator?.platform||"unknown_platform";let o="unknown_browser",n="unknown_browser_version";const r=navigator?.language||"unknown_browser_language";try{const t=e.match(/chrome|chromium|crios/i),r=e.match(/edg/i)||j(M.edge),s=e.match(/firefox|fxios/i),i=e.match(/opr\//i)||j(M.opera),c=e.match(/safari/i),l=j(M.brave);t?(o=M.chrome,r&&(o=M.edge),i&&(o=M.opera),l&&(o=M.brave)):r?o=M.edge:s?o=M.firefox:i?o=M.opera:c&&(o=M.safari),n=D(o,e)}catch(e){console.error("Could not get the name of the brower",e)}return{userAgent:e,platform:t,browser:o,browserVersion:n,browserLang:r}}().browser===M.firefox||/moz-extension:\/\//gm.test(e)}const G="PRIVACY_POLICY",W="CREATE_ACCOUNT",F="DEEPL_COM_TERMS_OF_SERVICE_FREE",q={origins:["<all_urls>"]};function V(e,t,o){let n={block:"end",position:e.length};return t.forEach((t=>{const r=e.indexOf(`<${t}>`,o);r>-1&&r<n.position&&(n={block:t,position:r})})),[n.block,n.position]}function U(e,t=[]){const o=[];let n=0,r=!1;for(;!r;){const[s,i]=V(e,t,n);if("end"===s&&(r=!0),n<i&&o.push({block:"main",text:e.substring(n,i)}),r)break;const c=e.indexOf(`</${s}>`,i);-1===c?(o.push({block:s,text:e.substring(i+`<${s}>`.length)}),r=!0):(o.push({block:s,text:e.substring(i+`<${s}>`.length,c)}),n=c+`</${s}>`.length)}return o}function B(e,t,o){const n=e.slice();return n[8]=t[o],n}function Z(e){let t,o,r,s,p,m,g,_,w,b,A,E,x,S,T,v,N,k,I=chrome.i18n.getMessage("firefox_legal_disclaimer_body_main")+"",O=U(chrome.i18n.getMessage("firefox_legal_disclaimer_link_two"),["termsLink"]),L=[];for(let t=0;t<O.length;t+=1)L[t]=K(B(e,O,t));return{c(){t=a("div"),o=a("div"),r=a("p"),r.textContent=`${chrome.i18n.getMessage("firefox_legal_disclaimer_title")}`,s=d(),p=new f(!1),m=d(),g=a("ul"),_=a("li"),w=a("span"),w.textContent=`${chrome.i18n.getMessage("firefox_legal_disclaimer_link_one")}`,b=d(),A=a("li");for(let e=0;e<L.length;e+=1)L[e].c();E=d(),x=a("div"),S=a("button"),S.textContent=`${chrome.i18n.getMessage("firefox_legal_disclaimer_allow_button")}`,T=d(),v=a("button"),v.textContent=`${chrome.i18n.getMessage("firefox_legal_disclaimer_disallow_and_uninstall_button")}`,h(r,"class","svelte-1uspdn3"),h(o,"class","dl-title"),p.a=m,h(w,"class","dl-link svelte-1uspdn3"),h(t,"class","scrollable svelte-1uspdn3"),h(S,"class","svelte-1uspdn3"),h(v,"class","svelte-1uspdn3"),h(x,"class","footer svelte-1uspdn3")},m(n,l){c(n,t,l),i(t,o),i(o,r),i(t,s),p.m(I,t),i(t,m),i(t,g),i(g,_),i(_,w),i(g,b),i(g,A);for(let e=0;e<L.length;e+=1)L[e]&&L[e].m(A,null);c(n,E,l),c(n,x,l),i(x,S),i(x,T),i(x,v),N||(k=[u(w,"click",e[4]),u(S,"click",e[2]),u(v,"click",e[3])],N=!0)},p(e,t){if(32&t){let o;for(O=U(chrome.i18n.getMessage("firefox_legal_disclaimer_link_two"),["termsLink"]),o=0;o<O.length;o+=1){const n=B(e,O,o);L[o]?L[o].p(n,t):(L[o]=K(n),L[o].c(),L[o].m(A,null))}for(;o<L.length;o+=1)L[o].d(1);L.length=O.length}},d(e){e&&l(t),function(e,t){for(let o=0;o<e.length;o+=1)e[o]&&e[o].d(t)}(L,e),e&&l(E),e&&l(x),N=!1,n(k)}}}function H(t){let o,n,r=t[8].text+"";return{c(){o=new f(!1),n=m(),o.a=n},m(e,t){o.m(r,e,t),c(e,n,t)},p:e,d(e){e&&l(n),e&&o.d()}}}function Y(t){let o,n,r,s=t[8].text+"";return{c(){o=a("span"),h(o,"class","dl-link svelte-1uspdn3")},m(e,i){c(e,o,i),o.innerHTML=s,n||(r=u(o,"click",t[5]),n=!0)},p:e,d(e){e&&l(o),n=!1,r()}}}function K(e){let t;let o=function(e,t){return"termsLink"===e[8].block?Y:H}(e),n=o(e);return{c(){n.c(),t=m()},m(e,o){n.m(e,o),c(e,t,o)},p(e,t){n.p(e,t)},d(e){n.d(e),e&&l(t)}}}function X(t){let o,n,r,s,p,m,f,g,_,w,b=chrome.i18n.getMessage("permission_request_widget_description")+"";return{c(){o=a("div"),n=a("div"),r=a("p"),r.textContent=`${chrome.i18n.getMessage("permission_request_widget_title")}`,s=d(),p=a("p"),m=d(),f=a("div"),g=a("button"),g.textContent=`${chrome.i18n.getMessage("permission_request_widget_button")}`,h(r,"class","svelte-1uspdn3"),h(n,"class","dl-title"),h(p,"class","svelte-1uspdn3"),h(o,"class","scrollable svelte-1uspdn3"),h(g,"class","svelte-1uspdn3"),h(f,"class","footer svelte-1uspdn3")},m(e,l){c(e,o,l),i(o,n),i(n,r),i(o,s),i(o,p),p.innerHTML=b,c(e,m,l),c(e,f,l),i(f,g),_||(w=u(g,"click",t[6]),_=!0)},p:e,d(e){e&&l(o),e&&l(m),e&&l(f),_=!1,w()}}}function z(t){let o,n,r,s,p,m=t[0]===t[1].legal_disclaimer&&Z(t),u=t[0]===t[1].browser_permissions&&X(t);return{c(){o=a("div"),o.innerHTML='<div class="dl-logo svelte-1uspdn3"></div>',n=d(),r=a("div"),s=a("div"),m&&m.c(),p=d(),u&&u.c(),h(o,"class","dl-logo-container svelte-1uspdn3"),function(e,t,o){e.classList[o?"add":"remove"](t)}(o,"isFirefoxExtension",C),h(s,"class","dl-notice-container svelte-1uspdn3"),h(r,"class","dl-firefox-first-run-page svelte-1uspdn3")},m(e,t){c(e,o,t),c(e,n,t),c(e,r,t),i(r,s),m&&m.m(s,null),i(s,p),u&&u.m(s,null)},p(e,[t]){e[0]===e[1].legal_disclaimer?m?m.p(e,t):(m=Z(e),m.c(),m.m(s,p)):m&&(m.d(1),m=null),e[0]===e[1].browser_permissions?u?u.p(e,t):(u=X(e),u.c(),u.m(s,null)):u&&(u.d(1),u=null)},i:e,o:e,d(e){e&&l(o),e&&l(n),e&&l(r),m&&m.d(),u&&u.d()}}}function J(e,t,o){let n={legal_disclaimer:"LEGAL_DISCLAIMER",browser_permissions:"BROWSER_PERMISSIONS"},r=n.legal_disclaimer;return[r,n,async()=>{await chrome.permissions.contains(q)||o(0,r=n.browser_permissions)},()=>{browser.management.uninstallSelf()},()=>{P({action:"dlOpenInternalPage",payload:{destination:G}})},()=>{P({action:"dlExternalURLRedirect",payload:{destination:F}})},async()=>{await browser.permissions.request(q)&&P({action:"dlOpenInternalPage",payload:{destination:W,openInSameTab:!0}})}]}new class extends y{constructor(e){super(),$(this,e,J,z,s,{})}}({target:document.body})}();
//# sourceMappingURL=firefox-first-run.js.map
